(self.webpackChunkhospital_management_frontend=self.webpackChunkhospital_management_frontend||[]).push([[179],{968:(l,u,d)=>{"use strict";function m(n){return"function"==typeof n}function g(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const _=g(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function E(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class C{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(m(i))try{i()}catch(s){e=s instanceof _?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{k(s)}catch(o){e=e??[],o instanceof _?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _(e)}}add(e){var t;if(e&&e!==this)if(this.closed)k(e);else{if(e instanceof C){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&E(t,e)}remove(e){const{_finalizers:t}=this;t&&E(t,e),e instanceof C&&e._removeParent(this)}}C.EMPTY=(()=>{const n=new C;return n.closed=!0,n})();const w=C.EMPTY;function P(n){return n instanceof C||n&&"closed"in n&&m(n.remove)&&m(n.add)&&m(n.unsubscribe)}function k(n){m(n)?n():n.unsubscribe()}const j={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},R={setTimeout(n,e,...t){const{delegate:i}=R;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=R;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function U(n){R.setTimeout(()=>{const{onUnhandledError:e}=j;if(!e)throw n;e(n)})}function V(){}const N=L("C",void 0,void 0);function L(n,e,t){return{kind:n,value:e,error:t}}let I=null;function O(n){if(j.useDeprecatedSynchronousErrorHandling){const e=!I;if(e&&(I={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=I;if(I=null,t)throw i}}else n()}class ie extends C{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,P(e)&&e.add(this)):this.destination=ct}static create(e,t,i){return new tt(e,t,i)}next(e){this.isStopped?nt(function F(n){return L("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?nt(function ee(n){return L("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?nt(N,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const le=Function.prototype.bind;function ue(n,e){return le.call(n,e)}class Ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){$e(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){$e(i)}else $e(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$e(t)}}}class tt extends ie{constructor(e,t,i){let r;if(super(),m(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&j.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ue(e.next,s),error:e.error&&ue(e.error,s),complete:e.complete&&ue(e.complete,s)}):r=e}this.destination=new Ce(r)}}function $e(n){j.useDeprecatedSynchronousErrorHandling?function X(n){j.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=n)}(n):U(n)}function nt(n,e){const{onStoppedNotification:t}=j;t&&R.setTimeout(()=>t(n,e))}const ct={closed:!0,next:V,error:function Le(n){throw n},complete:V},Pe="function"==typeof Symbol&&Symbol.observable||"@@observable";function J(n){return n}function B(n){return 0===n.length?J:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let H=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function it(n){return n&&n instanceof ie||function he(n){return n&&m(n.next)&&m(n.error)&&m(n.complete)}(n)&&P(n)}(t)?t:new tt(t,i,r);return O(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=me(i))((r,s)=>{const o=new tt({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Pe](){return this}pipe(...t){return B(t)(this)}toPromise(t){return new(t=me(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function me(n){var e;return null!==(e=n??j.Promise)&&void 0!==e?e:Promise}const Tt=g(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let bt=(()=>{class n extends H{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new mn(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Tt}next(t){O(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){O(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){O(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?w:(this.currentObservers=null,s.push(t),new C(()=>{this.currentObservers=null,E(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new H;return t.source=this,t}}return n.create=(e,t)=>new mn(e,t),n})();class mn extends bt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:w}}function gn(n){return m(n?.lift)}function ln(n){return e=>{if(gn(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function _n(n,e,t,i,r){return new Hr(n,e,t,i,r)}class Hr extends ie{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Dt(n,e){return ln((t,i)=>{let r=0;t.subscribe(_n(i,s=>{i.next(n.call(e,s,r++))}))})}function zo(n){return this instanceof zo?(this.v=n,this):new zo(n)}function Ob(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(y){return function(x){return Promise.resolve(x).then(y,p)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(y,x){i[y]&&(r[y]=function(M){return new Promise(function(S,b){s.push([y,M,S,b])>1||c(y,M)})},x&&(r[y]=x(r[y])))}function c(y,x){try{!function h(y){y.value instanceof zo?Promise.resolve(y.value.v).then(f,p):v(s[0][2],y)}(i[y](x))}catch(M){v(s[0][3],M)}}function f(y){c("next",y)}function p(y){c("throw",y)}function v(y,x){y(x),s.shift(),s.length&&c(s[0][0],s[0][1])}}function kb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Zi(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(h){s({value:h,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Bb=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Vb(n){return m(n?.then)}function Ub(n){return m(n[Pe])}function Hb(n){return Symbol.asyncIterator&&m(n?.[Symbol.asyncIterator])}function zb(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gb=function DF(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Wb(n){return m(n?.[Gb])}function jb(n){return Ob(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield zo(t.read());if(r)return yield zo(void 0);yield yield zo(i)}}finally{t.releaseLock()}})}function $b(n){return m(n?.getReader)}function cs(n){if(n instanceof H)return n;if(null!=n){if(Ub(n))return function IF(n){return new H(e=>{const t=n[Pe]();if(m(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Bb(n))return function PF(n){return new H(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Vb(n))return function RF(n){return new H(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,U)})}(n);if(Hb(n))return qb(n);if(Wb(n))return function FF(n){return new H(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if($b(n))return function LF(n){return qb(jb(n))}(n)}throw zb(n)}function qb(n){return new H(e=>{(function NF(n,e){var t,i,r,s;return function ls(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(f){try{h(i.next(f))}catch(p){o(p)}}function c(f){try{h(i.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(f.value).then(a,c)}h((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=kb(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function to(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ii(n,e,t=1/0){return m(e)?Ii((i,r)=>Dt((s,o)=>e(i,s,r,o))(cs(n(i,r))),t):("number"==typeof e&&(t=e),ln((i,r)=>function OF(n,e,t,i,r,s,o,a){const c=[];let h=0,f=0,p=!1;const v=()=>{p&&!c.length&&!h&&e.complete()},y=M=>h<i?x(M):c.push(M),x=M=>{s&&e.next(M),h++;let S=!1;cs(t(M,f++)).subscribe(_n(e,b=>{r?.(b),s?y(b):e.next(b)},()=>{S=!0},void 0,()=>{if(S)try{for(h--;c.length&&h<i;){const b=c.shift();o?to(e,o,()=>x(b)):x(b)}v()}catch(b){e.error(b)}}))};return n.subscribe(_n(e,y,()=>{p=!0,v()})),()=>{a?.()}}(i,r,n,t)))}function bl(n=1/0){return Ii(J,n)}const no=new H(n=>n.complete());function qm(n){return n[n.length-1]}function Xb(n){return m(qm(n))?n.pop():void 0}function lu(n){return function BF(n){return n&&m(n.schedule)}(qm(n))?n.pop():void 0}function Yb(n,e=0){return ln((t,i)=>{t.subscribe(_n(i,r=>to(i,n,()=>i.next(r),e),()=>to(i,n,()=>i.complete(),e),r=>to(i,n,()=>i.error(r),e)))})}function Zb(n,e=0){return ln((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Kb(n,e){if(!n)throw new Error("Iterable cannot be null");return new H(t=>{to(t,e,()=>{const i=n[Symbol.asyncIterator]();to(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function li(n,e){return e?function jF(n,e){if(null!=n){if(Ub(n))return function UF(n,e){return cs(n).pipe(Zb(e),Yb(e))}(n,e);if(Bb(n))return function zF(n,e){return new H(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Vb(n))return function HF(n,e){return cs(n).pipe(Zb(e),Yb(e))}(n,e);if(Hb(n))return Kb(n,e);if(Wb(n))return function GF(n,e){return new H(t=>{let i;return to(t,e,()=>{i=n[Gb](),to(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>m(i?.return)&&i.return()})}(n,e);if($b(n))return function WF(n,e){return Kb(jb(n),e)}(n,e)}throw zb(n)}(n,e):cs(n)}function Xm(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new tt({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function Ln(n){for(let e in n)if(n[e]===Ln)return e;throw Error("Could not find renamed property on target object.")}function Ym(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Nn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Nn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Zm(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const XF=Ln({__forward_ref__:Ln});function On(n){return n.__forward_ref__=On,n.toString=function(){return Nn(this())},n}function Vt(n){return Km(n)?n():n}function Km(n){return"function"==typeof n&&n.hasOwnProperty(XF)&&n.__forward_ref__===On}class Xe extends Error{constructor(e,t){super(function hd(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function $t(n){return"string"==typeof n?n:null==n?"":String(n)}function dd(n,e){throw new Xe(-201,!1)}function wr(n,e){null==n&&function An(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Nt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Li(n){return{providers:n.providers||[],imports:n.imports||[]}}function fd(n){return Jb(n,pd)||Jb(n,e1)}function Jb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Qb(n){return n&&(n.hasOwnProperty(Jm)||n.hasOwnProperty(iL))?n[Jm]:null}const pd=Ln({\u0275prov:Ln}),Jm=Ln({\u0275inj:Ln}),e1=Ln({ngInjectableDef:Ln}),iL=Ln({ngInjectorDef:Ln});var Ot=(()=>((Ot=Ot||{})[Ot.Default=0]="Default",Ot[Ot.Host=1]="Host",Ot[Ot.Self=2]="Self",Ot[Ot.SkipSelf=4]="SkipSelf",Ot[Ot.Optional=8]="Optional",Ot))();let Qm;function Gr(n){const e=Qm;return Qm=n,e}function t1(n,e,t){const i=fd(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ot.Optional?null:void 0!==e?e:void dd(Nn(n))}function Go(n){return{toString:n}.toString()}var us=(()=>((us=us||{})[us.OnPush=0]="OnPush",us[us.Default=1]="Default",us))(),ks=(()=>{return(n=ks||(ks={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ks;var n})();const kn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Sl={},Cn=[],md=Ln({\u0275cmp:Ln}),eg=Ln({\u0275dir:Ln}),tg=Ln({\u0275pipe:Ln}),n1=Ln({\u0275mod:Ln}),ro=Ln({\u0275fac:Ln}),cu=Ln({__NG_ELEMENT_ID__:Ln});let sL=0;function hs(n){return Go(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===us.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Cn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ks.Emulated,id:"c"+sL++,styles:n.styles||Cn,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return r.inputs=s1(n.inputs,i),r.outputs=s1(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(i1).filter(r1):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Qi).filter(r1):null,r})}function i1(n){return Dn(n)||Ji(n)}function r1(n){return null!==n}function Ki(n){return Go(()=>({type:n.type,bootstrap:n.bootstrap||Cn,declarations:n.declarations||Cn,imports:n.imports||Cn,exports:n.exports||Cn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function s1(n,e){if(null==n)return Sl;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Ut=hs;function Dn(n){return n[md]||null}function Ji(n){return n[eg]||null}function Qi(n){return n[tg]||null}function Cr(n,e){const t=n[n1]||null;if(!t&&!0===e)throw new Error(`Type ${Nn(n)} does not have '\u0275mod' property.`);return t}function mr(n){return Array.isArray(n)&&"object"==typeof n[1]}function fs(n){return Array.isArray(n)&&!0===n[1]}function rg(n){return 0!=(8&n.flags)}function _d(n){return 2==(2&n.flags)}function xd(n){return 1==(1&n.flags)}function ps(n){return null!==n.template}function hL(n){return 0!=(256&n[2])}function Ea(n,e){return n.hasOwnProperty(ro)?n[ro]:null}class pL{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function jr(){return l1}function l1(n){return n.type.prototype.ngOnChanges&&(n.setInput=gL),mL}function mL(){const n=u1(this),e=n?.current;if(e){const t=n.previous;if(t===Sl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function gL(n,e,t,i){const r=u1(n)||function vL(n,e){return n[c1]=e}(n,{previous:Sl,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],c=o[a];s[a]=new pL(c&&c.currentValue,e,o===Sl),n[i]=e}jr.ngInherit=!0;const c1="__ngSimpleChanges__";function u1(n){return n[c1]||null}function ci(n){for(;Array.isArray(n);)n=n[0];return n}function bd(n,e){return ci(e[n])}function Tr(n,e){return ci(e[n.index])}function cg(n,e){return n.data[e]}function Dr(n,e){const t=e[n];return mr(t)?t:t[0]}function Sd(n){return 64==(64&n[2])}function Wo(n,e){return null==e?null:n[e]}function h1(n){n[18]=0}function ug(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Gt={lFrame:b1(null),bindingsEnabled:!0};function f1(){return Gt.bindingsEnabled}function Re(){return Gt.lFrame.lView}function xn(){return Gt.lFrame.tView}function mi(){let n=p1();for(;null!==n&&64===n.type;)n=n.parent;return n}function p1(){return Gt.lFrame.currentTNode}function Bs(n,e){const t=Gt.lFrame;t.currentTNode=n,t.isParent=e}function hg(){return Gt.lFrame.isParent}function Tl(){return Gt.lFrame.bindingIndex++}function LL(n,e){const t=Gt.lFrame;t.bindingIndex=t.bindingRootIndex=n,fg(e)}function fg(n){Gt.lFrame.currentDirectiveIndex=n}function y1(){return Gt.lFrame.currentQueryIndex}function mg(n){Gt.lFrame.currentQueryIndex=n}function OL(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function _1(n,e,t){if(t&Ot.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Ot.Host||(r=OL(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Gt.lFrame=x1();return i.currentTNode=e,i.lView=n,!0}function gg(n){const e=x1(),t=n[1];Gt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function x1(){const n=Gt.lFrame,e=null===n?null:n.child;return null===e?b1(n):e}function b1(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function S1(){const n=Gt.lFrame;return Gt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const M1=S1;function vg(){const n=S1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function tr(){return Gt.lFrame.selectedIndex}function jo(n){Gt.lFrame.selectedIndex=n}function $n(){const n=Gt.lFrame;return cg(n.tView,n.selectedIndex)}function Md(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:h,ngOnDestroy:f}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),h&&((n.viewHooks||(n.viewHooks=[])).push(t,h),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,h)),null!=f&&(n.destroyHooks||(n.destroyHooks=[])).push(t,f)}}function Ed(n,e,t){E1(n,e,3,t)}function wd(n,e,t,i){(3&n[2])===t&&E1(n,e,t,i)}function yg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function E1(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[18]+=65536),(a<s||-1==s)&&(jL(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function jL(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class mu{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Cd(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];C1(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function w1(n){return 3===n||4===n||6===n}function C1(n){return 64===n.charCodeAt(0)}function Ad(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||A1(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function A1(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function T1(n){return-1!==n}function Dl(n){return 32767&n}function Il(n,e){let t=function ZL(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let xg=!0;function Td(n){const e=xg;return xg=n,e}let KL=0;const Vs={};function vu(n,e){const t=Sg(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,bg(i.data,n),bg(e,null),bg(i.blueprint,null));const r=Dd(n,e),s=n.injectorIndex;if(T1(r)){const o=Dl(r),a=Il(r,e),c=a[1].data;for(let h=0;h<8;h++)e[s+h]=a[o+h]|c[o+h]}return e[s+8]=r,s}function bg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Sg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Dd(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=k1(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Id(n,e,t){!function JL(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(cu)&&(i=t[cu]),null==i&&(i=t[cu]=KL++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function P1(n,e,t){if(t&Ot.Optional||void 0!==n)return n;dd()}function R1(n,e,t,i){if(t&Ot.Optional&&void 0===i&&(i=null),0==(t&(Ot.Self|Ot.Host))){const r=n[9],s=Gr(void 0);try{return r?r.get(e,i,t&Ot.Optional):t1(e,i,t&Ot.Optional)}finally{Gr(s)}}return P1(i,0,t)}function F1(n,e,t,i=Ot.Default,r){if(null!==n){if(1024&e[2]){const o=function iN(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=L1(s,o,t,i|Ot.Self,Vs);if(a!==Vs)return a;let c=s.parent;if(!c){const h=o[21];if(h){const f=h.get(t,Vs,i);if(f!==Vs)return f}c=k1(o),o=o[15]}s=c}return r}(n,e,t,i,Vs);if(o!==Vs)return o}const s=L1(n,e,t,i,Vs);if(s!==Vs)return s}return R1(e,t,i,r)}function L1(n,e,t,i,r){const s=function tN(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(cu)?n[cu]:void 0;return"number"==typeof e?e>=0?255&e:nN:e}(t);if("function"==typeof s){if(!_1(e,n,i))return i&Ot.Host?P1(r,0,i):R1(e,t,i,r);try{const o=s(i);if(null!=o||i&Ot.Optional)return o;dd()}finally{M1()}}else if("number"==typeof s){let o=null,a=Sg(n,e),c=-1,h=i&Ot.Host?e[16][6]:null;for((-1===a||i&Ot.SkipSelf)&&(c=-1===a?Dd(n,e):e[a+8],-1!==c&&O1(i,!1)?(o=e[1],a=Dl(c),e=Il(c,e)):a=-1);-1!==a;){const f=e[1];if(N1(s,a,f.data)){const p=eN(a,e,t,o,i,h);if(p!==Vs)return p}c=e[a+8],-1!==c&&O1(i,e[1].data[a+8]===h)&&N1(s,a,e)?(o=f,a=Dl(c),e=Il(c,e)):a=-1}}return r}function eN(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],f=Pd(a,o,t,null==i?_d(a)&&xg:i!=o&&0!=(3&a.type),r&Ot.Host&&s===a);return null!==f?yu(e,o,f,a):Vs}function Pd(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,f=s>>20,v=r?a+f:n.directiveEnd;for(let y=i?a:a+f;y<v;y++){const x=o[y];if(y<c&&t===x||y>=c&&x.type===t)return y}if(r){const y=o[c];if(y&&ps(y)&&y.type===t)return c}return null}function yu(n,e,t,i){let r=n[t];const s=e.data;if(function $L(n){return n instanceof mu}(r)){const o=r;o.resolving&&function YF(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function wn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$t(n)}(s[t]));const a=Td(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Gr(o.injectImpl):null;_1(n,i,Ot.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function WL(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=l1(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&Gr(c),Td(a),o.resolving=!1,M1()}}return r}function N1(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function O1(n,e){return!(n&Ot.Self||n&Ot.Host&&e)}class Pl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return F1(this._tNode,this._lView,e,i,t)}}function nN(){return new Pl(mi(),Re())}function ki(n){return Go(()=>{const e=n.prototype.constructor,t=e[ro]||Mg(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ro]||Mg(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Mg(n){return Km(n)?()=>{const e=Mg(Vt(n));return e&&e()}:Ea(n)}function k1(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Fl="__parameters__";function Nl(n,e,t){return Go(()=>{const i=function Eg(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,h,f){const p=c.hasOwnProperty(Fl)?c[Fl]:Object.defineProperty(c,Fl,{value:[]})[Fl];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Ct{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Nt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Ir(i,e)):e!==n&&e.push(i)}return e}function ao(n,e){n.forEach(t=>Array.isArray(t)?ao(t,e):e(t))}function V1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pr(n,e,t){let i=Ol(n,e);return i>=0?n[1|i]=t:(i=~i,function aN(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Cg(n,e){const t=Ol(n,e);if(t>=0)return n[1|t]}function Ol(n,e){return function z1(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Mu={},Tg="__NG_DI_FLAG__",Ld="ngTempTokenPath",mN=/\n/gm,G1="__source";let Eu;function kl(n){const e=Eu;return Eu=n,e}function vN(n,e=Ot.Default){if(void 0===Eu)throw new Xe(-203,!1);return null===Eu?t1(n,void 0,e):Eu.get(n,e&Ot.Optional?null:void 0,e)}function vt(n,e=Ot.Default){return(function rL(){return Qm}()||vN)(Vt(n),e)}function ii(n,e=Ot.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),vt(n,e)}function Dg(n){const e=[];for(let t=0;t<n.length;t++){const i=Vt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Xe(900,!1);let r,s=Ot.Default;for(let o=0;o<i.length;o++){const a=i[o],c=yN(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(vt(r,s))}else e.push(vt(i))}return e}function wu(n,e){return n[Tg]=e,n.prototype[Tg]=e,n}function yN(n){return n[Tg]}const Cu=wu(Nl("Optional"),8),Au=wu(Nl("SkipSelf"),4);var gr=(()=>((gr=gr||{})[gr.Important=1]="Important",gr[gr.DashCase=2]="DashCase",gr))();const Lg=new Map;let ON=0;const Og="__ngContext__";function Bi(n,e){mr(e)?(n[Og]=e[20],function BN(n){Lg.set(n[20],n)}(e)):n[Og]=e}function Bg(n,e){return undefined(n,e)}function Pu(n){const e=n[3];return fs(e)?e[3]:e}function Vg(n){return uS(n[13])}function Ug(n){return uS(n[4])}function uS(n){for(;null!==n&&!fs(n);)n=n[4];return n}function Vl(n,e,t,i,r){if(null!=i){let s,o=!1;fs(i)?s=i:mr(i)&&(o=!0,i=i[0]);const a=ci(i);0===n&&null!==t?null==r?gS(e,t,a):wa(e,t,a,r||null,!0):1===n&&null!==t?wa(e,t,a,r||null,!0):2===n?function qg(n,e,t){const i=kd(n,e);i&&function o2(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function c2(n,e,t,i,r){const s=t[7];s!==ci(t)&&Vl(e,n,i,s,r);for(let a=10;a<t.length;a++){const c=t[a];Ru(c[1],c,n,e,i,s)}}(e,n,s,t,r)}}function zg(n,e,t){return n.createElement(e,t)}function dS(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,ug(r,-1)),t.splice(i,1)}function Gg(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&dS(r,i),e>0&&(n[t-1][4]=i[4]);const s=Rd(n,10+e);!function JN(n,e){Ru(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function fS(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Ru(n,e,t,3,null,null),function t2(n){let e=n[13];if(!e)return Wg(n[1],n);for(;e;){let t=null;if(mr(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)mr(e)&&Wg(e[1],e),e=e[3];null===e&&(e=n),mr(e)&&Wg(e[1],e),t=e&&e[4]}e=t}}(e)}}function Wg(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function s2(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof mu)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];try{c.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function r2(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):ci(e[o]),c=i[r=t[s+2]],h=t[s+3];"boolean"==typeof h?a.removeEventListener(t[s],c,h):h>=0?i[r=h]():i[r=-h].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&fs(e[3])){t!==e[3]&&dS(t,e);const i=e[19];null!==i&&i.detachView(n)}!function VN(n){Lg.delete(n[20])}(e)}}function pS(n,e,t){return function mS(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===ks.None||r===ks.Emulated)return null}return Tr(i,t)}(n,e.parent,t)}function wa(n,e,t,i,r){n.insertBefore(e,t,i,r)}function gS(n,e,t){n.appendChild(e,t)}function vS(n,e,t,i,r){null!==i?wa(n,e,t,i,r):gS(n,e,t)}function kd(n,e){return n.parentNode(e)}let Kg,xS=function _S(n,e,t){return 40&n.type?Tr(n,t):null};function Bd(n,e,t,i){const r=pS(n,i,e),s=e[11],a=function yS(n,e,t){return xS(n,e,t)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)vS(s,r,t[c],a,!1);else vS(s,r,t,a,!1)}function Vd(n,e){if(null!==e){const t=e.type;if(3&t)return Tr(e,n);if(4&t)return $g(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Vd(n,i);{const r=n[e.index];return fs(r)?$g(-1,r):ci(r)}}if(32&t)return Bg(e,n)()||ci(n[e.index]);{const i=SS(n,e);return null!==i?Array.isArray(i)?i[0]:Vd(Pu(n[16]),i):Vd(n,e.next)}}return null}function SS(n,e){return null!==e?n[16][6].projection[e.projection]:null}function $g(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return Vd(i,r)}return e[7]}function Xg(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Bi(ci(a),i),t.flags|=4),64!=(64&t.flags))if(8&c)Xg(n,e,t.child,i,r,s,!1),Vl(e,n,r,a,s);else if(32&c){const h=Bg(t,i);let f;for(;f=h();)Vl(e,n,r,f,s);Vl(e,n,r,a,s)}else 16&c?MS(n,e,i,t,r,s):Vl(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Ru(n,e,t,i,r,s){Xg(t,i,n.firstChild,e,r,s,!1)}function MS(n,e,t,i,r,s){const o=t[16],c=o[6].projection[i.projection];if(Array.isArray(c))for(let h=0;h<c.length;h++)Vl(e,n,r,c[h],s);else Xg(n,e,c,o[3],r,s,!0)}function ES(n,e,t){n.setAttribute(e,"style",t)}function Yg(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}const rv=new Ct("ENVIRONMENT_INITIALIZER"),kS=new Ct("INJECTOR",-1),BS=new Ct("INJECTOR_DEF_TYPES");class VS{get(e,t=Mu){if(t===Mu){const i=new Error(`NullInjectorError: No provider for ${Nn(e)}!`);throw i.name="NullInjectorError",i}return t}}function B2(...n){return{\u0275providers:US(0,n)}}function US(n,...e){const t=[],i=new Set;let r;return ao(e,s=>{const o=s;sv(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&HS(r,t),t}function HS(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];ao(r,s=>{e.push(s)})}}function sv(n,e,t,i){if(!(n=Vt(n)))return!1;let r=null,s=Qb(n);const o=!s&&Dn(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=Qb(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const h of c)sv(h,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let h;i.add(r);try{ao(s.imports,f=>{sv(f,e,t,i)&&(h||(h=[]),h.push(f))})}finally{}void 0!==h&&HS(h,e)}if(!a){const h=Ea(r)||(()=>new r);e.push({provide:r,useFactory:h,deps:Cn},{provide:BS,useValue:r,multi:!0},{provide:rv,useValue:()=>vt(r),multi:!0})}const c=s.providers;null==c||a||ao(c,f=>{e.push(f)})}}return r!==n&&void 0!==n.providers}const V2=Ln({provide:String,useValue:Ln});function ov(n){return null!==n&&"object"==typeof n&&V2 in n}function Aa(n){return"function"==typeof n}const av=new Ct("Set Injector scope."),Gd={},H2={};let lv;function Wd(){return void 0===lv&&(lv=new VS),lv}class Xo{}class WS extends Xo{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uv(e,o=>this.processProvider(o)),this.records.set(kS,Ul(void 0,this)),r.has("environment")&&this.records.set(Xo,Ul(void 0,this));const s=this.records.get(av);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(BS.multi,Cn,Ot.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=kl(this),i=Gr(void 0);try{return e()}finally{kl(t),Gr(i)}}get(e,t=Mu,i=Ot.Default){this.assertNotDestroyed();const r=kl(this),s=Gr(void 0);try{if(!(i&Ot.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function $2(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ct}(e)&&fd(e);a=c&&this.injectableDefInScope(c)?Ul(cv(e),Gd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Ot.Self?Wd():this.parent).get(e,t=i&Ot.Optional&&t===Mu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Ld]=o[Ld]||[]).unshift(Nn(e)),r)throw o;return function _N(n,e,t,i){const r=n[Ld];throw e[G1]&&r.unshift(e[G1]),n.message=function xN(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Nn(e);if(Array.isArray(e))r=e.map(Nn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Nn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(mN,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Ld]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Gr(s),kl(r)}}resolveInjectorInitializers(){const e=kl(this),t=Gr(void 0);try{const i=this.get(rv.multi,Cn,Ot.Self);for(const r of i)r()}finally{kl(e),Gr(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Nn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processProvider(e){let t=Aa(e=Vt(e))?e:Vt(e&&e.provide);const i=function G2(n){return ov(n)?Ul(void 0,n.useValue):Ul(jS(n),Gd)}(e);if(Aa(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Ul(void 0,Gd,!0),r.factory=()=>Dg(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Gd&&(t.value=H2,t.value=t.factory()),"object"==typeof t.value&&t.value&&function j2(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Vt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function cv(n){const e=fd(n),t=null!==e?e.factory:Ea(n);if(null!==t)return t;if(n instanceof Ct)throw new Xe(204,!1);if(n instanceof Function)return function z2(n){const e=n.length;if(e>0)throw function Su(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new Xe(204,!1);const t=function tL(n){const e=n&&(n[pd]||n[e1]);if(e){const t=function nL(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Xe(204,!1)}function jS(n,e,t){let i;if(Aa(n)){const r=Vt(n);return Ea(r)||cv(r)}if(ov(n))i=()=>Vt(n.useValue);else if(function GS(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Dg(n.deps||[]));else if(function zS(n){return!(!n||!n.useExisting)}(n))i=()=>vt(Vt(n.useExisting));else{const r=Vt(n&&(n.useClass||n.provide));if(!function W2(n){return!!n.deps}(n))return Ea(r)||cv(r);i=()=>new r(...Dg(n.deps))}return i}function Ul(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function q2(n){return!!n.\u0275providers}function uv(n,e){for(const t of n)Array.isArray(t)?uv(t,e):q2(t)?uv(t.\u0275providers,e):e(t)}class $S{}class Z2{resolveComponentFactory(e){throw function Y2(n){const e=Error(`No component factory found for ${Nn(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ou=(()=>{class n{}return n.NULL=new Z2,n})();function K2(){return Hl(mi(),Re())}function Hl(n,e){return new Rr(Tr(n,e))}let Rr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=K2,n})();function J2(n){return n instanceof Rr?n.nativeElement:n}class XS{}let co=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Q2(){const n=Re(),t=Dr(mi().index,n);return(mr(t)?t:n)[11]}(),n})(),eO=(()=>{class n{}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>null}),n})();class ku{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const tO=new ku("14.3.0"),hv={};function fv(n){return n.ngOriginalError}class zl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&fv(e);for(;t&&fv(t);)t=fv(t);return t||null}}function uo(n){return n instanceof Function?n():n}function ZS(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const KS="ng-template";function dO(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==ZS(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function JS(n){return 4===n.type&&n.value!==KS}function fO(n,e,t){return e===(4!==n.type||t?n.value:KS)}function pO(n,e,t){let i=4;const r=n.attrs||[],s=function vO(n){for(let e=0;e<n.length;e++)if(w1(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!fO(n,c,t)||""===c&&1===e.length){if(ms(i))return!1;o=!0}}else{const h=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!dO(n.attrs,h,t)){if(ms(i))return!1;o=!0}continue}const p=mO(8&i?"class":c,r,JS(n),t);if(-1===p){if(ms(i))return!1;o=!0;continue}if(""!==h){let v;v=p>s?"":r[p+1].toLowerCase();const y=8&i?v:null;if(y&&-1!==ZS(y,h,0)||2&i&&h!==v){if(ms(i))return!1;o=!0}}}}else{if(!o&&!ms(i)&&!ms(c))return!1;if(o&&ms(c))continue;o=!1,i=c|1&i}}return ms(i)||o}function ms(n){return 0==(1&n)}function mO(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function yO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function QS(n,e,t=!1){for(let i=0;i<e.length;i++)if(pO(n,e[i],t))return!0;return!1}function eM(n,e){return n?":not("+e.trim()+")":e}function xO(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ms(o)&&(e+=eM(s,r),r=""),i=o,s=s||!ms(i);t++}return""!==r&&(e+=eM(s,r)),e}const qt={};function Bu(n){tM(xn(),Re(),tr()+n,!1)}function tM(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Ed(e,s,t)}else{const s=n.preOrderHooks;null!==s&&wd(e,s,0,t)}jo(t)}function sM(n,e=null,t=null,i){const r=oM(n,e,t,i);return r.resolveInjectorInitializers(),r}function oM(n,e=null,t=null,i,r=new Set){const s=[t||Cn,B2(n)];return i=i||("object"==typeof n?void 0:Nn(n)),new WS(s,e||Wd(),i||null,r)}let Fr=(()=>{class n{static create(t,i){if(Array.isArray(t))return sM({name:""},i,t,"");{const r=t.name??"";return sM({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Mu,n.NULL=new VS,n.\u0275prov=Nt({token:n,providedIn:"any",factory:()=>vt(kS)}),n.__NG_ELEMENT_ID__=-1,n})();function ke(n,e=Ot.Default){const t=Re();return null===t?vt(n,e):F1(mi(),t,Vt(n),e)}function yv(){throw new Error("invalid")}function $d(n,e){return n<<17|e<<2}function gs(n){return n>>17&32767}function _v(n){return 2|n}function ho(n){return(131068&n)>>2}function xv(n,e){return-131069&n|e<<2}function bv(n){return 1|n}function MM(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];mg(r),o.contentQueries(2,e[s],s)}}}function Yd(n,e,t,i,r,s,o,a,c,h,f){const p=e.blueprint.slice();return p[0]=r,p[2]=76|i,(null!==f||n&&1024&n[2])&&(p[2]|=1024),h1(p),p[3]=p[15]=n,p[8]=t,p[10]=o||n&&n[10],p[11]=a||n&&n[11],p[12]=c||n&&n[12]||null,p[9]=h||n&&n[9]||null,p[6]=s,p[20]=function kN(){return ON++}(),p[21]=f,p[16]=2==e.type?n[16]:p,p}function jl(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Dv(n,e,t,i,r){const s=p1(),o=hg(),c=n.data[e]=function nk(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,i,r),function FL(){return Gt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function pu(){const n=Gt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Bs(s,!0),s}function $l(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Iv(n,e,t){gg(e);try{const i=n.viewQuery;null!==i&&Bv(1,i,t);const r=n.template;null!==r&&EM(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&MM(n,e),n.staticViewQueries&&Bv(2,n.viewQuery,t);const s=n.components;null!==s&&function QO(n,e){for(let t=0;t<e.length;t++)yk(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,vg()}}function Zd(n,e,t,i){const r=e[2];if(128!=(128&r)){gg(e);try{h1(e),function g1(n){return Gt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&EM(n,e,t,2,i);const o=3==(3&r);if(o){const h=n.preOrderCheckHooks;null!==h&&Ed(e,h,null)}else{const h=n.preOrderHooks;null!==h&&wd(e,h,0,null),yg(e,0)}if(function gk(n){for(let e=Vg(n);null!==e;e=Ug(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&ug(s,1),r[2]|=512}}}(e),function mk(n){for(let e=Vg(n);null!==e;e=Ug(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Sd(i)&&Zd(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&MM(n,e),o){const h=n.contentCheckHooks;null!==h&&Ed(e,h)}else{const h=n.contentHooks;null!==h&&wd(e,h,1),yg(e,1)}!function KO(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)jo(~r);else{const s=r,o=t[++i],a=t[++i];LL(o,s),a(2,e[s])}}}finally{jo(-1)}}(n,e);const a=n.components;null!==a&&function JO(n,e){for(let t=0;t<e.length;t++)vk(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&Bv(2,c,i),o){const h=n.viewCheckHooks;null!==h&&Ed(e,h)}else{const h=n.viewHooks;null!==h&&wd(e,h,2),yg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ug(e[3],-1))}finally{vg()}}}function EM(n,e,t,i,r){const s=tr(),o=2&i;try{jo(-1),o&&e.length>22&&tM(n,e,22,!1),t(i,r)}finally{jo(s)}}function Pv(n,e,t){!f1()||(function ak(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||vu(t,e),Bi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],h=ps(c);h&&dk(e,t,c);const f=yu(e,n,a,t);Bi(f,e),null!==o&&fk(0,a-r,f,c,0,o),h&&(Dr(t.index,e)[8]=f)}}(n,e,t,Tr(t,e)),128==(128&t.flags)&&function lk(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function NL(){return Gt.lFrame.currentDirectiveIndex}();try{jo(s);for(let a=i;a<r;a++){const c=n.data[a],h=e[a];fg(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&RM(c,h)}}finally{jo(-1),fg(o)}}(n,e,t))}function Rv(n,e,t=Tr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function CM(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Fv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Fv(n,e,t,i,r,s,o,a,c,h){const f=22+i,p=f+r,v=function ek(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:qt);return t}(f,p),y="function"==typeof h?h():h;return v[1]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:y,incompleteFirstPass:!1}}function AM(n,e,t,i){const r=kM(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&BM(n).push(i,r.length-1))}function TM(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function DM(n,e){const i=e.directiveEnd,r=n.data,s=e.attrs,o=[];let a=null,c=null;for(let h=e.directiveStart;h<i;h++){const f=r[h],p=f.inputs,v=null===s||JS(e)?null:pk(p,s);o.push(v),a=TM(p,h,a),c=TM(f.outputs,h,c)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=c}function IM(n,e){const t=Dr(e,n);16&t[2]||(t[2]|=32)}function Lv(n,e,t,i){let r=!1;if(f1()){const s=function ck(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];QS(t,o.selectors,!1)&&(r||(r=[]),Id(vu(t,e),n,o.type),ps(o)?(FM(n,t),r.unshift(o)):r.push(o))}return r}(n,e,t),o=null===i?null:{"":-1};if(null!==s){r=!0,LM(t,n.data.length,s.length);for(let f=0;f<s.length;f++){const p=s[f];p.providersResolver&&p.providersResolver(p)}let a=!1,c=!1,h=$l(n,e,s.length,null);for(let f=0;f<s.length;f++){const p=s[f];t.mergedAttrs=Ad(t.mergedAttrs,p.hostAttrs),NM(n,t,e,h,p),hk(h,p,o),null!==p.contentQueries&&(t.flags|=8),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=128);const v=p.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),h++}DM(n,t)}o&&function uk(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Xe(-301,!1);i.push(e[r],s)}}}(t,i,o)}return t.mergedAttrs=Ad(t.mergedAttrs,t.attrs),r}function PM(n,e,t,i,r,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function ok(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(i,r,o)}}function RM(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function FM(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function hk(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ps(e)&&(t[""]=n)}}function LM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function NM(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Ea(r.type)),o=new mu(s,ps(r),ke);n.blueprint[i]=o,t[i]=o,PM(n,e,0,i,$l(n,t,r.hostVars,qt),r)}function dk(n,e,t){const i=Tr(e,n),r=CM(t),s=n[10],o=Kd(n,Yd(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}function Us(n,e,t,i,r,s){const o=Tr(n,e);!function Nv(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?$t(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function fk(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let c=0;c<o.length;){const h=o[c++],f=o[c++],p=o[c++];null!==a?i.setInput(t,p,h,f):t[f]=p}}}function pk(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function OM(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function vk(n,e){const t=Dr(e,n);if(Sd(t)){const i=t[1];48&t[2]?Zd(i,t,i.template,t[8]):t[5]>0&&Ov(t)}}function Ov(n){for(let i=Vg(n);null!==i;i=Ug(i))for(let r=10;r<i.length;r++){const s=i[r];if(Sd(s))if(512&s[2]){const o=s[1];Zd(o,s,o.template,s[8])}else s[5]>0&&Ov(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Dr(t[i],n);Sd(r)&&r[5]>0&&Ov(r)}}function yk(n,e){const t=Dr(e,n),i=t[1];(function _k(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Iv(i,t,t[8])}function Kd(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function kv(n){for(;n;){n[2]|=32;const e=Pu(n);if(hL(n)&&!e)return n;n=e}return null}function Jd(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{Zd(n,e,n.template,t)}catch(o){throw i&&UM(e,o),o}finally{r.end&&r.end()}}function Bv(n,e,t){mg(0),e(n,t)}function kM(n){return n[7]||(n[7]=[])}function BM(n){return n.cleanup||(n.cleanup=[])}function UM(n,e){const t=n[9],i=t?t.get(zl,null):null;i&&i.handleError(e)}function Vv(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=e[o],h=n.data[o];null!==h.setInput?h.setInput(c,r,i,a):c[a]=r}}function Qd(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Zm(r,a):2==s&&(i=Zm(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function ef(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(ci(s)),fs(s))for(let a=10;a<s.length;a++){const c=s[a],h=c[1].firstChild;null!==h&&ef(c[1],c,h,i)}const o=t.type;if(8&o)ef(n,e,t.child,i);else if(32&o){const a=Bg(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=SS(e,t);if(Array.isArray(a))i.push(...a);else{const c=Pu(e[16]);ef(c[1],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Vu{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ef(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(fs(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Gg(e,i),Rd(t,i))}this._attachedToViewContainer=!1}fS(this._lView[1],this._lView)}onDestroy(e){AM(this._lView[1],this._lView,null,e)}markForCheck(){kv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Jd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function e2(n,e){Ru(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Xe(902,!1);this._appRef=e}}class xk extends Vu{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Jd(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Uv extends Ou{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Dn(e);return new Uu(t,this.ngModule)}}function HM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Sk{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){const r=this.injector.get(e,hv,i);return r!==hv||t===hv?r:this.parentInjector.get(e,t,i)}}class Uu extends $S{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bO(n){return n.map(xO).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return HM(this.componentDef.inputs)}get outputs(){return HM(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Xo?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Sk(e,s):e,a=o.get(XS,null);if(null===a)throw new Xe(407,!1);const c=o.get(eO,null),h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?function tk(n,e,t){return n.selectRootElement(e,t===ks.ShadowDom)}(h,i,this.componentDef.encapsulation):zg(h,f,function bk(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.onPush?288:272,y=Fv(0,null,null,1,0,null,null,null,null,null),x=Yd(null,y,null,v,null,null,a,h,c,o,null);let M,S;gg(x);try{const b=function wk(n,e,t,i,r,s){const o=t[1];t[22]=n;const c=jl(o,22,2,"#host",null),h=c.mergedAttrs=e.hostAttrs;null!==h&&(Qd(c,h,!0),null!==n&&(Cd(r,n,h),null!==c.classes&&Yg(r,n,c.classes),null!==c.styles&&ES(r,n,c.styles)));const f=i.createRenderer(n,e),p=Yd(t,CM(e),null,e.onPush?32:16,t[22],c,i,f,s||null,null,null);return o.firstCreatePass&&(Id(vu(c,t),o,e.type),FM(o,c),LM(c,t.length,1)),Kd(t,p),t[22]=p}(p,this.componentDef,x,a,h);if(p)if(i)Cd(h,p,["ng-version",tO.full]);else{const{attrs:D,classes:A}=function SO(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ms(r))break;r=s}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);D&&Cd(h,p,D),A&&A.length>0&&Yg(h,p,A.join(" "))}if(S=cg(y,22),void 0!==t){const D=S.projection=[];for(let A=0;A<this.ngContentSelectors.length;A++){const T=t[A];D.push(null!=T?Array.from(T):null)}}M=function Ck(n,e,t,i){const r=t[1],s=function sk(n,e,t){const i=mi();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),NM(n,i,e,$l(n,e,1,null),t),DM(n,i));const r=yu(e,n,i.directiveStart,i);Bi(r,e);const s=Tr(i,e);return s&&Bi(s,e),r}(r,t,e);if(n[8]=t[8]=s,null!==i)for(const a of i)a(s,e);if(e.contentQueries){const a=mi();e.contentQueries(1,s,a.directiveStart)}const o=mi();return!r.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(jo(o.index),PM(t[1],o,0,o.directiveStart,o.directiveEnd,e),RM(e,s)),s}(b,this.componentDef,x,[Ak]),Iv(y,x,null)}finally{vg()}return new Ek(this.componentType,M,Hl(S,x),x,S)}}class Ek extends class X2{}{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new xk(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;Vv(s[1],s,r,e,t),IM(s,this._tNode.index)}}get injector(){return new Pl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Ak(){const n=mi();Md(Re()[1],n)}function In(n){let e=function zM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ps(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Xe(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Hv(n.inputs),o.declaredInputs=Hv(n.declaredInputs),o.outputs=Hv(n.outputs);const a=r.hostBindings;a&&Pk(n,a);const c=r.viewQuery,h=r.contentQueries;if(c&&Dk(n,c),h&&Ik(n,h),Ym(n.inputs,r.inputs),Ym(n.declaredInputs,r.declaredInputs),Ym(n.outputs,r.outputs),ps(r)&&r.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===In&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Tk(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ad(r.hostAttrs,t=Ad(t,r.hostAttrs))}}(i)}function Hv(n){return n===Sl?{}:n===Cn?[]:n}function Dk(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Ik(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function Pk(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let tf=null;function Ta(){if(!tf){const n=kn.Symbol;if(n&&n.iterator)tf=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(tf=i)}}}return tf}function Vi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function zs(n,e,t,i){const r=Re();return Vi(r,Tl(),e)&&(xn(),Us($n(),r,n,e,t,i)),zs}function Gu(n,e,t){const i=Re();return Vi(i,Tl(),e)&&function Lr(n,e,t,i,r,s,o,a){const c=Tr(e,t);let f,h=e.inputs;!a&&null!=h&&(f=h[i])?(Vv(n,t,f,i,r),_d(e)&&IM(t,e.index)):3&e.type&&(i=function ik(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}(xn(),$n(),i,n,e,i[11],t,!1),Gu}function Gv(n,e,t,i,r){const o=r?"class":"style";Vv(n,t,e.inputs[o],o,i)}function Z(n,e,t,i){const r=Re(),s=xn(),o=22+n,a=r[11],c=r[o]=zg(a,e,function GL(){return Gt.lFrame.currentNamespace}()),h=s.firstCreatePass?function zk(n,e,t,i,r,s,o){const a=e.consts,h=jl(e,n,2,r,Wo(a,s));return Lv(e,t,h,Wo(a,o)),null!==h.attrs&&Qd(h,h.attrs,!1),null!==h.mergedAttrs&&Qd(h,h.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,h),h}(o,s,r,0,e,t,i):s.data[o];Bs(h,!0);const f=h.mergedAttrs;null!==f&&Cd(a,c,f);const p=h.classes;null!==p&&Yg(a,c,p);const v=h.styles;return null!==v&&ES(a,c,v),64!=(64&h.flags)&&Bd(s,r,c,h),0===function wL(){return Gt.lFrame.elementDepthCount}()&&Bi(c,r),function CL(){Gt.lFrame.elementDepthCount++}(),xd(h)&&(Pv(s,r,h),function wM(n,e,t){if(rg(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,h,r)),null!==i&&Rv(r,h),Z}function te(){let n=mi();hg()?function dg(){Gt.lFrame.isParent=!1}():(n=n.parent,Bs(n,!1));const e=n;!function AL(){Gt.lFrame.elementDepthCount--}();const t=xn();return t.firstCreatePass&&(Md(t,n),rg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function XL(n){return 0!=(16&n.flags)}(e)&&Gv(t,e,Re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function YL(n){return 0!=(32&n.flags)}(e)&&Gv(t,e,Re(),e.stylesWithoutHost,!1),te}function Ee(n,e,t,i){return Z(n,e,t,i),te(),Ee}function Wu(n){return!!n&&"function"==typeof n.then}const $v=function eE(n){return!!n&&"function"==typeof n.subscribe};function Ui(n,e,t,i){const r=Re(),s=xn(),o=mi();return function nE(n,e,t,i,r,s,o,a){const c=xd(i),f=n.firstCreatePass&&BM(n),p=e[8],v=kM(e);let y=!0;if(3&i.type||a){const S=Tr(i,e),b=a?a(S):S,D=v.length,A=a?q=>a(ci(q[i.index])):i.index;let T=null;if(!a&&c&&(T=function jk(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==T)(T.__ngLastListenerFn__||T).__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,y=!1;else{s=rE(i,e,p,s,!1);const q=t.listen(b,r,s);v.push(s,q),f&&f.push(r,A,D,D+1)}}else s=rE(i,e,p,s,!1);const x=i.outputs;let M;if(y&&null!==x&&(M=x[r])){const S=M.length;if(S)for(let b=0;b<S;b+=2){const $=e[M[b]][M[b+1]].subscribe(s),K=v.length;v.push(s,$),f&&f.push(r,i.index,K,-(K+1))}}}(s,r,r[11],o,n,e,0,i),Ui}function iE(n,e,t,i){try{return!1!==t(i)}catch(r){return UM(n,r),!1}}function rE(n,e,t,i,r){return function s(o){if(o===Function)return i;kv(2&n.flags?Dr(n.index,e):e);let c=iE(e,0,i,o),h=s.__ngNextListenerFn__;for(;h;)c=iE(e,0,h,o)&&c,h=h.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function sE(n=1){return function kL(n){return(Gt.lFrame.contextLView=function BL(n,e){for(;n>0;)e=e[15],n--;return e}(n,Gt.lFrame.contextLView))[8]}(n)}function mE(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?gs(s):ho(s),c=!1;for(;0!==a&&(!1===c||o);){const f=n[a+1];Kk(n[a],e)&&(c=!0,n[a+1]=i?bv(f):_v(f)),a=i?gs(f):ho(f)}c&&(n[t+1]=i?_v(s):bv(s))}function Kk(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ol(n,e)>=0}function rf(n,e){return function vs(n,e,t,i){const r=Re(),s=xn(),o=function oo(n){const e=Gt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function EE(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[tr()],o=function ME(n,e){return e>=n.expandoStartIndex}(n,t);(function TE(n,e){return 0!=(n.flags&(e?16:32))})(s,i)&&null===e&&!o&&(e=!1),e=function o3(n,e,t,i){const r=function pg(n){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=ju(t=Xv(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Xv(r,n,e,t,i),null===s){let c=function a3(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==ho(i))return n[gs(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=Xv(null,n,e,c[1],i),c=ju(c,e.attrs,i),function l3(n,e,t,i){n[gs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function c3(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=ju(i,n[s].hostAttrs,t);return ju(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Yk(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=gs(o),c=ho(o);n[i]=t;let f,h=!1;if(Array.isArray(t)){const p=t;f=p[1],(null===f||Ol(p,f)>0)&&(h=!0)}else f=t;if(r)if(0!==c){const v=gs(n[a+1]);n[i+1]=$d(v,a),0!==v&&(n[v+1]=xv(n[v+1],i)),n[a+1]=function HO(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=$d(a,0),0!==a&&(n[a+1]=xv(n[a+1],i)),a=i;else n[i+1]=$d(c,0),0===a?a=i:n[c+1]=xv(n[c+1],i),c=i;h&&(n[i+1]=_v(n[i+1])),mE(n,f,i,!0),mE(n,f,i,!1),function Zk(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ol(s,e)>=0&&(t[i+1]=bv(t[i+1]))}(e,f,n,i,s),o=$d(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==qt&&Vi(r,o,e)&&function CE(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,h=c[a+1];sf(function mM(n){return 1==(1&n)}(h)?AE(c,e,t,r,ho(h),o):void 0)||(sf(s)||function pM(n){return 2==(2&n)}(h)&&(s=AE(c,null,t,r,a,o)),function u2(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:gr.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=gr.Important),n.setStyle(t,i,r,s))}}(i,o,bd(tr(),t),r,s))}(s,s.data[tr()],r,r[11],n,r[o+1]=function d3(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Nn(function qo(n){return n instanceof class DS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),i,o)}(n,e,null,!0),rf}function Xv(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=ju(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function ju(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pr(n,o,!!t||e[++s]))}return void 0===n?null:n}function AE(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],h=Array.isArray(c),f=h?c[1]:c,p=null===f;let v=t[r+1];v===qt&&(v=p?Cn:void 0);let y=p?Cg(v,i):f===i?v:void 0;if(h&&!sf(y)&&(y=Cg(c,i)),sf(y)&&(a=y,o))return a;const x=n[r+1];r=o?gs(x):ho(x)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Cg(c,i))}return a}function sf(n){return void 0!==n}function ce(n,e=""){const t=Re(),i=xn(),r=n+22,s=i.firstCreatePass?jl(i,r,1,e,null):i.data[r],o=t[r]=function Hg(n,e){return n.createText(e)}(t[11],e);Bd(i,t,o,s),Bs(s,!1)}function af(n,e,t){const i=Re(),r=function Xl(n,e,t,i){return Vi(n,Tl(),t)?e+$t(t)+i:qt}(i,n,e,t);return r!==qt&&function fo(n,e,t){const i=bd(e,n);!function hS(n,e,t){n.setValue(e,t)}(n[11],i,t)}(i,tr(),r),af}const rc="en-US";let KE=rc;function Kv(n,e,t,i,r){if(n=Vt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Kv(n[s],e,t,i,r);else{const s=xn(),o=Re();let a=Aa(n)?n:Vt(n.provide),c=jS(n);const h=mi(),f=1048575&h.providerIndexes,p=h.directiveStart,v=h.providerIndexes>>20;if(Aa(n)||!n.multi){const y=new mu(c,r,ke),x=Qv(a,e,r?f:f+v,p);-1===x?(Id(vu(h,o),s,a),Jv(s,n,e.length),e.push(a),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),t.push(y),o.push(y)):(t[x]=y,o[x]=y)}else{const y=Qv(a,e,f+v,p),x=Qv(a,e,f,f+v),M=y>=0&&t[y],S=x>=0&&t[x];if(r&&!S||!r&&!M){Id(vu(h,o),s,a);const b=function IB(n,e,t,i,r){const s=new mu(n,t,ke);return s.multi=[],s.index=e,s.componentProviders=0,Sw(s,r,i&&!t),s}(r?DB:TB,t.length,r,i,c);!r&&S&&(t[x].providerFactory=b),Jv(s,n,e.length,0),e.push(a),h.directiveStart++,h.directiveEnd++,r&&(h.providerIndexes+=1048576),t.push(b),o.push(b)}else Jv(s,n,y>-1?y:x,Sw(t[r?x:y],c,!r&&i));!r&&i&&S&&t[x].componentProviders++}}}function Jv(n,e,t,i){const r=Aa(e),s=function U2(n){return!!n.useClass}(e);if(r||s){const c=(s?Vt(e.useClass):e).prototype.ngOnDestroy;if(c){const h=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const f=h.indexOf(t);-1===f?h.push(t,[i,c]):h[f+1].push(i,c)}else h.push(t,c)}}}function Sw(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Qv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function TB(n,e,t,i){return ey(this.multi,[])}function DB(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=yu(t,t[1],this.providerFactory.index,i);s=a.slice(0,o),ey(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],ey(r,s);return s}function ey(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Gn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function AB(n,e,t){const i=xn();if(i.firstCreatePass){const r=ps(n);Kv(t,i.data,i.blueprint,r,!0),Kv(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Pa{}class Mw{}class Ew extends Pa{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Uv(this);const i=Cr(e);this._bootstrapComponents=uo(i.bootstrap),this._r3Injector=oM(e,t,[{provide:Pa,useValue:this},{provide:Ou,useValue:this.componentFactoryResolver}],Nn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ty extends Mw{constructor(e){super(),this.moduleType=e}create(e){return new Ew(this.moduleType,e)}}class RB extends Pa{constructor(e,t,i){super(),this.componentFactoryResolver=new Uv(this),this.instance=null;const r=new WS([...e,{provide:Pa,useValue:this},{provide:Ou,useValue:this.componentFactoryResolver}],t||Wd(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function df(n,e,t=null){return new RB(n,e,t).injector}let FB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=US(0,t.type),r=i.length>0?df([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Nt({token:n,providedIn:"environment",factory:()=>new n(vt(Xo))}),n})();function ww(n){n.getStandaloneInjector=e=>e.get(FB).getOrCreateStandaloneInjector(n)}function iy(n){return e=>{setTimeout(n,void 0,e)}}const Jn=class sV extends bt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=iy(s),r&&(r=iy(r)),o&&(o=iy(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof C&&e.add(a),a}};function oV(){return this._results[Ta()]()}class ry{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ta(),i=ry.prototype;i[t]||(i[t]=oV)}get changes(){return this._changes||(this._changes=new Jn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Ir(e);(this._changesDetected=!function sN(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let po=(()=>{class n{}return n.__NG_ELEMENT_ID__=cV,n})();const aV=po,lV=class extends aV{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=Yd(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),Iv(i,r,e),new Vu(r)}};function cV(){return ff(mi(),Re())}function ff(n,e){return 4&n.type?new lV(e,n,Hl(n,e)):null}let _s=(()=>{class n{}return n.__NG_ELEMENT_ID__=uV,n})();function uV(){return Vw(mi(),Re())}const hV=_s,kw=class extends hV{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new Pl(this._hostTNode,this._hostLView)}get parentInjector(){const e=Dd(this._hostTNode,this._hostLView);if(T1(e)){const t=Il(e,this._hostLView),i=Dl(e);return new Pl(t[1].data[i+8],t)}return new Pl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Bw(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function bu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=o?e:new Uu(Dn(e)),h=i||this.parentInjector;if(!s&&null==c.ngModule){const v=(o?h:this.parentInjector).get(Xo,null);v&&(s=v)}const f=c.create(h,r,void 0,s);return this.insert(f.hostView,a),f}insert(e,t){const i=e._lView,r=i[1];if(function EL(n){return fs(n[3])}(i)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=i[3],v=new kw(p,p[6],p[3]);v.detach(v.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function n2(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],V1(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function i2(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=$g(s,o),c=i[11],h=kd(c,o[7]);return null!==h&&function QN(n,e,t,i,r,s){i[0]=r,i[6]=e,Ru(n,i,t,1,r,s)}(r,o[6],c,i,h,a),e.attachToViewContainerRef(),V1(sy(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Bw(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Gg(this._lContainer,t);i&&(Rd(sy(this._lContainer),t),fS(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Gg(this._lContainer,t);return i&&null!=Rd(sy(this._lContainer),t)?new Vu(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Bw(n){return n[8]}function sy(n){return n[8]||(n[8]=[])}function Vw(n,e){let t;const i=e[n.index];if(fs(i))t=i;else{let r;if(8&n.type)r=ci(i);else{const s=e[11];r=s.createComment("");const o=Tr(n,e);wa(s,kd(s,o),r,function a2(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=OM(i,e,r,n),Kd(e,t)}return new kw(t,n,e)}class oy{constructor(e){this.queryList=e,this.matches=null}clone(){return new oy(this.queryList)}setDirty(){this.queryList.setDirty()}}class ay{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new ay(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ww(e,t).matches&&this.queries[t].setDirty()}}class Uw{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class ly{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new ly(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,pV(t,s)),this.matchTNodeWithReadOption(e,t,Pd(t,e,s,!1,!1))}else i===po?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Pd(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Rr||r===_s||r===po&&4&t.type)this.addMatch(t.index,-2);else{const s=Pd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function pV(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function gV(n,e,t,i){return-1===t?function mV(n,e){return 11&n.type?Hl(n,e):4&n.type?ff(n,e):null}(e,n):-2===t?function vV(n,e,t){return t===Rr?Hl(e,n):t===po?ff(e,n):t===_s?Vw(e,n):void 0}(n,e,i):yu(n,n[1],t,e)}function Hw(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const h=o[c];a.push(h<0?null:gV(e,s[h],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function uy(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=Hw(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const h=s[a+1],f=e[-c];for(let p=10;p<f.length;p++){const v=f[p];v[17]===v[3]&&uy(v[1],v,h,i)}if(null!==f[9]){const p=f[9];for(let v=0;v<p.length;v++){const y=p[v];uy(y[1],y,h,i)}}}}}return i}function Qu(n){const e=Re(),t=xn(),i=y1();mg(i+1);const r=Ww(t,i);if(n.dirty&&function ML(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?uy(t,e,i,[]):Hw(t,e,r,i);n.reset(s,J2),n.notifyOnChanges()}return!0}return!1}function hy(n,e,t){const i=xn();i.firstCreatePass&&(function Gw(n,e,t){null===n.queries&&(n.queries=new ly),n.queries.track(new cy(e,t))}(i,new Uw(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function zw(n,e,t){const i=new ry(4==(4&t));AM(n,e,i,i.destroy),null===e[19]&&(e[19]=new ay),e[19].queries.push(new oy(i))}(i,Re(),e)}function eh(){return function yV(n,e){return n[19].queries[e].queryList}(Re(),y1())}function Ww(n,e){return n.queries.getByIndex(e)}function mf(...n){}const gf=new Ct("Application Initializer");let vf=(()=>{class n{constructor(t){this.appInits=t,this.resolve=mf,this.reject=mf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Wu(s))t.push(s);else if($v(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(vt(gf,8))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nh=new Ct("AppId",{providedIn:"root",factory:function cC(){return`${vy()}${vy()}${vy()}`}});function vy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uC=new Ct("Platform Initializer"),yy=new Ct("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hC=new Ct("appBootstrapListener");let UV=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const mo=new Ct("LocaleId",{providedIn:"root",factory:()=>ii(mo,Ot.Optional|Ot.SkipSelf)||function HV(){return typeof $localize<"u"&&$localize.locale||rc}()});class GV{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let _y=(()=>{class n{compileModuleSync(t){return new ty(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=uo(Cr(t).declarations).reduce((o,a)=>{const c=Dn(a);return c&&o.push(new Uu(c)),o},[]);return new GV(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $V=(()=>Promise.resolve(0))();function xy(n){typeof Zone>"u"?$V.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class yi{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jn(!1),this.onMicrotaskEmpty=new Jn(!1),this.onStable=new Jn(!1),this.onError=new Jn(!1),typeof Zone>"u")throw new Xe(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function qV(){let n=kn.requestAnimationFrame,e=kn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function ZV(n){const e=()=>{!function YV(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Sy(n),n.isCheckStableRunning=!0,by(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Sy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return pC(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),mC(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return pC(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),mC(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Sy(n),by(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yi.isInAngularZone())throw new Xe(909,!1)}static assertNotInAngularZone(){if(yi.isInAngularZone())throw new Xe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,XV,mf,mf);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const XV={};function by(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Sy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function pC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mC(n){n._nesting--,by(n)}class KV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jn,this.onMicrotaskEmpty=new Jn,this.onStable=new Jn,this.onError=new Jn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const gC=new Ct(""),yf=new Ct("");let wy,My=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,wy||(function JV(n){wy=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yi.assertNotInAngularZone(),xy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xy(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(vt(yi),vt(Ey),vt(yf))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),Ey=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return wy?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ko=null;const vC=new Ct("AllowMultipleToken"),Cy=new Ct("PlatformDestroyListeners");class yC{constructor(e,t){this.name=e,this.token=t}}function xC(n,e,t=[]){const i=`Platform: ${e}`,r=new Ct(i);return(s=[])=>{let o=Ay();if(!o||o.injector.get(vC,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function tU(n){if(Ko&&!Ko.get(vC,!1))throw new Xe(400,!1);Ko=n;const e=n.get(SC);(function _C(n){const e=n.get(uC,null);e&&e.forEach(t=>t())})(n)}(function bC(n=[],e){return Fr.create({name:e,providers:[{provide:av,useValue:"platform"},{provide:Cy,useValue:new Set([()=>Ko=null])},...n]})}(a,i))}return function iU(n){const e=Ay();if(!e)throw new Xe(401,!1);return e}()}}function Ay(){return Ko?.get(SC)??null}let SC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function EC(n,e){let t;return t="noop"===n?new KV:("zone.js"===n?void 0:n)||new yi(e),t}(i?.ngZone,function MC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:yi,useValue:r}];return r.run(()=>{const o=Fr.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),c=a.injector.get(zl,null);if(!c)throw new Xe(402,!1);return r.runOutsideAngular(()=>{const h=r.onError.subscribe({next:f=>{c.handleError(f)}});a.onDestroy(()=>{xf(this._modules,a),h.unsubscribe()})}),function wC(n,e,t){try{const i=t();return Wu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(c,r,()=>{const h=a.injector.get(vf);return h.runInitializers(),h.donePromise.then(()=>(function JE(n){wr(n,"Expected localeId to be defined"),"string"==typeof n&&(KE=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(mo,rc)||rc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=CC({},i);return function QV(n,e,t){const i=new ty(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(_f);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Xe(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Cy,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(vt(Fr))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function CC(n,e){return Array.isArray(e)?e.reduce(CC,n):{...n,...e}}let _f=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new H(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new H(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{yi.assertNotInAngularZone(),xy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),h.unsubscribe()}});this.isStable=function $F(...n){const e=lu(n),t=function VF(n,e){return"number"==typeof qm(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?cs(i[0]):bl(t)(li(i,e)):no}(s,o.pipe(function qF(n={}){const{connector:e=(()=>new bt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,h=0,f=!1,p=!1;const v=()=>{a?.unsubscribe(),a=void 0},y=()=>{v(),o=c=void 0,f=p=!1},x=()=>{const M=o;y(),M?.unsubscribe()};return ln((M,S)=>{h++,!p&&!f&&v();const b=c=c??e();S.add(()=>{h--,0===h&&!p&&!f&&(a=Xm(x,r))}),b.subscribe(S),!o&&h>0&&(o=new tt({next:D=>b.next(D),error:D=>{p=!0,v(),a=Xm(y,t,D),b.error(D)},complete:()=>{f=!0,v(),a=Xm(y,i),b.complete()}}),cs(M).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof $S;if(!this._injector.get(vf).done)throw!r&&function Ml(n){const e=Dn(n)||Ji(n)||Qi(n);return null!==e&&e.standalone}(t),new Xe(405,false);let o;o=r?t:this._injector.get(Ou).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function eU(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Pa),h=o.create(Fr.NULL,[],i||o.selector,a),f=h.location.nativeElement,p=h.injector.get(gC,null);return p?.registerApplication(f),h.onDestroy(()=>{this.detachView(h.hostView),xf(this.components,h),p?.unregisterApplication(f)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new Xe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;xf(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(hC,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>xf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Xe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(vt(yi),vt(Xo),vt(zl))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let TC=!0,bf=(()=>{class n{}return n.__NG_ELEMENT_ID__=oU,n})();function oU(n){return function aU(n,e,t){if(_d(n)&&!t){const i=Dr(n.index,e);return new Vu(i,i)}return 47&n.type?new Vu(e[16],e):null}(mi(),Re(),16==(16&n))}const xU=xC(null,"core",[]);let bU=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(vt(_f))},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({}),n})();function vo(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let wf=null;function js(){return wf}const sr=new Ct("DocumentToken");let Ry=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:function(){return function wU(){return vt(VC)}()},providedIn:"platform"}),n})();const CU=new Ct("Location Initialized");let VC=(()=>{class n extends Ry{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return js().getBaseHref(this._doc)}onPopState(t){const i=js().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=js().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){UC()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){UC()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(vt(sr))},n.\u0275prov=Nt({token:n,factory:function(){return function AU(){return new VC(vt(sr))}()},providedIn:"platform"}),n})();function UC(){return!!window.history.pushState}function Fy(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function HC(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function yo(n){return n&&"?"!==n[0]?"?"+n:n}let Fa=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:function(){return ii(GC)},providedIn:"root"}),n})();const zC=new Ct("appBaseHref");let GC=(()=>{class n extends Fa{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ii(sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fy(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+yo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+yo(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+yo(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(vt(Ry),vt(zC,8))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TU=(()=>{class n extends Fa{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Fy(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+yo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+yo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(vt(Ry),vt(zC,8))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),Ly=(()=>{class n{constructor(t){this._subject=new Jn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=HC(WC(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+yo(i))}normalize(t){return n.stripTrailingSlash(function IU(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,WC(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+yo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=yo,n.joinWithSlash=Fy,n.stripTrailingSlash=HC,n.\u0275fac=function(t){return new(t||n)(vt(Fa))},n.\u0275prov=Nt({token:n,factory:function(){return function DU(){return new Ly(vt(Fa))}()},providedIn:"root"}),n})();function WC(n){return n.replace(/\/index.html$/,"")}function QC(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let iA=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new yH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(ke(_s),ke(po))},n.\u0275dir=Ut({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class yH{constructor(){this.$implicit=null,this.ngIf=null}}function rA(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Nn(e)}'.`)}let Nf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({}),n})();let XH=(()=>{class n{}return n.\u0275prov=Nt({token:n,providedIn:"root",factory:()=>new YH(vt(sr),window)}),n})();class YH{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ZH(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=lA(this.window.history)||lA(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lA(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cA{}class Zy extends class Mz extends class EU{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function MU(n){wf||(wf=n)}(new Zy)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ez(){return ah=ah||document.querySelector("base"),ah?ah.getAttribute("href"):null}();return null==t?null:function wz(n){Bf=Bf||document.createElement("a"),Bf.setAttribute("href",n);const e=Bf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ah=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return QC(document.cookie,e)}}let Bf,ah=null;const pA=new Ct("TRANSITION_ID"),Az=[{provide:gf,useFactory:function Cz(n,e,t){return()=>{t.get(vf).donePromise.then(()=>{const i=js(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[pA,sr,Fr],multi:!0}];let Dz=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();const Vf=new Ct("EventManagerPlugins");let Uf=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(vt(Vf),vt(yi))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();class mA{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=js().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let gA=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),lh=(()=>{class n extends gA{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(vA),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vA))}}return n.\u0275fac=function(t){return new(t||n)(vt(sr))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();function vA(n){js().remove(n)}const Ky={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jy=/%COMP%/g;function Hf(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Hf(n,r,t):(r=r.replace(Jy,n),t.push(r))}return t}function xA(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qy=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new e0(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case ks.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Nz(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case ks.ShadowDom:return new Oz(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Hf(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(vt(Uf),vt(lh),vt(nh))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();class e0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ky[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(SA(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(SA(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Ky[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ky[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(gr.DashCase|gr.Important)?e.style.setProperty(t,i,r&gr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xA(i)):this.eventManager.addEventListener(e,t,xA(i))}}function SA(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nz extends e0{constructor(e,t,i,r){super(e),this.component=i;const s=Hf(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Rz(n){return"_ngcontent-%COMP%".replace(Jy,n)}(r+"-"+i.id),this.hostAttr=function Fz(n){return"_nghost-%COMP%".replace(Jy,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Oz extends e0{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Hf(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kz=(()=>{class n extends mA{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(vt(sr))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();const MA=["alt","control","meta","shift"],Bz={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Uz=(()=>{class n extends mA{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>js().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),MA.forEach(h=>{const f=i.indexOf(h);f>-1&&(i.splice(f,1),o+=h+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=Bz[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),MA.forEach(o=>{o!==r&&(0,Vz[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(vt(sr))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();const Wz=xC(xU,"browser",[{provide:yy,useValue:"browser"},{provide:uC,useValue:function Hz(){Zy.makeCurrent()},multi:!0},{provide:sr,useFactory:function Gz(){return function p2(n){Kg=n}(document),document},deps:[]}]),CA=new Ct(""),AA=[{provide:yf,useClass:class Tz{addToWindow(e){kn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),kn.getAllAngularRootElements=()=>e.getAllRootElements(),kn.frameworkStabilizers||(kn.frameworkStabilizers=[]),kn.frameworkStabilizers.push(i=>{const r=kn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?js().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:gC,useClass:My,deps:[yi,Ey,yf]},{provide:My,useClass:My,deps:[yi,Ey,yf]}],TA=[{provide:av,useValue:"root"},{provide:zl,useFactory:function zz(){return new zl},deps:[]},{provide:Vf,useClass:kz,multi:!0,deps:[sr,yi,yy]},{provide:Vf,useClass:Uz,multi:!0,deps:[sr]},{provide:Qy,useClass:Qy,deps:[Uf,lh,nh]},{provide:XS,useExisting:Qy},{provide:gA,useExisting:lh},{provide:lh,useClass:lh,deps:[sr]},{provide:Uf,useClass:Uf,deps:[Vf,yi]},{provide:cA,useClass:Dz,deps:[]},[]];let jz=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:nh,useValue:t.appId},{provide:pA,useExisting:nh},Az]}}}return n.\u0275fac=function(t){return new(t||n)(vt(CA,12))},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({providers:[...TA,...AA],imports:[Nf,bU]}),n})(),DA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(vt(sr))},n.\u0275prov=Nt({token:n,factory:function(t){let i=null;return i=t?new t:function qz(){return new DA(vt(sr))}(),i},providedIn:"root"}),n})();function It(...n){return li(n,lu(n))}function Qo(n,e){return m(e)?Ii(n,e,1):Ii(n,1)}function xo(n,e){return ln((t,i)=>{let r=0;t.subscribe(_n(i,s=>n.call(e,s,r++)&&i.next(s)))})}typeof window<"u"&&window;class RA{}class FA{}class Ms{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ms?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ms;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ms?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class t4{encodeKey(e){return LA(e)}encodeValue(e){return LA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const i4=/%(\d[a-f0-9])/gi,r4={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function LA(n){return encodeURIComponent(n).replace(i4,(e,t)=>r4[t]??e)}function zf(n){return`${n}`}class bo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new t4,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function n4(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(zf):[zf(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new bo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(zf(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(zf(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class s4{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function NA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function OA(n){return typeof Blob<"u"&&n instanceof Blob}function kA(n){return typeof FormData<"u"&&n instanceof FormData}class ch{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function o4(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ms),this.context||(this.context=new s4),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new bo,this.urlWithParams=t}serializeBody(){return null===this.body?null:NA(this.body)||OA(this.body)||kA(this.body)||function a4(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof bo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||kA(this.body)?null:OA(this.body)?this.body.type||null:NA(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,h=e.params||this.params;const f=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((p,v)=>p.set(v,e.setHeaders[v]),c)),e.setParams&&(h=Object.keys(e.setParams).reduce((p,v)=>p.set(v,e.setParams[v]),h)),new ch(t,i,s,{params:h,headers:c,context:f,reportProgress:a,responseType:r,withCredentials:o})}}var fi=(()=>((fi=fi||{})[fi.Sent=0]="Sent",fi[fi.UploadProgress=1]="UploadProgress",fi[fi.ResponseHeader=2]="ResponseHeader",fi[fi.DownloadProgress=3]="DownloadProgress",fi[fi.Response=4]="Response",fi[fi.User=5]="User",fi))();class r0{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ms,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class s0 extends r0{constructor(e={}){super(e),this.type=fi.ResponseHeader}clone(e={}){return new s0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gf extends r0{constructor(e={}){super(e),this.type=fi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class BA extends r0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function o0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let a0=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof ch)s=t;else{let c,h;c=r.headers instanceof Ms?r.headers:new Ms(r.headers),r.params&&(h=r.params instanceof bo?r.params:new bo({fromObject:r.params})),s=new ch(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:h,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=It(s).pipe(Qo(c=>this.handler.handle(c)));if(t instanceof ch||"events"===r.observe)return o;const a=o.pipe(xo(c=>c instanceof Gf));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Dt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Dt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Dt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Dt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new bo).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,o0(r,i))}post(t,i,r={}){return this.request("POST",t,o0(r,i))}put(t,i,r={}){return this.request("PUT",t,o0(r,i))}}return n.\u0275fac=function(t){return new(t||n)(vt(RA))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();class VA{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const UA=new Ct("HTTP_INTERCEPTORS");let l4=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();const c4=/^\)\]\}',?\n/;let HA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new H(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((y,x)=>r.setRequestHeader(y,x.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const y=t.detectContentTypeHeader();null!==y&&r.setRequestHeader("Content-Type",y)}if(t.responseType){const y=t.responseType.toLowerCase();r.responseType="json"!==y?y:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const y=r.statusText||"OK",x=new Ms(r.getAllResponseHeaders()),M=function u4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new s0({headers:x,status:r.status,statusText:y,url:M}),o},c=()=>{let{headers:y,status:x,statusText:M,url:S}=a(),b=null;204!==x&&(b=typeof r.response>"u"?r.responseText:r.response),0===x&&(x=b?200:0);let D=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof b){const A=b;b=b.replace(c4,"");try{b=""!==b?JSON.parse(b):null}catch(T){b=A,D&&(D=!1,b={error:T,text:b})}}D?(i.next(new Gf({body:b,headers:y,status:x,statusText:M,url:S||void 0})),i.complete()):i.error(new BA({error:b,headers:y,status:x,statusText:M,url:S||void 0}))},h=y=>{const{url:x}=a(),M=new BA({error:y,status:r.status||0,statusText:r.statusText||"Unknown Error",url:x||void 0});i.error(M)};let f=!1;const p=y=>{f||(i.next(a()),f=!0);let x={type:fi.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(x.total=y.total),"text"===t.responseType&&!!r.responseText&&(x.partialText=r.responseText),i.next(x)},v=y=>{let x={type:fi.UploadProgress,loaded:y.loaded};y.lengthComputable&&(x.total=y.total),i.next(x)};return r.addEventListener("load",c),r.addEventListener("error",h),r.addEventListener("timeout",h),r.addEventListener("abort",h),t.reportProgress&&(r.addEventListener("progress",p),null!==s&&r.upload&&r.upload.addEventListener("progress",v)),r.send(s),i.next({type:fi.Sent}),()=>{r.removeEventListener("error",h),r.removeEventListener("abort",h),r.removeEventListener("load",c),r.removeEventListener("timeout",h),t.reportProgress&&(r.removeEventListener("progress",p),null!==s&&r.upload&&r.upload.removeEventListener("progress",v)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(vt(cA))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();const l0=new Ct("XSRF_COOKIE_NAME"),c0=new Ct("XSRF_HEADER_NAME");class zA{}let h4=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=QC(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(vt(sr),vt(yy),vt(l0))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),u0=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(vt(zA),vt(c0))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),d4=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(UA,[]);this.chain=i.reduceRight((r,s)=>new VA(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(vt(FA),vt(Fr))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})(),f4=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:u0,useClass:l4}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:l0,useValue:t.cookieName}:[],t.headerName?{provide:c0,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({providers:[u0,{provide:UA,useExisting:u0,multi:!0},{provide:zA,useClass:h4},{provide:l0,useValue:"XSRF-TOKEN"},{provide:c0,useValue:"X-XSRF-TOKEN"}]}),n})(),p4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({providers:[a0,{provide:RA,useClass:d4},HA,{provide:FA,useExisting:HA}],imports:[f4.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();class Es extends bt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Wf=g(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:m4}=Array,{getPrototypeOf:g4,prototype:v4,keys:y4}=Object;function GA(n){if(1===n.length){const e=n[0];if(m4(e))return{args:e,keys:null};if(function _4(n){return n&&"object"==typeof n&&g4(n)===v4}(e)){const t=y4(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:x4}=Array;function WA(n){return Dt(e=>function b4(n,e){return x4(e)?n(...e):n(e)}(n,e))}function jA(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function $A(...n){const e=lu(n),t=Xb(n),{args:i,keys:r}=GA(n);if(0===i.length)return li([],e);const s=new H(function S4(n,e,t=J){return i=>{qA(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)qA(e,()=>{const h=li(n[c],e);let f=!1;h.subscribe(_n(i,p=>{s[c]=p,f||(f=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>jA(r,o):J));return t?s.pipe(WA(t)):s}function qA(n,e,t){n?to(t,n,e):e()}function h0(...n){return function M4(){return bl(1)}()(li(n,lu(n)))}function XA(n){return new H(e=>{cs(n()).subscribe(e)})}function uh(n,e){const t=m(n)?n:()=>n,i=r=>r.error(t());return new H(e?r=>e.schedule(i,0,r):i)}function d0(){return ln((n,e)=>{let t=null;n._refCount++;const i=_n(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class YA extends H{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gn(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new C;const t=this.getSubject();e.add(this.source.subscribe(_n(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=C.EMPTY)}return e}refCount(){return d0()(this)}}function $s(n,e){return ln((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(_n(i,c=>{r?.unsubscribe();let h=0;const f=s++;cs(n(c,f)).subscribe(r=_n(i,p=>i.next(e?e(c,p,f,h++):p),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function hh(n){return n<=0?()=>no:ln((e,t)=>{let i=0;e.subscribe(_n(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function jf(n){return ln((e,t)=>{let i=!1;e.subscribe(_n(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ZA(n=w4){return ln((e,t)=>{let i=!1;e.subscribe(_n(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function w4(){return new Wf}function ea(n,e){const t=arguments.length>=2;return i=>i.pipe(n?xo((r,s)=>n(r,s,i)):J,hh(1),t?jf(e):ZA(()=>new Wf))}function Hi(n,e,t){const i=m(n)||e||t?{next:n,error:e,complete:t}:n;return i?ln((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(_n(s,c=>{var h;null===(h=i.next)||void 0===h||h.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var h;a=!1,null===(h=i.error)||void 0===h||h.call(i,c),s.error(c)},()=>{var c,h;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(h=i.finalize)||void 0===h||h.call(i)}))}):J}function qs(n){return ln((e,t)=>{let s,i=null,r=!1;i=e.subscribe(_n(t,void 0,void 0,o=>{s=cs(n(o,qs(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function C4(n,e,t,i,r){return(s,o)=>{let a=t,c=e,h=0;s.subscribe(_n(o,f=>{const p=h++;c=a?n(c,f,p):(a=!0,f),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function KA(n,e){return ln(C4(n,e,arguments.length>=2,!0))}function f0(n){return n<=0?()=>no:ln((e,t)=>{let i=[];e.subscribe(_n(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function JA(n,e){const t=arguments.length>=2;return i=>i.pipe(n?xo((r,s)=>n(r,s,i)):J,f0(1),t?jf(e):ZA(()=>new Wf))}function p0(n){return ln((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const an="primary",dh=Symbol("RouteTitle");class D4{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ac(n){return new D4(n)}function I4(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Xs(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!QA(n[r],e[r]))return!1;return!0}function QA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function eT(n){return Array.prototype.concat.apply([],n)}function tT(n){return n.length>0?n[n.length-1]:null}function Pi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ta(n){return $v(n)?n:Wu(n)?li(Promise.resolve(n)):It(n)}const F4={exact:function rT(n,e,t){if(!Na(n.segments,e.segments)||!$f(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!rT(n.children[i],e.children[i],t))return!1;return!0},subset:sT},nT={exact:function L4(n,e){return Xs(n,e)},subset:function N4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>QA(n[t],e[t]))},ignored:()=>!0};function iT(n,e,t){return F4[t.paths](n.root,e.root,t.matrixParams)&&nT[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sT(n,e,t){return oT(n,e,e.segments,t)}function oT(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Na(r,t)||e.hasChildren()||!$f(r,t,i))}if(n.segments.length===t.length){if(!Na(n.segments,t)||!$f(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!sT(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Na(n.segments,r)&&$f(n.segments,r,i)&&n.children[an])&&oT(n.children[an],e,s,i)}}function $f(n,e,t){return e.every((i,r)=>nT[t](n[r].parameters,i.parameters))}class La{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ac(this.queryParams)),this._queryParamMap}toString(){return B4.serialize(this)}}class cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pi(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qf(this)}}class fh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ac(this.parameters)),this._parameterMap}toString(){return uT(this)}}function Na(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let aT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:function(){return new g0},providedIn:"root"}),n})();class g0{parse(e){const t=new q4(e);return new La(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ph(e.root,!0)}`,i=function H4(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Xf(t)}=${Xf(r)}`).join("&"):`${Xf(t)}=${Xf(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function V4(n){return encodeURI(n)}(e.fragment)}`:""}`}}const B4=new g0;function qf(n){return n.segments.map(e=>uT(e)).join("/")}function ph(n,e){if(!n.hasChildren())return qf(n);if(e){const t=n.children[an]?ph(n.children[an],!1):"",i=[];return Pi(n.children,(r,s)=>{s!==an&&i.push(`${s}:${ph(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function k4(n,e){let t=[];return Pi(n.children,(i,r)=>{r===an&&(t=t.concat(e(i,r)))}),Pi(n.children,(i,r)=>{r!==an&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===an?[ph(n.children[an],!1)]:[`${r}:${ph(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[an]?`${qf(n)}/${t[0]}`:`${qf(n)}/(${t.join("//")})`}}function lT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xf(n){return lT(n).replace(/%3B/gi,";")}function v0(n){return lT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yf(n){return decodeURIComponent(n)}function cT(n){return Yf(n.replace(/\+/g,"%20"))}function uT(n){return`${v0(n.path)}${function U4(n){return Object.keys(n).map(e=>`;${v0(e)}=${v0(n[e])}`).join("")}(n.parameters)}`}const z4=/^[^\/()?;=#]+/;function Zf(n){const e=n.match(z4);return e?e[0]:""}const G4=/^[^=?&#]+/,j4=/^[^&#]+/;class q4{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[an]=new cn(e,t)),i}parseSegment(){const e=Zf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Xe(4009,!1);return this.capture(e),new fh(Yf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zf(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Zf(this.remaining);r&&(i=r,this.capture(i))}e[Yf(t)]=Yf(i)}parseQueryParam(e){const t=function W4(n){const e=n.match(G4);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function $4(n){const e=n.match(j4);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=cT(t),s=cT(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Zf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Xe(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=an);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[an]:new cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Xe(4011,!1)}}function y0(n){return n.segments.length>0?new cn([],{[an]:n}):n}function Kf(n){const e={};for(const i of Object.keys(n.children)){const s=Kf(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function X4(n){if(1===n.numberOfChildren&&n.children[an]){const e=n.children[an];return new cn(n.segments.concat(e.segments),e.children)}return n}(new cn(n.segments,e))}function Oa(n){return n instanceof La}function K4(n,e,t,i,r){if(0===t.length)return lc(e.root,e.root,e.root,i,r);const s=function fT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dT(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Pi(s.outlets,(c,h)=>{a[h]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new dT(t,e,i)}(t);return s.toRoot()?lc(e.root,e.root,new cn([],{}),i,r):function o(c){const h=function Q4(n,e,t,i){if(n.isAbsolute)return new cc(e.root,!0,0);if(-1===i)return new cc(t,t===e.root,0);return function pT(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Xe(4005,!1);r=i.segments.length}return new cc(i,!1,r-s)}(t,i+(mh(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),f=h.processChildren?vh(h.segmentGroup,h.index,s.commands):x0(h.segmentGroup,h.index,s.commands);return lc(e.root,h.segmentGroup,f,i,r)}(n.snapshot?._lastPathIndex)}function mh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gh(n){return"object"==typeof n&&null!=n&&n.outlets}function lc(n,e,t,i,r){let o,s={};i&&Pi(i,(c,h)=>{s[h]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`}),o=n===e?t:hT(n,e,t);const a=y0(Kf(o));return new La(a,s,r)}function hT(n,e,t){const i={};return Pi(n.children,(r,s)=>{i[s]=r===e?t:hT(r,e,t)}),new cn(n.segments,i)}class dT{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&mh(i[0]))throw new Xe(4003,!1);const r=i.find(gh);if(r&&r!==tT(i))throw new Xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cc{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function x0(n,e,t){if(n||(n=new cn([],{})),0===n.segments.length&&n.hasChildren())return vh(n,e,t);const i=function tG(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(gh(a))break;const c=`${a}`,h=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&h&&"object"==typeof h&&void 0===h.outlets){if(!gT(c,h,o))return s;i+=2}else{if(!gT(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new cn(n.segments.slice(0,i.pathIndex),{});return s.children[an]=new cn(n.segments.slice(i.pathIndex),n.children),vh(s,0,r)}return i.match&&0===r.length?new cn(n.segments,{}):i.match&&!n.hasChildren()?b0(n,e,t):i.match?vh(n,0,r):b0(n,e,t)}function vh(n,e,t){if(0===t.length)return new cn(n.segments,{});{const i=function eG(n){return gh(n[0])?n[0].outlets:{[an]:n}}(t),r={};return Pi(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=x0(n.children[o],e,s))}),Pi(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new cn(n.segments,r)}}function b0(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(gh(s)){const c=nG(s.outlets);return new cn(i,c)}if(0===r&&mh(t[0])){i.push(new fh(n.segments[e].path,mT(t[0]))),r++;continue}const o=gh(s)?s.outlets[an]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&mh(a)?(i.push(new fh(o,mT(a))),r+=2):(i.push(new fh(o,{})),r++)}return new cn(i,{})}function nG(n){const e={};return Pi(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=b0(new cn([],{}),0,t))}),e}function mT(n){const e={};return Pi(n,(t,i)=>e[i]=`${t}`),e}function gT(n,e,t){return n==t.path&&Xs(e,t.parameters)}class So{constructor(e,t){this.id=e,this.url=t}}class S0 extends So{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ka extends So{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jf extends So{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vT extends So{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iG extends So{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rG extends So{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sG extends So{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oG extends So{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aG extends So{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lG{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cG{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uG{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dG{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fG{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yT{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _T{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=M0(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=M0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return E0(e,this._root).map(t=>t.value)}}function M0(n,e){if(n===e.value)return e;for(const t of e.children){const i=M0(n,t);if(i)return i}return null}function E0(n,e){if(n===e.value)return[e];for(const t of e.children){const i=E0(n,t);if(i.length)return i.unshift(e),i}return[]}class Mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function uc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xT extends _T{constructor(e,t){super(e),this.snapshot=t,w0(this,e)}toString(){return this.snapshot.toString()}}function bT(n,e){const t=function mG(n,e){const o=new Qf([],{},{},"",{},an,e,null,n.root,-1,{});return new MT("",new Mo(o,[]))}(n,e),i=new Es([new fh("",{})]),r=new Es({}),s=new Es({}),o=new Es({}),a=new Es(""),c=new Ba(i,r,o,a,s,an,e,t.root);return c.snapshot=t.root,new xT(new Mo(c,[]),t)}class Ba{constructor(e,t,i,r,s,o,a,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Dt(h=>h[dh]))??It(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Dt(e=>ac(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Dt(e=>ac(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ST(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function gG(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Qf{constructor(e,t,i,r,s,o,a,c,h,f,p,v){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[dh],this.routeConfig=c,this._urlSegment=h,this._lastPathIndex=f,this._correctedLastPathIndex=v??f,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ac(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ac(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MT extends _T{constructor(e,t){super(t),this.url=e,w0(this,t)}toString(){return ET(this._root)}}function w0(n,e){e.value._routerState=n,e.children.forEach(t=>w0(n,t))}function ET(n){const e=n.children.length>0?` { ${n.children.map(ET).join(", ")} } `:"";return`${n.value}${e}`}function C0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Xs(e.params,t.params)||n.params.next(t.params),function P4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Xs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function A0(n,e){const t=Xs(n.params,e.params)&&function O4(n,e){return Na(n,e)&&n.every((t,i)=>Xs(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||A0(n.parent,e.parent))}function yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function yG(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return yh(n,i,r);return yh(n,i)})}(n,e,t);return new Mo(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>yh(n,a)),o}}const i=function _G(n){return new Ba(new Es(n.url),new Es(n.params),new Es(n.queryParams),new Es(n.fragment),new Es(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>yh(n,s));return new Mo(i,r)}}const T0="ngNavigationCancelingError";function wT(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Oa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=CT(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function CT(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[T0]=!0,i.cancellationCode=e,t&&(i.url=t),i}function AT(n){return TT(n)&&Oa(n.url)}function TT(n){return n&&n[T0]}class xG{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new _h,this.attachRef=null}}let _h=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new xG,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ep=!1;let D0=(()=>{class n{constructor(t,i,r,s,o){this.parentContexts=t,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Jn,this.deactivateEvents=new Jn,this.attachEvents=new Jn,this.detachEvents=new Jn,this.name=r||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Xe(4012,ep);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Xe(4012,ep);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Xe(4012,ep);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Xe(4013,ep);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new bG(t,a,r.injector);if(i&&function SG(n){return!!n.resolveComponentFactory}(i)){const h=i.resolveComponentFactory(o);this.activated=r.createComponent(h,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(ke(_h),ke(_s),function _u(n){return function QL(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(w1(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(mi(),n)}("name"),ke(bf),ke(Xo))},n.\u0275dir=Ut({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class bG{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ba?this.route:e===_h?this.childContexts:this.parent.get(e,t)}}let I0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["ng-component"]],standalone:!0,features:[ww],decls:1,vars:0,template:function(t,i){1&t&&Ee(0,"router-outlet")},dependencies:[D0],encapsulation:2}),n})();function DT(n,e){return n.providers&&!n._injector&&(n._injector=df(n.providers,e,`Route: ${n.path}`)),n._injector??e}function R0(n){const e=n.children&&n.children.map(R0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=I0),t}function Zr(n){return n.outlet||an}function IT(n,e){const t=n.filter(i=>Zr(i)===e);return t.push(...n.filter(i=>Zr(i)!==e)),t}function xh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class AG{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),C0(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=uc(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Pi(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=uc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=uc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=uc(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new fG(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hG(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(C0(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),C0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=xh(r.snapshot),c=a?.get(Ou)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class PT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tp{constructor(e,t){this.component=e,this.route=t}}function TG(n,e,t){const i=n._root;return bh(i,e?e._root:null,t,[i.value])}function hc(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function eL(n){return null!==fd(n)}(n)?e.get(n):n:i}function bh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=uc(e);return n.children.forEach(o=>{(function IG(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function PG(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Na(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Na(n.url,e.url)||!Xs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!A0(n,e)||!Xs(n.queryParams,e.queryParams);default:return!A0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new PT(i)):(s.data=o.data,s._resolvedData=o._resolvedData),bh(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new tp(a.outlet.component,o))}else o&&Sh(e,a,r),r.canActivateChecks.push(new PT(i)),bh(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Pi(s,(o,a)=>Sh(o,t.getContext(a),r)),r}function Sh(n,e,t){const i=uc(n),r=n.value;Pi(i,(s,o)=>{Sh(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new tp(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Mh(n){return"function"==typeof n}function F0(n){return n instanceof Wf||"EmptyError"===n?.name}const np=Symbol("INITIAL_VALUE");function dc(){return $s(n=>$A(n.map(e=>e.pipe(hh(1),function E4(...n){const e=lu(n);return ln((t,i)=>{(e?h0(n,t,e):h0(n,t)).subscribe(i)})}(np)))).pipe(Dt(e=>{for(const t of e)if(!0!==t){if(t===np)return np;if(!1===t||t instanceof La)return t}return!0}),xo(e=>e!==np),hh(1)))}function RT(n){return function ae(...n){return B(n)}(Hi(e=>{if(Oa(e))throw wT(0,e)}),Dt(e=>!0===e))}const L0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FT(n,e,t,i,r){const s=N0(n,e,t);return s.matched?function XG(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?It(r.map(o=>{const a=hc(o,n);return ta(function kG(n){return n&&Mh(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(dc(),RT()):It(!0)}(i=DT(e,i),e,t).pipe(Dt(o=>!0===o?s:{...L0})):It(s)}function N0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...L0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||I4)(t,n,e);if(!r)return{...L0};const s={};Pi(r.posParams,(a,c)=>{s[c]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function ip(n,e,t,i,r="corrected"){if(t.length>0&&function KG(n,e,t){return t.some(i=>rp(n,e,i)&&Zr(i)!==an)}(n,t,i)){const o=new cn(e,function ZG(n,e,t,i){const r={};r[an]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Zr(s)!==an){const o=new cn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[Zr(s)]=o}return r}(n,e,i,new cn(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function JG(n,e,t){return t.some(i=>rp(n,e,i))}(n,t,i)){const o=new cn(n.segments,function YG(n,e,t,i,r,s){const o={};for(const a of i)if(rp(n,t,a)&&!r[Zr(a)]){const c=new cn([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Zr(a)]=c}return{...r,...o}}(n,e,t,i,n.children,r));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new cn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function rp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function LT(n,e,t,i){return!!(Zr(n)===i||i!==an&&rp(e,t,n))&&("**"===n.path||N0(e,n,t).matched)}function NT(n,e,t){return 0===e.length&&!n.children[t]}const sp=!1;class op{constructor(e){this.segmentGroup=e||null}}class OT{constructor(e){this.urlTree=e}}function Eh(n){return uh(new op(n))}function kT(n){return uh(new OT(n))}class n5{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=ip(this.urlTree.root,[],[],this.config).segmentGroup,t=new cn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,an).pipe(Dt(s=>this.createUrlTree(Kf(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qs(s=>{if(s instanceof OT)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof op?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,an).pipe(Dt(r=>this.createUrlTree(Kf(r),e.queryParams,e.fragment))).pipe(qs(r=>{throw r instanceof op?this.noMatchError(r):r}))}noMatchError(e){return new Xe(4002,sp)}createUrlTree(e,t,i){const r=y0(e);return new La(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Dt(s=>new cn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return li(r).pipe(Qo(s=>{const o=i.children[s],a=IT(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Dt(c=>({segment:c,outlet:s})))}),KA((s,o)=>(s[o.outlet]=o.segment,s),{}),JA())}expandSegment(e,t,i,r,s,o){return li(i).pipe(Qo(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(qs(h=>{if(h instanceof op)return It(null);throw h}))),ea(a=>!!a),qs((a,c)=>{if(F0(a))return NT(t,r,s)?It(new cn([],{})):Eh(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return LT(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):Eh(t):Eh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?kT(s):this.lineralizeSegments(i,s).pipe(Ii(o=>{const a=new cn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:h,positionalParamSegments:f}=N0(t,r,s);if(!a)return Eh(t);const p=this.applyRedirectCommands(c,r.redirectTo,f);return r.redirectTo.startsWith("/")?kT(p):this.lineralizeSegments(r,p).pipe(Ii(v=>this.expandSegment(e,t,i,v.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=DT(i,e),i.loadChildren?(i._loadedRoutes?It({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Dt(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new cn(r,{})))):It(new cn(r,{}))):FT(t,i,r,e).pipe($s(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Ii(f=>{const p=f.injector??e,v=f.routes,{segmentGroup:y,slicedSegments:x}=ip(t,a,c,v),M=new cn(y.segments,y.children);if(0===x.length&&M.hasChildren())return this.expandChildren(p,v,M).pipe(Dt(A=>new cn(a,A)));if(0===v.length&&0===x.length)return It(new cn(a,{}));const S=Zr(i)===s;return this.expandSegment(p,M,v,x,S?an:s,!0).pipe(Dt(D=>new cn(a.concat(D.segments),D.children)))})):Eh(t)))}getChildConfig(e,t,i){return t.children?It({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?It({routes:t._loadedRoutes,injector:t._loadedInjector}):function qG(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?It(!0):It(r.map(o=>{const a=hc(o,n);return ta(function FG(n){return n&&Mh(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(dc(),RT())}(e,t,i).pipe(Ii(r=>r?this.configLoader.loadChildren(e,t).pipe(Hi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function e5(n){return uh(CT(sp,3))}())):It({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return It(i);if(r.numberOfChildren>1||!r.children[an])return uh(new Xe(4e3,sp));r=r.children[an]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new La(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Pi(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Pi(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,i,r)}),new cn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Xe(4001,sp);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class r5{}class a5{constructor(e,t,i,r,s,o,a,c){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=c}recognize(){const e=ip(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,an).pipe(Dt(t=>{if(null===t)return null;const i=new Qf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mo(i,t),s=new MT(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=ST(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return li(Object.keys(i.children)).pipe(Qo(r=>{const s=i.children[r],o=IT(t,r);return this.processSegmentGroup(e,o,s,r)}),KA((r,s)=>r&&s?(r.push(...s),r):null),function A4(n,e=!1){return ln((t,i)=>{let r=0;t.subscribe(_n(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),jf(null),JA(),Dt(r=>{if(null===r)return null;const s=BT(r);return function l5(n){n.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return li(t).pipe(Qo(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),ea(o=>!!o),qs(o=>{if(F0(o))return NT(i,r,s)?It([]):It(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!LT(t,i,r,s))return It(null);let o;if("**"===t.path){const a=r.length>0?tT(r).parameters:{},c=UT(i)+r.length;o=It({snapshot:new Qf(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zT(t),Zr(t),t.component??t._loadedComponent??null,t,VT(i),c,GT(t),c),consumedSegments:[],remainingSegments:[]})}else o=FT(i,t,r,e).pipe(Dt(({matched:a,consumedSegments:c,remainingSegments:h,parameters:f})=>{if(!a)return null;const p=UT(i)+c.length;return{snapshot:new Qf(c,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zT(t),Zr(t),t.component??t._loadedComponent??null,t,VT(i),p,GT(t),p),consumedSegments:c,remainingSegments:h}}));return o.pipe($s(a=>{if(null===a)return It(null);const{snapshot:c,consumedSegments:h,remainingSegments:f}=a;e=t._injector??e;const p=t._loadedInjector??e,v=function c5(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:y,slicedSegments:x}=ip(i,h,f,v.filter(S=>void 0===S.redirectTo),this.relativeLinkResolution);if(0===x.length&&y.hasChildren())return this.processChildren(p,v,y).pipe(Dt(S=>null===S?null:[new Mo(c,S)]));if(0===v.length&&0===x.length)return It([new Mo(c,[])]);const M=Zr(t)===s;return this.processSegment(p,v,y,x,M?an:s).pipe(Dt(S=>null===S?null:[new Mo(c,S)]))}))}}function u5(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function BT(n){const e=[],t=new Set;for(const i of n){if(!u5(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=BT(i.children);e.push(new Mo(i.value,r))}return e.filter(i=>!t.has(i))}function VT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function UT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function zT(n){return n.data||{}}function GT(n){return n.resolve||{}}function WT(n){return"string"==typeof n.title||null===n.title}function O0(n){return $s(e=>{const t=n(e);return t?li(t).pipe(Dt(()=>e)):It(e)})}let jT=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===an);return i}getResolvedTitleForRoute(t){return t.data[dh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Nt({token:n,factory:function(){return ii($T)},providedIn:"root"}),n})(),$T=(()=>{class n extends jT{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(vt(DA))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class y5{}class x5 extends class _5{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lp=new Ct("",{providedIn:"root",factory:()=>({})}),k0=new Ct("ROUTES");let B0=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return It(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ta(t.loadComponent()).pipe(Hi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),p0(()=>{this.componentLoaders.delete(t)})),r=new YA(i,()=>new bt).pipe(d0());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return It({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Dt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let c,h,f=!1;Array.isArray(a)?h=a:(c=a.create(t).injector,h=eT(c.get(k0,[],Ot.Self|Ot.Optional)));return{routes:h.map(R0),injector:c}}),p0(()=>{this.childrenLoaders.delete(i)})),o=new YA(s,()=>new bt).pipe(d0());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return ta(t()).pipe(Ii(i=>i instanceof Mw||Array.isArray(i)?It(i):li(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(vt(Fr),vt(_y))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class S5{}class M5{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function E5(n){throw n}function w5(n,e,t){return e.parse("/")}const C5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},A5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function XT(){const n=ii(aT),e=ii(_h),t=ii(Ly),i=ii(Fr),r=ii(_y),s=ii(k0,{optional:!0})??[],o=ii(lp,{optional:!0})??{},a=ii($T),c=ii(jT,{optional:!0}),h=ii(S5,{optional:!0}),f=ii(y5,{optional:!0}),p=new xi(null,n,e,t,i,r,eT(s));return h&&(p.urlHandlingStrategy=h),f&&(p.routeReuseStrategy=f),p.titleStrategy=c??a,function T5(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,p),p}let xi=(()=>{class n{constructor(t,i,r,s,o,a,c){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bt,this.errorHandler=E5,this.malformedUriErrorHandler=w5,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>It(void 0),this.urlHandlingStrategy=new M5,this.routeReuseStrategy=new x5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(B0),this.configLoader.onLoadEndListener=v=>this.triggerEvent(new cG(v)),this.configLoader.onLoadStartListener=v=>this.triggerEvent(new lG(v)),this.ngModule=o.get(Pa),this.console=o.get(UV);const p=o.get(yi);this.isNgZoneEnabled=p instanceof yi&&yi.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function R4(){return new La(new cn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bT(this.currentUrlTree,this.rootComponentType),this.transitions=new Es({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(xo(r=>0!==r.id),Dt(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),$s(r=>{let s=!1,o=!1;return It(r).pipe(Hi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),$s(a=>{const c=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return YT(a.source)&&(this.browserUrlTree=a.extractedUrl),It(a).pipe($s(p=>{const v=this.transitions.getValue();return i.next(new S0(p.id,this.serializeUrl(p.extractedUrl),p.source,p.restoredState)),v!==this.transitions.getValue()?no:Promise.resolve(p)}),function i5(n,e,t,i){return $s(r=>function t5(n,e,t,i,r){return new n5(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Dt(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Hi(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},r.urlAfterRedirects=p.urlAfterRedirects}),function d5(n,e,t,i,r,s){return Ii(o=>function o5(n,e,t,i,r,s,o="emptyOnly",a="legacy"){return new a5(n,e,t,i,r,o,a,s).recognize().pipe($s(c=>null===c?function s5(n){return new H(e=>e.error(n))}(new r5):It(c)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r,s).pipe(Dt(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Hi(p=>{if(r.targetSnapshot=p.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!p.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);this.setBrowserUrl(y,p)}this.browserUrlTree=p.urlAfterRedirects}const v=new iG(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);i.next(v)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:v,extractedUrl:y,source:x,restoredState:M,extras:S}=a,b=new S0(v,this.serializeUrl(y),x,M);i.next(b);const D=bT(y,this.rootComponentType).snapshot;return It(r={...a,targetSnapshot:D,urlAfterRedirects:y,extras:{...S,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),no}),Hi(a=>{const c=new rG(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(c)}),Dt(a=>r={...a,guards:TG(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function VG(n,e){return Ii(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?It({...t,guardsResult:!0}):function UG(n,e,t,i){return li(n).pipe(Ii(r=>function $G(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?It(s.map(a=>{const c=xh(e)??r,h=hc(a,c);return ta(function OG(n){return n&&Mh(n.canDeactivate)}(h)?h.canDeactivate(n,e,t,i):c.runInContext(()=>h(n,e,t,i))).pipe(ea())})).pipe(dc()):It(!0)}(r.component,r.route,t,e,i)),ea(r=>!0!==r,!0))}(o,i,r,n).pipe(Ii(a=>a&&function RG(n){return"boolean"==typeof n}(a)?function HG(n,e,t,i){return li(e).pipe(Qo(r=>h0(function GG(n,e){return null!==n&&e&&e(new uG(n)),It(!0)}(r.route.parent,i),function zG(n,e){return null!==n&&e&&e(new dG(n)),It(!0)}(r.route,i),function jG(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function DG(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>XA(()=>It(o.guards.map(c=>{const h=xh(o.node)??t,f=hc(c,h);return ta(function NG(n){return n&&Mh(n.canActivateChild)}(f)?f.canActivateChild(i,n):h.runInContext(()=>f(i,n))).pipe(ea())})).pipe(dc())));return It(s).pipe(dc())}(n,r.path,t),function WG(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return It(!0);const r=i.map(s=>XA(()=>{const o=xh(e)??t,a=hc(s,o);return ta(function LG(n){return n&&Mh(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(ea())}));return It(r).pipe(dc())}(n,r.route,t))),ea(r=>!0!==r,!0))}(i,s,n,e):It(a)),Dt(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Hi(a=>{if(r.guardsResult=a.guardsResult,Oa(a.guardsResult))throw wT(0,a.guardsResult);const c=new sG(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(c)}),xo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),O0(a=>{if(a.guards.canActivateChecks.length)return It(a).pipe(Hi(c=>{const h=new oG(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(h)}),$s(c=>{let h=!1;return It(c).pipe(function f5(n,e){return Ii(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return It(t);let s=0;return li(r).pipe(Qo(o=>function p5(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!WT(r)&&(s[dh]=r.title),function m5(n,e,t,i){const r=function g5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return It({});const s={};return li(r).pipe(Ii(o=>function v5(n,e,t,i){const r=xh(e)??i,s=hc(n,r);return ta(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(ea(),Hi(a=>{s[o]=a}))),f0(1),function T4(n){return Dt(()=>n)}(s),qs(o=>F0(o)?no:uh(o)))}(s,n,e,i).pipe(Dt(o=>(n._resolvedData=o,n.data=ST(n,t).resolve,r&&WT(r)&&(n.data[dh]=r.title),null)))}(o.route,i,n,e)),Hi(()=>s++),f0(1),Ii(o=>s===r.length?It(t):no))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Hi({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Hi(c=>{const h=new aG(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(h)}))}),O0(a=>{const c=h=>{const f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(Hi(p=>{h.component=p}),Dt(()=>{})));for(const p of h.children)f.push(...c(p));return f};return $A(c(a.targetSnapshot.root)).pipe(jf(),hh(1))}),O0(()=>this.afterPreactivation()),Dt(a=>{const c=function vG(n,e,t){const i=yh(n,e._root,t?t._root:void 0);return new xT(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:c}}),Hi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Dt(i=>(new AG(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Hi({next(){s=!0},complete(){s=!0}}),p0(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),qs(a=>{if(o=!0,TT(a)){AT(a)||(this.navigated=!0,this.restoreHistory(r,!0));const c=new Jf(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(i.next(c),AT(a)){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),f={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||YT(r.source)};this.scheduleNavigation(h,"imperative",null,f,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const c=new vT(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);i.next(c);try{r.resolve(this.errorHandler(a))}catch(h){r.reject(h)}}return no}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(R0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,h=r||this.routerState.root,f=c?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),K4(h,this.currentUrlTree,t,p,f??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Oa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function D5(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Xe(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...C5}:!1===i?{...A5}:i,Oa(t))return iT(this.currentUrlTree,t,r);const s=this.parseUrl(t);return iT(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ka(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,h;o?(a=o.resolve,c=o.reject,h=o.promise):h=new Promise((v,y)=>{a=v,c=y});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),p=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(v=>Promise.reject(v))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i,r){const s=new Jf(t.id,this.serializeUrl(t.extractedUrl),i,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){yv()},n.\u0275prov=Nt({token:n,factory:function(){return XT()},providedIn:"root"}),n})();function YT(n){return"imperative"!==n}class ZT{}let R5=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(xo(t=>t instanceof ka),Qo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=df(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return li(r).pipe(bl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):It(null);const s=r.pipe(Ii(o=>null===o?It(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?li([s,this.loader.loadComponent(i)]).pipe(bl()):s})}}return n.\u0275fac=function(t){return new(t||n)(vt(xi),vt(_y),vt(Xo),vt(ZT),vt(B0))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const H0=new Ct("");let KT=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof S0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ka&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new yT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){yv()},n.\u0275prov=Nt({token:n,factory:n.\u0275fac}),n})();function fc(n,e){return{\u0275kind:n,\u0275providers:e}}function z0(n){return[{provide:k0,multi:!0,useValue:n}]}function QT(){const n=ii(Fr);return e=>{const t=n.get(_f);if(e!==t.components[0])return;const i=n.get(xi),r=n.get(eD);1===n.get(G0)&&i.initialNavigation(),n.get(tD,null,Ot.Optional)?.setUpPreloading(),n.get(H0,null,Ot.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const eD=new Ct("",{factory:()=>new bt}),G0=new Ct("",{providedIn:"root",factory:()=>1});const tD=new Ct("");function O5(n){return fc(0,[{provide:tD,useExisting:R5},{provide:ZT,useExisting:n}])}const nD=new Ct("ROUTER_FORROOT_GUARD"),k5=[Ly,{provide:aT,useClass:g0},{provide:xi,useFactory:XT},_h,{provide:Ba,useFactory:function JT(n){return n.routerState.root},deps:[xi]},B0];function B5(){return new yC("Router",xi)}let iD=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[k5,[],z0(t),{provide:nD,useFactory:z5,deps:[[xi,new Cu,new Au]]},{provide:lp,useValue:i||{}},i?.useHash?{provide:Fa,useClass:TU}:{provide:Fa,useClass:GC},{provide:H0,useFactory:()=>{const n=ii(xi),e=ii(XH),t=ii(lp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new KT(n,e,t)}},i?.preloadingStrategy?O5(i.preloadingStrategy).\u0275providers:[],{provide:yC,multi:!0,useFactory:B5},i?.initialNavigation?G5(i):[],[{provide:rD,useFactory:QT},{provide:hC,multi:!0,useExisting:rD}]]}}static forChild(t){return{ngModule:n,providers:[z0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(vt(nD,8))},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[I0]}),n})();function z5(n){return"guarded"}function G5(n){return["disabled"===n.initialNavigation?fc(3,[{provide:gf,multi:!0,useFactory:()=>{const e=ii(xi);return()=>{e.setUpLocationChangeListener()}}},{provide:G0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fc(2,[{provide:G0,useValue:0},{provide:gf,multi:!0,deps:[Fr],useFactory:e=>{const t=e.get(CU,Promise.resolve());let i=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(xi),a=e.get(eD);(function r(s){e.get(xi).events.pipe(xo(a=>a instanceof ka||a instanceof Jf||a instanceof vT),Dt(a=>a instanceof ka||a instanceof Jf&&(0===a.code||1===a.code)&&null),xo(a=>null!==a),hh(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?It(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const rD=new Ct(""),uD="attached",Ha=1e3,Kr=1001,wi=1003,gc=1005,oi=1006,ws=1008,Co=1009,Th=1012,sa=1014,Nr=1015,Dh=1016,vc=1020,_r=1023,yc=1026,_c=1027,gp=33776,vp=33777,yp=33778,_p=33779,xp=36492,Ih=2300,Ph=2301,Ci="srgb",or="srgb-linear",Sp="linear",Fn="srgb",Sc=7680,Ao=2e3;class Mc{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const zi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Ga=Math.PI/180,Ec=180/Math.PI;function Or(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(zi[255&n]+zi[n>>8&255]+zi[n>>16&255]+zi[n>>24&255]+"-"+zi[255&e]+zi[e>>8&255]+"-"+zi[e>>16&15|64]+zi[e>>24&255]+"-"+zi[63&t|128]+zi[t>>8&255]+"-"+zi[t>>16&255]+zi[t>>24&255]+zi[255&i]+zi[i>>8&255]+zi[i>>16&255]+zi[i>>24&255]).toLowerCase()}function Xt(n,e,t){return Math.max(e,Math.min(t,n))}function k_(n,e){return(n%e+e)%e}function Rh(n,e,t){return(1-t)*n+t*e}function ar(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Jt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const J8_radToDeg=function q8(n){return n*Ec};class Fe{constructor(e=0,t=0){Fe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Xt(this.x,e.x,t.x),this.y=Xt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Xt(this.x,e,t),this.y=Xt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Xt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qt{constructor(e,t,i,r,s,o,a,c,h){Qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,h)}set(e,t,i,r,s,o,a,c,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=c,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],h=i[1],f=i[4],p=i[7],v=i[2],y=i[5],x=i[8],M=r[0],S=r[3],b=r[6],D=r[1],A=r[4],T=r[7],q=r[2],$=r[5],K=r[8];return s[0]=o*M+a*D+c*q,s[3]=o*S+a*A+c*$,s[6]=o*b+a*T+c*K,s[1]=h*M+f*D+p*q,s[4]=h*S+f*A+p*$,s[7]=h*b+f*T+p*K,s[2]=v*M+y*D+x*q,s[5]=v*S+y*A+x*$,s[8]=v*b+y*T+x*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8];return t*o*f-t*a*h-i*s*f+i*a*c+r*s*h-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8],p=f*o-a*h,v=a*c-f*s,y=h*s-o*c,x=t*p+i*v+r*y;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);const M=1/x;return e[0]=p*M,e[1]=(r*h-f*i)*M,e[2]=(a*i-r*o)*M,e[3]=v*M,e[4]=(f*t-r*c)*M,e[5]=(r*s-a*t)*M,e[6]=y*M,e[7]=(i*c-h*t)*M,e[8]=(o*t-i*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),h=Math.sin(s);return this.set(i*c,i*h,-i*(c*o+h*a)+o+e,-r*h,r*c,-r*(-h*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(B_.makeScale(e,t)),this}rotate(e){return this.premultiply(B_.makeRotation(-e)),this}translate(e,t){return this.premultiply(B_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const B_=new Qt;function CD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Fh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function eW(){const n=Fh("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const AD={};function Cc(n){n in AD||(AD[n]=!0,console.warn(n))}const TD=(new Qt).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),DD=(new Qt).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function rW(){const n={enabled:!0,workingColorSpace:or,spaces:{},convert:function(r,s,o){return!1===this.enabled||s===o||!s||!o||(this.spaces[s].transfer===Fn&&(r.r=To(r.r),r.g=To(r.g),r.b=To(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Fn&&(r.r=Ac(r.r),r.g=Ac(r.g),r.b=Ac(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return""===r?Sp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[or]:{primaries:e,whitePoint:i,transfer:Sp,toXYZ:TD,fromXYZ:DD,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ci},outputColorSpaceConfig:{drawingBufferColorSpace:Ci}},[Ci]:{primaries:e,whitePoint:i,transfer:Fn,toXYZ:TD,fromXYZ:DD,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ci}}}),n}const vn=rW();function To(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Ac(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Tc,oW=0;class Dc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oW++}),this.uuid=Or(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(V_(r[o].isDataTexture?r[o].image:r[o]))}else s=V_(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function V_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?class sW{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Tc&&(Tc=Fh("canvas")),Tc.width=e.width,Tc.height=e.height;const i=Tc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Tc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Fh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*To(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*To(t[i]/255)):To(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aW=0,Jr=(()=>{class n extends Mc{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Kr,s=Kr,o=oi,a=ws,c=_r,h=Co,f=n.DEFAULT_ANISOTROPY,p=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aW++}),this.uuid=Or(),this.name="",this.source=new Dc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=f,this.format=c,this.internalFormat=null,this.type=h,this.offset=new Fe(0,0),this.repeat=new Fe(1,1),this.center=new Fe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ha:t.x=t.x-Math.floor(t.x);break;case Kr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ha:t.y=t.y-Math.floor(t.y);break;case Kr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Mn{constructor(e=0,t=0,i=0,r=1){Mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,h=c[0],f=c[4],p=c[8],v=c[1],y=c[5],x=c[9],M=c[2],S=c[6],b=c[10];if(Math.abs(f-v)<.01&&Math.abs(p-M)<.01&&Math.abs(x-S)<.01){if(Math.abs(f+v)<.1&&Math.abs(p+M)<.1&&Math.abs(x+S)<.1&&Math.abs(h+y+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(h+1)/2,T=(y+1)/2,q=(b+1)/2,$=(f+v)/4,K=(p+M)/4,Q=(x+S)/4;return A>T&&A>q?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=$/i,s=K/i):T>q?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=$/r,s=Q/r):q<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(q),i=K/s,r=Q/s),this.set(i,r,s,t),this}let D=Math.sqrt((S-x)*(S-x)+(p-M)*(p-M)+(v-f)*(v-f));return Math.abs(D)<.001&&(D=1),this.x=(S-x)/D,this.y=(p-M)/D,this.z=(v-f)/D,this.w=Math.acos((h+y+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Xt(this.x,e.x,t.x),this.y=Xt(this.y,e.y,t.y),this.z=Xt(this.z,e.z,t.z),this.w=Xt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Xt(this.x,e,t),this.y=Xt(this.y,e,t),this.z=Xt(this.z,e,t),this.w=Xt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Xt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lW extends Mc{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Mn(0,0,e,t),this.scissorTest=!1,this.viewport=new Mn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Jr(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Dc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wa extends lW{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class U_ extends Jr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=wi,this.minFilter=wi,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ID extends Jr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=wi,this.minFilter=wi,this.wrapR=Kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],h=i[r+1],f=i[r+2],p=i[r+3];const v=s[o+0],y=s[o+1],x=s[o+2],M=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(1===a)return e[t+0]=v,e[t+1]=y,e[t+2]=x,void(e[t+3]=M);if(p!==M||c!==v||h!==y||f!==x){let S=1-a;const b=c*v+h*y+f*x+p*M,D=b>=0?1:-1,A=1-b*b;if(A>Number.EPSILON){const q=Math.sqrt(A),$=Math.atan2(q,b*D);S=Math.sin(S*$)/q,a=Math.sin(a*$)/q}const T=a*D;if(c=c*S+v*T,h=h*S+y*T,f=f*S+x*T,p=p*S+M*T,S===1-a){const q=1/Math.sqrt(c*c+h*h+f*f+p*p);c*=q,h*=q,f*=q,p*=q}}e[t]=c,e[t+1]=h,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],h=i[r+2],f=i[r+3],p=s[o],v=s[o+1],y=s[o+2],x=s[o+3];return e[t]=a*x+f*p+c*y-h*v,e[t+1]=c*x+f*v+h*p-a*y,e[t+2]=h*x+f*y+a*v-c*p,e[t+3]=f*x-a*p-c*v-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,h=a(i/2),f=a(r/2),p=a(s/2),v=c(i/2),y=c(r/2),x=c(s/2);switch(o){case"XYZ":this._x=v*f*p+h*y*x,this._y=h*y*p-v*f*x,this._z=h*f*x+v*y*p,this._w=h*f*p-v*y*x;break;case"YXZ":this._x=v*f*p+h*y*x,this._y=h*y*p-v*f*x,this._z=h*f*x-v*y*p,this._w=h*f*p+v*y*x;break;case"ZXY":this._x=v*f*p-h*y*x,this._y=h*y*p+v*f*x,this._z=h*f*x+v*y*p,this._w=h*f*p-v*y*x;break;case"ZYX":this._x=v*f*p-h*y*x,this._y=h*y*p+v*f*x,this._z=h*f*x-v*y*p,this._w=h*f*p+v*y*x;break;case"YZX":this._x=v*f*p+h*y*x,this._y=h*y*p+v*f*x,this._z=h*f*x-v*y*p,this._w=h*f*p-v*y*x;break;case"XZY":this._x=v*f*p-h*y*x,this._y=h*y*p-v*f*x,this._z=h*f*x+v*y*p,this._w=h*f*p+v*y*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],h=t[2],f=t[6],p=t[10],v=i+a+p;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(f-c)*y,this._y=(s-h)*y,this._z=(o-r)*y}else if(i>a&&i>p){const y=2*Math.sqrt(1+i-a-p);this._w=(f-c)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+h)/y}else if(a>p){const y=2*Math.sqrt(1+a-i-p);this._w=(s-h)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(c+f)/y}else{const y=2*Math.sqrt(1+p-i-a);this._w=(o-r)/y,this._x=(s+h)/y,this._y=(c+f)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,h=t._z,f=t._w;return this._x=i*f+o*a+r*h-s*c,this._y=r*f+o*c+s*a-i*h,this._z=s*f+o*h+i*c-r*a,this._w=o*f-i*a-r*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const h=Math.sqrt(c),f=Math.atan2(h,a),p=Math.sin((1-t)*f)/h,v=Math.sin(t*f)/h;return this._w=o*p+this._w*v,this._x=i*p+this._x*v,this._y=r*p+this._y*v,this._z=s*p+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(e=0,t=0,i=0){re.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PD.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PD.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,h=2*(o*r-a*i),f=2*(a*t-s*r),p=2*(s*i-o*t);return this.x=t+c*h+o*p-a*f,this.y=i+c*f+a*h-s*p,this.z=r+c*p+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Xt(this.x,e.x,t.x),this.y=Xt(this.y,e.y,t.y),this.z=Xt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Xt(this.x,e,t),this.y=Xt(this.y,e,t),this.z=Xt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Xt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return H_.copy(this).projectOnVector(e),this.sub(H_)}reflect(e){return this.sub(H_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const H_=new re,PD=new lr;class cr{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Cs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Cs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Cs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,Cs):Cs.fromBufferAttribute(s,o),Cs.applyMatrix4(e.matrixWorld),this.expandByPoint(Cs);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),wp.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),wp.copy(i.boundingBox)),wp.applyMatrix4(e.matrixWorld),this.union(wp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Cs),Cs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Lh),Cp.subVectors(this.max,Lh),Ic.subVectors(e.a,Lh),Pc.subVectors(e.b,Lh),Rc.subVectors(e.c,Lh),aa.subVectors(Pc,Ic),la.subVectors(Rc,Pc),ja.subVectors(Ic,Rc);let t=[0,-aa.z,aa.y,0,-la.z,la.y,0,-ja.z,ja.y,aa.z,0,-aa.x,la.z,0,-la.x,ja.z,0,-ja.x,-aa.y,aa.x,0,-la.y,la.x,0,-ja.y,ja.x,0];return!(!z_(t,Ic,Pc,Rc,Cp)||(t=[1,0,0,0,1,0,0,0,1],!z_(t,Ic,Pc,Rc,Cp)))&&(Ap.crossVectors(aa,la),t=[Ap.x,Ap.y,Ap.z],z_(t,Ic,Pc,Rc,Cp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Cs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Cs).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Do[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Do[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Do[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Do[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Do[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Do[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Do[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Do[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Do)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Do=[new re,new re,new re,new re,new re,new re,new re,new re],Cs=new re,wp=new cr,Ic=new re,Pc=new re,Rc=new re,aa=new re,la=new re,ja=new re,Lh=new re,Cp=new re,Ap=new re,$a=new re;function z_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){$a.fromArray(n,s);const a=r.x*Math.abs($a.x)+r.y*Math.abs($a.y)+r.z*Math.abs($a.z),c=e.dot($a),h=t.dot($a),f=i.dot($a);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>a)return!1}return!0}const cW=new cr,Nh=new re,G_=new re;class Gi{constructor(e=new re,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):cW.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Nh.subVectors(e,this.center);const t=Nh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Nh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(G_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Nh.copy(e.center).add(G_)),this.expandByPoint(Nh.copy(e.center).sub(G_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Io=new re,W_=new re,Tp=new re,ca=new re,j_=new re,Dp=new re,$_=new re;class Oh{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Io)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Io.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Io.copy(this.origin).addScaledVector(this.direction,t),Io.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){W_.copy(e).add(t).multiplyScalar(.5),Tp.copy(t).sub(e).normalize(),ca.copy(this.origin).sub(W_);const s=.5*e.distanceTo(t),o=-this.direction.dot(Tp),a=ca.dot(this.direction),c=-ca.dot(Tp),h=ca.lengthSq(),f=Math.abs(1-o*o);let p,v,y,x;if(f>0)if(p=o*c-a,v=o*a-c,x=s*f,p>=0)if(v>=-x)if(v<=x){const M=1/f;p*=M,v*=M,y=p*(p+o*v+2*a)+v*(o*p+v+2*c)+h}else v=s,p=Math.max(0,-(o*v+a)),y=-p*p+v*(v+2*c)+h;else v=-s,p=Math.max(0,-(o*v+a)),y=-p*p+v*(v+2*c)+h;else v<=-x?(p=Math.max(0,-(-o*s+a)),v=p>0?-s:Math.min(Math.max(-s,-c),s),y=-p*p+v*(v+2*c)+h):v<=x?(p=0,v=Math.min(Math.max(-s,-c),s),y=v*(v+2*c)+h):(p=Math.max(0,-(o*s+a)),v=p>0?s:Math.min(Math.max(-s,-c),s),y=-p*p+v*(v+2*c)+h);else v=o>0?-s:s,p=Math.max(0,-(o*v+a)),y=-p*p+v*(v+2*c)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(W_).addScaledVector(Tp,v),y}intersectSphere(e,t){Io.subVectors(e.center,this.origin);const i=Io.dot(this.direction),r=Io.dot(Io)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const h=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,v=this.origin;return h>=0?(i=(e.min.x-v.x)*h,r=(e.max.x-v.x)*h):(i=(e.max.x-v.x)*h,r=(e.min.x-v.x)*h),f>=0?(s=(e.min.y-v.y)*f,o=(e.max.y-v.y)*f):(s=(e.max.y-v.y)*f,o=(e.min.y-v.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),p>=0?(a=(e.min.z-v.z)*p,c=(e.max.z-v.z)*p):(a=(e.max.z-v.z)*p,c=(e.min.z-v.z)*p),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Io)}intersectTriangle(e,t,i,r,s){j_.subVectors(t,e),Dp.subVectors(i,e),$_.crossVectors(j_,Dp);let a,o=this.direction.dot($_);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}ca.subVectors(this.origin,e);const c=a*this.direction.dot(Dp.crossVectors(ca,Dp));if(c<0)return null;const h=a*this.direction.dot(j_.cross(ca));if(h<0||c+h>o)return null;const f=-a*ca.dot($_);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Rt{constructor(e,t,i,r,s,o,a,c,h,f,p,v,y,x,M,S){Rt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,h,f,p,v,y,x,M,S)}set(e,t,i,r,s,o,a,c,h,f,p,v,y,x,M,S){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=s,b[5]=o,b[9]=a,b[13]=c,b[2]=h,b[6]=f,b[10]=p,b[14]=v,b[3]=y,b[7]=x,b[11]=M,b[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Rt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Fc.setFromMatrixColumn(e,0).length(),s=1/Fc.setFromMatrixColumn(e,1).length(),o=1/Fc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),h=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if("XYZ"===e.order){const v=o*f,y=o*p,x=a*f,M=a*p;t[0]=c*f,t[4]=-c*p,t[8]=h,t[1]=y+x*h,t[5]=v-M*h,t[9]=-a*c,t[2]=M-v*h,t[6]=x+y*h,t[10]=o*c}else if("YXZ"===e.order){const v=c*f,y=c*p,x=h*f,M=h*p;t[0]=v+M*a,t[4]=x*a-y,t[8]=o*h,t[1]=o*p,t[5]=o*f,t[9]=-a,t[2]=y*a-x,t[6]=M+v*a,t[10]=o*c}else if("ZXY"===e.order){const v=c*f,y=c*p,x=h*f,M=h*p;t[0]=v-M*a,t[4]=-o*p,t[8]=x+y*a,t[1]=y+x*a,t[5]=o*f,t[9]=M-v*a,t[2]=-o*h,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const v=o*f,y=o*p,x=a*f,M=a*p;t[0]=c*f,t[4]=x*h-y,t[8]=v*h+M,t[1]=c*p,t[5]=M*h+v,t[9]=y*h-x,t[2]=-h,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const v=o*c,y=o*h,x=a*c,M=a*h;t[0]=c*f,t[4]=M-v*p,t[8]=x*p+y,t[1]=p,t[5]=o*f,t[9]=-a*f,t[2]=-h*f,t[6]=y*p+x,t[10]=v-M*p}else if("XZY"===e.order){const v=o*c,y=o*h,x=a*c,M=a*h;t[0]=c*f,t[4]=-p,t[8]=h*f,t[1]=v*p+M,t[5]=o*f,t[9]=y*p-x,t[2]=x*p-y,t[6]=a*f,t[10]=M*p+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uW,e,hW)}lookAt(e,t,i){const r=this.elements;return kr.subVectors(e,t),0===kr.lengthSq()&&(kr.z=1),kr.normalize(),ua.crossVectors(i,kr),0===ua.lengthSq()&&(1===Math.abs(i.z)?kr.x+=1e-4:kr.z+=1e-4,kr.normalize(),ua.crossVectors(i,kr)),ua.normalize(),Ip.crossVectors(kr,ua),r[0]=ua.x,r[4]=Ip.x,r[8]=kr.x,r[1]=ua.y,r[5]=Ip.y,r[9]=kr.y,r[2]=ua.z,r[6]=Ip.z,r[10]=kr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],h=i[12],f=i[1],p=i[5],v=i[9],y=i[13],x=i[2],M=i[6],S=i[10],b=i[14],D=i[3],A=i[7],T=i[11],q=i[15],$=r[0],K=r[4],Q=r[8],G=r[12],z=r[1],oe=r[5],ye=r[9],ge=r[13],_e=r[2],Te=r[6],xe=r[10],Ve=r[14],Me=r[3],Ye=r[7],st=r[11],dt=r[15];return s[0]=o*$+a*z+c*_e+h*Me,s[4]=o*K+a*oe+c*Te+h*Ye,s[8]=o*Q+a*ye+c*xe+h*st,s[12]=o*G+a*ge+c*Ve+h*dt,s[1]=f*$+p*z+v*_e+y*Me,s[5]=f*K+p*oe+v*Te+y*Ye,s[9]=f*Q+p*ye+v*xe+y*st,s[13]=f*G+p*ge+v*Ve+y*dt,s[2]=x*$+M*z+S*_e+b*Me,s[6]=x*K+M*oe+S*Te+b*Ye,s[10]=x*Q+M*ye+S*xe+b*st,s[14]=x*G+M*ge+S*Ve+b*dt,s[3]=D*$+A*z+T*_e+q*Me,s[7]=D*K+A*oe+T*Te+q*Ye,s[11]=D*Q+A*ye+T*xe+q*st,s[15]=D*G+A*ge+T*Ve+q*dt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],h=e[13],f=e[2],p=e[6],v=e[10],y=e[14];return e[3]*(+s*c*p-r*h*p-s*a*v+i*h*v+r*a*y-i*c*y)+e[7]*(+t*c*y-t*h*v+s*o*v-r*o*y+r*h*f-s*c*f)+e[11]*(+t*h*p-t*a*y-s*o*p+i*o*y+s*a*f-i*h*f)+e[15]*(-r*a*f-t*c*p+t*a*v+r*o*p-i*o*v+i*c*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8],p=e[9],v=e[10],y=e[11],x=e[12],M=e[13],S=e[14],b=e[15],D=p*S*h-M*v*h+M*c*y-a*S*y-p*c*b+a*v*b,A=x*v*h-f*S*h-x*c*y+o*S*y+f*c*b-o*v*b,T=f*M*h-x*p*h+x*a*y-o*M*y-f*a*b+o*p*b,q=x*p*c-f*M*c-x*a*v+o*M*v+f*a*S-o*p*S,$=t*D+i*A+r*T+s*q;if(0===$)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const K=1/$;return e[0]=D*K,e[1]=(M*v*s-p*S*s-M*r*y+i*S*y+p*r*b-i*v*b)*K,e[2]=(a*S*s-M*c*s+M*r*h-i*S*h-a*r*b+i*c*b)*K,e[3]=(p*c*s-a*v*s-p*r*h+i*v*h+a*r*y-i*c*y)*K,e[4]=A*K,e[5]=(f*S*s-x*v*s+x*r*y-t*S*y-f*r*b+t*v*b)*K,e[6]=(x*c*s-o*S*s-x*r*h+t*S*h+o*r*b-t*c*b)*K,e[7]=(o*v*s-f*c*s+f*r*h-t*v*h-o*r*y+t*c*y)*K,e[8]=T*K,e[9]=(x*p*s-f*M*s-x*i*y+t*M*y+f*i*b-t*p*b)*K,e[10]=(o*M*s-x*a*s+x*i*h-t*M*h-o*i*b+t*a*b)*K,e[11]=(f*a*s-o*p*s-f*i*h+t*p*h+o*i*y-t*a*y)*K,e[12]=q*K,e[13]=(f*M*r-x*p*r+x*i*v-t*M*v-f*i*S+t*p*S)*K,e[14]=(x*a*r-o*M*r-x*i*c+t*M*c+o*i*S-t*a*S)*K,e[15]=(o*p*r-f*a*r+f*i*c-t*p*c-o*i*v+t*a*v)*K,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,h=s*o,f=s*a;return this.set(h*o+i,h*a-r*c,h*c+r*a,0,h*a+r*c,f*a+i,f*c-r*o,0,h*c-r*a,f*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,h=s+s,f=o+o,p=a+a,v=s*h,y=s*f,x=s*p,M=o*f,S=o*p,b=a*p,D=c*h,A=c*f,T=c*p,q=i.x,$=i.y,K=i.z;return r[0]=(1-(M+b))*q,r[1]=(y+T)*q,r[2]=(x-A)*q,r[3]=0,r[4]=(y-T)*$,r[5]=(1-(v+b))*$,r[6]=(S+D)*$,r[7]=0,r[8]=(x+A)*K,r[9]=(S-D)*K,r[10]=(1-(v+M))*K,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Fc.set(r[0],r[1],r[2]).length();const o=Fc.set(r[4],r[5],r[6]).length(),a=Fc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],As.copy(this);const h=1/s,f=1/o,p=1/a;return As.elements[0]*=h,As.elements[1]*=h,As.elements[2]*=h,As.elements[4]*=f,As.elements[5]*=f,As.elements[6]*=f,As.elements[8]*=p,As.elements[9]*=p,As.elements[10]*=p,t.setFromRotationMatrix(As),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ao){const c=this.elements,h=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),v=(i+r)/(i-r);let y,x;if(a===Ao)y=-(o+s)/(o-s),x=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);y=-o/(o-s),x=-o*s/(o-s)}return c[0]=h,c[4]=0,c[8]=p,c[12]=0,c[1]=0,c[5]=f,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ao){const c=this.elements,h=1/(t-e),f=1/(i-r),p=1/(o-s),v=(t+e)*h,y=(i+r)*f;let x,M;if(a===Ao)x=(o+s)*p,M=-2*p;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);x=s*p,M=-1*p}return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*f,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=M,c[14]=-x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Fc=new re,As=new Rt,uW=new re(0,0,0),hW=new re(1,1,1),ua=new re,Ip=new re,kr=new re,RD=new Rt,FD=new lr;let Po=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],h=s[1],f=s[5],p=s[9],v=s[2],y=s[6],x=s[10];switch(i){case"XYZ":this._y=Math.asin(Xt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,x),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Xt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(c,x),this._z=Math.atan2(h,f)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin(Xt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Xt(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,x),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Xt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(c,x));break;case"XZY":this._z=Math.asin(-Xt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-p,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return RD.makeRotationFromQuaternion(t),this.setFromRotationMatrix(RD,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return FD.setFromEuler(this),this.setFromQuaternion(FD,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class q_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let dW=0;const LD=new re,Lc=new lr,Ro=new Rt,Pp=new re,kh=new re,fW=new re,pW=new lr,ND=new re(1,0,0),OD=new re(0,1,0),kD=new re(0,0,1),BD={type:"added"},mW={type:"removed"},Nc={type:"childadded",child:null},X_={type:"childremoved",child:null};let bi=(()=>{class n extends Mc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:dW++}),this.uuid=Or(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new re,i=new Po,r=new lr,s=new re(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Rt},normalMatrix:{value:new Qt}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new q_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Lc.setFromAxisAngle(t,i),this.quaternion.multiply(Lc),this}rotateOnWorldAxis(t,i){return Lc.setFromAxisAngle(t,i),this.quaternion.premultiply(Lc),this}rotateX(t){return this.rotateOnAxis(ND,t)}rotateY(t){return this.rotateOnAxis(OD,t)}rotateZ(t){return this.rotateOnAxis(kD,t)}translateOnAxis(t,i){return LD.copy(t).applyQuaternion(this.quaternion),this.position.add(LD.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(ND,t)}translateY(t){return this.translateOnAxis(OD,t)}translateZ(t){return this.translateOnAxis(kD,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ro.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Pp.copy(t):Pp.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),kh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ro.lookAt(kh,Pp,this.up):Ro.lookAt(Pp,kh,this.up),this.quaternion.setFromRotationMatrix(Ro),s&&(Ro.extractRotation(s.matrixWorld),Lc.setFromRotationMatrix(Ro),this.quaternion.premultiply(Lc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(BD),Nc.child=t,this.dispatchEvent(Nc),Nc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(mW),X_.child=t,this.dispatchEvent(X_),X_.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ro.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ro.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ro),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(BD),Nc.child=t,this.dispatchEvent(Nc),Nc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kh,t,fW),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kh,pW,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,h){return void 0===c[h.uuid]&&(c[h.uuid]=h.toJSON(t)),h.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const h=c.shapes;if(Array.isArray(h))for(let f=0,p=h.length;f<p;f++)o(t.shapes,h[f]);else o(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let h=0,f=this.material.length;h<f;h++)c.push(o(t.materials,this.material[h]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),h=a(t.materials),f=a(t.textures),p=a(t.images),v=a(t.shapes),y=a(t.skeletons),x=a(t.animations),M=a(t.nodes);c.length>0&&(r.geometries=c),h.length>0&&(r.materials=h),f.length>0&&(r.textures=f),p.length>0&&(r.images=p),v.length>0&&(r.shapes=v),y.length>0&&(r.skeletons=y),x.length>0&&(r.animations=x),M.length>0&&(r.nodes=M)}return r.object=s,r;function a(c){const h=[];for(const f in c){const p=c[f];delete p.metadata,h.push(p)}return h}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new re(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Ts=new re,Fo=new re,Y_=new re,Lo=new re,Oc=new re,kc=new re,VD=new re,Z_=new re,K_=new re,J_=new re,Q_=new Mn,ex=new Mn,tx=new Mn;class Br{constructor(e=new re,t=new re,i=new re){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ts.subVectors(e,t),r.cross(Ts);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ts.subVectors(r,t),Fo.subVectors(i,t),Y_.subVectors(e,t);const o=Ts.dot(Ts),a=Ts.dot(Fo),c=Ts.dot(Y_),h=Fo.dot(Fo),f=Fo.dot(Y_),p=o*h-a*a;if(0===p)return s.set(0,0,0),null;const v=1/p,y=(h*c-a*f)*v,x=(o*f-a*c)*v;return s.set(1-y-x,x,y)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,Lo)&&Lo.x>=0&&Lo.y>=0&&Lo.x+Lo.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return null===this.getBarycoord(e,t,i,r,Lo)?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Lo.x),c.addScaledVector(o,Lo.y),c.addScaledVector(a,Lo.z),c)}static getInterpolatedAttribute(e,t,i,r,s,o){return Q_.setScalar(0),ex.setScalar(0),tx.setScalar(0),Q_.fromBufferAttribute(e,t),ex.fromBufferAttribute(e,i),tx.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Q_,s.x),o.addScaledVector(ex,s.y),o.addScaledVector(tx,s.z),o}static isFrontFacing(e,t,i,r){return Ts.subVectors(i,t),Fo.subVectors(e,t),Ts.cross(Fo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ts.subVectors(this.c,this.b),Fo.subVectors(this.a,this.b),.5*Ts.cross(Fo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Br.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Br.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Br.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Br.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Br.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Oc.subVectors(r,i),kc.subVectors(s,i),Z_.subVectors(e,i);const c=Oc.dot(Z_),h=kc.dot(Z_);if(c<=0&&h<=0)return t.copy(i);K_.subVectors(e,r);const f=Oc.dot(K_),p=kc.dot(K_);if(f>=0&&p<=f)return t.copy(r);const v=c*p-f*h;if(v<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(i).addScaledVector(Oc,o);J_.subVectors(e,s);const y=Oc.dot(J_),x=kc.dot(J_);if(x>=0&&y<=x)return t.copy(s);const M=y*h-c*x;if(M<=0&&h>=0&&x<=0)return a=h/(h-x),t.copy(i).addScaledVector(kc,a);const S=f*x-y*p;if(S<=0&&p-f>=0&&y-x>=0)return VD.subVectors(s,r),a=(p-f)/(p-f+(y-x)),t.copy(r).addScaledVector(VD,a);const b=1/(S+M+v);return o=M*b,a=v*b,t.copy(i).addScaledVector(Oc,o).addScaledVector(kc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const UD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ha={h:0,s:0,l:0},Rp={h:0,s:0,l:0};function nx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Ze{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ci){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=vn.workingColorSpace){return this.r=e,this.g=t,this.b=i,vn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=vn.workingColorSpace){if(e=k_(e,1),t=Xt(t,0,1),i=Xt(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=nx(o,s,e+1/3),this.g=nx(o,s,e),this.b=nx(o,s,e-1/3)}return vn.toWorkingColorSpace(this,r),this}setStyle(e,t=Ci){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ci){const i=UD[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=To(e.r),this.g=To(e.g),this.b=To(e.b),this}copyLinearToSRGB(e){return this.r=Ac(e.r),this.g=Ac(e.g),this.b=Ac(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ci){return vn.fromWorkingColorSpace(Wi.copy(this),e),65536*Math.round(Xt(255*Wi.r,0,255))+256*Math.round(Xt(255*Wi.g,0,255))+Math.round(Xt(255*Wi.b,0,255))}getHexString(e=Ci){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vn.workingColorSpace){vn.fromWorkingColorSpace(Wi.copy(this),t);const i=Wi.r,r=Wi.g,s=Wi.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,h;const f=(a+o)/2;if(a===o)c=0,h=0;else{const p=o-a;switch(h=f<=.5?p/(o+a):p/(2-o-a),o){case i:c=(r-s)/p+(r<s?6:0);break;case r:c=(s-i)/p+2;break;case s:c=(i-r)/p+4}c/=6}return e.h=c,e.s=h,e.l=f,e}getRGB(e,t=vn.workingColorSpace){return vn.fromWorkingColorSpace(Wi.copy(this),t),e.r=Wi.r,e.g=Wi.g,e.b=Wi.b,e}getStyle(e=Ci){vn.fromWorkingColorSpace(Wi.copy(this),e);const t=Wi.r,i=Wi.g,r=Wi.b;return e!==Ci?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(ha),this.setHSL(ha.h+e,ha.s+t,ha.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ha),e.getHSL(Rp);const i=Rh(ha.h,Rp.h,t),r=Rh(ha.s,Rp.s,t),s=Rh(ha.l,Rp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wi=new Ze;Ze.NAMES=UD;let gW=0;class Ds extends Mc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:gW++}),this.uuid=Or(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ze(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sc,this.stencilZFail=Sc,this.stencilZPass=Sc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Sc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Sc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Sc&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Qr extends Ds{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Po,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const pi=new re,Fp=new Fe;class Wn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=Nr,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Fp.fromBufferAttribute(this,t),Fp.applyMatrix3(e),this.setXY(t,Fp.x,Fp.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.applyMatrix3(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.applyMatrix4(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.applyNormalMatrix(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)pi.fromBufferAttribute(this,t),pi.transformDirection(e),this.setXYZ(t,pi.x,pi.y,pi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Jt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ar(t,this.array)),t}setX(e,t){return this.normalized&&(t=Jt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ar(t,this.array)),t}setY(e,t){return this.normalized&&(t=Jt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ar(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Jt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ar(t,this.array)),t}setW(e,t){return this.normalized&&(t=Jt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Jt(t,this.array),i=Jt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Jt(t,this.array),i=Jt(i,this.array),r=Jt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Jt(t,this.array),i=Jt(i,this.array),r=Jt(r,this.array),s=Jt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class HD extends Wn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class zD extends Wn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class St extends Wn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let yW=0;const es=new Rt,ix=new bi,Bc=new re,Vr=new cr,Vh=new cr,Ai=new re;class rn extends Mc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yW++}),this.uuid=Or(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(CD(e)?zD:HD)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Qt).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return es.makeRotationFromQuaternion(e),this.applyMatrix4(es),this}rotateX(e){return es.makeRotationX(e),this.applyMatrix4(es),this}rotateY(e){return es.makeRotationY(e),this.applyMatrix4(es),this}rotateZ(e){return es.makeRotationZ(e),this.applyMatrix4(es),this}translate(e,t,i){return es.makeTranslation(e,t,i),this.applyMatrix4(es),this}scale(e,t,i){return es.makeScale(e,t,i),this.applyMatrix4(es),this}lookAt(e){return ix.lookAt(e),ix.updateMatrix(),this.applyMatrix4(ix.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bc).negate(),this.translate(Bc.x,Bc.y,Bc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new St(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Vr.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,Vr.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,Vr.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint(Vr.min),this.boundingBox.expandByPoint(Vr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new re,1/0);if(e){const i=this.boundingSphere.center;if(Vr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Vh.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Ai.addVectors(Vr.min,Vh.min),Vr.expandByPoint(Ai),Ai.addVectors(Vr.max,Vh.max),Vr.expandByPoint(Ai)):(Vr.expandByPoint(Vh.min),Vr.expandByPoint(Vh.max));Vr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ai.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ai));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let h=0,f=a.count;h<f;h++)Ai.fromBufferAttribute(a,h),c&&(Bc.fromBufferAttribute(e,h),Ai.add(Bc)),r=Math.max(r,i.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Wn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let Q=0;Q<i.count;Q++)a[Q]=new re,c[Q]=new re;const h=new re,f=new re,p=new re,v=new Fe,y=new Fe,x=new Fe,M=new re,S=new re;function b(Q,G,z){h.fromBufferAttribute(i,Q),f.fromBufferAttribute(i,G),p.fromBufferAttribute(i,z),v.fromBufferAttribute(s,Q),y.fromBufferAttribute(s,G),x.fromBufferAttribute(s,z),f.sub(h),p.sub(h),y.sub(v),x.sub(v);const oe=1/(y.x*x.y-x.x*y.y);!isFinite(oe)||(M.copy(f).multiplyScalar(x.y).addScaledVector(p,-y.y).multiplyScalar(oe),S.copy(p).multiplyScalar(y.x).addScaledVector(f,-x.x).multiplyScalar(oe),a[Q].add(M),a[G].add(M),a[z].add(M),c[Q].add(S),c[G].add(S),c[z].add(S))}let D=this.groups;0===D.length&&(D=[{start:0,count:e.count}]);for(let Q=0,G=D.length;Q<G;++Q){const z=D[Q],oe=z.start;for(let ge=oe,_e=oe+z.count;ge<_e;ge+=3)b(e.getX(ge+0),e.getX(ge+1),e.getX(ge+2))}const A=new re,T=new re,q=new re,$=new re;function K(Q){q.fromBufferAttribute(r,Q),$.copy(q);const G=a[Q];A.copy(G),A.sub(q.multiplyScalar(q.dot(G))).normalize(),T.crossVectors($,G);const oe=T.dot(c[Q])<0?-1:1;o.setXYZW(Q,A.x,A.y,A.z,oe)}for(let Q=0,G=D.length;Q<G;++Q){const z=D[Q],oe=z.start;for(let ge=oe,_e=oe+z.count;ge<_e;ge+=3)K(e.getX(ge+0)),K(e.getX(ge+1)),K(e.getX(ge+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Wn(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let v=0,y=i.count;v<y;v++)i.setXYZ(v,0,0,0);const r=new re,s=new re,o=new re,a=new re,c=new re,h=new re,f=new re,p=new re;if(e)for(let v=0,y=e.count;v<y;v+=3){const x=e.getX(v+0),M=e.getX(v+1),S=e.getX(v+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,M),o.fromBufferAttribute(t,S),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),a.fromBufferAttribute(i,x),c.fromBufferAttribute(i,M),h.fromBufferAttribute(i,S),a.add(f),c.add(f),h.add(f),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(M,c.x,c.y,c.z),i.setXYZ(S,h.x,h.y,h.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),o.fromBufferAttribute(t,v+2),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),i.setXYZ(v+0,f.x,f.y,f.z),i.setXYZ(v+1,f.x,f.y,f.z),i.setXYZ(v+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ai.fromBufferAttribute(e,t),Ai.normalize(),e.setXYZ(t,Ai.x,Ai.y,Ai.z)}toNonIndexed(){function e(a,c){const h=a.array,f=a.itemSize,p=a.normalized,v=new h.constructor(c.length*f);let y=0,x=0;for(let M=0,S=c.length;M<S;M++){y=a.isInterleavedBufferAttribute?c[M]*a.data.stride+a.offset:c[M]*f;for(let b=0;b<f;b++)v[x++]=h[y++]}return new Wn(v,f,p)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,i=this.index.array,r=this.attributes;for(const a in r){const h=e(r[a],i);t.setAttribute(a,h)}const s=this.morphAttributes;for(const a in s){const c=[],h=s[a];for(let f=0,p=h.length;f<p;f++){const y=e(h[f],i);c.push(y)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const h=o[a];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const h in c)void 0!==c[h]&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],f=[];for(let p=0,v=h.length;p<v;p++)f.push(h[p].toJSON(e.data));f.length>0&&(r[c]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const h in r)this.setAttribute(h,r[h].clone(t));const s=e.morphAttributes;for(const h in s){const f=[],p=s[h];for(let v=0,y=p.length;v<y;v++)f.push(p[v].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const p=o[h];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const GD=new Rt,qa=new Oh,Lp=new Gi,WD=new re,Np=new re,Op=new re,kp=new re,rx=new re,Bp=new re,jD=new re,Vp=new re;class Ti extends bi{constructor(e=new rn,t=new Qr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){Bp.set(0,0,0);for(let c=0,h=s.length;c<h;c++){const f=a[c],p=s[c];0!==f&&(rx.fromBufferAttribute(p,e),Bp.addScaledVector(o?rx:rx.sub(t),f))}t.add(Bp)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),Lp.copy(i.boundingSphere),Lp.applyMatrix4(s),qa.copy(e.ray).recast(e.near),(!1!==Lp.containsPoint(qa.origin)||!(null===qa.intersectSphere(Lp,WD)||qa.origin.distanceToSquared(WD)>(e.far-e.near)**2))&&(GD.copy(s).invert(),qa.copy(e.ray).applyMatrix4(GD),(null===i.boundingBox||!1!==qa.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,qa)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,v=s.groups,y=s.drawRange;if(null!==a)if(Array.isArray(o))for(let x=0,M=v.length;x<M;x++){const S=v[x],b=o[S.materialIndex];for(let T=Math.max(S.start,y.start),q=Math.min(a.count,Math.min(S.start+S.count,y.start+y.count));T<q;T+=3)r=Up(this,b,e,i,h,f,p,a.getX(T),a.getX(T+1),a.getX(T+2)),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=S.materialIndex,t.push(r))}else for(let S=Math.max(0,y.start),b=Math.min(a.count,y.start+y.count);S<b;S+=3)r=Up(this,o,e,i,h,f,p,a.getX(S),a.getX(S+1),a.getX(S+2)),r&&(r.faceIndex=Math.floor(S/3),t.push(r));else if(void 0!==c)if(Array.isArray(o))for(let x=0,M=v.length;x<M;x++){const S=v[x],b=o[S.materialIndex];for(let T=Math.max(S.start,y.start),q=Math.min(c.count,Math.min(S.start+S.count,y.start+y.count));T<q;T+=3)r=Up(this,b,e,i,h,f,p,T,T+1,T+2),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=S.materialIndex,t.push(r))}else for(let S=Math.max(0,y.start),b=Math.min(c.count,y.start+y.count);S<b;S+=3)r=Up(this,o,e,i,h,f,p,S,S+1,S+2),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}function Up(n,e,t,i,r,s,o,a,c,h){n.getVertexPosition(a,Np),n.getVertexPosition(c,Op),n.getVertexPosition(h,kp);const f=function _W(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===c)return null;Vp.copy(a),Vp.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(Vp);return h<t.near||h>t.far?null:{distance:h,point:Vp.clone(),object:n}}(n,e,t,i,Np,Op,kp,jD);if(f){const p=new re;Br.getBarycoord(jD,Np,Op,kp,p),r&&(f.uv=Br.getInterpolatedAttribute(r,a,c,h,p,new Fe)),s&&(f.uv1=Br.getInterpolatedAttribute(s,a,c,h,p,new Fe)),o&&(f.normal=Br.getInterpolatedAttribute(o,a,c,h,p,new re),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const v={a,b:c,c:h,normal:new re,materialIndex:0};Br.getNormal(Np,Op,kp,v.normal),f.face=v,f.barycoord=p}return f}class Vc extends rn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],h=[],f=[],p=[];let v=0,y=0;function x(M,S,b,D,A,T,q,$,K,Q,G){const z=T/K,oe=q/Q,ye=T/2,ge=q/2,_e=$/2,Te=K+1,xe=Q+1;let Ve=0,Me=0;const Ye=new re;for(let st=0;st<xe;st++){const dt=st*oe-ge;for(let Yt=0;Yt<Te;Yt++)Ye[M]=(Yt*z-ye)*D,Ye[S]=dt*A,Ye[b]=_e,h.push(Ye.x,Ye.y,Ye.z),Ye[M]=0,Ye[S]=0,Ye[b]=$>0?1:-1,f.push(Ye.x,Ye.y,Ye.z),p.push(Yt/K),p.push(1-st/Q),Ve+=1}for(let st=0;st<Q;st++)for(let dt=0;dt<K;dt++){const dn=v+dt+Te*(st+1),Ae=v+(dt+1)+Te*(st+1),ze=v+(dt+1)+Te*st;c.push(v+dt+Te*st,dn,ze),c.push(dn,Ae,ze),Me+=6}a.addGroup(y,Me,G),y+=Me,v+=Ve}x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(f,3)),this.setAttribute("uv",new St(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Uc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function ur(n){const e={};for(let t=0;t<n.length;t++){const i=Uc(n[t]);for(const r in i)e[r]=i[r]}return e}function $D(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:vn.workingColorSpace}const bW={clone:Uc,merge:ur};class Oo extends Ds{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Uc(e.uniforms),this.uniformsGroups=function xW(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class sx extends bi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt,this.coordinateSystem=Ao}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const da=new re,qD=new Fe,XD=new Fe;class Di extends sx{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ec*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ga*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ec*Math.atan(Math.tan(.5*Ga*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){da.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(da.x,da.y).multiplyScalar(-e/da.z),da.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(da.x,da.y).multiplyScalar(-e/da.z)}getViewSize(e,t){return this.getViewBounds(e,qD,XD),t.subVectors(XD,qD)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ga*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/h,r*=o.width/c,i*=o.height/h}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class EW extends bi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Di(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new Di(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new Di(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new Di(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new Di(-90,1,e,t);c.layers=this.layers,this.add(c);const h=new Di(-90,1,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(const h of t)this.remove(h);if(e===Ao)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,h,f]=this.children,p=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(p,v,y),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class Hp extends Jr{constructor(e,t,i,r,s,o,a,c,h,f){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,s,o,a,c,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wW extends Wa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new Hp([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Vc(5,5,5),s=new Oo({name:"CubemapFromEquirect",uniforms:Uc(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ti(r,s),a=t.minFilter;return t.minFilter===ws&&(t.minFilter=oi),new EW(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class YD extends bi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Po,this.environmentIntensity=1,this.environmentRotation=new Po,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class lx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=Or()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Or()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Or()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const hr=new re;class Xa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix4(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.applyNormalMatrix(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)hr.fromBufferAttribute(this,t),hr.transformDirection(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Jt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Jt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ar(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ar(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ar(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ar(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Jt(t,this.array),i=Jt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Jt(t,this.array),i=Jt(i,this.array),r=Jt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Jt(t,this.array),i=Jt(i,this.array),r=Jt(r,this.array),s=Jt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Wn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const tI=new re,nI=new Mn,iI=new Mn,TW=new re,rI=new Rt,$p=new re,ux=new Gi,sI=new Rt,hx=new Oh;class oI extends Ti{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=uD,this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new cr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,$p),this.boundingBox.expandByPoint($p)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Gi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,$p),this.boundingSphere.expandByPoint($p)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ux.copy(this.boundingSphere),ux.applyMatrix4(r),!1!==e.ray.intersectsSphere(ux)&&(sI.copy(r).invert(),hx.copy(e.ray).applyMatrix4(sI),(null===this.boundingBox||!1!==hx.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,hx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===uD?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;nI.fromBufferAttribute(r.attributes.skinIndex,e),iI.fromBufferAttribute(r.attributes.skinWeight,e),tI.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=iI.getComponent(s);if(0!==o){const a=nI.getComponent(s);rI.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(TW.copy(tI).applyMatrix4(rI),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class dx extends bi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ko extends Jr{constructor(e=null,t=1,i=1,r,s,o,a,c,h=wi,f=wi,p,v){super(null,o,a,c,h,f,r,s,p,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const aI=new Rt,DW=new Rt;class qp{constructor(e=[],t=[]){this.uuid=Or(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Rt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Rt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)aI.multiplyMatrices(e[s]?e[s].matrixWorld:DW,t[s]),aI.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new qp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ko(t,e,e,_r,Nr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new dx),this.bones.push(o),this.boneInverses.push((new Rt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class qc extends Wn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Xc=new Rt,lI=new Rt,Xp=[],cI=new cr,IW=new Rt,Gh=new Ti,Wh=new Gi;class uI extends Ti{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new qc(new Float32Array(16*i),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,IW)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new cr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xc),cI.copy(e.boundingBox).applyMatrix4(Xc),this.boundingBox.union(cI)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Gi),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Xc),Wh.copy(e.boundingSphere).applyMatrix4(Xc),this.boundingSphere.union(Wh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=e*(i.length+1)+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Gh.geometry=this.geometry,Gh.material=this.material,void 0!==Gh.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Wh.copy(this.boundingSphere),Wh.applyMatrix4(i),!1!==e.ray.intersectsSphere(Wh)))for(let s=0;s<r;s++){this.getMatrixAt(s,Xc),lI.multiplyMatrices(i,Xc),Gh.matrixWorld=lI,Gh.raycast(e,Xp);for(let o=0,a=Xp.length;o<a;o++){const c=Xp[o];c.instanceId=s,c.object=this,t.push(c)}Xp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new qc(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;null===this.morphTexture&&(this.morphTexture=new ko(new Float32Array(r*this.count),r,this.count,1028,Nr));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h<i.length;h++)o+=i[h];const c=r*e;s[c]=this.geometry.morphTargetsRelative?1:1-o,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const fx=new re,PW=new re,RW=new Qt;class Ya{constructor(e=new re(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=fx.subVectors(i,t).cross(PW.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(fx),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||RW.getNormalMatrix(e),r=this.coplanarPoint(fx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Za=new Gi,Yp=new re;class Zp{constructor(e=new Ya,t=new Ya,i=new Ya,r=new Ya,s=new Ya,o=new Ya){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ao){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],c=r[3],h=r[4],f=r[5],p=r[6],v=r[7],y=r[8],x=r[9],M=r[10],S=r[11],b=r[12],D=r[13],A=r[14],T=r[15];if(i[0].setComponents(c-s,v-h,S-y,T-b).normalize(),i[1].setComponents(c+s,v+h,S+y,T+b).normalize(),i[2].setComponents(c+o,v+f,S+x,T+D).normalize(),i[3].setComponents(c-o,v-f,S-x,T-D).normalize(),i[4].setComponents(c-a,v-p,S-M,T-A).normalize(),t===Ao)i[5].setComponents(c+a,v+p,S+M,T+A).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,p,M,A).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Za.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Za.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Za)}intersectsSprite(e){return Za.center.set(0,0,0),Za.radius=.7071067811865476,Za.applyMatrix4(e.matrixWorld),this.intersectsSphere(Za)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Yp.x=r.normal.x>0?e.max.x:e.min.x,Yp.y=r.normal.y>0?e.max.y:e.min.y,Yp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Yp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Sr extends Ds{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Qp=new re,em=new re,dI=new Rt,$h=new Oh,tm=new Gi,vx=new re,fI=new re;class Qa extends bi{constructor(e=new rn,t=new Sr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Qp.fromBufferAttribute(t,r-1),em.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Qp.distanceTo(em);e.setAttribute("lineDistance",new St(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),tm.copy(i.boundingSphere),tm.applyMatrix4(r),tm.radius+=s,!1===e.ray.intersectsSphere(tm))return;dI.copy(r).invert(),$h.copy(e.ray).applyMatrix4(dI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,h=this.isLineSegments?2:1,f=i.index,v=i.attributes.position;if(null!==f){const y=Math.max(0,o.start),x=Math.min(f.count,o.start+o.count);for(let M=y,S=x-1;M<S;M+=h){const b=f.getX(M),D=f.getX(M+1),A=nm(this,e,$h,c,b,D);A&&t.push(A)}if(this.isLineLoop){const M=f.getX(x-1),S=f.getX(y),b=nm(this,e,$h,c,M,S);b&&t.push(b)}}else{const y=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let M=y,S=x-1;M<S;M+=h){const b=nm(this,e,$h,c,M,M+1);b&&t.push(b)}if(this.isLineLoop){const M=nm(this,e,$h,c,x-1,y);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function nm(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(Qp.fromBufferAttribute(o,r),em.fromBufferAttribute(o,s),t.distanceSqToSegment(Qp,em,vx,fI)>i)return;vx.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(vx);return c<e.near||c>e.far?void 0:{distance:c,point:fI.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const pI=new re,mI=new re;class yx extends Qa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)pI.fromBufferAttribute(t,r),mI.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+pI.distanceTo(mI);e.setAttribute("lineDistance",new St(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gI extends Qa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _x extends Ds{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const vI=new Rt,xx=new Oh,im=new Gi,rm=new re;class yI extends bi{constructor(e=new rn,t=new _x){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),im.copy(i.boundingSphere),im.applyMatrix4(r),im.radius+=s,!1===e.ray.intersectsSphere(im))return;vI.copy(r).invert(),xx.copy(e.ray).applyMatrix4(vI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,h=i.index,p=i.attributes.position;if(null!==h)for(let x=Math.max(0,o.start),M=Math.min(h.count,o.start+o.count);x<M;x++){const S=h.getX(x);rm.fromBufferAttribute(p,S),_I(rm,S,c,r,e,t,this)}else for(let x=Math.max(0,o.start),M=Math.min(p.count,o.start+o.count);x<M;x++)rm.fromBufferAttribute(p,x),_I(rm,x,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function _I(n,e,t,i,r,s,o){const a=xx.distanceSqToPoint(n);if(a<t){const c=new re;xx.closestPointToPoint(n,c),c.applyMatrix4(i);const h=r.ray.origin.distanceTo(c);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class fa extends bi{constructor(){super(),this.isGroup=!0,this.type="Group"}}class xI extends Jr{constructor(e,t,i,r,s,o,a,c,h,f=yc){if(f!==yc&&f!==_c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&f===yc&&(i=sa),void 0===i&&f===_c&&(i=vc),super(null,r,s,o,a,c,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:wi,this.minFilter=void 0!==c?c:wi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Qh extends rn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),h=a+1,f=c+1,p=e/a,v=t/c,y=[],x=[],M=[],S=[];for(let b=0;b<f;b++){const D=b*v-o;for(let A=0;A<h;A++)x.push(A*p-s,-D,0),M.push(0,0,1),S.push(A/a),S.push(1-b/c)}for(let b=0;b<c;b++)for(let D=0;D<a;D++){const T=D+h*(b+1),q=D+1+h*(b+1),$=D+1+h*b;y.push(D+h*b,T,$),y.push(T,q,$)}this.setIndex(y),this.setAttribute("position",new St(x,3)),this.setAttribute("normal",new St(M,3)),this.setAttribute("uv",new St(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qh(e.width,e.height,e.widthSegments,e.heightSegments)}}class vm extends Ds{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Po,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Is extends vm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class NI extends Ds{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class OI extends Ds{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function nl(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function BI(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function Hx(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function zx(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class ed{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class P6 extends ed{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const h=.5*(i-t),f=this.valueSize;this._weightPrev=h/(t-a),this._weightNext=h/(c-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,h=c-a,f=this._offsetPrev,p=this._offsetNext,v=this._weightPrev,y=this._weightNext,x=(i-t)/(r-t),M=x*x,S=M*x,b=-v*S+2*v*M-v*x,D=(1+v)*S+(-1.5-2*v)*M+(-.5+v)*x+1,A=(-1-y)*S+(1.5+y)*M+.5*x,T=y*S-y*M;for(let q=0;q!==a;++q)s[q]=b*o[f+q]+D*o[h+q]+A*o[c+q]+T*o[p+q];return s}}class VI extends ed{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,h=c-a,f=(i-t)/(r-t),p=1-f;for(let v=0;v!==a;++v)s[v]=o[h+v]*p+o[c+v]*f;return s}}class R6 extends ed{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ks{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nl(t,this.TimeBufferType),this.values=nl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:nl(e.times,Array),values:nl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new R6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new P6(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ih:t=this.InterpolantFactoryMethodDiscrete;break;case Ph:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ih;case this.InterpolantFactoryMethodLinear:return Ph;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&function kI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const h=r[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const h=e[a];if(h!==e[a+1]&&(1!==a||h!==e[0]))if(r)c=!0;else{const p=a*i,v=p-i,y=p+i;for(let x=0;x!==i;++x){const M=t[p+x];if(M!==t[v+x]||M!==t[y+x]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const p=a*i,v=o*i;for(let y=0;y!==i;++y)t[v+y]=t[p+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,h=0;h!==i;++h)t[c+h]=t[a+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ks.prototype.TimeBufferType=Float32Array,Ks.prototype.ValueBufferType=Float32Array,Ks.prototype.DefaultInterpolation=Ph;class Kc extends Ks{constructor(e,t,i){super(e,t,i)}}Kc.prototype.ValueTypeName="bool",Kc.prototype.ValueBufferType=Array,Kc.prototype.DefaultInterpolation=Ih,Kc.prototype.InterpolantFactoryMethodLinear=void 0,Kc.prototype.InterpolantFactoryMethodSmooth=void 0;class UI extends Ks{}UI.prototype.ValueTypeName="color";class Jc extends Ks{}Jc.prototype.ValueTypeName="number";class F6 extends ed{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let h=e*a;for(let f=h+a;h!==f;h+=4)lr.slerpFlat(s,0,o,h-a,o,h,c);return s}}class Qc extends Ks{InterpolantFactoryMethodLinear(e){return new F6(this.times,this.values,this.getValueSize(),e)}}Qc.prototype.ValueTypeName="quaternion",Qc.prototype.InterpolantFactoryMethodSmooth=void 0;class eu extends Ks{constructor(e,t,i){super(e,t,i)}}eu.prototype.ValueTypeName="string",eu.prototype.ValueBufferType=Array,eu.prototype.DefaultInterpolation=Ih,eu.prototype.InterpolantFactoryMethodLinear=void 0,eu.prototype.InterpolantFactoryMethodSmooth=void 0;class tu extends Ks{}tu.prototype.ValueTypeName="vector";class td{constructor(e="",t=-1,i=[],r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Or(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(N6(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ks.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],h=[];c.push((a+s-1)%s,a,(a+1)%s),h.push(0,1,0);const f=BI(c);c=Hx(c,1,f),h=Hx(h,1,f),!r&&0===c[0]&&(c.push(s),h.push(h[0])),o.push(new Jc(".morphTargetInfluences["+t[a].name+"]",c,h).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const h=e[a],f=h.name.match(s);if(f&&f.length>1){const p=f[1];let v=r[p];v||(r[p]=v=[]),v.push(h)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,v,y,x,M){if(0!==y.length){const S=[],b=[];zx(y,S,b,x),0!==S.length&&M.push(new p(v,S,b))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const v=h[p].keys;if(v&&0!==v.length)if(v[0].morphTargets){const y={};let x;for(x=0;x<v.length;x++)if(v[x].morphTargets)for(let M=0;M<v[x].morphTargets.length;M++)y[v[x].morphTargets[M]]=-1;for(const M in y){const S=[],b=[];for(let D=0;D!==v[x].morphTargets.length;++D){const A=v[x];S.push(A.time),b.push(A.morphTarget===M?1:0)}r.push(new Jc(".morphTargetInfluence["+M+"]",S,b))}c=y.length*o}else{const y=".bones["+t[p].name+"]";i(tu,y+".position",v,"pos",r),i(Qc,y+".quaternion",v,"rot",r),i(tu,y+".scale",v,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function N6(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function L6(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jc;case"vector":case"vector2":case"vector3":case"vector4":return tu;case"color":return UI;case"quaternion":return Qc;case"bool":case"boolean":return Kc;case"string":return eu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];zx(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const pa={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class HI{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,!1===s&&void 0!==r.onStart&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,void 0!==r.onProgress&&r.onProgress(f,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(f){void 0!==r.onError&&r.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,p){return h.push(f,p),this},this.removeHandler=function(f){const p=h.indexOf(f);return-1!==p&&h.splice(p,2),this},this.getHandler=function(f){for(let p=0,v=h.length;p<v;p+=2){const y=h[p],x=h[p+1];if(y.global&&(y.lastIndex=0),y.test(f))return x}return null}}}const O6=new HI;let nd=(()=>{class n{constructor(t){this.manager=void 0!==t?t:O6,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const Vo={};class k6 extends Error{constructor(e,t){super(e),this.response=t}}class Js extends nd{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=pa.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Vo[e])return void Vo[e].push({onLoad:t,onProgress:i,onError:r});Vo[e]=[],Vo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(h=>{if(200===h.status||0===h.status){if(0===h.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===h.body||void 0===h.body.getReader)return h;const f=Vo[e],p=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),y=v?parseInt(v):0,x=0!==y;let M=0;const S=new ReadableStream({start(b){!function D(){p.read().then(({done:A,value:T})=>{if(A)b.close();else{M+=T.byteLength;const q=new ProgressEvent("progress",{lengthComputable:x,loaded:M,total:y});for(let $=0,K=f.length;$<K;$++){const Q=f[$];Q.onProgress&&Q.onProgress(q)}b.enqueue(T),D()}},A=>{b.error(A)})}()}});return new Response(S)}throw new k6(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>(new DOMParser).parseFromString(f,a));case"json":return h.json();default:if(void 0===a)return h.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),v=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(v);return h.arrayBuffer().then(x=>y.decode(x))}}}).then(h=>{pa.add(e,h);const f=Vo[e];delete Vo[e];for(let p=0,v=f.length;p<v;p++){const y=f[p];y.onLoad&&y.onLoad(h)}}).catch(h=>{const f=Vo[e];if(void 0===f)throw this.manager.itemError(e),h;delete Vo[e];for(let p=0,v=f.length;p<v;p++){const y=f[p];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ym extends nd{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=pa.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Fh("img");function c(){f(),pa.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(p){f(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",c,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",h,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class B6 extends nd{constructor(e){super(e)}load(e,t,i,r){const s=new Jr,o=new ym(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class Gx extends bi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ze(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const Wx=new Rt,zI=new re,GI=new re;class jx{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fe(512,512),this.map=null,this.mapPass=null,this.matrix=new Rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zp,this._frameExtents=new Fe(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;zI.setFromMatrixPosition(e.matrixWorld),t.position.copy(zI),GI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(GI),t.updateMatrixWorld(),Wx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Wx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class U6 extends jx{constructor(){super(new Di(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ec*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class WI extends Gx{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bi.DEFAULT_UP),this.updateMatrix(),this.target=new bi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new U6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jI=new Rt,id=new re,$x=new re;class H6 extends jx{constructor(){super(new Di(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Fe(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),id.setFromMatrixPosition(e.matrixWorld),i.position.copy(id),$x.copy(i.position),$x.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt($x),i.updateMatrixWorld(),r.makeTranslation(-id.x,-id.y,-id.z),jI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jI)}}class $I extends Gx{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new H6}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _m extends sx{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,a-=f*this.view.offsetY,c=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class z6 extends jx{constructor(){super(new _m(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qI extends Gx{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bi.DEFAULT_UP),this.updateMatrix(),this.target=new bi,this.shadow=new z6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class il{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Z6 extends nd{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=pa.get(e);if(void 0!==o)return s.manager.itemStart(e),o.then?void o.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)}):(setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const c=fetch(e,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return pa.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),pa.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});pa.add(e,c),s.manager.itemStart(e)}}class K6 extends Di{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}const Xx="\\[\\]\\.:\\/",nj=new RegExp("["+Xx+"]","g"),Yx="[^"+Xx+"]",ij="[^"+Xx.replace("\\.","")+"]",lj=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Yx)+/(WCOD+)?/.source.replace("WCOD",ij)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Yx)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Yx)+"$"),cj=["material","materials","bones","map"];class uj{constructor(e,t,i){const r=i||Un.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Un=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(nj,"")}static parseTrackName(t){const i=lj.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==cj.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const h=r(c.children);if(h)return h}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let f=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let p=0;p<t.length;p++)if(t[p].name===f){f=p;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==f){if(void 0===t[f])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[f]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(h=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=uj,n})();function Qx(n,e,t,i){const r=function yj(n){switch(n){case Co:case 1010:return{byteLength:1,components:1};case Th:case 1011:case Dh:return{byteLength:2,components:1};case 1017:case 1018:return{byteLength:2,components:4};case sa:case 1013:case Nr:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case 1021:case 1024:return n*e;case 1025:return n*e*2;case 1028:case 1029:return n*e/r.components*r.byteLength;case 1030:case 1031:return n*e*2/r.components*r.byteLength;case 1022:return n*e*3/r.components*r.byteLength;case _r:case 1033:return n*e*4/r.components*r.byteLength;case gp:case vp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case yp:case _p:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case 35841:case 35843:return Math.max(n,16)*Math.max(e,8)/4;case 35840:case 35842:return Math.max(n,8)*Math.max(e,8)/2;case 36196:case 37492:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case 37496:case 37808:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case 37809:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case 37810:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case 37811:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case 37812:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case 37813:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case 37814:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case 37815:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case 37816:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case 37817:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case 37818:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case 37819:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case 37820:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case 37821:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case xp:case 36494:case 36495:return Math.ceil(n/4)*Math.ceil(e/4)*16;case 36283:case 36284:return Math.ceil(n/4)*Math.ceil(e/4)*8;case 36285:case 36286:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function mP(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(h){return void t(h)}a.done?e(c):Promise.resolve(c).then(i,r)}function gP(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){mP(s,i,r,o,a,"next",c)}function a(c){mP(s,i,r,o,a,"throw",c)}o(void 0)})}}function vP(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function _j(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))},update:function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const f=e.get(a);return void((!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const h=e.get(a);if(void 0===h)e.set(a,function t(a,c){const h=a.array,f=a.usage,p=h.byteLength,v=n.createBuffer();let y;if(n.bindBuffer(c,v),n.bufferData(c,h,f),a.onUploadCallback(),h instanceof Float32Array)y=n.FLOAT;else if(h instanceof Uint16Array)y=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=n.SHORT;else if(h instanceof Uint32Array)y=n.UNSIGNED_INT;else if(h instanceof Int32Array)y=n.INT;else if(h instanceof Int8Array)y=n.BYTE;else if(h instanceof Uint8Array)y=n.UNSIGNED_BYTE;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);y=n.UNSIGNED_BYTE}return{buffer:v,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:a.version,size:p}}(a,c));else if(h.version<a.version){if(h.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,c,h){const f=c.array,p=c.updateRanges;if(n.bindBuffer(h,a),0===p.length)n.bufferSubData(h,0,f);else{p.sort((y,x)=>y.start-x.start);let v=0;for(let y=1;y<p.length;y++){const x=p[v],M=p[y];M.start<=x.start+x.count+1?x.count=Math.max(x.count,M.start+M.count-x.start):(++v,p[v]=M)}p.length=v+1;for(let y=0,x=p.length;y<x;y++){const M=p[y];n.bufferSubData(h,M.start*f.BYTES_PER_ELEMENT,f,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()})(h.buffer,a,c),h.version=a.version}}}}Un.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Un.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Un.prototype.GetterByBindingType=[Un.prototype._getValue_direct,Un.prototype._getValue_array,Un.prototype._getValue_arrayElement,Un.prototype._getValue_toArray],Un.prototype.SetterByBindingTypeAndVersioning=[[Un.prototype._setValue_direct,Un.prototype._setValue_direct_setNeedsUpdate,Un.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Un.prototype._setValue_array,Un.prototype._setValue_array_setNeedsUpdate,Un.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Un.prototype._setValue_arrayElement,Un.prototype._setValue_arrayElement_setNeedsUpdate,Un.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Un.prototype._setValue_fromArray,Un.prototype._setValue_fromArray_setNeedsUpdate,Un.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"171"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="171");const sn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ke={common:{diffuse:{value:new Ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new Fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new Ze(16777215)},opacity:{value:1},center:{value:new Fe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},Qs={basic:{uniforms:ur([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:sn.meshbasic_vert,fragmentShader:sn.meshbasic_frag},lambert:{uniforms:ur([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new Ze(0)}}]),vertexShader:sn.meshlambert_vert,fragmentShader:sn.meshlambert_frag},phong:{uniforms:ur([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new Ze(0)},specular:{value:new Ze(1118481)},shininess:{value:30}}]),vertexShader:sn.meshphong_vert,fragmentShader:sn.meshphong_frag},standard:{uniforms:ur([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new Ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag},toon:{uniforms:ur([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new Ze(0)}}]),vertexShader:sn.meshtoon_vert,fragmentShader:sn.meshtoon_frag},matcap:{uniforms:ur([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:sn.meshmatcap_vert,fragmentShader:sn.meshmatcap_frag},points:{uniforms:ur([Ke.points,Ke.fog]),vertexShader:sn.points_vert,fragmentShader:sn.points_frag},dashed:{uniforms:ur([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sn.linedashed_vert,fragmentShader:sn.linedashed_frag},depth:{uniforms:ur([Ke.common,Ke.displacementmap]),vertexShader:sn.depth_vert,fragmentShader:sn.depth_frag},normal:{uniforms:ur([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:sn.meshnormal_vert,fragmentShader:sn.meshnormal_frag},sprite:{uniforms:ur([Ke.sprite,Ke.fog]),vertexShader:sn.sprite_vert,fragmentShader:sn.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:sn.background_vert,fragmentShader:sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:sn.backgroundCube_vert,fragmentShader:sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sn.cube_vert,fragmentShader:sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sn.equirect_vert,fragmentShader:sn.equirect_frag},distanceRGBA:{uniforms:ur([Ke.common,Ke.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sn.distanceRGBA_vert,fragmentShader:sn.distanceRGBA_frag},shadow:{uniforms:ur([Ke.lights,Ke.fog,{color:{value:new Ze(0)},opacity:{value:1}}]),vertexShader:sn.shadow_vert,fragmentShader:sn.shadow_frag}};Qs.physical={uniforms:ur([Qs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new Fe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new Ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new Fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new Ze(0)},specularColor:{value:new Ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new Fe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag};const Am={r:0,b:0,g:0},cl=new Po,_9=new Rt;function x9(n,e,t,i,r,s,o){const a=new Ze(0);let h,f,c=!0===s?0:1,p=null,v=0,y=null;function x(A){let T=!0===A.isScene?A.background:null;return T&&T.isTexture&&(T=(A.backgroundBlurriness>0?t:e).get(T)),T}function b(A,T){A.getRGB(Am,$D(n)),i.buffers.color.setClear(Am.r,Am.g,Am.b,T,o)}return{getClearColor:function(){return a},setClearColor:function(A,T=1){a.set(A),c=T,b(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(A){c=A,b(a,c)},render:function M(A){let T=!1;const q=x(A);null===q?b(a,c):q&&q.isColor&&(b(q,1),T=!0);const $=n.xr.getEnvironmentBlendMode();"additive"===$?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===$&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||T)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function S(A,T){const q=x(T);q&&(q.isCubeTexture||306===q.mapping)?(void 0===f&&(f=new Ti(new Vc(1,1,1),new Oo({name:"BackgroundCubeMaterial",uniforms:Uc(Qs.backgroundCube.uniforms),vertexShader:Qs.backgroundCube.vertexShader,fragmentShader:Qs.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function($,K,Q){this.matrixWorld.copyPosition(Q.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),cl.copy(T.backgroundRotation),cl.x*=-1,cl.y*=-1,cl.z*=-1,q.isCubeTexture&&!1===q.isRenderTargetTexture&&(cl.y*=-1,cl.z*=-1),f.material.uniforms.envMap.value=q,f.material.uniforms.flipEnvMap.value=q.isCubeTexture&&!1===q.isRenderTargetTexture?-1:1,f.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(_9.makeRotationFromEuler(cl)),f.material.toneMapped=vn.getTransfer(q.colorSpace)!==Fn,(p!==q||v!==q.version||y!==n.toneMapping)&&(f.material.needsUpdate=!0,p=q,v=q.version,y=n.toneMapping),f.layers.enableAll(),A.unshift(f,f.geometry,f.material,0,0,null)):q&&q.isTexture&&(void 0===h&&(h=new Ti(new Qh(2,2),new Oo({name:"BackgroundMaterial",uniforms:Uc(Qs.background.uniforms),vertexShader:Qs.background.vertexShader,fragmentShader:Qs.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=q,h.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,h.material.toneMapped=vn.getTransfer(q.colorSpace)!==Fn,!0===q.matrixAutoUpdate&&q.updateMatrix(),h.material.uniforms.uvTransform.value.copy(q.matrix),(p!==q||v!==q.version||y!==n.toneMapping)&&(h.material.needsUpdate=!0,p=q,v=q.version,y=n.toneMapping),h.layers.enableAll(),A.unshift(h,h.geometry,h.material,0,0,null))},dispose:function D(){void 0!==f&&(f.geometry.dispose(),f.material.dispose()),void 0!==h&&(h.geometry.dispose(),h.material.dispose())}}}function b9(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null);let s=r,o=!1;function h(z){return n.bindVertexArray(z)}function f(z){return n.deleteVertexArray(z)}function v(z){const oe=[],ye=[],ge=[];for(let _e=0;_e<t;_e++)oe[_e]=0,ye[_e]=0,ge[_e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:oe,enabledAttributes:ye,attributeDivisors:ge,object:z,attributes:{},index:null}}function M(){const z=s.newAttributes;for(let oe=0,ye=z.length;oe<ye;oe++)z[oe]=0}function S(z){b(z,0)}function b(z,oe){const ge=s.enabledAttributes,_e=s.attributeDivisors;s.newAttributes[z]=1,0===ge[z]&&(n.enableVertexAttribArray(z),ge[z]=1),_e[z]!==oe&&(n.vertexAttribDivisor(z,oe),_e[z]=oe)}function D(){const z=s.newAttributes,oe=s.enabledAttributes;for(let ye=0,ge=oe.length;ye<ge;ye++)oe[ye]!==z[ye]&&(n.disableVertexAttribArray(ye),oe[ye]=0)}function A(z,oe,ye,ge,_e,Te,xe){!0===xe?n.vertexAttribIPointer(z,oe,ye,_e,Te):n.vertexAttribPointer(z,oe,ye,ge,_e,Te)}function Q(){G(),o=!0,s!==r&&(s=r,h(s.object))}function G(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(z,oe,ye,ge,_e){let Te=!1;const xe=function p(z,oe,ye){const ge=!0===ye.wireframe;let _e=i[z.id];void 0===_e&&(_e={},i[z.id]=_e);let Te=_e[oe.id];void 0===Te&&(Te={},_e[oe.id]=Te);let xe=Te[ge];return void 0===xe&&(xe=v(function c(){return n.createVertexArray()}()),Te[ge]=xe),xe}(ge,ye,oe);s!==xe&&(s=xe,h(s.object)),Te=function y(z,oe,ye,ge){const _e=s.attributes,Te=oe.attributes;let xe=0;const Ve=ye.getAttributes();for(const Me in Ve)if(Ve[Me].location>=0){const st=_e[Me];let dt=Te[Me];if(void 0===dt&&("instanceMatrix"===Me&&z.instanceMatrix&&(dt=z.instanceMatrix),"instanceColor"===Me&&z.instanceColor&&(dt=z.instanceColor)),void 0===st||st.attribute!==dt||dt&&st.data!==dt.data)return!0;xe++}return s.attributesNum!==xe||s.index!==ge}(z,ge,ye,_e),Te&&function x(z,oe,ye,ge){const _e={},Te=oe.attributes;let xe=0;const Ve=ye.getAttributes();for(const Me in Ve)if(Ve[Me].location>=0){let st=Te[Me];void 0===st&&("instanceMatrix"===Me&&z.instanceMatrix&&(st=z.instanceMatrix),"instanceColor"===Me&&z.instanceColor&&(st=z.instanceColor));const dt={};dt.attribute=st,st&&st.data&&(dt.data=st.data),_e[Me]=dt,xe++}s.attributes=_e,s.attributesNum=xe,s.index=ge}(z,ge,ye,_e),null!==_e&&e.update(_e,n.ELEMENT_ARRAY_BUFFER),(Te||o)&&(o=!1,function T(z,oe,ye,ge){M();const _e=ge.attributes,Te=ye.getAttributes(),xe=oe.defaultAttributeValues;for(const Ve in Te){const Me=Te[Ve];if(Me.location>=0){let Ye=_e[Ve];if(void 0===Ye&&("instanceMatrix"===Ve&&z.instanceMatrix&&(Ye=z.instanceMatrix),"instanceColor"===Ve&&z.instanceColor&&(Ye=z.instanceColor)),void 0!==Ye){const st=Ye.normalized,dt=Ye.itemSize,Yt=e.get(Ye);if(void 0===Yt)continue;const dn=Yt.buffer,Ae=Yt.type,ze=Yt.bytesPerElement,ot=Ae===n.INT||Ae===n.UNSIGNED_INT||1013===Ye.gpuType;if(Ye.isInterleavedBufferAttribute){const je=Ye.data,Et=je.stride,Ht=Ye.offset;if(je.isInstancedInterleavedBuffer){for(let At=0;At<Me.locationSize;At++)b(Me.location+At,je.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===ge._maxInstanceCount&&(ge._maxInstanceCount=je.meshPerAttribute*je.count)}else for(let At=0;At<Me.locationSize;At++)S(Me.location+At);n.bindBuffer(n.ARRAY_BUFFER,dn);for(let At=0;At<Me.locationSize;At++)A(Me.location+At,dt/Me.locationSize,Ae,st,Et*ze,(Ht+dt/Me.locationSize*At)*ze,ot)}else{if(Ye.isInstancedBufferAttribute){for(let je=0;je<Me.locationSize;je++)b(Me.location+je,Ye.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===ge._maxInstanceCount&&(ge._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let je=0;je<Me.locationSize;je++)S(Me.location+je);n.bindBuffer(n.ARRAY_BUFFER,dn);for(let je=0;je<Me.locationSize;je++)A(Me.location+je,dt/Me.locationSize,Ae,st,dt*ze,dt/Me.locationSize*je*ze,ot)}}else if(void 0!==xe){const st=xe[Ve];if(void 0!==st)switch(st.length){case 2:n.vertexAttrib2fv(Me.location,st);break;case 3:n.vertexAttrib3fv(Me.location,st);break;case 4:n.vertexAttrib4fv(Me.location,st);break;default:n.vertexAttrib1fv(Me.location,st)}}}}D()}(z,oe,ye,ge),null!==_e&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(_e).buffer))},reset:Q,resetDefaultState:G,dispose:function q(){Q();for(const z in i){const oe=i[z];for(const ye in oe){const ge=oe[ye];for(const _e in ge)f(ge[_e].object),delete ge[_e];delete oe[ye]}delete i[z]}},releaseStatesOfGeometry:function $(z){if(void 0===i[z.id])return;const oe=i[z.id];for(const ye in oe){const ge=oe[ye];for(const _e in ge)f(ge[_e].object),delete ge[_e];delete oe[ye]}delete i[z.id]},releaseStatesOfProgram:function K(z){for(const oe in i){const ye=i[oe];if(void 0===ye[z.id])continue;const ge=ye[z.id];for(const _e in ge)f(ge[_e].object),delete ge[_e];delete ye[z.id]}},initAttributes:M,enableAttribute:S,disableUnusedAttributes:D}}function S9(n,e,t){let i;function o(h,f,p){0!==p&&(n.drawArraysInstanced(i,h,f,p),t.update(f,i,p))}this.setMode=function r(h){i=h},this.render=function s(h,f){n.drawArrays(i,h,f),t.update(f,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(h,f,p){if(0===p)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,f,0,p);let y=0;for(let x=0;x<p;x++)y+=f[x];t.update(y,i,1)},this.renderMultiDrawInstances=function c(h,f,p,v){if(0===p)return;const y=e.get("WEBGL_multi_draw");if(null===y)for(let x=0;x<h.length;x++)o(h[x],f[x],v[x]);else{y.multiDrawArraysInstancedWEBGL(i,h,0,f,0,v,0,p);let x=0;for(let M=0;M<p;M++)x+=f[M]*v[M];t.update(x,i,1)}}}function M9(n,e,t,i){let r;function c(K){if("highp"===K){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";K="mediump"}return"mediump"===K&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=void 0!==t.precision?t.precision:"highp";const f=c(h);f!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",f,"instead."),h=f);const p=!0===t.logarithmicDepthBuffer,v=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const K=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(K.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,textureFormatReadable:function o(K){return!(K!==_r&&i.convert(K)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(K){const Q=K===Dh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(K!==Co&&i.convert(K)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&K!==Nr&&!Q)},precision:h,logarithmicDepthBuffer:p,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:x,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:x>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function E9(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Ya,a=new Qt,c={value:null,needsUpdate:!1};function f(p,v,y,x){const M=null!==p?p.length:0;let S=null;if(0!==M){if(S=c.value,!0!==x||null===S){const b=y+4*M,D=v.matrixWorldInverse;a.getNormalMatrix(D),(null===S||S.length<b)&&(S=new Float32Array(b));for(let A=0,T=y;A!==M;++A,T+=4)o.copy(p[A]).applyMatrix4(D,a),o.normal.toArray(S,T),S[T+3]=o.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,S}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,v){const y=0!==p.length||v||0!==i||r;return r=v,i=p.length,y},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,v){t=f(p,v,0)},this.setState=function(p,v,y){const x=p.clippingPlanes,M=p.clipIntersection,S=p.clipShadows,b=n.get(p);if(!r||null===x||0===x.length||s&&!S)s?f(null):function h(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const D=s?0:i,A=4*D;let T=b.clippingState||null;c.value=T,T=f(x,v,A,y);for(let q=0;q!==A;++q)T[q]=t[q];b.clippingState=T,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=D}}}function w9(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const h=new wW(c.height);return h.fromEquirectangularTexture(n,o),e.set(o,h),o.addEventListener("dispose",r),t(h.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}const yP=[.125,.215,.35,.446,.526,.582],eb=new _m,_P=new Ze;let tb=null,nb=0,ib=0,rb=!1;const hl=(1+Math.sqrt(5))/2,iu=1/hl,xP=[new re(-hl,iu,0),new re(hl,iu,0),new re(-iu,0,hl),new re(iu,0,hl),new re(0,hl,-iu),new re(0,hl,iu),new re(-1,1,-1),new re(1,1,-1),new re(-1,1,1),new re(1,1,1)];class bP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){tb=this._renderer.getRenderTarget(),nb=this._renderer.getActiveCubeFace(),ib=this._renderer.getActiveMipmapLevel(),rb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=EP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=MP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(tb,nb,ib),this._renderer.xr.enabled=rb,e.scissorTest=!1,Tm(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),tb=this._renderer.getRenderTarget(),nb=this._renderer.getActiveCubeFace(),ib=this._renderer.getActiveMipmapLevel(),rb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:Dh,format:_r,colorSpace:or,depthBuffer:!1},r=SP(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=SP(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function C9(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+yP.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=yP[o-n+4-1]:0===o&&(c=0),i.push(c);const h=1/(a-2),f=-h,p=1+h,v=[f,f,p,f,p,p,f,f,p,p,f,p],y=6,x=6,M=3,S=2,b=1,D=new Float32Array(M*x*y),A=new Float32Array(S*x*y),T=new Float32Array(b*x*y);for(let $=0;$<y;$++){const K=$%3*2/3-1,Q=$>2?0:-1;D.set([K,Q,0,K+2/3,Q,0,K+2/3,Q+1,0,K,Q,0,K+2/3,Q+1,0,K,Q+1,0],M*x*$),A.set(v,S*x*$),T.set([$,$,$,$,$,$],b*x*$)}const q=new rn;q.setAttribute("position",new Wn(D,M)),q.setAttribute("uv",new Wn(A,S)),q.setAttribute("faceIndex",new Wn(T,b)),e.push(q),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function A9(n,e,t){const i=new Float32Array(20),r=new re(0,1,0);return new Oo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ti(this._lodPlanes[0],e);this._renderer.compile(t,eb)}_sceneToCubeUV(e,t,i,r){const a=new Di(90,1,t,i),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,v=f.toneMapping;f.getClearColor(_P),f.toneMapping=0,f.autoClear=!1;const y=new Qr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),x=new Ti(new Vc,y);let M=!1;const S=e.background;S?S.isColor&&(y.color.copy(S),e.background=null,M=!0):(y.color.copy(_P),M=!0);for(let b=0;b<6;b++){const D=b%3;0===D?(a.up.set(0,c[b],0),a.lookAt(h[b],0,0)):1===D?(a.up.set(0,0,c[b]),a.lookAt(0,h[b],0)):(a.up.set(0,c[b],0),a.lookAt(0,0,h[b]));const A=this._cubeSize;Tm(r,D*A,b>2?A:0,A,A),f.setRenderTarget(r),M&&f.render(x,a),f.render(e,a)}x.geometry.dispose(),x.material.dispose(),f.toneMapping=v,f.autoClear=p,e.background=S}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=EP()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=MP());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ti(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;Tm(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,eb)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,xP[(r-s-1)%xP.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,h=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const p=new Ti(this._lodPlanes[r],h),v=h.uniforms,y=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*y):2*Math.PI/39,M=s/x,S=isFinite(s)?1+Math.floor(3*M):20;S>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to 20`);const b=[];let D=0;for(let K=0;K<20;++K){const Q=K/M,G=Math.exp(-Q*Q/2);b.push(G),0===K?D+=G:K<S&&(D+=2*G)}for(let K=0;K<b.length;K++)b[K]=b[K]/D;v.envMap.value=e.texture,v.samples.value=S,v.weights.value=b,v.latitudinal.value="latitudinal"===o,a&&(v.poleAxis.value=a);const{_lodMax:A}=this;v.dTheta.value=x,v.mipInt.value=A-i;const T=this._sizeLods[r];Tm(t,3*T*(r>A-4?r-A+4:0),4*(this._cubeSize-T),3*T,2*T),c.setRenderTarget(t),c.render(p,eb)}}function SP(n,e,t){const i=new Wa(n,e,t);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Tm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function MP(){return new Oo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function EP(){return new Oo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function T9(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const h=e.get(c);void 0!==h&&(e.delete(c),h.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,h=303===c||304===c,f=301===c||302===c;if(h||f){let p=e.get(a);const v=void 0!==p?p.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==v)return null===t&&(t=new bP(n)),p=h?t.fromEquirectangular(a,p):t.fromCubemap(a,p),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),p.texture;if(void 0!==p)return p.texture;{const y=a.image;return h&&y&&y.height>0||f&&y&&function r(a){let c=0;for(let f=0;f<6;f++)void 0!==a[f]&&c++;return 6===c}(y)?(null===t&&(t=new bP(n)),p=h?t.fromEquirectangular(a):t.fromCubemap(a),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),a.addEventListener("dispose",s),p.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function D9(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&Cc("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function I9(n,e,t,i){const r={},s=new WeakMap;function o(p){const v=p.target;null!==v.index&&e.remove(v.index);for(const x in v.attributes)e.remove(v.attributes[x]);v.removeEventListener("dispose",o),delete r[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),i.releaseStatesOfGeometry(v),!0===v.isInstancedBufferGeometry&&delete v._maxInstanceCount,t.memory.geometries--}function h(p){const v=[],y=p.index,x=p.attributes.position;let M=0;if(null!==y){const D=y.array;M=y.version;for(let A=0,T=D.length;A<T;A+=3){const q=D[A+0],$=D[A+1],K=D[A+2];v.push(q,$,$,K,K,q)}}else{if(void 0===x)return;M=x.version;for(let A=0,T=x.array.length/3-1;A<T;A+=3){const q=A+0,$=A+1,K=A+2;v.push(q,$,$,K,K,q)}}const S=new(CD(v)?zD:HD)(v,1);S.version=M;const b=s.get(p);b&&e.remove(b),s.set(p,S)}return{get:function a(p,v){return!0===r[v.id]||(v.addEventListener("dispose",o),r[v.id]=!0,t.memory.geometries++),v},update:function c(p){const v=p.attributes;for(const y in v)e.update(v[y],n.ARRAY_BUFFER)},getWireframeAttribute:function f(p){const v=s.get(p);if(v){const y=p.index;null!==y&&v.version<y.version&&h(p)}else h(p);return s.get(p)}}}function P9(n,e,t){let i,s,o;function h(v,y,x){0!==x&&(n.drawElementsInstanced(i,y,s,v*o,x),t.update(y,i,x))}this.setMode=function r(v){i=v},this.setIndex=function a(v){s=v.type,o=v.bytesPerElement},this.render=function c(v,y){n.drawElements(i,y,s,v*o),t.update(y,i,1)},this.renderInstances=h,this.renderMultiDraw=function f(v,y,x){if(0===x)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,s,v,0,x);let S=0;for(let b=0;b<x;b++)S+=y[b];t.update(S,i,1)},this.renderMultiDrawInstances=function p(v,y,x,M){if(0===x)return;const S=e.get("WEBGL_multi_draw");if(null===S)for(let b=0;b<v.length;b++)h(v[b]/o,y[b],M[b]);else{S.multiDrawElementsInstancedWEBGL(i,y,0,s,v,0,M,0,x);let b=0;for(let D=0;D<x;D++)b+=y[D]*M[D];t.update(b,i,1)}}}function R9(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function F9(n,e,t){const i=new WeakMap,r=new Mn;return{update:function s(o,a,c){const h=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,p=void 0!==f?f.length:0;let v=i.get(a);if(void 0===v||v.count!==p){let G=function(){K.dispose(),i.delete(a),a.removeEventListener("dispose",G)};void 0!==v&&v.texture.dispose();const y=void 0!==a.morphAttributes.position,x=void 0!==a.morphAttributes.normal,M=void 0!==a.morphAttributes.color,S=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],D=a.morphAttributes.color||[];let A=0;!0===y&&(A=1),!0===x&&(A=2),!0===M&&(A=3);let T=a.attributes.position.count*A,q=1;T>e.maxTextureSize&&(q=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const $=new Float32Array(T*q*4*p),K=new U_($,T,q,p);K.type=Nr,K.needsUpdate=!0;const Q=4*A;for(let z=0;z<p;z++){const oe=S[z],ye=b[z],ge=D[z],_e=T*q*4*z;for(let Te=0;Te<oe.count;Te++){const xe=Te*Q;!0===y&&(r.fromBufferAttribute(oe,Te),$[_e+xe+0]=r.x,$[_e+xe+1]=r.y,$[_e+xe+2]=r.z,$[_e+xe+3]=0),!0===x&&(r.fromBufferAttribute(ye,Te),$[_e+xe+4]=r.x,$[_e+xe+5]=r.y,$[_e+xe+6]=r.z,$[_e+xe+7]=0),!0===M&&(r.fromBufferAttribute(ge,Te),$[_e+xe+8]=r.x,$[_e+xe+9]=r.y,$[_e+xe+10]=r.z,$[_e+xe+11]=4===ge.itemSize?r.w:1)}}v={count:p,texture:K,size:new Fe(T,q)},i.set(a,v),a.addEventListener("dispose",G)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let y=0;for(let M=0;M<h.length;M++)y+=h[M];const x=a.morphTargetsRelative?1:1-y;c.getUniforms().setValue(n,"morphTargetBaseInfluence",x),c.getUniforms().setValue(n,"morphTargetInfluences",h)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}}}function L9(n,e,t,i){let r=new WeakMap;function a(c){const h=c.target;h.removeEventListener("dispose",a),t.remove(h.instanceMatrix),null!==h.instanceColor&&t.remove(h.instanceColor)}return{update:function s(c){const h=i.render.frame,p=e.get(c,c.geometry);if(r.get(p)!==h&&(e.update(p),r.set(p,h)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==h&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,h))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==h&&(v.update(),r.set(v,h))}return p},dispose:function o(){r=new WeakMap}}}const wP=new Jr,CP=new xI(1,1),AP=new U_,TP=new ID,DP=new Hp,IP=[],PP=[],RP=new Float32Array(16),FP=new Float32Array(9),LP=new Float32Array(4);function ru(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=IP[r];if(void 0===s&&(s=new Float32Array(r),IP[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Si(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Mi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Dm(n,e){let t=PP[e];void 0===t&&(t=new Int32Array(e),PP[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function N9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function O9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2fv(this.addr,e),Mi(t,e)}}function k9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Si(t,e))return;n.uniform3fv(this.addr,e),Mi(t,e)}}function B9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4fv(this.addr,e),Mi(t,e)}}function V9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Si(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Mi(t,e)}else{if(Si(t,i))return;LP.set(i),n.uniformMatrix2fv(this.addr,!1,LP),Mi(t,i)}}function U9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Si(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Mi(t,e)}else{if(Si(t,i))return;FP.set(i),n.uniformMatrix3fv(this.addr,!1,FP),Mi(t,i)}}function H9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Si(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Mi(t,e)}else{if(Si(t,i))return;RP.set(i),n.uniformMatrix4fv(this.addr,!1,RP),Mi(t,i)}}function z9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function G9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2iv(this.addr,e),Mi(t,e)}}function W9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;n.uniform3iv(this.addr,e),Mi(t,e)}}function j9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4iv(this.addr,e),Mi(t,e)}}function $9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function q9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2uiv(this.addr,e),Mi(t,e)}}function X9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;n.uniform3uiv(this.addr,e),Mi(t,e)}}function Y9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4uiv(this.addr,e),Mi(t,e)}}function Z9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let s;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(CP.compareFunction=515,s=CP):s=wP,t.setTexture2D(e||s,r)}function K9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||TP,r)}function J9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||DP,r)}function Q9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||AP,r)}function t7(n,e){n.uniform1fv(this.addr,e)}function n7(n,e){const t=ru(e,this.size,2);n.uniform2fv(this.addr,t)}function i7(n,e){const t=ru(e,this.size,3);n.uniform3fv(this.addr,t)}function r7(n,e){const t=ru(e,this.size,4);n.uniform4fv(this.addr,t)}function s7(n,e){const t=ru(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function o7(n,e){const t=ru(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function a7(n,e){const t=ru(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function l7(n,e){n.uniform1iv(this.addr,e)}function c7(n,e){n.uniform2iv(this.addr,e)}function u7(n,e){n.uniform3iv(this.addr,e)}function h7(n,e){n.uniform4iv(this.addr,e)}function d7(n,e){n.uniform1uiv(this.addr,e)}function f7(n,e){n.uniform2uiv(this.addr,e)}function p7(n,e){n.uniform3uiv(this.addr,e)}function m7(n,e){n.uniform4uiv(this.addr,e)}function g7(n,e,t){const i=this.cache,r=e.length,s=Dm(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||wP,s[o])}function v7(n,e,t){const i=this.cache,r=e.length,s=Dm(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||TP,s[o])}function y7(n,e,t){const i=this.cache,r=e.length,s=Dm(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||DP,s[o])}function _7(n,e,t){const i=this.cache,r=e.length,s=Dm(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||AP,s[o])}class b7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function e7(n){switch(n){case 5126:return N9;case 35664:return O9;case 35665:return k9;case 35666:return B9;case 35674:return V9;case 35675:return U9;case 35676:return H9;case 5124:case 35670:return z9;case 35667:case 35671:return G9;case 35668:case 35672:return W9;case 35669:case 35673:return j9;case 5125:return $9;case 36294:return q9;case 36295:return X9;case 36296:return Y9;case 35678:case 36198:case 36298:case 36306:case 35682:return Z9;case 35679:case 36299:case 36307:return K9;case 35680:case 36300:case 36308:case 36293:return J9;case 36289:case 36303:case 36311:case 36292:return Q9}}(t.type)}}class S7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function x7(n){switch(n){case 5126:return t7;case 35664:return n7;case 35665:return i7;case 35666:return r7;case 35674:return s7;case 35675:return o7;case 35676:return a7;case 5124:case 35670:return l7;case 35667:case 35671:return c7;case 35668:case 35672:return u7;case 35669:case 35673:return h7;case 5125:return d7;case 36294:return f7;case 36295:return p7;case 36296:return m7;case 35678:case 36198:case 36298:case 36306:case 35682:return g7;case 35679:case 36299:case 36307:return v7;case 35680:case 36300:case 36308:case 36293:return y7;case 36289:case 36303:case 36311:case 36292:return _7}}(t.type)}}class M7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const ab=/(\w+)(\])?(\[|\.)?/g;function NP(n,e){n.seq.push(e),n.map[e.id]=e}function E7(n,e,t){const i=n.name,r=i.length;for(ab.lastIndex=0;;){const s=ab.exec(i),o=ab.lastIndex;let a=s[1];const h=s[3];if("]"===s[2]&&(a|=0),void 0===h||"["===h&&o+2===r){NP(t,void 0===h?new b7(a,n,e):new S7(a,n,e));break}{let p=t.map[a];void 0===p&&(p=new M7(a),NP(t,p)),t=p}}}class Im{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);E7(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function OP(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let C7=0;const kP=new Qt;function BP(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function A7(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function D7(n,e){const t=function T7(n){vn._getMatrix(kP,vn.workingColorSpace,n);const e=`mat3( ${kP.elements.map(t=>t.toFixed(4))} )`;switch(vn.getTransfer(n)){case Sp:return[e,"LinearTransferOETF"];case Fn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${n}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function I7(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Cineon";break;case 4:t="ACESFilmic";break;case 6:t="AgX";break;case 7:t="Neutral";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Pm=new re;function rd(n){return""!==n}function VP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function UP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const N7=/^[ \t]*#include +<([\w\d./]+)>/gm;function lb(n){return n.replace(N7,k7)}const O7=new Map;function k7(n,e){let t=sn[e];if(void 0===t){const i=O7.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=sn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return lb(t)}const B7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function HP(n){return n.replace(B7,V7)}function V7(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function zP(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function j7(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function U7(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),h=function H7(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),f=function z7(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),p=function G7(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),v=function W7(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),y=function R7(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(rd).join("\n")}(t),x=function F7(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),M=r.createProgram();let S,b,D=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(rd).join("\n"),S.length>0&&(S+="\n"),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(rd).join("\n"),b.length>0&&(b+="\n")):(S=[zP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rd).join("\n"),b=[zP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?sn.tonemapping_pars_fragment:"",0!==t.toneMapping?I7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",sn.colorspace_pars_fragment,D7("linearToOutputTexel",t.outputColorSpace),(vn.getLuminanceCoefficients(Pm),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Pm.x.toFixed(4)}, ${Pm.y.toFixed(4)}, ${Pm.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(rd).join("\n")),o=lb(o),o=VP(o,t),o=UP(o,t),a=lb(a),a=VP(a,t),a=UP(a,t),o=HP(o),a=HP(a),!0!==t.isRawShaderMaterial&&(D="#version 300 es\n",S=[y,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+S,b=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const T=D+b+a,q=OP(r,r.VERTEX_SHADER,D+S+o),$=OP(r,r.FRAGMENT_SHADER,T);function K(oe){if(n.debug.checkShaderErrors){const ye=r.getProgramInfoLog(M).trim(),ge=r.getShaderInfoLog(q).trim(),_e=r.getShaderInfoLog($).trim();let Te=!0,xe=!0;if(!1===r.getProgramParameter(M,r.LINK_STATUS))if(Te=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,M,q,$);else{const Ve=BP(r,q,"vertex"),Me=BP(r,$,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+oe.name+"\nMaterial Type: "+oe.type+"\n\nProgram Info Log: "+ye+"\n"+Ve+"\n"+Me)}else""!==ye?console.warn("THREE.WebGLProgram: Program Info Log:",ye):(""===ge||""===_e)&&(xe=!1);xe&&(oe.diagnostics={runnable:Te,programLog:ye,vertexShader:{log:ge,prefix:S},fragmentShader:{log:_e,prefix:b}})}r.deleteShader(q),r.deleteShader($),Q=new Im(r,M),G=function L7(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,M)}let Q,G;r.attachShader(M,q),r.attachShader(M,$),void 0!==t.index0AttributeName?r.bindAttribLocation(M,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M),this.getUniforms=function(){return void 0===Q&&K(this),Q},this.getAttributes=function(){return void 0===G&&K(this),G};let z=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===z&&(z=r.getProgramParameter(M,37297)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=C7++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=q,this.fragmentShader=$,this}let $7=0;class q7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new X7(e),t.set(e,i)),i}}class X7{constructor(e){this.id=$7++,this.code=e,this.usedTimes=0}}function Y7(n,e,t,i,r,s,o){const a=new q_,c=new q7,h=new Set,f=[],p=r.logarithmicDepthBuffer,v=r.vertexTextures;let y=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(G){return h.add(G),0===G?"uv":`uv${G}`}return{getParameters:function S(G,z,oe,ye,ge){const _e=ye.fog,Te=ge.geometry,Ve=(G.isMeshStandardMaterial?t:e).get(G.envMap||(G.isMeshStandardMaterial?ye.environment:null)),Me=Ve&&306===Ve.mapping?Ve.image.height:null,Ye=x[G.type];null!==G.precision&&(y=r.getMaxPrecision(G.precision),y!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",y,"instead."));const st=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,dt=void 0!==st?st.length:0;let dn,Ae,ze,ot,Yt=0;if(void 0!==Te.morphAttributes.position&&(Yt=1),void 0!==Te.morphAttributes.normal&&(Yt=2),void 0!==Te.morphAttributes.color&&(Yt=3),Ye){const Pn=Qs[Ye];dn=Pn.vertexShader,Ae=Pn.fragmentShader}else dn=G.vertexShader,Ae=G.fragmentShader,c.update(G),ze=c.getVertexShaderID(G),ot=c.getFragmentShaderID(G);const je=n.getRenderTarget(),Et=n.state.buffers.depth.getReversed(),Ht=!0===ge.isInstancedMesh,At=!0===ge.isBatchedMesh,fn=!!G.map,We=!!Ve,se=!!G.aoMap,wt=!!G.lightMap,Ue=!!G.bumpMap,pt=!!G.normalMap,qe=!!G.displacementMap,zt=!!G.emissiveMap,ut=!!G.metalnessMap,ne=!!G.roughnessMap,W=G.anisotropy>0,ve=G.clearcoat>0,Be=G.iridescence>0,Ie=G.sheen>0,Mt=G.transmission>0,et=W&&!!G.anisotropyMap,ft=ve&&!!G.clearcoatMap,pn=ve&&!!G.clearcoatNormalMap,Ge=ve&&!!G.clearcoatRoughnessMap,yt=Be&&!!G.iridescenceMap,Bt=Be&&!!G.iridescenceThicknessMap,Wt=Ie&&!!G.sheenColorMap,_t=Ie&&!!G.sheenRoughnessMap,bn=!!G.specularMap,on=!!G.specularColorMap,Hn=!!G.specularIntensityMap,de=Mt&&!!G.transmissionMap,at=Mt&&!!G.thicknessMap,Ne=!!G.alphaMap,nn=!!G.extensions;let ei=0;G.toneMapped&&(null===je||!0===je.isXRRenderTarget)&&(ei=n.toneMapping);const qi={shaderID:Ye,shaderType:G.type,shaderName:G.name,vertexShader:dn,fragmentShader:Ae,defines:G.defines,customVertexShaderID:ze,customFragmentShaderID:ot,isRawShaderMaterial:!0===G.isRawShaderMaterial,glslVersion:G.glslVersion,precision:y,batching:At,batchingColor:At&&null!==ge._colorsTexture,instancing:Ht,instancingColor:Ht&&null!==ge.instanceColor,instancingMorph:Ht&&null!==ge.morphTexture,supportsVertexTextures:v,outputColorSpace:null===je?n.outputColorSpace:!0===je.isXRRenderTarget?je.texture.colorSpace:or,alphaToCoverage:!!G.alphaToCoverage,map:fn,matcap:!!G.matcap,envMap:We,envMapMode:We&&Ve.mapping,envMapCubeUVHeight:Me,aoMap:se,lightMap:wt,bumpMap:Ue,normalMap:pt,displacementMap:v&&qe,emissiveMap:zt,normalMapObjectSpace:pt&&1===G.normalMapType,normalMapTangentSpace:pt&&0===G.normalMapType,metalnessMap:ut,roughnessMap:ne,anisotropy:W,anisotropyMap:et,clearcoat:ve,clearcoatMap:ft,clearcoatNormalMap:pn,clearcoatRoughnessMap:Ge,dispersion:G.dispersion>0,iridescence:Be,iridescenceMap:yt,iridescenceThicknessMap:Bt,sheen:Ie,sheenColorMap:Wt,sheenRoughnessMap:_t,specularMap:bn,specularColorMap:on,specularIntensityMap:Hn,transmission:Mt,transmissionMap:de,thicknessMap:at,gradientMap:!!G.gradientMap,opaque:!1===G.transparent&&1===G.blending&&!1===G.alphaToCoverage,alphaMap:Ne,alphaTest:G.alphaTest>0,alphaHash:!!G.alphaHash,combine:G.combine,mapUv:fn&&M(G.map.channel),aoMapUv:se&&M(G.aoMap.channel),lightMapUv:wt&&M(G.lightMap.channel),bumpMapUv:Ue&&M(G.bumpMap.channel),normalMapUv:pt&&M(G.normalMap.channel),displacementMapUv:qe&&M(G.displacementMap.channel),emissiveMapUv:zt&&M(G.emissiveMap.channel),metalnessMapUv:ut&&M(G.metalnessMap.channel),roughnessMapUv:ne&&M(G.roughnessMap.channel),anisotropyMapUv:et&&M(G.anisotropyMap.channel),clearcoatMapUv:ft&&M(G.clearcoatMap.channel),clearcoatNormalMapUv:pn&&M(G.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ge&&M(G.clearcoatRoughnessMap.channel),iridescenceMapUv:yt&&M(G.iridescenceMap.channel),iridescenceThicknessMapUv:Bt&&M(G.iridescenceThicknessMap.channel),sheenColorMapUv:Wt&&M(G.sheenColorMap.channel),sheenRoughnessMapUv:_t&&M(G.sheenRoughnessMap.channel),specularMapUv:bn&&M(G.specularMap.channel),specularColorMapUv:on&&M(G.specularColorMap.channel),specularIntensityMapUv:Hn&&M(G.specularIntensityMap.channel),transmissionMapUv:de&&M(G.transmissionMap.channel),thicknessMapUv:at&&M(G.thicknessMap.channel),alphaMapUv:Ne&&M(G.alphaMap.channel),vertexTangents:!!Te.attributes.tangent&&(pt||W),vertexColors:G.vertexColors,vertexAlphas:!0===G.vertexColors&&!!Te.attributes.color&&4===Te.attributes.color.itemSize,pointsUvs:!0===ge.isPoints&&!!Te.attributes.uv&&(fn||Ne),fog:!!_e,useFog:!0===G.fog,fogExp2:!!_e&&_e.isFogExp2,flatShading:!0===G.flatShading,sizeAttenuation:!0===G.sizeAttenuation,logarithmicDepthBuffer:p,reverseDepthBuffer:Et,skinning:!0===ge.isSkinnedMesh,morphTargets:void 0!==Te.morphAttributes.position,morphNormals:void 0!==Te.morphAttributes.normal,morphColors:void 0!==Te.morphAttributes.color,morphTargetsCount:dt,morphTextureStride:Yt,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:G.dithering,shadowMapEnabled:n.shadowMap.enabled&&oe.length>0,shadowMapType:n.shadowMap.type,toneMapping:ei,decodeVideoTexture:fn&&!0===G.map.isVideoTexture&&vn.getTransfer(G.map.colorSpace)===Fn,decodeVideoTextureEmissive:zt&&!0===G.emissiveMap.isVideoTexture&&vn.getTransfer(G.emissiveMap.colorSpace)===Fn,premultipliedAlpha:G.premultipliedAlpha,doubleSided:2===G.side,flipSided:1===G.side,useDepthPacking:G.depthPacking>=0,depthPacking:G.depthPacking||0,index0AttributeName:G.index0AttributeName,extensionClipCullDistance:nn&&!0===G.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(nn&&!0===G.extensions.multiDraw||At)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:G.customProgramCacheKey()};return qi.vertexUv1s=h.has(1),qi.vertexUv2s=h.has(2),qi.vertexUv3s=h.has(3),h.clear(),qi},getProgramCacheKey:function b(G){const z=[];if(G.shaderID?z.push(G.shaderID):(z.push(G.customVertexShaderID),z.push(G.customFragmentShaderID)),void 0!==G.defines)for(const oe in G.defines)z.push(oe),z.push(G.defines[oe]);return!1===G.isRawShaderMaterial&&(function D(G,z){G.push(z.precision),G.push(z.outputColorSpace),G.push(z.envMapMode),G.push(z.envMapCubeUVHeight),G.push(z.mapUv),G.push(z.alphaMapUv),G.push(z.lightMapUv),G.push(z.aoMapUv),G.push(z.bumpMapUv),G.push(z.normalMapUv),G.push(z.displacementMapUv),G.push(z.emissiveMapUv),G.push(z.metalnessMapUv),G.push(z.roughnessMapUv),G.push(z.anisotropyMapUv),G.push(z.clearcoatMapUv),G.push(z.clearcoatNormalMapUv),G.push(z.clearcoatRoughnessMapUv),G.push(z.iridescenceMapUv),G.push(z.iridescenceThicknessMapUv),G.push(z.sheenColorMapUv),G.push(z.sheenRoughnessMapUv),G.push(z.specularMapUv),G.push(z.specularColorMapUv),G.push(z.specularIntensityMapUv),G.push(z.transmissionMapUv),G.push(z.thicknessMapUv),G.push(z.combine),G.push(z.fogExp2),G.push(z.sizeAttenuation),G.push(z.morphTargetsCount),G.push(z.morphAttributeCount),G.push(z.numDirLights),G.push(z.numPointLights),G.push(z.numSpotLights),G.push(z.numSpotLightMaps),G.push(z.numHemiLights),G.push(z.numRectAreaLights),G.push(z.numDirLightShadows),G.push(z.numPointLightShadows),G.push(z.numSpotLightShadows),G.push(z.numSpotLightShadowsWithMaps),G.push(z.numLightProbes),G.push(z.shadowMapType),G.push(z.toneMapping),G.push(z.numClippingPlanes),G.push(z.numClipIntersection),G.push(z.depthPacking)}(z,G),function A(G,z){a.disableAll(),z.supportsVertexTextures&&a.enable(0),z.instancing&&a.enable(1),z.instancingColor&&a.enable(2),z.instancingMorph&&a.enable(3),z.matcap&&a.enable(4),z.envMap&&a.enable(5),z.normalMapObjectSpace&&a.enable(6),z.normalMapTangentSpace&&a.enable(7),z.clearcoat&&a.enable(8),z.iridescence&&a.enable(9),z.alphaTest&&a.enable(10),z.vertexColors&&a.enable(11),z.vertexAlphas&&a.enable(12),z.vertexUv1s&&a.enable(13),z.vertexUv2s&&a.enable(14),z.vertexUv3s&&a.enable(15),z.vertexTangents&&a.enable(16),z.anisotropy&&a.enable(17),z.alphaHash&&a.enable(18),z.batching&&a.enable(19),z.dispersion&&a.enable(20),z.batchingColor&&a.enable(21),G.push(a.mask),a.disableAll(),z.fog&&a.enable(0),z.useFog&&a.enable(1),z.flatShading&&a.enable(2),z.logarithmicDepthBuffer&&a.enable(3),z.reverseDepthBuffer&&a.enable(4),z.skinning&&a.enable(5),z.morphTargets&&a.enable(6),z.morphNormals&&a.enable(7),z.morphColors&&a.enable(8),z.premultipliedAlpha&&a.enable(9),z.shadowMapEnabled&&a.enable(10),z.doubleSided&&a.enable(11),z.flipSided&&a.enable(12),z.useDepthPacking&&a.enable(13),z.dithering&&a.enable(14),z.transmission&&a.enable(15),z.sheen&&a.enable(16),z.opaque&&a.enable(17),z.pointsUvs&&a.enable(18),z.decodeVideoTexture&&a.enable(19),z.decodeVideoTextureEmissive&&a.enable(20),z.alphaToCoverage&&a.enable(21),G.push(a.mask)}(z,G),z.push(n.outputColorSpace)),z.push(G.customProgramCacheKey),z.join()},getUniforms:function T(G){const z=x[G.type];let oe;return oe=z?bW.clone(Qs[z].uniforms):G.uniforms,oe},acquireProgram:function q(G,z){let oe;for(let ye=0,ge=f.length;ye<ge;ye++){const _e=f[ye];if(_e.cacheKey===z){oe=_e,++oe.usedTimes;break}}return void 0===oe&&(oe=new j7(n,z,G,s),f.push(oe)),oe},releaseProgram:function $(G){if(0==--G.usedTimes){const z=f.indexOf(G);f[z]=f[f.length-1],f.pop(),G.destroy()}},releaseShaderCache:function K(G){c.remove(G)},programs:f,dispose:function Q(){c.dispose()}}}function Z7(){let n=new WeakMap;return{has:function e(o){return n.has(o)},get:function t(o){let a=n.get(o);return void 0===a&&(a={},n.set(o,a)),a},remove:function i(o){n.delete(o)},update:function r(o,a,c){n.get(o)[a]=c},dispose:function s(){n=new WeakMap}}}function K7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function GP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function WP(){const n=[];let e=0;const t=[],i=[],r=[];function o(p,v,y,x,M,S){let b=n[e];return void 0===b?(b={id:p.id,object:p,geometry:v,material:y,groupOrder:x,renderOrder:p.renderOrder,z:M,group:S},n[e]=b):(b.id=p.id,b.object=p,b.geometry=v,b.material=y,b.groupOrder=x,b.renderOrder=p.renderOrder,b.z=M,b.group=S),e++,b}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(p,v,y,x,M,S){const b=o(p,v,y,x,M,S);y.transmission>0?i.push(b):!0===y.transparent?r.push(b):t.push(b)},unshift:function c(p,v,y,x,M,S){const b=o(p,v,y,x,M,S);y.transmission>0?i.unshift(b):!0===y.transparent?r.unshift(b):t.unshift(b)},finish:function f(){for(let p=e,v=n.length;p<v;p++){const y=n[p];if(null===y.id)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}},sort:function h(p,v){t.length>1&&t.sort(p||K7),i.length>1&&i.sort(v||GP),r.length>1&&r.sort(v||GP)}}}function J7(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new WP,n.set(i,[o])):r>=s.length?(o=new WP,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function Q7(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new Ze};break;case"SpotLight":t={position:new re,direction:new re,color:new Ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new Ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new Ze,groundColor:new Ze};break;case"RectAreaLight":t={color:new Ze,position:new re,halfWidth:new re,halfHeight:new re}}return n[e.id]=t,t}}}let tq=0;function nq(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function iq(n){const e=new Q7,t=function eq(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new re);const r=new re,s=new Rt,o=new Rt;return{setup:function a(h){let f=0,p=0,v=0;for(let G=0;G<9;G++)i.probe[G].set(0,0,0);let y=0,x=0,M=0,S=0,b=0,D=0,A=0,T=0,q=0,$=0,K=0;h.sort(nq);for(let G=0,z=h.length;G<z;G++){const oe=h[G],ye=oe.color,ge=oe.intensity,_e=oe.distance,Te=oe.shadow&&oe.shadow.map?oe.shadow.map.texture:null;if(oe.isAmbientLight)f+=ye.r*ge,p+=ye.g*ge,v+=ye.b*ge;else if(oe.isLightProbe){for(let xe=0;xe<9;xe++)i.probe[xe].addScaledVector(oe.sh.coefficients[xe],ge);K++}else if(oe.isDirectionalLight){const xe=e.get(oe);if(xe.color.copy(oe.color).multiplyScalar(oe.intensity),oe.castShadow){const Ve=oe.shadow,Me=t.get(oe);Me.shadowIntensity=Ve.intensity,Me.shadowBias=Ve.bias,Me.shadowNormalBias=Ve.normalBias,Me.shadowRadius=Ve.radius,Me.shadowMapSize=Ve.mapSize,i.directionalShadow[y]=Me,i.directionalShadowMap[y]=Te,i.directionalShadowMatrix[y]=oe.shadow.matrix,D++}i.directional[y]=xe,y++}else if(oe.isSpotLight){const xe=e.get(oe);xe.position.setFromMatrixPosition(oe.matrixWorld),xe.color.copy(ye).multiplyScalar(ge),xe.distance=_e,xe.coneCos=Math.cos(oe.angle),xe.penumbraCos=Math.cos(oe.angle*(1-oe.penumbra)),xe.decay=oe.decay,i.spot[M]=xe;const Ve=oe.shadow;if(oe.map&&(i.spotLightMap[q]=oe.map,q++,Ve.updateMatrices(oe),oe.castShadow&&$++),i.spotLightMatrix[M]=Ve.matrix,oe.castShadow){const Me=t.get(oe);Me.shadowIntensity=Ve.intensity,Me.shadowBias=Ve.bias,Me.shadowNormalBias=Ve.normalBias,Me.shadowRadius=Ve.radius,Me.shadowMapSize=Ve.mapSize,i.spotShadow[M]=Me,i.spotShadowMap[M]=Te,T++}M++}else if(oe.isRectAreaLight){const xe=e.get(oe);xe.color.copy(ye).multiplyScalar(ge),xe.halfWidth.set(.5*oe.width,0,0),xe.halfHeight.set(0,.5*oe.height,0),i.rectArea[S]=xe,S++}else if(oe.isPointLight){const xe=e.get(oe);if(xe.color.copy(oe.color).multiplyScalar(oe.intensity),xe.distance=oe.distance,xe.decay=oe.decay,oe.castShadow){const Ve=oe.shadow,Me=t.get(oe);Me.shadowIntensity=Ve.intensity,Me.shadowBias=Ve.bias,Me.shadowNormalBias=Ve.normalBias,Me.shadowRadius=Ve.radius,Me.shadowMapSize=Ve.mapSize,Me.shadowCameraNear=Ve.camera.near,Me.shadowCameraFar=Ve.camera.far,i.pointShadow[x]=Me,i.pointShadowMap[x]=Te,i.pointShadowMatrix[x]=oe.shadow.matrix,A++}i.point[x]=xe,x++}else if(oe.isHemisphereLight){const xe=e.get(oe);xe.skyColor.copy(oe.color).multiplyScalar(ge),xe.groundColor.copy(oe.groundColor).multiplyScalar(ge),i.hemi[b]=xe,b++}}S>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ke.LTC_FLOAT_1,i.rectAreaLTC2=Ke.LTC_FLOAT_2):(i.rectAreaLTC1=Ke.LTC_HALF_1,i.rectAreaLTC2=Ke.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=p,i.ambient[2]=v;const Q=i.hash;(Q.directionalLength!==y||Q.pointLength!==x||Q.spotLength!==M||Q.rectAreaLength!==S||Q.hemiLength!==b||Q.numDirectionalShadows!==D||Q.numPointShadows!==A||Q.numSpotShadows!==T||Q.numSpotMaps!==q||Q.numLightProbes!==K)&&(i.directional.length=y,i.spot.length=M,i.rectArea.length=S,i.point.length=x,i.hemi.length=b,i.directionalShadow.length=D,i.directionalShadowMap.length=D,i.pointShadow.length=A,i.pointShadowMap.length=A,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=D,i.pointShadowMatrix.length=A,i.spotLightMatrix.length=T+q-$,i.spotLightMap.length=q,i.numSpotLightShadowsWithMaps=$,i.numLightProbes=K,Q.directionalLength=y,Q.pointLength=x,Q.spotLength=M,Q.rectAreaLength=S,Q.hemiLength=b,Q.numDirectionalShadows=D,Q.numPointShadows=A,Q.numSpotShadows=T,Q.numSpotMaps=q,Q.numLightProbes=K,i.version=tq++)},setupView:function c(h,f){let p=0,v=0,y=0,x=0,M=0;const S=f.matrixWorldInverse;for(let b=0,D=h.length;b<D;b++){const A=h[b];if(A.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(S),p++}else if(A.isSpotLight){const T=i.spot[y];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(S),T.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(S),y++}else if(A.isRectAreaLight){const T=i.rectArea[x];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(S),o.identity(),s.copy(A.matrixWorld),s.premultiply(S),o.extractRotation(s),T.halfWidth.set(.5*A.width,0,0),T.halfHeight.set(0,.5*A.height,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),x++}else if(A.isPointLight){const T=i.point[v];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(S),v++}else if(A.isHemisphereLight){const T=i.hemi[M];T.direction.setFromMatrixPosition(A.matrixWorld),T.direction.transformDirection(S),M++}}},state:i}}function jP(n){const e=new iq(n),t=[],i=[],h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(f){h.camera=f,t.length=0,i.length=0},state:h,setupLights:function a(){e.setup(t)},setupLightsView:function c(f){e.setupView(t,f)},pushLight:function s(f){t.push(f)},pushShadow:function o(f){i.push(f)}}}function rq(n){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new jP(n),e.set(r,[a])):s>=o.length?(a=new jP(n),o.push(a)):a=o[s],a},dispose:function i(){e=new WeakMap}}}function aq(n,e,t){let i=new Zp;const r=new Fe,s=new Fe,o=new Mn,a=new NI({depthPacking:3201}),c=new OI,h={},f=t.maxTextureSize,p={0:1,1:0,2:2},v=new Oo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const x=new rn;x.setAttribute("position",new Wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Ti(x,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let b=this.type;function D($,K){const Q=e.update(M);v.defines.VSM_SAMPLES!==$.blurSamples&&(v.defines.VSM_SAMPLES=$.blurSamples,y.defines.VSM_SAMPLES=$.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),null===$.mapPass&&($.mapPass=new Wa(r.x,r.y)),v.uniforms.shadow_pass.value=$.map.texture,v.uniforms.resolution.value=$.mapSize,v.uniforms.radius.value=$.radius,n.setRenderTarget($.mapPass),n.clear(),n.renderBufferDirect(K,null,Q,v,M,null),y.uniforms.shadow_pass.value=$.mapPass.texture,y.uniforms.resolution.value=$.mapSize,y.uniforms.radius.value=$.radius,n.setRenderTarget($.map),n.clear(),n.renderBufferDirect(K,null,Q,y,M,null)}function A($,K,Q,G){let z=null;const oe=!0===Q.isPointLight?$.customDistanceMaterial:$.customDepthMaterial;if(void 0!==oe)z=oe;else if(z=!0===Q.isPointLight?c:a,n.localClippingEnabled&&!0===K.clipShadows&&Array.isArray(K.clippingPlanes)&&0!==K.clippingPlanes.length||K.displacementMap&&0!==K.displacementScale||K.alphaMap&&K.alphaTest>0||K.map&&K.alphaTest>0){const ye=z.uuid,ge=K.uuid;let _e=h[ye];void 0===_e&&(_e={},h[ye]=_e);let Te=_e[ge];void 0===Te&&(Te=z.clone(),_e[ge]=Te,K.addEventListener("dispose",q)),z=Te}return z.visible=K.visible,z.wireframe=K.wireframe,z.side=3===G?null!==K.shadowSide?K.shadowSide:K.side:null!==K.shadowSide?K.shadowSide:p[K.side],z.alphaMap=K.alphaMap,z.alphaTest=K.alphaTest,z.map=K.map,z.clipShadows=K.clipShadows,z.clippingPlanes=K.clippingPlanes,z.clipIntersection=K.clipIntersection,z.displacementMap=K.displacementMap,z.displacementScale=K.displacementScale,z.displacementBias=K.displacementBias,z.wireframeLinewidth=K.wireframeLinewidth,z.linewidth=K.linewidth,!0===Q.isPointLight&&!0===z.isMeshDistanceMaterial&&(n.properties.get(z).light=Q),z}function T($,K,Q,G,z){if(!1===$.visible)return;if($.layers.test(K.layers)&&($.isMesh||$.isLine||$.isPoints)&&($.castShadow||$.receiveShadow&&3===z)&&(!$.frustumCulled||i.intersectsObject($))){$.modelViewMatrix.multiplyMatrices(Q.matrixWorldInverse,$.matrixWorld);const ge=e.update($),_e=$.material;if(Array.isArray(_e)){const Te=ge.groups;for(let xe=0,Ve=Te.length;xe<Ve;xe++){const Me=Te[xe],Ye=_e[Me.materialIndex];if(Ye&&Ye.visible){const st=A($,Ye,G,z);$.onBeforeShadow(n,$,K,Q,ge,st,Me),n.renderBufferDirect(Q,null,ge,st,$,Me),$.onAfterShadow(n,$,K,Q,ge,st,Me)}}}else if(_e.visible){const Te=A($,_e,G,z);$.onBeforeShadow(n,$,K,Q,ge,Te,null),n.renderBufferDirect(Q,null,ge,Te,$,null),$.onAfterShadow(n,$,K,Q,ge,Te,null)}}const ye=$.children;for(let ge=0,_e=ye.length;ge<_e;ge++)T(ye[ge],K,Q,G,z)}function q($){$.target.removeEventListener("dispose",q);for(const Q in h){const G=h[Q],z=$.target.uuid;z in G&&(G[z].dispose(),delete G[z])}}this.render=function($,K,Q){if(!1===S.enabled||!1===S.autoUpdate&&!1===S.needsUpdate||0===$.length)return;const G=n.getRenderTarget(),z=n.getActiveCubeFace(),oe=n.getActiveMipmapLevel(),ye=n.state;ye.setBlending(0),ye.buffers.color.setClear(1,1,1,1),ye.buffers.depth.setTest(!0),ye.setScissorTest(!1);const ge=3!==b&&3===this.type,_e=3===b&&3!==this.type;for(let Te=0,xe=$.length;Te<xe;Te++){const Ve=$[Te],Me=Ve.shadow;if(void 0===Me){console.warn("THREE.WebGLShadowMap:",Ve,"has no shadow.");continue}if(!1===Me.autoUpdate&&!1===Me.needsUpdate)continue;r.copy(Me.mapSize);const Ye=Me.getFrameExtents();if(r.multiply(Ye),s.copy(Me.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/Ye.x),r.x=s.x*Ye.x,Me.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/Ye.y),r.y=s.y*Ye.y,Me.mapSize.y=s.y)),null===Me.map||!0===ge||!0===_e){const dt=3!==this.type?{minFilter:wi,magFilter:wi}:{};null!==Me.map&&Me.map.dispose(),Me.map=new Wa(r.x,r.y,dt),Me.map.texture.name=Ve.name+".shadowMap",Me.camera.updateProjectionMatrix()}n.setRenderTarget(Me.map),n.clear();const st=Me.getViewportCount();for(let dt=0;dt<st;dt++){const Yt=Me.getViewport(dt);o.set(s.x*Yt.x,s.y*Yt.y,s.x*Yt.z,s.y*Yt.w),ye.viewport(o),Me.updateMatrices(Ve,dt),i=Me.getFrustum(),T(K,Q,Me.camera,Ve,this.type)}!0!==Me.isPointLightShadow&&3===this.type&&D(Me,Q),Me.needsUpdate=!1}b=this.type,S.needsUpdate=!1,n.setRenderTarget(G,z,oe)}}const lq={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function cq(n,e){const s=new function t(){let de=!1;const at=new Mn;let we=null;const Ne=new Mn(0,0,0,0);return{setMask:function(ht){we!==ht&&!de&&(n.colorMask(ht,ht,ht,ht),we=ht)},setLocked:function(ht){de=ht},setClear:function(ht,lt,nn,ei,qi){!0===qi&&(ht*=ei,lt*=ei,nn*=ei),at.set(ht,lt,nn,ei),!1===Ne.equals(at)&&(n.clearColor(ht,lt,nn,ei),Ne.copy(at))},reset:function(){de=!1,we=null,Ne.set(-1,0,0,0)}}},o=new function i(){let de=!1,at=!1,we=null,Ne=null,ht=null;return{setReversed:function(lt){if(at!==lt){const nn=e.get("EXT_clip_control");nn.clipControlEXT(nn.LOWER_LEFT_EXT,at?nn.ZERO_TO_ONE_EXT:nn.NEGATIVE_ONE_TO_ONE_EXT);const ei=ht;ht=null,this.setClear(ei)}at=lt},getReversed:function(){return at},setTest:function(lt){lt?je(n.DEPTH_TEST):Et(n.DEPTH_TEST)},setMask:function(lt){we!==lt&&!de&&(n.depthMask(lt),we=lt)},setFunc:function(lt){if(at&&(lt=lq[lt]),Ne!==lt){switch(lt){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}Ne=lt}},setLocked:function(lt){de=lt},setClear:function(lt){ht!==lt&&(at&&(lt=1-lt),n.clearDepth(lt),ht=lt)},reset:function(){de=!1,we=null,Ne=null,ht=null,at=!1}}},a=new function r(){let de=!1,at=null,we=null,Ne=null,ht=null,lt=null,nn=null,ei=null,qi=null;return{setTest:function(Pn){de||(Pn?je(n.STENCIL_TEST):Et(n.STENCIL_TEST))},setMask:function(Pn){at!==Pn&&!de&&(n.stencilMask(Pn),at=Pn)},setFunc:function(Pn,Ps,Ho){(we!==Pn||Ne!==Ps||ht!==Ho)&&(n.stencilFunc(Pn,Ps,Ho),we=Pn,Ne=Ps,ht=Ho)},setOp:function(Pn,Ps,Ho){(lt!==Pn||nn!==Ps||ei!==Ho)&&(n.stencilOp(Pn,Ps,Ho),lt=Pn,nn=Ps,ei=Ho)},setLocked:function(Pn){de=Pn},setClear:function(Pn){qi!==Pn&&(n.clearStencil(Pn),qi=Pn)},reset:function(){de=!1,at=null,we=null,Ne=null,ht=null,lt=null,nn=null,ei=null,qi=null}}},c=new WeakMap,h=new WeakMap;let f={},p={},v=new WeakMap,y=[],x=null,M=!1,S=null,b=null,D=null,A=null,T=null,q=null,$=null,K=new Ze(0,0,0),Q=0,G=!1,z=null,oe=null,ye=null,ge=null,_e=null;const Te=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let xe=!1,Ve=0;const Me=n.getParameter(n.VERSION);-1!==Me.indexOf("WebGL")?(Ve=parseFloat(/^WebGL (\d)/.exec(Me)[1]),xe=Ve>=1):-1!==Me.indexOf("OpenGL ES")&&(Ve=parseFloat(/^OpenGL ES (\d)/.exec(Me)[1]),xe=Ve>=2);let Ye=null,st={};const dt=n.getParameter(n.SCISSOR_BOX),Yt=n.getParameter(n.VIEWPORT),dn=(new Mn).fromArray(dt),Ae=(new Mn).fromArray(Yt);function ze(de,at,we,Ne){const ht=new Uint8Array(4),lt=n.createTexture();n.bindTexture(de,lt),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let nn=0;nn<we;nn++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(at,0,n.RGBA,1,1,Ne,0,n.RGBA,n.UNSIGNED_BYTE,ht):n.texImage2D(at+nn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ht);return lt}const ot={};function je(de){!0!==f[de]&&(n.enable(de),f[de]=!0)}function Et(de){!1!==f[de]&&(n.disable(de),f[de]=!1)}ot[n.TEXTURE_2D]=ze(n.TEXTURE_2D,n.TEXTURE_2D,1),ot[n.TEXTURE_CUBE_MAP]=ze(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ot[n.TEXTURE_2D_ARRAY]=ze(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ot[n.TEXTURE_3D]=ze(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),je(n.DEPTH_TEST),o.setFunc(3),Ue(!1),pt(1),je(n.CULL_FACE),se(0);const Oe={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};Oe[103]=n.MIN,Oe[104]=n.MAX;const We={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function se(de,at,we,Ne,ht,lt,nn,ei,qi,Pn){if(0!==de){if(!1===M&&(je(n.BLEND),M=!0),5===de)ht=ht||at,lt=lt||we,nn=nn||Ne,(at!==b||ht!==T)&&(n.blendEquationSeparate(Oe[at],Oe[ht]),b=at,T=ht),(we!==D||Ne!==A||lt!==q||nn!==$)&&(n.blendFuncSeparate(We[we],We[Ne],We[lt],We[nn]),D=we,A=Ne,q=lt,$=nn),(!1===ei.equals(K)||qi!==Q)&&(n.blendColor(ei.r,ei.g,ei.b,qi),K.copy(ei),Q=qi),S=de,G=!1;else if(de!==S||Pn!==G){if((100!==b||100!==T)&&(n.blendEquation(n.FUNC_ADD),b=100,T=100),Pn)switch(de){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de)}else switch(de){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de)}D=null,A=null,q=null,$=null,K.set(0,0,0),Q=0,S=de,G=Pn}}else!0===M&&(Et(n.BLEND),M=!1)}function Ue(de){z!==de&&(n.frontFace(de?n.CW:n.CCW),z=de)}function pt(de){0!==de?(je(n.CULL_FACE),de!==oe&&n.cullFace(1===de?n.BACK:2===de?n.FRONT:n.FRONT_AND_BACK)):Et(n.CULL_FACE),oe=de}function zt(de,at,we){de?(je(n.POLYGON_OFFSET_FILL),(ge!==at||_e!==we)&&(n.polygonOffset(at,we),ge=at,_e=we)):Et(n.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:o,stencil:a},enable:je,disable:Et,bindFramebuffer:function Ht(de,at){return p[de]!==at&&(n.bindFramebuffer(de,at),p[de]=at,de===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=at),de===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=at),!0)},drawBuffers:function At(de,at){let we=y,Ne=!1;if(de){we=v.get(at),void 0===we&&(we=[],v.set(at,we));const ht=de.textures;if(we.length!==ht.length||we[0]!==n.COLOR_ATTACHMENT0){for(let lt=0,nn=ht.length;lt<nn;lt++)we[lt]=n.COLOR_ATTACHMENT0+lt;we.length=ht.length,Ne=!0}}else we[0]!==n.BACK&&(we[0]=n.BACK,Ne=!0);Ne&&n.drawBuffers(we)},useProgram:function fn(de){return x!==de&&(n.useProgram(de),x=de,!0)},setBlending:se,setMaterial:function wt(de,at){2===de.side?Et(n.CULL_FACE):je(n.CULL_FACE);let we=1===de.side;at&&(we=!we),Ue(we),1===de.blending&&!1===de.transparent?se(0):se(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),o.setFunc(de.depthFunc),o.setTest(de.depthTest),o.setMask(de.depthWrite),s.setMask(de.colorWrite);const Ne=de.stencilWrite;a.setTest(Ne),Ne&&(a.setMask(de.stencilWriteMask),a.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),a.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),zt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),!0===de.alphaToCoverage?je(n.SAMPLE_ALPHA_TO_COVERAGE):Et(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ue,setCullFace:pt,setLineWidth:function qe(de){de!==ye&&(xe&&n.lineWidth(de),ye=de)},setPolygonOffset:zt,setScissorTest:function ut(de){de?je(n.SCISSOR_TEST):Et(n.SCISSOR_TEST)},activeTexture:function ne(de){void 0===de&&(de=n.TEXTURE0+Te-1),Ye!==de&&(n.activeTexture(de),Ye=de)},bindTexture:function W(de,at,we){void 0===we&&(we=null===Ye?n.TEXTURE0+Te-1:Ye);let Ne=st[we];void 0===Ne&&(Ne={type:void 0,texture:void 0},st[we]=Ne),(Ne.type!==de||Ne.texture!==at)&&(Ye!==we&&(n.activeTexture(we),Ye=we),n.bindTexture(de,at||ot[de]),Ne.type=de,Ne.texture=at)},unbindTexture:function ve(){const de=st[Ye];void 0!==de&&void 0!==de.type&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)},compressedTexImage2D:function De(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},compressedTexImage3D:function Be(){try{n.compressedTexImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},texImage2D:function yt(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},texImage3D:function Bt(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},updateUBOMapping:function bn(de,at){let we=h.get(at);void 0===we&&(we=new WeakMap,h.set(at,we));let Ne=we.get(de);void 0===Ne&&(Ne=n.getUniformBlockIndex(at,de.name),we.set(de,Ne))},uniformBlockBinding:function on(de,at){const Ne=h.get(at).get(de);c.get(at)!==Ne&&(n.uniformBlockBinding(at,Ne,de.__bindingPointIndex),c.set(at,Ne))},texStorage2D:function pn(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},texStorage3D:function Ge(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},texSubImage2D:function Ie(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},texSubImage3D:function Mt(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},compressedTexSubImage2D:function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},compressedTexSubImage3D:function ft(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}},scissor:function Wt(de){!1===dn.equals(de)&&(n.scissor(de.x,de.y,de.z,de.w),dn.copy(de))},viewport:function _t(de){!1===Ae.equals(de)&&(n.viewport(de.x,de.y,de.z,de.w),Ae.copy(de))},reset:function Hn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},Ye=null,st={},p={},v=new WeakMap,y=[],x=null,M=!1,S=null,b=null,D=null,A=null,T=null,q=null,$=null,K=new Ze(0,0,0),Q=0,G=!1,z=null,oe=null,ye=null,ge=null,_e=null,dn.set(0,0,n.canvas.width,n.canvas.height),Ae.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}}}function uq(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),h=new Fe,f=new WeakMap;let p;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(ne,W){return y?new OffscreenCanvas(ne,W):Fh("canvas")}function M(ne,W,ve){let De=1;const Be=ut(ne);if((Be.width>ve||Be.height>ve)&&(De=ve/Math.max(Be.width,Be.height)),De<1){if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap||typeof VideoFrame<"u"&&ne instanceof VideoFrame){const Ie=Math.floor(De*Be.width),Mt=Math.floor(De*Be.height);void 0===p&&(p=x(Ie,Mt));const et=W?x(Ie,Mt):p;return et.width=Ie,et.height=Mt,et.getContext("2d").drawImage(ne,0,0,Ie,Mt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Be.width+"x"+Be.height+") to ("+Ie+"x"+Mt+")."),et}return"data"in ne&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Be.width+"x"+Be.height+")."),ne}return ne}function S(ne){return ne.generateMipmaps}function b(ne){n.generateMipmap(ne)}function D(ne){return ne.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ne.isWebGL3DRenderTarget?n.TEXTURE_3D:ne.isWebGLArrayRenderTarget||ne.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function A(ne,W,ve,De,Be=!1){if(null!==ne){if(void 0!==n[ne])return n[ne];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let Ie=W;if(W===n.RED&&(ve===n.FLOAT&&(Ie=n.R32F),ve===n.HALF_FLOAT&&(Ie=n.R16F),ve===n.UNSIGNED_BYTE&&(Ie=n.R8)),W===n.RED_INTEGER&&(ve===n.UNSIGNED_BYTE&&(Ie=n.R8UI),ve===n.UNSIGNED_SHORT&&(Ie=n.R16UI),ve===n.UNSIGNED_INT&&(Ie=n.R32UI),ve===n.BYTE&&(Ie=n.R8I),ve===n.SHORT&&(Ie=n.R16I),ve===n.INT&&(Ie=n.R32I)),W===n.RG&&(ve===n.FLOAT&&(Ie=n.RG32F),ve===n.HALF_FLOAT&&(Ie=n.RG16F),ve===n.UNSIGNED_BYTE&&(Ie=n.RG8)),W===n.RG_INTEGER&&(ve===n.UNSIGNED_BYTE&&(Ie=n.RG8UI),ve===n.UNSIGNED_SHORT&&(Ie=n.RG16UI),ve===n.UNSIGNED_INT&&(Ie=n.RG32UI),ve===n.BYTE&&(Ie=n.RG8I),ve===n.SHORT&&(Ie=n.RG16I),ve===n.INT&&(Ie=n.RG32I)),W===n.RGB_INTEGER&&(ve===n.UNSIGNED_BYTE&&(Ie=n.RGB8UI),ve===n.UNSIGNED_SHORT&&(Ie=n.RGB16UI),ve===n.UNSIGNED_INT&&(Ie=n.RGB32UI),ve===n.BYTE&&(Ie=n.RGB8I),ve===n.SHORT&&(Ie=n.RGB16I),ve===n.INT&&(Ie=n.RGB32I)),W===n.RGBA_INTEGER&&(ve===n.UNSIGNED_BYTE&&(Ie=n.RGBA8UI),ve===n.UNSIGNED_SHORT&&(Ie=n.RGBA16UI),ve===n.UNSIGNED_INT&&(Ie=n.RGBA32UI),ve===n.BYTE&&(Ie=n.RGBA8I),ve===n.SHORT&&(Ie=n.RGBA16I),ve===n.INT&&(Ie=n.RGBA32I)),W===n.RGB&&ve===n.UNSIGNED_INT_5_9_9_9_REV&&(Ie=n.RGB9_E5),W===n.RGBA){const Mt=Be?Sp:vn.getTransfer(De);ve===n.FLOAT&&(Ie=n.RGBA32F),ve===n.HALF_FLOAT&&(Ie=n.RGBA16F),ve===n.UNSIGNED_BYTE&&(Ie=Mt===Fn?n.SRGB8_ALPHA8:n.RGBA8),ve===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),ve===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)}return(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function T(ne,W){let ve;return ne?null===W||W===sa||W===vc?ve=n.DEPTH24_STENCIL8:W===Nr?ve=n.DEPTH32F_STENCIL8:W===Th&&(ve=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===W||W===sa||W===vc?ve=n.DEPTH_COMPONENT24:W===Nr?ve=n.DEPTH_COMPONENT32F:W===Th&&(ve=n.DEPTH_COMPONENT16),ve}function q(ne,W){return!0===S(ne)||ne.isFramebufferTexture&&ne.minFilter!==wi&&ne.minFilter!==oi?Math.log2(Math.max(W.width,W.height))+1:void 0!==ne.mipmaps&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?W.mipmaps.length:1}function $(ne){const W=ne.target;W.removeEventListener("dispose",$),function Q(ne){const W=i.get(ne);if(void 0===W.__webglInit)return;const ve=ne.source,De=v.get(ve);if(De){const Be=De[W.__cacheKey];Be.usedTimes--,0===Be.usedTimes&&G(ne),0===Object.keys(De).length&&v.delete(ve)}i.remove(ne)}(W),W.isVideoTexture&&f.delete(W)}function K(ne){const W=ne.target;W.removeEventListener("dispose",K),function z(ne){const W=i.get(ne);if(ne.depthTexture&&(ne.depthTexture.dispose(),i.remove(ne.depthTexture)),ne.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(W.__webglFramebuffer[De]))for(let Be=0;Be<W.__webglFramebuffer[De].length;Be++)n.deleteFramebuffer(W.__webglFramebuffer[De][Be]);else n.deleteFramebuffer(W.__webglFramebuffer[De]);W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[De])}else{if(Array.isArray(W.__webglFramebuffer))for(let De=0;De<W.__webglFramebuffer.length;De++)n.deleteFramebuffer(W.__webglFramebuffer[De]);else n.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let De=0;De<W.__webglColorRenderbuffer.length;De++)W.__webglColorRenderbuffer[De]&&n.deleteRenderbuffer(W.__webglColorRenderbuffer[De]);W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ve=ne.textures;for(let De=0,Be=ve.length;De<Be;De++){const Ie=i.get(ve[De]);Ie.__webglTexture&&(n.deleteTexture(Ie.__webglTexture),o.memory.textures--),i.remove(ve[De])}i.remove(ne)}(W)}function G(ne){const W=i.get(ne);n.deleteTexture(W.__webglTexture),delete v.get(ne.source)[W.__cacheKey],o.memory.textures--}let oe=0;function Te(ne,W){const ve=i.get(ne);if(ne.isVideoTexture&&function qe(ne){const W=o.render.frame;f.get(ne)!==W&&(f.set(ne,W),ne.update())}(ne),!1===ne.isRenderTargetTexture&&ne.version>0&&ve.__version!==ne.version){const De=ne.image;if(null===De)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==De.complete)return void Ae(ve,ne,W);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,ve.__webglTexture,n.TEXTURE0+W)}const Ye={[Ha]:n.REPEAT,[Kr]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},st={[wi]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,[gc]:n.NEAREST_MIPMAP_LINEAR,[oi]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[ws]:n.LINEAR_MIPMAP_LINEAR},dt={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function Yt(ne,W){if(W.type===Nr&&!1===e.has("OES_texture_float_linear")&&(W.magFilter===oi||1007===W.magFilter||W.magFilter===gc||W.magFilter===ws||W.minFilter===oi||1007===W.minFilter||W.minFilter===gc||W.minFilter===ws)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ne,n.TEXTURE_WRAP_S,Ye[W.wrapS]),n.texParameteri(ne,n.TEXTURE_WRAP_T,Ye[W.wrapT]),(ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ne,n.TEXTURE_WRAP_R,Ye[W.wrapR]),n.texParameteri(ne,n.TEXTURE_MAG_FILTER,st[W.magFilter]),n.texParameteri(ne,n.TEXTURE_MIN_FILTER,st[W.minFilter]),W.compareFunction&&(n.texParameteri(ne,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ne,n.TEXTURE_COMPARE_FUNC,dt[W.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(W.magFilter===wi||W.minFilter!==gc&&W.minFilter!==ws||W.type===Nr&&!1===e.has("OES_texture_float_linear"))return;if(W.anisotropy>1||i.get(W).__currentAnisotropy){const ve=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ne,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy}}}function dn(ne,W){let ve=!1;void 0===ne.__webglInit&&(ne.__webglInit=!0,W.addEventListener("dispose",$));const De=W.source;let Be=v.get(De);void 0===Be&&(Be={},v.set(De,Be));const Ie=function _e(ne){const W=[];return W.push(ne.wrapS),W.push(ne.wrapT),W.push(ne.wrapR||0),W.push(ne.magFilter),W.push(ne.minFilter),W.push(ne.anisotropy),W.push(ne.internalFormat),W.push(ne.format),W.push(ne.type),W.push(ne.generateMipmaps),W.push(ne.premultiplyAlpha),W.push(ne.flipY),W.push(ne.unpackAlignment),W.push(ne.colorSpace),W.join()}(W);if(Ie!==ne.__cacheKey){void 0===Be[Ie]&&(Be[Ie]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ve=!0),Be[Ie].usedTimes++;const Mt=Be[ne.__cacheKey];void 0!==Mt&&(Be[ne.__cacheKey].usedTimes--,0===Mt.usedTimes&&G(W)),ne.__cacheKey=Ie,ne.__webglTexture=Be[Ie].texture}return ve}function Ae(ne,W,ve){let De=n.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(De=n.TEXTURE_2D_ARRAY),W.isData3DTexture&&(De=n.TEXTURE_3D);const Be=dn(ne,W),Ie=W.source;t.bindTexture(De,ne.__webglTexture,n.TEXTURE0+ve);const Mt=i.get(Ie);if(Ie.version!==Mt.__version||!0===Be){t.activeTexture(n.TEXTURE0+ve);const et=vn.getPrimaries(vn.workingColorSpace),ft=""===W.colorSpace?null:vn.getPrimaries(W.colorSpace),pn=""===W.colorSpace||et===ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pn);let Ge=M(W.image,!1,r.maxTextureSize);Ge=zt(W,Ge);const yt=s.convert(W.format,W.colorSpace),Bt=s.convert(W.type);let _t,Wt=A(W.internalFormat,yt,Bt,W.colorSpace,W.isVideoTexture);Yt(De,W);const bn=W.mipmaps,on=!0!==W.isVideoTexture,Hn=void 0===Mt.__version||!0===Be,de=Ie.dataReady,at=q(W,Ge);if(W.isDepthTexture)Wt=T(W.format===_c,W.type),Hn&&(on?t.texStorage2D(n.TEXTURE_2D,1,Wt,Ge.width,Ge.height):t.texImage2D(n.TEXTURE_2D,0,Wt,Ge.width,Ge.height,0,yt,Bt,null));else if(W.isDataTexture)if(bn.length>0){on&&Hn&&t.texStorage2D(n.TEXTURE_2D,at,Wt,bn[0].width,bn[0].height);for(let we=0,Ne=bn.length;we<Ne;we++)_t=bn[we],on?de&&t.texSubImage2D(n.TEXTURE_2D,we,0,0,_t.width,_t.height,yt,Bt,_t.data):t.texImage2D(n.TEXTURE_2D,we,Wt,_t.width,_t.height,0,yt,Bt,_t.data);W.generateMipmaps=!1}else on?(Hn&&t.texStorage2D(n.TEXTURE_2D,at,Wt,Ge.width,Ge.height),de&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge.width,Ge.height,yt,Bt,Ge.data)):t.texImage2D(n.TEXTURE_2D,0,Wt,Ge.width,Ge.height,0,yt,Bt,Ge.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){on&&Hn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,Wt,bn[0].width,bn[0].height,Ge.depth);for(let we=0,Ne=bn.length;we<Ne;we++)if(_t=bn[we],W.format!==_r)if(null!==yt)if(on){if(de)if(W.layerUpdates.size>0){const ht=Qx(_t.width,_t.height,W.format,W.type);for(const lt of W.layerUpdates){const nn=_t.data.subarray(lt*ht/_t.data.BYTES_PER_ELEMENT,(lt+1)*ht/_t.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,lt,_t.width,_t.height,1,yt,nn)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,_t.width,_t.height,Ge.depth,yt,_t.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,we,Wt,_t.width,_t.height,Ge.depth,0,_t.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else on?de&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,we,0,0,0,_t.width,_t.height,Ge.depth,yt,Bt,_t.data):t.texImage3D(n.TEXTURE_2D_ARRAY,we,Wt,_t.width,_t.height,Ge.depth,0,yt,Bt,_t.data)}else{on&&Hn&&t.texStorage2D(n.TEXTURE_2D,at,Wt,bn[0].width,bn[0].height);for(let we=0,Ne=bn.length;we<Ne;we++)_t=bn[we],W.format!==_r?null!==yt?on?de&&t.compressedTexSubImage2D(n.TEXTURE_2D,we,0,0,_t.width,_t.height,yt,_t.data):t.compressedTexImage2D(n.TEXTURE_2D,we,Wt,_t.width,_t.height,0,_t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):on?de&&t.texSubImage2D(n.TEXTURE_2D,we,0,0,_t.width,_t.height,yt,Bt,_t.data):t.texImage2D(n.TEXTURE_2D,we,Wt,_t.width,_t.height,0,yt,Bt,_t.data)}else if(W.isDataArrayTexture)if(on){if(Hn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,at,Wt,Ge.width,Ge.height,Ge.depth),de)if(W.layerUpdates.size>0){const we=Qx(Ge.width,Ge.height,W.format,W.type);for(const Ne of W.layerUpdates){const ht=Ge.data.subarray(Ne*we/Ge.data.BYTES_PER_ELEMENT,(Ne+1)*we/Ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ne,Ge.width,Ge.height,1,yt,Bt,ht)}W.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,yt,Bt,Ge.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Wt,Ge.width,Ge.height,Ge.depth,0,yt,Bt,Ge.data);else if(W.isData3DTexture)on?(Hn&&t.texStorage3D(n.TEXTURE_3D,at,Wt,Ge.width,Ge.height,Ge.depth),de&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,yt,Bt,Ge.data)):t.texImage3D(n.TEXTURE_3D,0,Wt,Ge.width,Ge.height,Ge.depth,0,yt,Bt,Ge.data);else if(W.isFramebufferTexture){if(Hn)if(on)t.texStorage2D(n.TEXTURE_2D,at,Wt,Ge.width,Ge.height);else{let we=Ge.width,Ne=Ge.height;for(let ht=0;ht<at;ht++)t.texImage2D(n.TEXTURE_2D,ht,Wt,we,Ne,0,yt,Bt,null),we>>=1,Ne>>=1}}else if(bn.length>0){if(on&&Hn){const we=ut(bn[0]);t.texStorage2D(n.TEXTURE_2D,at,Wt,we.width,we.height)}for(let we=0,Ne=bn.length;we<Ne;we++)_t=bn[we],on?de&&t.texSubImage2D(n.TEXTURE_2D,we,0,0,yt,Bt,_t):t.texImage2D(n.TEXTURE_2D,we,Wt,yt,Bt,_t);W.generateMipmaps=!1}else if(on){if(Hn){const we=ut(Ge);t.texStorage2D(n.TEXTURE_2D,at,Wt,we.width,we.height)}de&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,yt,Bt,Ge)}else t.texImage2D(n.TEXTURE_2D,0,Wt,yt,Bt,Ge);S(W)&&b(De),Mt.__version=Ie.version,W.onUpdate&&W.onUpdate(W)}ne.__version=W.version}function ot(ne,W,ve,De,Be,Ie){const Mt=s.convert(ve.format,ve.colorSpace),et=s.convert(ve.type),ft=A(ve.internalFormat,Mt,et,ve.colorSpace),pn=i.get(W),Ge=i.get(ve);if(Ge.__renderTarget=W,!pn.__hasExternalTextures){const yt=Math.max(1,W.width>>Ie),Bt=Math.max(1,W.height>>Ie);Be===n.TEXTURE_3D||Be===n.TEXTURE_2D_ARRAY?t.texImage3D(Be,Ie,ft,yt,Bt,W.depth,0,Mt,et,null):t.texImage2D(Be,Ie,ft,yt,Bt,0,Mt,et,null)}t.bindFramebuffer(n.FRAMEBUFFER,ne),pt(W)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,De,Be,Ge.__webglTexture,0,Ue(W)):(Be===n.TEXTURE_2D||Be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,De,Be,Ge.__webglTexture,Ie),t.bindFramebuffer(n.FRAMEBUFFER,null)}function je(ne,W,ve){if(n.bindRenderbuffer(n.RENDERBUFFER,ne),W.depthBuffer){const De=W.depthTexture,Ie=T(W.stencilBuffer,De&&De.isDepthTexture?De.type:null),Mt=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=Ue(W);pt(W)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,Ie,W.width,W.height):ve?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,Ie,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,Ie,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Mt,n.RENDERBUFFER,ne)}else{const De=W.textures;for(let Be=0;Be<De.length;Be++){const Ie=De[Be],Mt=s.convert(Ie.format,Ie.colorSpace),et=s.convert(Ie.type),ft=A(Ie.internalFormat,Mt,et,Ie.colorSpace),pn=Ue(W);ve&&!1===pt(W)?n.renderbufferStorageMultisample(n.RENDERBUFFER,pn,ft,W.width,W.height):pt(W)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pn,ft,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,ft,W.width,W.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ht(ne){const W=i.get(ne),ve=!0===ne.isWebGLCubeRenderTarget;if(W.__boundDepthTexture!==ne.depthTexture){const De=ne.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),De){const Be=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,De.removeEventListener("dispose",Be)};De.addEventListener("dispose",Be),W.__depthDisposeCallback=Be}W.__boundDepthTexture=De}if(ne.depthTexture&&!W.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");!function Et(ne,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ne),!W.depthTexture||!W.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const De=i.get(W.depthTexture);De.__renderTarget=W,(!De.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),Te(W.depthTexture,0);const Be=De.__webglTexture,Ie=Ue(W);if(W.depthTexture.format===yc)pt(W)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Be,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Be,0);else{if(W.depthTexture.format!==_c)throw new Error("Unknown depthTexture format");pt(W)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Be,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Be,0)}}(W.__webglFramebuffer,ne)}else if(ve){W.__webglDepthbuffer=[];for(let De=0;De<6;De++)if(t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer[De]),void 0===W.__webglDepthbuffer[De])W.__webglDepthbuffer[De]=n.createRenderbuffer(),je(W.__webglDepthbuffer[De],ne,!1);else{const Be=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=W.__webglDepthbuffer[De];n.bindRenderbuffer(n.RENDERBUFFER,Ie),n.framebufferRenderbuffer(n.FRAMEBUFFER,Be,n.RENDERBUFFER,Ie)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer),void 0===W.__webglDepthbuffer)W.__webglDepthbuffer=n.createRenderbuffer(),je(W.__webglDepthbuffer,ne,!1);else{const De=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=W.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Be),n.framebufferRenderbuffer(n.FRAMEBUFFER,De,n.RENDERBUFFER,Be)}t.bindFramebuffer(n.FRAMEBUFFER,null)}const We=[],se=[];function Ue(ne){return Math.min(r.maxSamples,ne.samples)}function pt(ne){const W=i.get(ne);return ne.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==W.__useRenderToTexture}function zt(ne,W){const ve=ne.colorSpace,De=ne.format,Be=ne.type;return!0===ne.isCompressedTexture||!0===ne.isVideoTexture||ve!==or&&""!==ve&&(vn.getTransfer(ve)===Fn?(De!==_r||Be!==Co)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ve)),W}function ut(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement?(h.width=ne.naturalWidth||ne.width,h.height=ne.naturalHeight||ne.height):typeof VideoFrame<"u"&&ne instanceof VideoFrame?(h.width=ne.displayWidth,h.height=ne.displayHeight):(h.width=ne.width,h.height=ne.height),h}this.allocateTextureUnit=function ge(){const ne=oe;return ne>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+r.maxTextures),oe+=1,ne},this.resetTextureUnits=function ye(){oe=0},this.setTexture2D=Te,this.setTexture2DArray=function xe(ne,W){const ve=i.get(ne);ne.version>0&&ve.__version!==ne.version?Ae(ve,ne,W):t.bindTexture(n.TEXTURE_2D_ARRAY,ve.__webglTexture,n.TEXTURE0+W)},this.setTexture3D=function Ve(ne,W){const ve=i.get(ne);ne.version>0&&ve.__version!==ne.version?Ae(ve,ne,W):t.bindTexture(n.TEXTURE_3D,ve.__webglTexture,n.TEXTURE0+W)},this.setTextureCube=function Me(ne,W){const ve=i.get(ne);ne.version>0&&ve.__version!==ne.version?function ze(ne,W,ve){if(6!==W.image.length)return;const De=dn(ne,W),Be=W.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+ve);const Ie=i.get(Be);if(Be.version!==Ie.__version||!0===De){t.activeTexture(n.TEXTURE0+ve);const Mt=vn.getPrimaries(vn.workingColorSpace),et=""===W.colorSpace?null:vn.getPrimaries(W.colorSpace),ft=""===W.colorSpace||Mt===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);const pn=W.isCompressedTexture||W.image[0].isCompressedTexture,Ge=W.image[0]&&W.image[0].isDataTexture,yt=[];for(let Ne=0;Ne<6;Ne++)yt[Ne]=pn||Ge?Ge?W.image[Ne].image:W.image[Ne]:M(W.image[Ne],!0,r.maxCubemapSize),yt[Ne]=zt(W,yt[Ne]);const Bt=yt[0],Wt=s.convert(W.format,W.colorSpace),_t=s.convert(W.type),bn=A(W.internalFormat,Wt,_t,W.colorSpace),on=!0!==W.isVideoTexture,Hn=void 0===Ie.__version||!0===De,de=Be.dataReady;let we,at=q(W,Bt);if(Yt(n.TEXTURE_CUBE_MAP,W),pn){on&&Hn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,at,bn,Bt.width,Bt.height);for(let Ne=0;Ne<6;Ne++){we=yt[Ne].mipmaps;for(let ht=0;ht<we.length;ht++){const lt=we[ht];W.format!==_r?null!==Wt?on?de&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht,0,0,lt.width,lt.height,Wt,lt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht,bn,lt.width,lt.height,0,lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):on?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht,0,0,lt.width,lt.height,Wt,_t,lt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht,bn,lt.width,lt.height,0,Wt,_t,lt.data)}}}else{if(we=W.mipmaps,on&&Hn){we.length>0&&at++;const Ne=ut(yt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,at,bn,Ne.width,Ne.height)}for(let Ne=0;Ne<6;Ne++)if(Ge){on?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,yt[Ne].width,yt[Ne].height,Wt,_t,yt[Ne].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,bn,yt[Ne].width,yt[Ne].height,0,Wt,_t,yt[Ne].data);for(let ht=0;ht<we.length;ht++){const nn=we[ht].image[Ne].image;on?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht+1,0,0,nn.width,nn.height,Wt,_t,nn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht+1,bn,nn.width,nn.height,0,Wt,_t,nn.data)}}else{on?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Wt,_t,yt[Ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,bn,Wt,_t,yt[Ne]);for(let ht=0;ht<we.length;ht++){const lt=we[ht];on?de&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht+1,0,0,Wt,_t,lt.image[Ne]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ht+1,bn,Wt,_t,lt.image[Ne])}}}S(W)&&b(n.TEXTURE_CUBE_MAP),Ie.__version=Be.version,W.onUpdate&&W.onUpdate(W)}ne.__version=W.version}(ve,ne,W):t.bindTexture(n.TEXTURE_CUBE_MAP,ve.__webglTexture,n.TEXTURE0+W)},this.rebindTextures=function At(ne,W,ve){const De=i.get(ne);void 0!==W&&ot(De.__webglFramebuffer,ne,ne.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==ve&&Ht(ne)},this.setupRenderTarget=function fn(ne){const W=ne.texture,ve=i.get(ne),De=i.get(W);ne.addEventListener("dispose",K);const Be=ne.textures,Ie=!0===ne.isWebGLCubeRenderTarget,Mt=Be.length>1;if(Mt||(void 0===De.__webglTexture&&(De.__webglTexture=n.createTexture()),De.__version=W.version,o.memory.textures++),Ie){ve.__webglFramebuffer=[];for(let et=0;et<6;et++)if(W.mipmaps&&W.mipmaps.length>0){ve.__webglFramebuffer[et]=[];for(let ft=0;ft<W.mipmaps.length;ft++)ve.__webglFramebuffer[et][ft]=n.createFramebuffer()}else ve.__webglFramebuffer[et]=n.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ve.__webglFramebuffer=[];for(let et=0;et<W.mipmaps.length;et++)ve.__webglFramebuffer[et]=n.createFramebuffer()}else ve.__webglFramebuffer=n.createFramebuffer();if(Mt)for(let et=0,ft=Be.length;et<ft;et++){const pn=i.get(Be[et]);void 0===pn.__webglTexture&&(pn.__webglTexture=n.createTexture(),o.memory.textures++)}if(ne.samples>0&&!1===pt(ne)){ve.__webglMultisampledFramebuffer=n.createFramebuffer(),ve.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let et=0;et<Be.length;et++){const ft=Be[et];ve.__webglColorRenderbuffer[et]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ve.__webglColorRenderbuffer[et]);const pn=s.convert(ft.format,ft.colorSpace),Ge=s.convert(ft.type),yt=A(ft.internalFormat,pn,Ge,ft.colorSpace,!0===ne.isXRRenderTarget),Bt=Ue(ne);n.renderbufferStorageMultisample(n.RENDERBUFFER,Bt,yt,ne.width,ne.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,ve.__webglColorRenderbuffer[et])}n.bindRenderbuffer(n.RENDERBUFFER,null),ne.depthBuffer&&(ve.__webglDepthRenderbuffer=n.createRenderbuffer(),je(ve.__webglDepthRenderbuffer,ne,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ie){t.bindTexture(n.TEXTURE_CUBE_MAP,De.__webglTexture),Yt(n.TEXTURE_CUBE_MAP,W);for(let et=0;et<6;et++)if(W.mipmaps&&W.mipmaps.length>0)for(let ft=0;ft<W.mipmaps.length;ft++)ot(ve.__webglFramebuffer[et][ft],ne,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ft);else ot(ve.__webglFramebuffer[et],ne,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);S(W)&&b(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Mt){for(let et=0,ft=Be.length;et<ft;et++){const pn=Be[et],Ge=i.get(pn);t.bindTexture(n.TEXTURE_2D,Ge.__webglTexture),Yt(n.TEXTURE_2D,pn),ot(ve.__webglFramebuffer,ne,pn,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,0),S(pn)&&b(n.TEXTURE_2D)}t.unbindTexture()}else{let et=n.TEXTURE_2D;if((ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(et=ne.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(et,De.__webglTexture),Yt(et,W),W.mipmaps&&W.mipmaps.length>0)for(let ft=0;ft<W.mipmaps.length;ft++)ot(ve.__webglFramebuffer[ft],ne,W,n.COLOR_ATTACHMENT0,et,ft);else ot(ve.__webglFramebuffer,ne,W,n.COLOR_ATTACHMENT0,et,0);S(W)&&b(et),t.unbindTexture()}ne.depthBuffer&&Ht(ne)},this.updateRenderTargetMipmap=function Oe(ne){const W=ne.textures;for(let ve=0,De=W.length;ve<De;ve++){const Be=W[ve];if(S(Be)){const Ie=D(ne),Mt=i.get(Be).__webglTexture;t.bindTexture(Ie,Mt),b(Ie),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function wt(ne){if(ne.samples>0)if(!1===pt(ne)){const W=ne.textures,ve=ne.width,De=ne.height;let Be=n.COLOR_BUFFER_BIT;const Ie=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Mt=i.get(ne),et=W.length>1;if(et)for(let ft=0;ft<W.length;ft++)t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let ft=0;ft<W.length;ft++){if(ne.resolveDepthBuffer&&(ne.depthBuffer&&(Be|=n.DEPTH_BUFFER_BIT),ne.stencilBuffer&&ne.resolveStencilBuffer&&(Be|=n.STENCIL_BUFFER_BIT)),et){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Mt.__webglColorRenderbuffer[ft]);const pn=i.get(W[ft]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,pn,0)}n.blitFramebuffer(0,0,ve,De,0,0,ve,De,Be,n.NEAREST),!0===c&&(We.length=0,se.length=0,We.push(n.COLOR_ATTACHMENT0+ft),ne.depthBuffer&&!1===ne.resolveDepthBuffer&&(We.push(Ie),se.push(Ie),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,se)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,We))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),et)for(let ft=0;ft<W.length;ft++){t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.RENDERBUFFER,Mt.__webglColorRenderbuffer[ft]);const pn=i.get(W[ft]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Mt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ft,n.TEXTURE_2D,pn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else ne.depthBuffer&&!1===ne.resolveDepthBuffer&&c&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Ht,this.setupFrameBufferTexture=ot,this.useMultisampledRTT=pt}function hq(n,e){return{convert:function t(i,r=""){let s;const o=vn.getTransfer(r);if(i===Co)return n.UNSIGNED_BYTE;if(1017===i)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return n.UNSIGNED_SHORT_5_5_5_1;if(35902===i)return n.UNSIGNED_INT_5_9_9_9_REV;if(1010===i)return n.BYTE;if(1011===i)return n.SHORT;if(i===Th)return n.UNSIGNED_SHORT;if(1013===i)return n.INT;if(i===sa)return n.UNSIGNED_INT;if(i===Nr)return n.FLOAT;if(i===Dh)return n.HALF_FLOAT;if(1021===i)return n.ALPHA;if(1022===i)return n.RGB;if(i===_r)return n.RGBA;if(1024===i)return n.LUMINANCE;if(1025===i)return n.LUMINANCE_ALPHA;if(i===yc)return n.DEPTH_COMPONENT;if(i===_c)return n.DEPTH_STENCIL;if(1028===i)return n.RED;if(1029===i)return n.RED_INTEGER;if(1030===i)return n.RG;if(1031===i)return n.RG_INTEGER;if(1033===i)return n.RGBA_INTEGER;if(i===gp||i===vp||i===yp||i===_p)if(o===Fn){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===gp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===vp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===yp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===_p)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===gp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===vp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===yp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===_p)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===i||35841===i||35842===i||35843===i){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===i)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i||37492===i||37496===i){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(36196===i||37492===i)return o===Fn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===i)return o===Fn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===xp||36494===i||36495===i){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===xp)return o===Fn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===i)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===i)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===i||36284===i||36285===i||36286===i){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===xp)return s.COMPRESSED_RED_RGTC1_EXT;if(36284===i)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===i)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===i)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===vc?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}const dq={type:"move"};class cb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new fa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new fa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new fa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,h=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(h&&e.hand){o=!0;for(const M of e.hand.values()){const S=t.getJointPose(M,i),b=this._getHandJoint(h,M);null!==S&&(b.matrix.fromArray(S.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=S.radius),b.visible=null!==S}const v=h.joints["index-finger-tip"].position.distanceTo(h.joints["thumb-tip"].position),y=.02,x=.005;h.inputState.pinching&&v>y+x?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=y-x&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(dq)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==h&&(h.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new fa;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class mq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new Jr;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Oo({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ti(new Qh(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gq extends Mc{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=1,h=null,f=null,p=null,v=null,y=null,x=null;const M=new mq,S=t.getContextAttributes();let b=null,D=null;const A=[],T=[],q=new Fe;let $=null;const K=new Di;K.viewport=new Mn;const Q=new Di;Q.viewport=new Mn;const G=[K,Q],z=new K6;let oe=null,ye=null;function ge(Ae){const ze=T.indexOf(Ae.inputSource);if(-1===ze)return;const ot=A[ze];void 0!==ot&&(ot.update(Ae.inputSource,Ae.frame,h||o),ot.dispatchEvent({type:Ae.type,data:Ae.inputSource}))}function _e(){r.removeEventListener("select",ge),r.removeEventListener("selectstart",ge),r.removeEventListener("selectend",ge),r.removeEventListener("squeeze",ge),r.removeEventListener("squeezestart",ge),r.removeEventListener("squeezeend",ge),r.removeEventListener("end",_e),r.removeEventListener("inputsourceschange",Te);for(let Ae=0;Ae<A.length;Ae++){const ze=T[Ae];null!==ze&&(T[Ae]=null,A[Ae].disconnect(ze))}oe=null,ye=null,M.reset(),e.setRenderTarget(b),y=null,v=null,p=null,r=null,D=null,dn.stop(),i.isPresenting=!1,e.setPixelRatio($),e.setSize(q.width,q.height,!1),i.dispatchEvent({type:"sessionend"})}function Te(Ae){for(let ze=0;ze<Ae.removed.length;ze++){const ot=Ae.removed[ze],je=T.indexOf(ot);je>=0&&(T[je]=null,A[je].disconnect(ot))}for(let ze=0;ze<Ae.added.length;ze++){const ot=Ae.added[ze];let je=T.indexOf(ot);if(-1===je){for(let Ht=0;Ht<A.length;Ht++){if(Ht>=T.length){T.push(ot),je=Ht;break}if(null===T[Ht]){T[Ht]=ot,je=Ht;break}}if(-1===je)break}const Et=A[je];Et&&Et.connect(ot)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ae){let ze=A[Ae];return void 0===ze&&(ze=new cb,A[Ae]=ze),ze.getTargetRaySpace()},this.getControllerGrip=function(Ae){let ze=A[Ae];return void 0===ze&&(ze=new cb,A[Ae]=ze),ze.getGripSpace()},this.getHand=function(Ae){let ze=A[Ae];return void 0===ze&&(ze=new cb,A[Ae]=ze),ze.getHandSpace()},this.setFramebufferScaleFactor=function(Ae){s=Ae,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ae){a=Ae,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(Ae){h=Ae},this.getBaseLayer=function(){return null!==v?v:y},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=function(){var Ae=gP(function*(ze){if(r=ze,null!==r){if(b=e.getRenderTarget(),r.addEventListener("select",ge),r.addEventListener("selectstart",ge),r.addEventListener("selectend",ge),r.addEventListener("squeeze",ge),r.addEventListener("squeezestart",ge),r.addEventListener("squeezeend",ge),r.addEventListener("end",_e),r.addEventListener("inputsourceschange",Te),!0!==S.xrCompatible&&(yield t.makeXRCompatible()),$=e.getPixelRatio(),e.getSize(q),void 0===r.renderState.layers)y=new XRWebGLLayer(r,t,{antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),D=new Wa(y.framebufferWidth,y.framebufferHeight,{format:_r,type:Co,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil});else{let ot=null,je=null,Et=null;S.depth&&(Et=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ot=S.stencil?_c:yc,je=S.stencil?vc:sa);const Ht={colorFormat:t.RGBA8,depthFormat:Et,scaleFactor:s};p=new XRWebGLBinding(r,t),v=p.createProjectionLayer(Ht),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),D=new Wa(v.textureWidth,v.textureHeight,{format:_r,type:Co,depthTexture:new xI(v.textureWidth,v.textureHeight,je,void 0,void 0,void 0,void 0,void 0,void 0,ot),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:!1===v.ignoreDepthValues})}D.isXRRenderTarget=!0,this.setFoveation(c),h=null,o=yield r.requestReferenceSpace(a),dn.setContext(r),dn.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ze){return Ae.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};const xe=new re,Ve=new re;function Ye(Ae,ze){null===ze?Ae.matrixWorld.copy(Ae.matrix):Ae.matrixWorld.multiplyMatrices(ze.matrixWorld,Ae.matrix),Ae.matrixWorldInverse.copy(Ae.matrixWorld).invert()}this.updateCamera=function(Ae){if(null===r)return;let ze=Ae.near,ot=Ae.far;null!==M.texture&&(M.depthNear>0&&(ze=M.depthNear),M.depthFar>0&&(ot=M.depthFar)),z.near=Q.near=K.near=ze,z.far=Q.far=K.far=ot,(oe!==z.near||ye!==z.far)&&(r.updateRenderState({depthNear:z.near,depthFar:z.far}),oe=z.near,ye=z.far),K.layers.mask=2|Ae.layers.mask,Q.layers.mask=4|Ae.layers.mask,z.layers.mask=K.layers.mask|Q.layers.mask;const je=Ae.parent,Et=z.cameras;Ye(z,je);for(let Ht=0;Ht<Et.length;Ht++)Ye(Et[Ht],je);2===Et.length?function Me(Ae,ze,ot){xe.setFromMatrixPosition(ze.matrixWorld),Ve.setFromMatrixPosition(ot.matrixWorld);const je=xe.distanceTo(Ve),Et=ze.projectionMatrix.elements,Ht=ot.projectionMatrix.elements,At=Et[14]/(Et[10]-1),fn=Et[14]/(Et[10]+1),Oe=(Et[9]+1)/Et[5],We=(Et[9]-1)/Et[5],se=(Et[8]-1)/Et[0],wt=(Ht[8]+1)/Ht[0],Ue=At*se,pt=At*wt,qe=je/(-se+wt),zt=qe*-se;if(ze.matrixWorld.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.translateX(zt),Ae.translateZ(qe),Ae.matrixWorld.compose(Ae.position,Ae.quaternion,Ae.scale),Ae.matrixWorldInverse.copy(Ae.matrixWorld).invert(),-1===Et[10])Ae.projectionMatrix.copy(ze.projectionMatrix),Ae.projectionMatrixInverse.copy(ze.projectionMatrixInverse);else{const ut=At+qe,ne=fn+qe;Ae.projectionMatrix.makePerspective(Ue-zt,pt+(je-zt),Oe*fn/ne*ut,We*fn/ne*ut,ut,ne),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert()}}(z,K,Q):z.projectionMatrix.copy(K.projectionMatrix),function st(Ae,ze,ot){null===ot?Ae.matrix.copy(ze.matrixWorld):(Ae.matrix.copy(ot.matrixWorld),Ae.matrix.invert(),Ae.matrix.multiply(ze.matrixWorld)),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.updateMatrixWorld(!0),Ae.projectionMatrix.copy(ze.projectionMatrix),Ae.projectionMatrixInverse.copy(ze.projectionMatrixInverse),Ae.isPerspectiveCamera&&(Ae.fov=2*Ec*Math.atan(1/Ae.projectionMatrix.elements[5]),Ae.zoom=1)}(Ae,z,je)},this.getCamera=function(){return z},this.getFoveation=function(){if(null!==v||null!==y)return c},this.setFoveation=function(Ae){c=Ae,null!==v&&(v.fixedFoveation=Ae),null!==y&&void 0!==y.fixedFoveation&&(y.fixedFoveation=Ae)},this.hasDepthSensing=function(){return null!==M.texture},this.getDepthSensingMesh=function(){return M.getMesh(z)};let dt=null;const dn=new vP;dn.setAnimationLoop(function Yt(Ae,ze){if(f=ze.getViewerPose(h||o),x=ze,null!==f){const ot=f.views;null!==y&&(e.setRenderTargetFramebuffer(D,y.framebuffer),e.setRenderTarget(D));let je=!1;ot.length!==z.cameras.length&&(z.cameras.length=0,je=!0);for(let Ht=0;Ht<ot.length;Ht++){const At=ot[Ht];let fn=null;if(null!==y)fn=y.getViewport(At);else{const We=p.getViewSubImage(v,At);fn=We.viewport,0===Ht&&(e.setRenderTargetTextures(D,We.colorTexture,v.ignoreDepthValues?void 0:We.depthStencilTexture),e.setRenderTarget(D))}let Oe=G[Ht];void 0===Oe&&(Oe=new Di,Oe.layers.enable(Ht),Oe.viewport=new Mn,G[Ht]=Oe),Oe.matrix.fromArray(At.transform.matrix),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.projectionMatrix.fromArray(At.projectionMatrix),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert(),Oe.viewport.set(fn.x,fn.y,fn.width,fn.height),0===Ht&&(z.matrix.copy(Oe.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),!0===je&&z.cameras.push(Oe)}const Et=r.enabledFeatures;if(Et&&Et.includes("depth-sensing")){const Ht=p.getDepthInformation(ot[0]);Ht&&Ht.isValid&&Ht.texture&&M.init(e,Ht,r.renderState)}}for(let ot=0;ot<A.length;ot++){const je=T[ot],Et=A[ot];null!==je&&void 0!==Et&&Et.update(je,ze,h||o)}dt&&dt(Ae,ze),ze.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ze}),x=null}),this.setAnimationLoop=function(Ae){dt=Ae},this.dispose=function(){}}}const dl=new Po,vq=new Rt;function yq(n,e){function t(S,b){!0===S.matrixAutoUpdate&&S.updateMatrix(),b.value.copy(S.matrix)}function s(S,b){S.opacity.value=b.opacity,b.color&&S.diffuse.value.copy(b.color),b.emissive&&S.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.bumpMap&&(S.bumpMap.value=b.bumpMap,t(b.bumpMap,S.bumpMapTransform),S.bumpScale.value=b.bumpScale,1===b.side&&(S.bumpScale.value*=-1)),b.normalMap&&(S.normalMap.value=b.normalMap,t(b.normalMap,S.normalMapTransform),S.normalScale.value.copy(b.normalScale),1===b.side&&S.normalScale.value.negate()),b.displacementMap&&(S.displacementMap.value=b.displacementMap,t(b.displacementMap,S.displacementMapTransform),S.displacementScale.value=b.displacementScale,S.displacementBias.value=b.displacementBias),b.emissiveMap&&(S.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,S.emissiveMapTransform)),b.specularMap&&(S.specularMap.value=b.specularMap,t(b.specularMap,S.specularMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest);const D=e.get(b),A=D.envMap,T=D.envMapRotation;A&&(S.envMap.value=A,dl.copy(T),dl.x*=-1,dl.y*=-1,dl.z*=-1,A.isCubeTexture&&!1===A.isRenderTargetTexture&&(dl.y*=-1,dl.z*=-1),S.envMapRotation.value.setFromMatrix4(vq.makeRotationFromEuler(dl)),S.flipEnvMap.value=A.isCubeTexture&&!1===A.isRenderTargetTexture?-1:1,S.reflectivity.value=b.reflectivity,S.ior.value=b.ior,S.refractionRatio.value=b.refractionRatio),b.lightMap&&(S.lightMap.value=b.lightMap,S.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,S.lightMapTransform)),b.aoMap&&(S.aoMap.value=b.aoMap,S.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,S.aoMapTransform))}return{refreshFogUniforms:function i(S,b){b.color.getRGB(S.fogColor.value,$D(n)),b.isFog?(S.fogNear.value=b.near,S.fogFar.value=b.far):b.isFogExp2&&(S.fogDensity.value=b.density)},refreshMaterialUniforms:function r(S,b,D,A,T){b.isMeshBasicMaterial||b.isMeshLambertMaterial?s(S,b):b.isMeshToonMaterial?(s(S,b),function p(S,b){b.gradientMap&&(S.gradientMap.value=b.gradientMap)}(S,b)):b.isMeshPhongMaterial?(s(S,b),function f(S,b){S.specular.value.copy(b.specular),S.shininess.value=Math.max(b.shininess,1e-4)}(S,b)):b.isMeshStandardMaterial?(s(S,b),function v(S,b){S.metalness.value=b.metalness,b.metalnessMap&&(S.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,S.metalnessMapTransform)),S.roughness.value=b.roughness,b.roughnessMap&&(S.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,S.roughnessMapTransform)),b.envMap&&(S.envMapIntensity.value=b.envMapIntensity)}(S,b),b.isMeshPhysicalMaterial&&function y(S,b,D){S.ior.value=b.ior,b.sheen>0&&(S.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),S.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(S.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,S.sheenColorMapTransform)),b.sheenRoughnessMap&&(S.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,S.sheenRoughnessMapTransform))),b.clearcoat>0&&(S.clearcoat.value=b.clearcoat,S.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(S.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,S.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(S.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),1===b.side&&S.clearcoatNormalScale.value.negate())),b.dispersion>0&&(S.dispersion.value=b.dispersion),b.iridescence>0&&(S.iridescence.value=b.iridescence,S.iridescenceIOR.value=b.iridescenceIOR,S.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(S.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,S.iridescenceMapTransform)),b.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),b.transmission>0&&(S.transmission.value=b.transmission,S.transmissionSamplerMap.value=D.texture,S.transmissionSamplerSize.value.set(D.width,D.height),b.transmissionMap&&(S.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,S.transmissionMapTransform)),S.thickness.value=b.thickness,b.thicknessMap&&(S.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=b.attenuationDistance,S.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(S.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(S.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=b.specularIntensity,S.specularColor.value.copy(b.specularColor),b.specularColorMap&&(S.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,S.specularColorMapTransform)),b.specularIntensityMap&&(S.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,S.specularIntensityMapTransform))}(S,b,T)):b.isMeshMatcapMaterial?(s(S,b),function x(S,b){b.matcap&&(S.matcap.value=b.matcap)}(S,b)):b.isMeshDepthMaterial?s(S,b):b.isMeshDistanceMaterial?(s(S,b),function M(S,b){const D=e.get(b).light;S.referencePosition.value.setFromMatrixPosition(D.matrixWorld),S.nearDistance.value=D.shadow.camera.near,S.farDistance.value=D.shadow.camera.far}(S,b)):b.isMeshNormalMaterial?s(S,b):b.isLineBasicMaterial?(function o(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform))}(S,b),b.isLineDashedMaterial&&function a(S,b){S.dashSize.value=b.dashSize,S.totalSize.value=b.dashSize+b.gapSize,S.scale.value=b.scale}(S,b)):b.isPointsMaterial?function c(S,b,D,A){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.size.value=b.size*D,S.scale.value=.5*A,b.map&&(S.map.value=b.map,t(b.map,S.uvTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}(S,b,D,A):b.isSpriteMaterial?function h(S,b){S.diffuse.value.copy(b.color),S.opacity.value=b.opacity,S.rotation.value=b.rotation,b.map&&(S.map.value=b.map,t(b.map,S.mapTransform)),b.alphaMap&&(S.alphaMap.value=b.alphaMap,t(b.alphaMap,S.alphaMapTransform)),b.alphaTest>0&&(S.alphaTest.value=b.alphaTest)}(S,b):b.isShadowMaterial?(S.color.value.copy(b.color),S.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}}}function _q(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function y(D,A,T,q){const $=D.value,K=A+"_"+T;if(void 0===q[K])return q[K]="number"==typeof $||"boolean"==typeof $?$:$.clone(),!0;{const Q=q[K];if("number"==typeof $||"boolean"==typeof $){if(Q!==$)return q[K]=$,!0}else if(!1===Q.equals($))return Q.copy($),!0}return!1}function M(D){const A={boundary:0,storage:0};return"number"==typeof D||"boolean"==typeof D?(A.boundary=4,A.storage=4):D.isVector2?(A.boundary=8,A.storage=8):D.isVector3||D.isColor?(A.boundary=16,A.storage=12):D.isVector4?(A.boundary=16,A.storage=16):D.isMatrix3?(A.boundary=48,A.storage=48):D.isMatrix4?(A.boundary=64,A.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),A}function S(D){const A=D.target;A.removeEventListener("dispose",S);const T=o.indexOf(A.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[A.id]),delete r[A.id],delete s[A.id]}return{bind:function c(D,A){i.uniformBlockBinding(D,A.program)},update:function h(D,A){let T=r[D.id];void 0===T&&(function x(D){const A=D.uniforms;let T=0;for(let K=0,Q=A.length;K<Q;K++){const G=Array.isArray(A[K])?A[K]:[A[K]];for(let z=0,oe=G.length;z<oe;z++){const ye=G[z],ge=Array.isArray(ye.value)?ye.value:[ye.value];for(let _e=0,Te=ge.length;_e<Te;_e++){const Ve=M(ge[_e]),Me=T%16,Ye=Me%Ve.boundary,st=Me+Ye;T+=Ye,0!==st&&16-st<Ve.storage&&(T+=16-st),ye.__data=new Float32Array(Ve.storage/Float32Array.BYTES_PER_ELEMENT),ye.__offset=T,T+=Ve.storage}}}const $=T%16;$>0&&(T+=16-$),D.__size=T,D.__cache={}}(D),T=function f(D){const A=function p(){for(let D=0;D<a;D++)if(-1===o.indexOf(D))return o.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();D.__bindingPointIndex=A;const T=n.createBuffer(),q=D.__size,$=D.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,q,$),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,T),T}(D),r[D.id]=T,D.addEventListener("dispose",S)),i.updateUBOMapping(D,A.program);const $=e.render.frame;s[D.id]!==$&&(function v(D){const T=D.uniforms,q=D.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[D.id]);for(let $=0,K=T.length;$<K;$++){const Q=Array.isArray(T[$])?T[$]:[T[$]];for(let G=0,z=Q.length;G<z;G++){const oe=Q[G];if(!0===y(oe,$,G,q)){const ye=oe.__offset,ge=Array.isArray(oe.value)?oe.value:[oe.value];let _e=0;for(let Te=0;Te<ge.length;Te++){const xe=ge[Te],Ve=M(xe);"number"==typeof xe||"boolean"==typeof xe?(oe.__data[0]=xe,n.bufferSubData(n.UNIFORM_BUFFER,ye+_e,oe.__data)):xe.isMatrix3?(oe.__data[0]=xe.elements[0],oe.__data[1]=xe.elements[1],oe.__data[2]=xe.elements[2],oe.__data[3]=0,oe.__data[4]=xe.elements[3],oe.__data[5]=xe.elements[4],oe.__data[6]=xe.elements[5],oe.__data[7]=0,oe.__data[8]=xe.elements[6],oe.__data[9]=xe.elements[7],oe.__data[10]=xe.elements[8],oe.__data[11]=0):(xe.toArray(oe.__data,_e),_e+=Ve.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ye,oe.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(D),s[D.id]=$)},dispose:function b(){for(const D in r)n.deleteBuffer(r[D]);o=[],r={},s={}}}}class xq{constructor(e={}){const{canvas:t=eW(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:v=!1}=e;let y;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=o;const x=new Uint32Array(4),M=new Int32Array(4);let S=null,b=null;const D=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ci,this.toneMapping=0,this.toneMappingExposure=1;const T=this;let q=!1,$=0,K=0,Q=null,G=-1,z=null;const oe=new Mn,ye=new Mn;let ge=null;const _e=new Ze(0);let Te=0,xe=t.width,Ve=t.height,Me=1,Ye=null,st=null;const dt=new Mn(0,0,xe,Ve),Yt=new Mn(0,0,xe,Ve);let dn=!1;const Ae=new Zp;let ze=!1,ot=!1;const je=new Rt,Et=new Rt,Ht=new re,At=new Mn,fn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Oe=!1;function We(){return null===Q?Me:1}let Ue,pt,qe,zt,ut,ne,W,ve,De,Be,Ie,Mt,et,ft,pn,Ge,yt,Bt,Wt,_t,bn,on,Hn,de,se=i;function wt(Y,fe){return t.getContext(Y,fe)}try{const Y={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r171"),t.addEventListener("webglcontextlost",Ne,!1),t.addEventListener("webglcontextrestored",ht,!1),t.addEventListener("webglcontextcreationerror",lt,!1),null===se){const fe="webgl2";if(se=wt(fe,Y),null===se)throw wt(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Y){throw console.error("THREE.WebGLRenderer: "+Y.message),Y}function at(){Ue=new D9(se),Ue.init(),on=new hq(se,Ue),pt=new M9(se,Ue,e,on),qe=new cq(se,Ue),pt.reverseDepthBuffer&&v&&qe.buffers.depth.setReversed(!0),zt=new R9(se),ut=new Z7,ne=new uq(se,Ue,qe,ut,pt,on,zt),W=new w9(T),ve=new T9(T),De=new _j(se),Hn=new b9(se,De),Be=new I9(se,De,zt,Hn),Ie=new L9(se,Be,De,zt),Wt=new F9(se,pt,ne),Ge=new E9(ut),Mt=new Y7(T,W,ve,Ue,pt,Hn,Ge),et=new yq(T,ut),ft=new J7,pn=new rq(Ue),Bt=new x9(T,W,ve,qe,Ie,y,c),yt=new aq(T,Ie,pt),de=new _q(se,zt,pt,qe),_t=new S9(se,Ue,zt),bn=new P9(se,Ue,zt),zt.programs=Mt.programs,T.capabilities=pt,T.extensions=Ue,T.properties=ut,T.renderLists=ft,T.shadowMap=yt,T.state=qe,T.info=zt}at();const we=new gq(T,se);function Ne(Y){Y.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1;const Y=zt.autoReset,fe=yt.enabled,be=yt.autoUpdate,Se=yt.needsUpdate,pe=yt.type;at(),zt.autoReset=Y,yt.enabled=fe,yt.autoUpdate=be,yt.needsUpdate=Se,yt.type=pe}function lt(Y){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Y.statusMessage)}function nn(Y){const fe=Y.target;fe.removeEventListener("dispose",nn),function ei(Y){(function qi(Y){const fe=ut.get(Y).programs;void 0!==fe&&(fe.forEach(function(be){Mt.releaseProgram(be)}),Y.isShaderMaterial&&Mt.releaseShaderCache(Y))})(Y),ut.remove(Y)}(fe)}function Pn(Y,fe,be){!0===Y.transparent&&2===Y.side&&!1===Y.forceSinglePass?(Y.side=1,Y.needsUpdate=!0,jm(Y,fe,be),Y.side=0,Y.needsUpdate=!0,jm(Y,fe,be),Y.side=2):jm(Y,fe,be)}this.xr=we,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const Y=Ue.get("WEBGL_lose_context");Y&&Y.loseContext()},this.forceContextRestore=function(){const Y=Ue.get("WEBGL_lose_context");Y&&Y.restoreContext()},this.getPixelRatio=function(){return Me},this.setPixelRatio=function(Y){void 0!==Y&&(Me=Y,this.setSize(xe,Ve,!1))},this.getSize=function(Y){return Y.set(xe,Ve)},this.setSize=function(Y,fe,be=!0){we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(xe=Y,Ve=fe,t.width=Math.floor(Y*Me),t.height=Math.floor(fe*Me),!0===be&&(t.style.width=Y+"px",t.style.height=fe+"px"),this.setViewport(0,0,Y,fe))},this.getDrawingBufferSize=function(Y){return Y.set(xe*Me,Ve*Me).floor()},this.setDrawingBufferSize=function(Y,fe,be){xe=Y,Ve=fe,Me=be,t.width=Math.floor(Y*be),t.height=Math.floor(fe*be),this.setViewport(0,0,Y,fe)},this.getCurrentViewport=function(Y){return Y.copy(oe)},this.getViewport=function(Y){return Y.copy(dt)},this.setViewport=function(Y,fe,be,Se){Y.isVector4?dt.set(Y.x,Y.y,Y.z,Y.w):dt.set(Y,fe,be,Se),qe.viewport(oe.copy(dt).multiplyScalar(Me).round())},this.getScissor=function(Y){return Y.copy(Yt)},this.setScissor=function(Y,fe,be,Se){Y.isVector4?Yt.set(Y.x,Y.y,Y.z,Y.w):Yt.set(Y,fe,be,Se),qe.scissor(ye.copy(Yt).multiplyScalar(Me).round())},this.getScissorTest=function(){return dn},this.setScissorTest=function(Y){qe.setScissorTest(dn=Y)},this.setOpaqueSort=function(Y){Ye=Y},this.setTransparentSort=function(Y){st=Y},this.getClearColor=function(Y){return Y.copy(Bt.getClearColor())},this.setClearColor=function(){Bt.setClearColor.apply(Bt,arguments)},this.getClearAlpha=function(){return Bt.getClearAlpha()},this.setClearAlpha=function(){Bt.setClearAlpha.apply(Bt,arguments)},this.clear=function(Y=!0,fe=!0,be=!0){let Se=0;if(Y){let pe=!1;if(null!==Q){const He=Q.texture.format;pe=1033===He||1031===He||1029===He}if(pe){const He=Q.texture.type,Je=He===Co||He===sa||He===Th||He===vc||1017===He||1018===He,mt=Bt.getClearColor(),xt=Bt.getClearAlpha(),jt=mt.r,Zt=mt.g,Ft=mt.b;Je?(x[0]=jt,x[1]=Zt,x[2]=Ft,x[3]=xt,se.clearBufferuiv(se.COLOR,0,x)):(M[0]=jt,M[1]=Zt,M[2]=Ft,M[3]=xt,se.clearBufferiv(se.COLOR,0,M))}else Se|=se.COLOR_BUFFER_BIT}fe&&(Se|=se.DEPTH_BUFFER_BIT),be&&(Se|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ne,!1),t.removeEventListener("webglcontextrestored",ht,!1),t.removeEventListener("webglcontextcreationerror",lt,!1),Bt.dispose(),ft.dispose(),pn.dispose(),ut.dispose(),W.dispose(),ve.dispose(),Ie.dispose(),Hn.dispose(),de.dispose(),Mt.dispose(),we.dispose(),we.removeEventListener("sessionstart",uF),we.removeEventListener("sessionend",hF),gl.stop()},this.renderBufferDirect=function(Y,fe,be,Se,pe,He){null===fe&&(fe=fn);const Je=pe.isMesh&&pe.matrixWorld.determinant()<0,mt=function MY(Y,fe,be,Se,pe){!0!==fe.isScene&&(fe=fn),ne.resetTextureUnits();const He=fe.fog,mt=null===Q?T.outputColorSpace:!0===Q.isXRRenderTarget?Q.texture.colorSpace:or,xt=(Se.isMeshStandardMaterial?ve:W).get(Se.envMap||(Se.isMeshStandardMaterial?fe.environment:null)),jt=!0===Se.vertexColors&&!!be.attributes.color&&4===be.attributes.color.itemSize,Zt=!!be.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),Ft=!!be.morphAttributes.position,yn=!!be.morphAttributes.normal,Rn=!!be.morphAttributes.color;let Yn=0;Se.toneMapped&&(null===Q||!0===Q.isXRRenderTarget)&&(Yn=T.toneMapping);const ti=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,En=void 0!==ti?ti.length:0,Lt=ut.get(Se),Ri=b.state.lights;!0!==ze||!0!==ot&&Y===z||Ge.setState(Se,Y,Y===z&&Se.id===G);let Tn=!1;Se.version===Lt.__version?(Lt.needsLights&&Lt.lightsStateVersion!==Ri.state.version||Lt.outputColorSpace!==mt||pe.isBatchedMesh&&!1===Lt.batching||!pe.isBatchedMesh&&!0===Lt.batching||pe.isBatchedMesh&&!0===Lt.batchingColor&&null===pe.colorTexture||pe.isBatchedMesh&&!1===Lt.batchingColor&&null!==pe.colorTexture||pe.isInstancedMesh&&!1===Lt.instancing||!pe.isInstancedMesh&&!0===Lt.instancing||pe.isSkinnedMesh&&!1===Lt.skinning||!pe.isSkinnedMesh&&!0===Lt.skinning||pe.isInstancedMesh&&!0===Lt.instancingColor&&null===pe.instanceColor||pe.isInstancedMesh&&!1===Lt.instancingColor&&null!==pe.instanceColor||pe.isInstancedMesh&&!0===Lt.instancingMorph&&null===pe.morphTexture||pe.isInstancedMesh&&!1===Lt.instancingMorph&&null!==pe.morphTexture||Lt.envMap!==xt||!0===Se.fog&&Lt.fog!==He||void 0!==Lt.numClippingPlanes&&(Lt.numClippingPlanes!==Ge.numPlanes||Lt.numIntersection!==Ge.numIntersection)||Lt.vertexAlphas!==jt||Lt.vertexTangents!==Zt||Lt.morphTargets!==Ft||Lt.morphNormals!==yn||Lt.morphColors!==Rn||Lt.toneMapping!==Yn||Lt.morphTargetsCount!==En)&&(Tn=!0):(Tn=!0,Lt.__version=Se.version);let Rs=Lt.currentProgram;!0===Tn&&(Rs=jm(Se,fe,pe));let au=!1,Ur=!1,ud=!1;const jn=Rs.getUniforms(),ns=Lt.uniforms;if(qe.useProgram(Rs.program)&&(au=!0,Ur=!0,ud=!0),Se.id!==G&&(G=Se.id,Ur=!0),au||z!==Y){qe.buffers.depth.getReversed()?(je.copy(Y.projectionMatrix),function nW(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(je),function iW(n){const e=n.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(je),jn.setValue(se,"projectionMatrix",je)):jn.setValue(se,"projectionMatrix",Y.projectionMatrix),jn.setValue(se,"viewMatrix",Y.matrixWorldInverse);const Mr=jn.map.cameraPosition;void 0!==Mr&&Mr.setValue(se,Ht.setFromMatrixPosition(Y.matrixWorld)),pt.logarithmicDepthBuffer&&jn.setValue(se,"logDepthBufFC",2/(Math.log(Y.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&jn.setValue(se,"isOrthographic",!0===Y.isOrthographicCamera),z!==Y&&(z=Y,Ur=!0,ud=!0)}if(pe.isSkinnedMesh){jn.setOptional(se,pe,"bindMatrix"),jn.setOptional(se,pe,"bindMatrixInverse");const fr=pe.skeleton;fr&&(null===fr.boneTexture&&fr.computeBoneTexture(),jn.setValue(se,"boneTexture",fr.boneTexture,ne))}pe.isBatchedMesh&&(jn.setOptional(se,pe,"batchingTexture"),jn.setValue(se,"batchingTexture",pe._matricesTexture,ne),jn.setOptional(se,pe,"batchingIdTexture"),jn.setValue(se,"batchingIdTexture",pe._indirectTexture,ne),jn.setOptional(se,pe,"batchingColorTexture"),null!==pe._colorsTexture&&jn.setValue(se,"batchingColorTexture",pe._colorsTexture,ne));const is=be.morphAttributes;if((void 0!==is.position||void 0!==is.normal||void 0!==is.color)&&Wt.update(pe,be,Rs),(Ur||Lt.receiveShadow!==pe.receiveShadow)&&(Lt.receiveShadow=pe.receiveShadow,jn.setValue(se,"receiveShadow",pe.receiveShadow)),Se.isMeshGouraudMaterial&&null!==Se.envMap&&(ns.envMap.value=xt,ns.flipEnvMap.value=xt.isCubeTexture&&!1===xt.isRenderTargetTexture?-1:1),Se.isMeshStandardMaterial&&null===Se.envMap&&null!==fe.environment&&(ns.envMapIntensity.value=fe.environmentIntensity),Ur&&(jn.setValue(se,"toneMappingExposure",T.toneMappingExposure),Lt.needsLights&&function EY(Y,fe){Y.ambientLightColor.needsUpdate=fe,Y.lightProbe.needsUpdate=fe,Y.directionalLights.needsUpdate=fe,Y.directionalLightShadows.needsUpdate=fe,Y.pointLights.needsUpdate=fe,Y.pointLightShadows.needsUpdate=fe,Y.spotLights.needsUpdate=fe,Y.spotLightShadows.needsUpdate=fe,Y.rectAreaLights.needsUpdate=fe,Y.hemisphereLights.needsUpdate=fe}(ns,ud),He&&!0===Se.fog&&et.refreshFogUniforms(ns,He),et.refreshMaterialUniforms(ns,Se,Me,Ve,b.state.transmissionRenderTarget[Y.id]),Im.upload(se,mF(Lt),ns,ne)),Se.isShaderMaterial&&!0===Se.uniformsNeedUpdate&&(Im.upload(se,mF(Lt),ns,ne),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&jn.setValue(se,"center",pe.center),jn.setValue(se,"modelViewMatrix",pe.modelViewMatrix),jn.setValue(se,"normalMatrix",pe.normalMatrix),jn.setValue(se,"modelMatrix",pe.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const fr=Se.uniformsGroups;for(let Mr=0,Nb=fr.length;Mr<Nb;Mr++){const vl=fr[Mr];de.update(vl,Rs),de.bind(vl,Rs)}}return Rs}(Y,fe,be,Se,pe);qe.setMaterial(Se,Je);let xt=be.index,jt=1;if(!0===Se.wireframe){if(xt=Be.getWireframeAttribute(be),void 0===xt)return;jt=2}const Zt=be.drawRange,Ft=be.attributes.position;let yn=Zt.start*jt,Rn=(Zt.start+Zt.count)*jt;null!==He&&(yn=Math.max(yn,He.start*jt),Rn=Math.min(Rn,(He.start+He.count)*jt)),null!==xt?(yn=Math.max(yn,0),Rn=Math.min(Rn,xt.count)):null!=Ft&&(yn=Math.max(yn,0),Rn=Math.min(Rn,Ft.count));const Yn=Rn-yn;if(Yn<0||Yn===1/0)return;Hn.setup(pe,Se,mt,be,xt);let ti,En=_t;if(null!==xt&&(ti=De.get(xt),En=bn,En.setIndex(ti)),pe.isMesh)!0===Se.wireframe?(qe.setLineWidth(Se.wireframeLinewidth*We()),En.setMode(se.LINES)):En.setMode(se.TRIANGLES);else if(pe.isLine){let Lt=Se.linewidth;void 0===Lt&&(Lt=1),qe.setLineWidth(Lt*We()),En.setMode(pe.isLineSegments?se.LINES:pe.isLineLoop?se.LINE_LOOP:se.LINE_STRIP)}else pe.isPoints?En.setMode(se.POINTS):pe.isSprite&&En.setMode(se.TRIANGLES);if(pe.isBatchedMesh)if(null!==pe._multiDrawInstances)En.renderMultiDrawInstances(pe._multiDrawStarts,pe._multiDrawCounts,pe._multiDrawCount,pe._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))En.renderMultiDraw(pe._multiDrawStarts,pe._multiDrawCounts,pe._multiDrawCount);else{const Lt=pe._multiDrawStarts,Ri=pe._multiDrawCounts,Tn=pe._multiDrawCount,Rs=xt?De.get(xt).bytesPerElement:1,au=ut.get(Se).currentProgram.getUniforms();for(let Ur=0;Ur<Tn;Ur++)au.setValue(se,"_gl_DrawID",Ur),En.render(Lt[Ur]/Rs,Ri[Ur])}else if(pe.isInstancedMesh)En.renderInstances(yn,Yn,pe.count);else if(be.isInstancedBufferGeometry){const Ri=Math.min(be.instanceCount,void 0!==be._maxInstanceCount?be._maxInstanceCount:1/0);En.renderInstances(yn,Yn,Ri)}else En.render(yn,Yn)},this.compile=function(Y,fe,be=null){null===be&&(be=Y),b=pn.get(be),b.init(fe),A.push(b),be.traverseVisible(function(pe){pe.isLight&&pe.layers.test(fe.layers)&&(b.pushLight(pe),pe.castShadow&&b.pushShadow(pe))}),Y!==be&&Y.traverseVisible(function(pe){pe.isLight&&pe.layers.test(fe.layers)&&(b.pushLight(pe),pe.castShadow&&b.pushShadow(pe))}),b.setupLights();const Se=new Set;return Y.traverse(function(pe){if(!(pe.isMesh||pe.isPoints||pe.isLine||pe.isSprite))return;const He=pe.material;if(He)if(Array.isArray(He))for(let Je=0;Je<He.length;Je++){const mt=He[Je];Pn(mt,be,pe),Se.add(mt)}else Pn(He,be,pe),Se.add(He)}),A.pop(),b=null,Se},this.compileAsync=function(Y,fe,be=null){const Se=this.compile(Y,fe,be);return new Promise(pe=>{function He(){Se.forEach(function(Je){ut.get(Je).currentProgram.isReady()&&Se.delete(Je)}),0!==Se.size?setTimeout(He,10):pe(Y)}null!==Ue.get("KHR_parallel_shader_compile")?He():setTimeout(He,10)})};let Ps=null;function uF(){gl.stop()}function hF(){gl.start()}const gl=new vP;function Lb(Y,fe,be,Se){if(!1===Y.visible)return;if(Y.layers.test(fe.layers))if(Y.isGroup)be=Y.renderOrder;else if(Y.isLOD)!0===Y.autoUpdate&&Y.update(fe);else if(Y.isLight)b.pushLight(Y),Y.castShadow&&b.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||Ae.intersectsSprite(Y)){Se&&At.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(Et);const Je=Ie.update(Y),mt=Y.material;mt.visible&&S.push(Y,Je,mt,be,At.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&&(!Y.frustumCulled||Ae.intersectsObject(Y))){const Je=Ie.update(Y),mt=Y.material;if(Se&&(void 0!==Y.boundingSphere?(null===Y.boundingSphere&&Y.computeBoundingSphere(),At.copy(Y.boundingSphere.center)):(null===Je.boundingSphere&&Je.computeBoundingSphere(),At.copy(Je.boundingSphere.center)),At.applyMatrix4(Y.matrixWorld).applyMatrix4(Et)),Array.isArray(mt)){const xt=Je.groups;for(let jt=0,Zt=xt.length;jt<Zt;jt++){const Ft=xt[jt],yn=mt[Ft.materialIndex];yn&&yn.visible&&S.push(Y,Je,yn,be,At.z,Ft)}}else mt.visible&&S.push(Y,Je,mt,be,At.z,null)}const He=Y.children;for(let Je=0,mt=He.length;Je<mt;Je++)Lb(He[Je],fe,be,Se)}function dF(Y,fe,be,Se){const pe=Y.opaque,He=Y.transmissive,Je=Y.transparent;b.setupLightsView(be),!0===ze&&Ge.setGlobalState(T.clippingPlanes,be),Se&&qe.viewport(oe.copy(Se)),pe.length>0&&Wm(pe,fe,be),He.length>0&&Wm(He,fe,be),Je.length>0&&Wm(Je,fe,be),qe.buffers.depth.setTest(!0),qe.buffers.depth.setMask(!0),qe.buffers.color.setMask(!0),qe.setPolygonOffset(!1)}function fF(Y,fe,be,Se){if(null!==(!0===be.isScene?be.overrideMaterial:null))return;void 0===b.state.transmissionRenderTarget[Se.id]&&(b.state.transmissionRenderTarget[Se.id]=new Wa(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?Dh:Co,minFilter:ws,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:vn.workingColorSpace}));const He=b.state.transmissionRenderTarget[Se.id],Je=Se.viewport||oe;He.setSize(Je.z,Je.w);const mt=T.getRenderTarget();T.setRenderTarget(He),T.getClearColor(_e),Te=T.getClearAlpha(),Te<1&&T.setClearColor(16777215,.5),T.clear(),Oe&&Bt.render(be);const xt=T.toneMapping;T.toneMapping=0;const jt=Se.viewport;if(void 0!==Se.viewport&&(Se.viewport=void 0),b.setupLightsView(Se),!0===ze&&Ge.setGlobalState(T.clippingPlanes,Se),Wm(Y,be,Se),ne.updateMultisampleRenderTarget(He),ne.updateRenderTargetMipmap(He),!1===Ue.has("WEBGL_multisampled_render_to_texture")){let Zt=!1;for(let Ft=0,yn=fe.length;Ft<yn;Ft++){const Rn=fe[Ft],Yn=Rn.object,ti=Rn.geometry,En=Rn.material,Lt=Rn.group;if(2===En.side&&Yn.layers.test(Se.layers)){const Ri=En.side;En.side=1,En.needsUpdate=!0,pF(Yn,be,Se,ti,En,Lt),En.side=Ri,En.needsUpdate=!0,Zt=!0}}!0===Zt&&(ne.updateMultisampleRenderTarget(He),ne.updateRenderTargetMipmap(He))}T.setRenderTarget(mt),T.setClearColor(_e,Te),void 0!==jt&&(Se.viewport=jt),T.toneMapping=xt}function Wm(Y,fe,be){const Se=!0===fe.isScene?fe.overrideMaterial:null;for(let pe=0,He=Y.length;pe<He;pe++){const Je=Y[pe],mt=Je.object,xt=Je.geometry,jt=null===Se?Je.material:Se,Zt=Je.group;mt.layers.test(be.layers)&&pF(mt,fe,be,xt,jt,Zt)}}function pF(Y,fe,be,Se,pe,He){Y.onBeforeRender(T,fe,be,Se,pe,He),Y.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),pe.onBeforeRender(T,fe,be,Se,Y,He),!0===pe.transparent&&2===pe.side&&!1===pe.forceSinglePass?(pe.side=1,pe.needsUpdate=!0,T.renderBufferDirect(be,fe,Se,pe,Y,He),pe.side=0,pe.needsUpdate=!0,T.renderBufferDirect(be,fe,Se,pe,Y,He),pe.side=2):T.renderBufferDirect(be,fe,Se,pe,Y,He),Y.onAfterRender(T,fe,be,Se,pe,He)}function jm(Y,fe,be){!0!==fe.isScene&&(fe=fn);const Se=ut.get(Y),pe=b.state.lights,Je=pe.state.version,mt=Mt.getParameters(Y,pe.state,b.state.shadowsArray,fe,be),xt=Mt.getProgramCacheKey(mt);let jt=Se.programs;Se.environment=Y.isMeshStandardMaterial?fe.environment:null,Se.fog=fe.fog,Se.envMap=(Y.isMeshStandardMaterial?ve:W).get(Y.envMap||Se.environment),Se.envMapRotation=null!==Se.environment&&null===Y.envMap?fe.environmentRotation:Y.envMapRotation,void 0===jt&&(Y.addEventListener("dispose",nn),jt=new Map,Se.programs=jt);let Zt=jt.get(xt);if(void 0!==Zt){if(Se.currentProgram===Zt&&Se.lightsStateVersion===Je)return gF(Y,mt),Zt}else mt.uniforms=Mt.getUniforms(Y),Y.onBeforeCompile(mt,T),Zt=Mt.acquireProgram(mt,xt),jt.set(xt,Zt),Se.uniforms=mt.uniforms;const Ft=Se.uniforms;return(!Y.isShaderMaterial&&!Y.isRawShaderMaterial||!0===Y.clipping)&&(Ft.clippingPlanes=Ge.uniform),gF(Y,mt),Se.needsLights=function wY(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&&!0===Y.lights}(Y),Se.lightsStateVersion=Je,Se.needsLights&&(Ft.ambientLightColor.value=pe.state.ambient,Ft.lightProbe.value=pe.state.probe,Ft.directionalLights.value=pe.state.directional,Ft.directionalLightShadows.value=pe.state.directionalShadow,Ft.spotLights.value=pe.state.spot,Ft.spotLightShadows.value=pe.state.spotShadow,Ft.rectAreaLights.value=pe.state.rectArea,Ft.ltc_1.value=pe.state.rectAreaLTC1,Ft.ltc_2.value=pe.state.rectAreaLTC2,Ft.pointLights.value=pe.state.point,Ft.pointLightShadows.value=pe.state.pointShadow,Ft.hemisphereLights.value=pe.state.hemi,Ft.directionalShadowMap.value=pe.state.directionalShadowMap,Ft.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,Ft.spotShadowMap.value=pe.state.spotShadowMap,Ft.spotLightMatrix.value=pe.state.spotLightMatrix,Ft.spotLightMap.value=pe.state.spotLightMap,Ft.pointShadowMap.value=pe.state.pointShadowMap,Ft.pointShadowMatrix.value=pe.state.pointShadowMatrix),Se.currentProgram=Zt,Se.uniformsList=null,Zt}function mF(Y){if(null===Y.uniformsList){const fe=Y.currentProgram.getUniforms();Y.uniformsList=Im.seqWithValue(fe.seq,Y.uniforms)}return Y.uniformsList}function gF(Y,fe){const be=ut.get(Y);be.outputColorSpace=fe.outputColorSpace,be.batching=fe.batching,be.batchingColor=fe.batchingColor,be.instancing=fe.instancing,be.instancingColor=fe.instancingColor,be.instancingMorph=fe.instancingMorph,be.skinning=fe.skinning,be.morphTargets=fe.morphTargets,be.morphNormals=fe.morphNormals,be.morphColors=fe.morphColors,be.morphTargetsCount=fe.morphTargetsCount,be.numClippingPlanes=fe.numClippingPlanes,be.numIntersection=fe.numClipIntersection,be.vertexAlphas=fe.vertexAlphas,be.vertexTangents=fe.vertexTangents,be.toneMapping=fe.toneMapping}gl.setAnimationLoop(function Ho(Y){Ps&&Ps(Y)}),typeof self<"u"&&gl.setContext(self),this.setAnimationLoop=function(Y){Ps=Y,we.setAnimationLoop(Y),null===Y?gl.stop():gl.start()},we.addEventListener("sessionstart",uF),we.addEventListener("sessionend",hF),this.render=function(Y,fe){if(void 0!==fe&&!0!==fe.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===q)return;if(!0===Y.matrixWorldAutoUpdate&&Y.updateMatrixWorld(),null===fe.parent&&!0===fe.matrixWorldAutoUpdate&&fe.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(fe),fe=we.getCamera()),!0===Y.isScene&&Y.onBeforeRender(T,Y,fe,Q),b=pn.get(Y,A.length),b.init(fe),A.push(b),Et.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),Ae.setFromProjectionMatrix(Et),ot=this.localClippingEnabled,ze=Ge.init(this.clippingPlanes,ot),S=ft.get(Y,D.length),S.init(),D.push(S),!0===we.enabled&&!0===we.isPresenting){const He=T.xr.getDepthSensingMesh();null!==He&&Lb(He,fe,-1/0,T.sortObjects)}Lb(Y,fe,0,T.sortObjects),S.finish(),!0===T.sortObjects&&S.sort(Ye,st),Oe=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),Oe&&Bt.addToRenderList(S,Y),this.info.render.frame++,!0===ze&&Ge.beginShadows(),yt.render(b.state.shadowsArray,Y,fe),!0===ze&&Ge.endShadows(),!0===this.info.autoReset&&this.info.reset();const Se=S.opaque,pe=S.transmissive;if(b.setupLights(),fe.isArrayCamera){const He=fe.cameras;if(pe.length>0)for(let Je=0,mt=He.length;Je<mt;Je++)fF(Se,pe,Y,He[Je]);Oe&&Bt.render(Y);for(let Je=0,mt=He.length;Je<mt;Je++){const xt=He[Je];dF(S,Y,xt,xt.viewport)}}else pe.length>0&&fF(Se,pe,Y,fe),Oe&&Bt.render(Y),dF(S,Y,fe);null!==Q&&(ne.updateMultisampleRenderTarget(Q),ne.updateRenderTargetMipmap(Q)),!0===Y.isScene&&Y.onAfterRender(T,Y,fe),Hn.resetDefaultState(),G=-1,z=null,A.pop(),A.length>0?(b=A[A.length-1],!0===ze&&Ge.setGlobalState(T.clippingPlanes,b.state.camera)):b=null,D.pop(),S=D.length>0?D[D.length-1]:null},this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return K},this.getRenderTarget=function(){return Q},this.setRenderTargetTextures=function(Y,fe,be){ut.get(Y.texture).__webglTexture=fe,ut.get(Y.depthTexture).__webglTexture=be;const Se=ut.get(Y);Se.__hasExternalTextures=!0,Se.__autoAllocateDepthBuffer=void 0===be,Se.__autoAllocateDepthBuffer||!0===Ue.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Y,fe){const be=ut.get(Y);be.__webglFramebuffer=fe,be.__useDefaultFramebuffer=void 0===fe},this.setRenderTarget=function(Y,fe=0,be=0){Q=Y,$=fe,K=be;let Se=!0,pe=null,He=!1,Je=!1;if(Y){const xt=ut.get(Y);if(void 0!==xt.__useDefaultFramebuffer)qe.bindFramebuffer(se.FRAMEBUFFER,null),Se=!1;else if(void 0===xt.__webglFramebuffer)ne.setupRenderTarget(Y);else if(xt.__hasExternalTextures)ne.rebindTextures(Y,ut.get(Y.texture).__webglTexture,ut.get(Y.depthTexture).__webglTexture);else if(Y.depthBuffer){const Ft=Y.depthTexture;if(xt.__boundDepthTexture!==Ft){if(null!==Ft&&ut.has(Ft)&&(Y.width!==Ft.image.width||Y.height!==Ft.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ne.setupDepthRenderbuffer(Y)}}const jt=Y.texture;(jt.isData3DTexture||jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(Je=!0);const Zt=ut.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(pe=Array.isArray(Zt[fe])?Zt[fe][be]:Zt[fe],He=!0):pe=Y.samples>0&&!1===ne.useMultisampledRTT(Y)?ut.get(Y).__webglMultisampledFramebuffer:Array.isArray(Zt)?Zt[be]:Zt,oe.copy(Y.viewport),ye.copy(Y.scissor),ge=Y.scissorTest}else oe.copy(dt).multiplyScalar(Me).floor(),ye.copy(Yt).multiplyScalar(Me).floor(),ge=dn;if(qe.bindFramebuffer(se.FRAMEBUFFER,pe)&&Se&&qe.drawBuffers(Y,pe),qe.viewport(oe),qe.scissor(ye),qe.setScissorTest(ge),He){const xt=ut.get(Y.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+fe,xt.__webglTexture,be)}else if(Je){const xt=ut.get(Y.texture);se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,xt.__webglTexture,be||0,fe||0)}G=-1},this.readRenderTargetPixels=function(Y,fe,be,Se,pe,He,Je){if(!Y||!Y.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mt=ut.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&&void 0!==Je&&(mt=mt[Je]),mt){qe.bindFramebuffer(se.FRAMEBUFFER,mt);try{const xt=Y.texture,jt=xt.format,Zt=xt.type;if(!pt.textureFormatReadable(jt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!pt.textureTypeReadable(Zt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");fe>=0&&fe<=Y.width-Se&&be>=0&&be<=Y.height-pe&&se.readPixels(fe,be,Se,pe,on.convert(jt),on.convert(Zt),He)}finally{const xt=null!==Q?ut.get(Q).__webglFramebuffer:null;qe.bindFramebuffer(se.FRAMEBUFFER,xt)}}},this.readRenderTargetPixelsAsync=function(){var Y=gP(function*(fe,be,Se,pe,He,Je,mt){if(!fe||!fe.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xt=ut.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&void 0!==mt&&(xt=xt[mt]),xt){const jt=fe.texture,Zt=jt.format,Ft=jt.type;if(!pt.textureFormatReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!pt.textureTypeReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(be>=0&&be<=fe.width-pe&&Se>=0&&Se<=fe.height-He){qe.bindFramebuffer(se.FRAMEBUFFER,xt);const yn=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,yn),se.bufferData(se.PIXEL_PACK_BUFFER,Je.byteLength,se.STREAM_READ),se.readPixels(be,Se,pe,He,on.convert(Zt),on.convert(Ft),0);const Rn=null!==Q?ut.get(Q).__webglFramebuffer:null;qe.bindFramebuffer(se.FRAMEBUFFER,Rn);const Yn=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),yield function tW(n,e,t){return new Promise(function(i,r){setTimeout(function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}},t)})}(se,Yn,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,yn),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,Je),se.deleteBuffer(yn),se.deleteSync(Yn),Je}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(fe,be,Se,pe,He,Je,mt){return Y.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(Y,fe=null,be=0){!0!==Y.isTexture&&(Cc("WebGLRenderer: copyFramebufferToTexture function signature has changed."),fe=arguments[0]||null,Y=arguments[1]);const Se=Math.pow(2,-be),pe=Math.floor(Y.image.width*Se),He=Math.floor(Y.image.height*Se),Je=null!==fe?fe.x:0,mt=null!==fe?fe.y:0;ne.setTexture2D(Y,0),se.copyTexSubImage2D(se.TEXTURE_2D,be,0,0,Je,mt,pe,He),qe.unbindTexture()};const CY=se.createFramebuffer(),AY=se.createFramebuffer();this.copyTextureToTexture=function(Y,fe,be=null,Se=null,pe=0,He=null){let Je,mt,xt,jt,Zt,Ft,yn,Rn,Yn;!0!==Y.isTexture&&(Cc("WebGLRenderer: copyTextureToTexture function signature has changed."),Se=arguments[0]||null,Y=arguments[1],fe=arguments[2],He=arguments[3]||0,be=null),null===He&&(0!==pe?(Cc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),He=pe,pe=0):He=0);const ti=Y.isCompressedTexture?Y.mipmaps[He]:Y.image;if(null!==be)Je=be.max.x-be.min.x,mt=be.max.y-be.min.y,xt=be.isBox3?be.max.z-be.min.z:1,jt=be.min.x,Zt=be.min.y,Ft=be.isBox3?be.min.z:0;else{const is=Math.pow(2,-pe);Je=Math.floor(ti.width*is),mt=Math.floor(ti.height*is),xt=Y.isDataArrayTexture?ti.depth:Y.isData3DTexture?Math.floor(ti.depth*is):1,jt=0,Zt=0,Ft=0}null!==Se?(yn=Se.x,Rn=Se.y,Yn=Se.z):(yn=0,Rn=0,Yn=0);const En=on.convert(fe.format),Lt=on.convert(fe.type);let Ri;fe.isData3DTexture?(ne.setTexture3D(fe,0),Ri=se.TEXTURE_3D):fe.isDataArrayTexture||fe.isCompressedArrayTexture?(ne.setTexture2DArray(fe,0),Ri=se.TEXTURE_2D_ARRAY):(ne.setTexture2D(fe,0),Ri=se.TEXTURE_2D),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,fe.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,fe.unpackAlignment);const Tn=se.getParameter(se.UNPACK_ROW_LENGTH),Rs=se.getParameter(se.UNPACK_IMAGE_HEIGHT),au=se.getParameter(se.UNPACK_SKIP_PIXELS),Ur=se.getParameter(se.UNPACK_SKIP_ROWS),ud=se.getParameter(se.UNPACK_SKIP_IMAGES);se.pixelStorei(se.UNPACK_ROW_LENGTH,ti.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,ti.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,jt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Zt),se.pixelStorei(se.UNPACK_SKIP_IMAGES,Ft);const jn=Y.isDataArrayTexture||Y.isData3DTexture,ns=fe.isDataArrayTexture||fe.isData3DTexture;if(Y.isDepthTexture){const is=ut.get(Y),fr=ut.get(fe),Mr=ut.get(is.__renderTarget),Nb=ut.get(fr.__renderTarget);qe.bindFramebuffer(se.READ_FRAMEBUFFER,Mr.__webglFramebuffer),qe.bindFramebuffer(se.DRAW_FRAMEBUFFER,Nb.__webglFramebuffer);for(let vl=0;vl<xt;vl++)jn&&(se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,ut.get(Y).__webglTexture,pe,Ft+vl),se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,ut.get(fe).__webglTexture,He,Yn+vl)),se.blitFramebuffer(jt,Zt,Je,mt,yn,Rn,Je,mt,se.DEPTH_BUFFER_BIT,se.NEAREST);qe.bindFramebuffer(se.READ_FRAMEBUFFER,null),qe.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else if(0!==pe||Y.isRenderTargetTexture||ut.has(Y)){const is=ut.get(Y),fr=ut.get(fe);qe.bindFramebuffer(se.READ_FRAMEBUFFER,CY),qe.bindFramebuffer(se.DRAW_FRAMEBUFFER,AY);for(let Mr=0;Mr<xt;Mr++)jn?se.framebufferTextureLayer(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,is.__webglTexture,pe,Ft+Mr):se.framebufferTexture2D(se.READ_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,is.__webglTexture,pe),ns?se.framebufferTextureLayer(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,fr.__webglTexture,He,Yn+Mr):se.framebufferTexture2D(se.DRAW_FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,fr.__webglTexture,He),0!==pe?se.blitFramebuffer(jt,Zt,Je,mt,yn,Rn,Je,mt,se.COLOR_BUFFER_BIT,se.NEAREST):ns?se.copyTexSubImage3D(Ri,He,yn,Rn,Yn+Mr,jt,Zt,Je,mt):se.copyTexSubImage2D(Ri,He,yn,Rn,jt,Zt,Je,mt);qe.bindFramebuffer(se.READ_FRAMEBUFFER,null),qe.bindFramebuffer(se.DRAW_FRAMEBUFFER,null)}else ns?Y.isDataTexture||Y.isData3DTexture?se.texSubImage3D(Ri,He,yn,Rn,Yn,Je,mt,xt,En,Lt,ti.data):fe.isCompressedArrayTexture?se.compressedTexSubImage3D(Ri,He,yn,Rn,Yn,Je,mt,xt,En,ti.data):se.texSubImage3D(Ri,He,yn,Rn,Yn,Je,mt,xt,En,Lt,ti):Y.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,He,yn,Rn,Je,mt,En,Lt,ti.data):Y.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,He,yn,Rn,ti.width,ti.height,En,ti.data):se.texSubImage2D(se.TEXTURE_2D,He,yn,Rn,Je,mt,En,Lt,ti);se.pixelStorei(se.UNPACK_ROW_LENGTH,Tn),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,Rs),se.pixelStorei(se.UNPACK_SKIP_PIXELS,au),se.pixelStorei(se.UNPACK_SKIP_ROWS,Ur),se.pixelStorei(se.UNPACK_SKIP_IMAGES,ud),0===He&&fe.generateMipmaps&&se.generateMipmap(Ri),qe.unbindTexture()},this.copyTextureToTexture3D=function(Y,fe,be=null,Se=null,pe=0){return!0!==Y.isTexture&&(Cc("WebGLRenderer: copyTextureToTexture3D function signature has changed."),be=arguments[0]||null,Se=arguments[1]||null,Y=arguments[2],fe=arguments[3],pe=arguments[4]||0),Cc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Y,fe,be,Se,pe)},this.initRenderTarget=function(Y){void 0===ut.get(Y).__webglFramebuffer&&ne.setupRenderTarget(Y)},this.initTexture=function(Y){Y.isCubeTexture?ne.setTextureCube(Y,0):Y.isData3DTexture?ne.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?ne.setTexture2DArray(Y,0):ne.setTexture2D(Y,0),qe.unbindTexture()},this.resetState=function(){$=0,K=0,Q=null,qe.reset(),Hn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ao}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=vn._getDrawingBufferColorSpace(e),t.unpackColorSpace=vn._getUnpackColorSpace()}}function qP(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class bq extends nd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Cq(t)}),this.register(function(t){return new Aq(t)}),this.register(function(t){return new Oq(t)}),this.register(function(t){return new kq(t)}),this.register(function(t){return new Bq(t)}),this.register(function(t){return new Dq(t)}),this.register(function(t){return new Iq(t)}),this.register(function(t){return new Pq(t)}),this.register(function(t){return new Rq(t)}),this.register(function(t){return new wq(t)}),this.register(function(t){return new Fq(t)}),this.register(function(t){return new Tq(t)}),this.register(function(t){return new Nq(t)}),this.register(function(t){return new Lq(t)}),this.register(function(t){return new Mq(t)}),this.register(function(t){return new Vq(t)}),this.register(function(t){return new Uq(t)})}load(e,t,i,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const h=il.extractUrlBase(e);o=il.resolveURL(h,this.path)}else o=il.extractUrlBase(e);this.manager.itemStart(e);const a=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Js(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{s.parse(h,o,function(f){t(f),s.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},c=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===XP){try{o[hn.KHR_BINARY_GLTF]=new Hq(e)}catch(p){return void(r&&r(p))}s=JSON.parse(o[hn.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new eX(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](h);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let f=0;f<s.extensionsUsed.length;++f){const p=s.extensionsUsed[f],v=s.extensionsRequired||[];switch(p){case hn.KHR_MATERIALS_UNLIT:o[p]=new Eq;break;case hn.KHR_DRACO_MESH_COMPRESSION:o[p]=new zq(s,this.dracoLoader);break;case hn.KHR_TEXTURE_TRANSFORM:o[p]=new Gq;break;case hn.KHR_MESH_QUANTIZATION:o[p]=new Wq;break;default:v.indexOf(p)>=0&&void 0===a[p]&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}h.setExtensions(o),h.setPlugins(a),h.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Sq(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const hn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Mq{constructor(e){this.parser=e,this.name=hn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const f=new Ze(16777215);void 0!==c.color&&f.setRGB(c.color[0],c.color[1],c.color[2],or);const p=void 0!==c.range?c.range:0;switch(c.type){case"directional":h=new qI(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new $I(f),h.distance=p;break;case"spot":h=new WI(f),h.distance=p,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,Uo(h,c),void 0!==c.intensity&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(h),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class Eq{constructor(){this.name=hn.KHR_MATERIALS_UNLIT}getMaterialType(){return Qr}extendParams(e,t,i){const r=[];e.color=new Ze(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],or),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ci))}return Promise.all(r)}}class wq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Cq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Fe(a,a)}return Promise.all(s)}}class Aq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class Tq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Dq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ze(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],or)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ci)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Iq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Pq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Ze).setRGB(a[0],a[1],a[2],or),Promise.all(s)}}class Rq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Fq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Ze).setRGB(a[0],a[1],a[2],or),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ci)),Promise.all(s)}}class Lq{constructor(e){this.parser=e,this.name=hn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Nq{constructor(e){this.parser=e,this.name=hn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Is:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Oq{constructor(e){this.parser=e,this.name=hn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class kq{constructor(e){this.parser=e,this.name=hn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const h=i.options.manager.getHandler(a.uri);null!==h&&(c=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Bq{constructor(e){this.parser=e,this.name=hn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const h=i.options.manager.getHandler(a.uri);null!==h&&(c=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Vq{constructor(e){this.name=hn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const f=r.count,p=r.byteStride,v=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,p,v,r.mode,r.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(f*p);return o.decodeGltfBuffer(new Uint8Array(y),f,p,v,r.mode,r.filter),y})})}return null}}class Uq{constructor(e){this.name=hn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const h of r.primitives)if(h.mode!==ts.TRIANGLES&&h.mode!==ts.TRIANGLE_STRIP&&h.mode!==ts.TRIANGLE_FAN&&void 0!==h.mode)return null;const o=i.extensions[this.name].attributes,a=[],c={};for(const h in o)a.push(this.parser.getDependency("accessor",o[h]).then(f=>(c[h]=f,c[h])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(h=>{const f=h.pop(),p=f.isGroup?f.children:[f],v=h[0].count,y=[];for(const x of p){const M=new Rt,S=new re,b=new lr,D=new re(1,1,1),A=new uI(x.geometry,x.material,v);for(let T=0;T<v;T++)c.TRANSLATION&&S.fromBufferAttribute(c.TRANSLATION,T),c.ROTATION&&b.fromBufferAttribute(c.ROTATION,T),c.SCALE&&D.fromBufferAttribute(c.SCALE,T),A.setMatrixAt(T,M.compose(S,b,D));for(const T in c)if("_COLOR_0"===T){const q=c[T];A.instanceColor=new qc(q.array,q.itemSize,q.normalized)}else"TRANSLATION"!==T&&"ROTATION"!==T&&"SCALE"!==T&&x.geometry.setAttribute(T,c[T]);bi.prototype.copy.call(A,x),this.parser.assignFinalMaterial(A),y.push(A)}return f.isGroup?(f.clear(),f.add(...y),f):y[0]}))}}const XP="glTF";class Hq{constructor(e){this.name=hn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==XP)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);if(o+=4,1313821514===c){const h=new Uint8Array(e,12+o,a);this.content=i.decode(h)}else if(5130562===c){const h=12+o;this.body=e.slice(h,h+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class zq{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},h={};for(const f in o){const p=db[f]||f.toLowerCase();a[p]=o[f]}for(const f in e.attributes){const p=db[f]||f.toLowerCase();if(void 0!==o[f]){const v=i.accessors[e.attributes[f]];h[p]=su[v.componentType].name,c[p]=!0===v.normalized}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(p,v){r.decodeDracoFile(f,function(y){for(const x in y.attributes){const M=y.attributes[x],S=c[x];void 0!==S&&(M.normalized=S)}p(y)},a,h,or,v)})})}}class Gq{constructor(){this.name=hn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Wq{constructor(){this.name=hn.KHR_MESH_QUANTIZATION}}class ZP extends ed{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,h=3*a,f=r-t,p=(i-t)/f,v=p*p,y=v*p,x=e*h,M=x-h,S=-2*y+3*v,b=y-v,D=1-S,A=b-v+p;for(let T=0;T!==a;T++)s[T]=D*o[M+T+a]+A*(o[M+T+c]*f)+S*o[x+T+a]+b*(o[x+T]*f);return s}}const jq=new lr;class $q extends ZP{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return jq.fromArray(s).normalize().toArray(s),s}}const ts={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},su={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},KP={9728:wi,9729:oi,9984:1004,9985:1007,9986:gc,9987:ws},JP={33071:Kr,33648:1002,10497:Ha},hb={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},db={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ga={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},qq={CUBICSPLINE:void 0,LINEAR:Ph,STEP:Ih};function fl(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Uo(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Zq(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kq(n){let e;const t=n.extensions&&n.extensions[hn.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+pb(t.attributes):n.indices+":"+pb(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+pb(n.targets[i]);return e}function pb(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function mb(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Qq=new Rt;class eX{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Sq,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=!0===/^((?!chrome|android).)*safari/i.test(a);const c=a.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||i&&r<17||s&&o<98?new B6(this.options.manager):new Z6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Js(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return fl(s,a,r),Uo(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[h,f]of o.children.entries())s(f,a.children[h])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[hn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(il.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=hb[r.type],c=!0===r.normalized,h=new(0,su[r.componentType])(r.count*o);return Promise.resolve(new Wn(h,o,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=hb[r.type],h=su[r.componentType],f=h.BYTES_PER_ELEMENT,v=r.byteOffset||0,y=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,x=!0===r.normalized;let M,S;if(y&&y!==f*c){const b=Math.floor(v/y),D="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count;let A=t.cache.get(D);A||(M=new h(a,b*y,r.count*y/f),A=new lx(M,y/f),t.cache.add(D,A)),S=new Xa(A,c,v%y/f,x)}else M=null===a?new h(r.count*c):new h(a,v,r.count*c),S=new Wn(M,c,x);if(void 0!==r.sparse){const T=r.sparse.values.byteOffset||0,q=new(0,su[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*hb.SCALAR),$=new h(o[2],T,r.sparse.count*c);null!==a&&(S=new Wn(S.array.slice(),S.itemSize,S.normalized)),S.normalized=!1;for(let K=0,Q=q.length;K<Q;K++){const G=q[K];if(S.setX(G,$[K*c]),c>=2&&S.setY(G,$[K*c+1]),c>=3&&S.setZ(G,$[K*c+2]),c>=4&&S.setW(G,$[K*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}S.normalized=x}return S})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=o.name||a.name||"",""===f.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(f.name=a.uri);const v=(s.samplers||{})[o.sampler]||{};return f.magFilter=KP[v.magFilter]||oi,f.minFilter=KP[v.minFilter]||ws,f.wrapS=JP[v.wrapS]||Ha,f.wrapT=JP[v.wrapT]||Ha,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==wi&&f.minFilter!==oi,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(p=>p.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",h=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(p){h=!0;const v=new Blob([p],{type:o.mimeType});return c=a.createObjectURL(v),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(c).then(function(p){return new Promise(function(v,y){let x=v;!0===t.isImageBitmapLoader&&(x=function(M){const S=new Jr(M);S.needsUpdate=!0,v(S)}),t.load(il.resolveURL(p,s.path),x,void 0,y)})}).then(function(p){return!0===h&&a.revokeObjectURL(c),Uo(p,o),p.userData.mimeType=o.mimeType||function Jq(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":n.search(/\.ktx2($|\?)/i)>0||0===n.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"}(o.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),p});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[hn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[hn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[hn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new _x,Ds.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new Sr,Ds.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return vm}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},h=[];if((s.extensions||{})[hn.KHR_MATERIALS_UNLIT]){const p=r[hn.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),h.push(p.extendParams(a,s,t))}else{const p=s.pbrMetallicRoughness||{};if(a.color=new Ze(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const v=p.baseColorFactor;a.color.setRGB(v[0],v[1],v[2],or),a.opacity=v[3]}void 0!==p.baseColorTexture&&h.push(t.assignTexture(a,"map",p.baseColorTexture,Ci)),a.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,a.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(h.push(t.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),h.push(t.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const f=s.alphaMode||"OPAQUE";if("BLEND"===f?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===f&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Qr&&(h.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Fe(1,1),void 0!==s.normalTexture.scale)){const p=s.normalTexture.scale;a.normalScale.set(p,p)}if(void 0!==s.occlusionTexture&&o!==Qr&&(h.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Qr){const p=s.emissiveFactor;a.emissive=(new Ze).setRGB(p[0],p[1],p[2],or)}return void 0!==s.emissiveTexture&&o!==Qr&&h.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Ci)),Promise.all(h).then(function(){const p=new o(a);return s.name&&(p.name=s.name),Uo(p,s),t.associations.set(p,{materials:e}),s.extensions&&fl(r,p,s),p})}createUniqueName(e){const t=Un.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[hn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return QP(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const h=e[a],f=Kq(h),p=r[f];if(p)o.push(p.promise);else{let v;v=h.extensions&&h.extensions[hn.KHR_DRACO_MESH_COMPRESSION]?s(h):QP(new rn,h,t),r[f]={primitive:h,promise:v},o.push(v)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,h=o.length;c<h;c++){const f=void 0===o[c].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new vm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[c].material);a.push(f)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const h=c.slice(0,c.length-1),f=c[c.length-1],p=[];for(let y=0,x=f.length;y<x;y++){const M=f[y],S=o[y];let b;const D=h[y];if(S.mode===ts.TRIANGLES||S.mode===ts.TRIANGLE_STRIP||S.mode===ts.TRIANGLE_FAN||void 0===S.mode)b=!0===s.isSkinnedMesh?new oI(M,D):new Ti(M,D),!0===b.isSkinnedMesh&&b.normalizeSkinWeights(),S.mode===ts.TRIANGLE_STRIP?b.geometry=qP(b.geometry,1):S.mode===ts.TRIANGLE_FAN&&(b.geometry=qP(b.geometry,2));else if(S.mode===ts.LINES)b=new yx(M,D);else if(S.mode===ts.LINE_STRIP)b=new Qa(M,D);else if(S.mode===ts.LINE_LOOP)b=new gI(M,D);else{if(S.mode!==ts.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);b=new yI(M,D)}Object.keys(b.geometry.morphAttributes).length>0&&Zq(b,s),b.name=t.createUniqueName(s.name||"mesh_"+e),Uo(b,s),S.extensions&&fl(r,b,S),t.assignFinalMaterial(b),p.push(b)}for(let y=0,x=p.length;y<x;y++)t.associations.set(p[y],{meshes:e,primitives:y});if(1===p.length)return s.extensions&&fl(r,p[0],s),p[0];const v=new fa;s.extensions&&fl(r,v,s),t.associations.set(v,{meshes:e});for(let y=0,x=p.length;y<x;y++)v.add(p[y]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Di(J8_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new _m(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Uo(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let h=0,f=o.length;h<f;h++){const p=o[h];if(p){a.push(p);const v=new Rt;null!==s&&v.fromArray(s.array,16*h),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new qp(a,c)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],c=[],h=[],f=[];for(let p=0,v=r.channels.length;p<v;p++){const y=r.channels[p],x=r.samplers[y.sampler],M=y.target,S=M.node,b=void 0!==r.parameters?r.parameters[x.input]:x.input,D=void 0!==r.parameters?r.parameters[x.output]:x.output;void 0!==M.node&&(o.push(this.getDependency("node",S)),a.push(this.getDependency("accessor",b)),c.push(this.getDependency("accessor",D)),h.push(x),f.push(M))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(h),Promise.all(f)]).then(function(p){const v=p[0],y=p[1],x=p[2],M=p[3],S=p[4],b=[];for(let D=0,A=v.length;D<A;D++){const T=v[D],q=y[D],$=x[D],K=M[D],Q=S[D];if(void 0===T)continue;T.updateMatrix&&T.updateMatrix();const G=i._createAnimationTracks(T,q,$,K,Q);if(G)for(let z=0;z<G.length;z++)b.push(G[z])}return new td(s,void 0,b)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,h=r.weights.length;c<h;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let h=0,f=a.length;h<f;h++)o.push(i.getDependency("node",a[h]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(h){const f=h[0],p=h[1],v=h[2];null!==v&&f.traverse(function(y){!y.isSkinnedMesh||y.bind(v,Qq)});for(let y=0,x=p.length;y<x;y++)f.add(p[y]);return f})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],c=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){a.push(h)}),this.nodeCache[e]=Promise.all(a).then(function(h){let f;if(f=!0===s.isBone?new dx:h.length>1?new fa:1===h.length?h[0]:new bi,f!==h[0])for(let p=0,v=h.length;p<v;p++)f.add(h[p]);if(s.name&&(f.userData.name=s.name,f.name=o),Uo(f,s),s.extensions&&fl(i,f,s),void 0!==s.matrix){const p=new Rt;p.fromArray(s.matrix),f.applyMatrix4(p)}else void 0!==s.translation&&f.position.fromArray(s.translation),void 0!==s.rotation&&f.quaternion.fromArray(s.rotation),void 0!==s.scale&&f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new fa;i.name&&(s.name=r.createUniqueName(i.name)),Uo(s,i),i.extensions&&fl(t,s,i);const o=i.nodes||[],a=[];for(let c=0,h=o.length;c<h;c++)a.push(r.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let f=0,p=c.length;f<p;f++)s.add(c[f]);return r.associations=(f=>{const p=new Map;for(const[v,y]of r.associations)(v instanceof Ds||v instanceof Jr)&&p.set(v,y);return f.traverse(v=>{const y=r.associations.get(v);null!=y&&p.set(v,y)}),p})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,c=[];let h;switch(ga[s.path]===ga.weights?e.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(a),ga[s.path]){case ga.weights:h=Jc;break;case ga.rotation:h=Qc;break;case ga.position:case ga.scale:h=tu;break;default:h=1===i.itemSize?Jc:tu}const f=void 0!==r.interpolation?qq[r.interpolation]:Ph,p=this._getArrayFromAccessor(i);for(let v=0,y=c.length;v<y;v++){const x=new h(c[v]+"."+ga[s.path],t.array,p,f);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(x),o.push(x)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=mb(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof Qc?$q:ZP)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function QP(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=db[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return vn.workingColorSpace!==or&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${vn.workingColorSpace}" not supported.`),Uo(n,e),function tX(n,e,t){const i=e.attributes,r=new cr;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,h=a.max;if(void 0===c||void 0===h)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new re(c[0],c[1],c[2]),new re(h[0],h[1],h[2])),a.normalized){const f=mb(su[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}const s=e.targets;if(void 0!==s){const a=new re,c=new re;for(let h=0,f=s.length;h<f;h++){const p=s[h];if(void 0!==p.POSITION){const v=t.json.accessors[p.POSITION],y=v.min,x=v.max;if(void 0!==y&&void 0!==x){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(x[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(x[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(x[2]))),v.normalized){const M=mb(su[v.componentType]);c.multiplyScalar(M)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Gi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Yq(n,e,t){let i=!1,r=!1,s=!1;for(let h=0,f=e.length;h<f;h++){const p=e[h];if(void 0!==p.POSITION&&(i=!0),void 0!==p.NORMAL&&(r=!0),void 0!==p.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let h=0,f=e.length;h<f;h++){const p=e[h];if(i){const v=void 0!==p.POSITION?t.getDependency("accessor",p.POSITION):n.attributes.position;o.push(v)}if(r){const v=void 0!==p.NORMAL?t.getDependency("accessor",p.NORMAL):n.attributes.normal;a.push(v)}if(s){const v=void 0!==p.COLOR_0?t.getDependency("accessor",p.COLOR_0):n.attributes.color;c.push(v)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(h){const p=h[1],v=h[2];return i&&(n.morphAttributes.position=h[0]),r&&(n.morphAttributes.normal=p),s&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}var iX=d(487),rX=d.n(iX);let sX=(()=>{class n{constructor(t){this.http=t,this.jsonUrl="assets/json/health-care.json"}getLogo(){return this.http.get(this.jsonUrl)}}return n.\u0275fac=function(t){return new(t||n)(vt(a0))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oX=(()=>{class n{constructor(t){this.http=t,this.apiUrl="http://localhost:8000"}getToken(){return localStorage.getItem("access_token")}login(t){const i=(new bo).set("username",t.username).set("password",t.password);return this.http.post(`${this.apiUrl}/login`,i.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}logout(){localStorage.removeItem("access_token")}isLoggedIn(){return!!this.getToken()}getData(t){const i=new Ms({Authorization:`Bearer ${this.getToken()}`});return this.http.get(`${this.apiUrl}/${t}`,{headers:i}).pipe(qs(r=>{throw console.error("API error:",r),r}))}postData(t,i){const r=new Ms({Authorization:`Bearer ${this.getToken()}`,"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/${t}`,i,{headers:r}).pipe(qs(s=>{throw console.error("API error:",s),s}))}}return n.\u0275fac=function(t){return new(t||n)(vt(a0))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eR=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(ke(co),ke(Rr))},n.\u0275dir=Ut({type:n}),n})(),pl=(()=>{class n extends eR{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ki(n)))(i||n)}}(),n.\u0275dir=Ut({type:n,features:[In]}),n})();const eo=new Ct("NgValueAccessor"),cX={provide:eo,useExisting:On(()=>Rm),multi:!0},hX=new Ct("CompositionEventMode");let Rm=(()=>{class n extends eR{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function uX(){const n=js()?js().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(co),ke(Rr),ke(hX,8))},n.\u0275dir=Ut({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Ui("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Gn([cX]),In]}),n})();const $i=new Ct("NgValidators"),ya=new Ct("NgAsyncValidators");function sR(n){return function va(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function Fm(n){return null}function hR(n){return null!=n}function dR(n){return Wu(n)?li(n):n}function fR(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function pR(n,e){return e.map(t=>t(n))}function mR(n){return n.map(e=>function pX(n){return!n.validate}(e)?e:t=>e.validate(t))}function gb(n){return null!=n?function gR(n){if(!n)return null;const e=n.filter(hR);return 0==e.length?null:function(t){return fR(pR(t,e))}}(mR(n)):null}function vb(n){return null!=n?function vR(n){if(!n)return null;const e=n.filter(hR);return 0==e.length?null:function(t){return function aX(...n){const e=Xb(n),{args:t,keys:i}=GA(n),r=new H(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,h=o;for(let f=0;f<o;f++){let p=!1;cs(t[f]).subscribe(_n(s,v=>{p||(p=!0,h--),a[f]=v},()=>c--,void 0,()=>{(!c||!p)&&(h||s.next(i?jA(i,a):a),s.complete())}))}});return e?r.pipe(WA(e)):r}(pR(t,e).map(dR)).pipe(Dt(fR))}}(mR(n)):null}function yR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yb(n){return n?Array.isArray(n)?n:[n]:[]}function Lm(n,e){return Array.isArray(n)?n.includes(e):n===e}function bR(n,e){const t=yb(e);return yb(n).forEach(r=>{Lm(t,r)||t.push(r)}),t}function SR(n,e){return yb(e).filter(t=>!Lm(n,t))}class MR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class dr extends MR{get formDirective(){return null}get path(){return null}}class _a extends MR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ER{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wR=(()=>{class n extends ER{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(_a,2))},n.\u0275dir=Ut({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&rf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[In]}),n})(),CR=(()=>{class n extends ER{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(ke(dr,10))},n.\u0275dir=Ut({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&rf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[In]}),n})();const od="VALID",Om="INVALID",ou="PENDING",ad="DISABLED";function Sb(n){return(km(n)?n.validators:n)||null}function TR(n){return Array.isArray(n)?gb(n):n||null}function Mb(n,e){return(km(e)?e.asyncValidators:n)||null}function DR(n){return Array.isArray(n)?vb(n):n||null}function km(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class RR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=TR(this._rawValidators),this._composedAsyncValidatorFn=DR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===od}get invalid(){return this.status===Om}get pending(){return this.status==ou}get disabled(){return this.status===ad}get enabled(){return this.status!==ad}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=TR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=DR(e)}addValidators(e){this.setValidators(bR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(SR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(SR(e,this._rawAsyncValidators))}hasValidator(e){return Lm(this._rawValidators,e)}hasAsyncValidator(e){return Lm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ou,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ad,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=od,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===od||this.status===ou)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ad:od}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ou,this._hasOwnPendingAsyncValidator=!0;const t=dR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Jn,this.statusChanges=new Jn}_calculateStatus(){return this._allControlsDisabled()?ad:this.errors?Om:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ou)?ou:this._anyControlsHaveStatus(Om)?Om:od}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){km(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Eb extends RR{constructor(e,t,i){super(Sb(t),Mb(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function PR(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new Xe(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function IR(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new Xe(1e3,"");if(!i[t])throw new Xe(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function ld(n,e){wb(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function MX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FR(n,e)})}(n,e),function wX(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function EX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function SX(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Um(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wb(n,e){const t=function _R(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(yR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function xR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(yR(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Um(e._rawValidators,r),Um(e._rawAsyncValidators,r)}function FR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const IX={provide:dr,useExisting:On(()=>zm)},cd=(()=>Promise.resolve())();let zm=(()=>{class n extends dr{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Jn,this.form=new Eb({},gb(t),vb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cd.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),ld(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cd.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cd.then(()=>{const i=this._findContainer(t.path),r=new Eb({});(function LR(n,e){wb(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cd.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){cd.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function OR(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(ke($i,10),ke(ya,10))},n.\u0275dir=Ut({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&Ui("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gn([IX]),In]}),n})();function kR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function BR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const VR=class extends RR{constructor(e=null,t,i){super(Sb(t),Mb(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),km(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=BR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){BR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},FX={provide:_a,useExisting:On(()=>Tb)},zR=(()=>Promise.resolve())();let Tb=(()=>{class n extends _a{constructor(t,i,r,s,o){super(),this._changeDetectorRef=o,this.control=new VR,this._registered=!1,this.update=new Jn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Ab(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Rm?t=s:function TX(n){return Object.getPrototypeOf(n.constructor)===pl}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Cb(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ld(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&vo(i);zR.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Bm(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(ke(dr,9),ke($i,10),ke(ya,10),ke(eo,10),ke(bf,8))},n.\u0275dir=Ut({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gn([FX]),In,jr]}),n})(),GR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ut({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),jR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({}),n})(),ml=(()=>{class n{constructor(){this._validator=Fm}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Fm,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ut({type:n,features:[jr]}),n})();const KX={provide:$i,useExisting:On(()=>Gm),multi:!0};let Gm=(()=>{class n extends ml{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=vo,this.createValidator=t=>sR}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=ki(n)))(i||n)}}(),n.\u0275dir=Ut({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&zs("required",i._enabled?"":null)},inputs:{required:"required"},features:[Gn([KX]),In]}),n})(),iY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[jR]}),n})(),rY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[iY]}),n})();const oY=["threeContainer"],aY=["logoContainer"];function lY(n,e){if(1&n&&(Z(0,"div",29),ce(1),te()),2&n){const t=sE();Bu(1),af(" ",t.errorMessage," ")}}let cY=(()=>{class n{constructor(t,i,r){this.logoService=t,this.apiService=i,this.router=r,this.username="",this.password="",this.errorMessage=null}ngOnInit(){this.logoService.getLogo().subscribe(t=>{rX().loadAnimation({container:this.logoContainer.nativeElement,renderer:"svg",loop:!0,autoplay:!0,animationData:t})})}ngAfterViewInit(){this.threeContainer&&function nX(n){const e=new YD,t=new Di(75,n.clientWidth/n.clientHeight,.1,1e3);t.position.z=5;const i=new xq({antialias:!0});i.setSize(n.clientWidth,n.clientHeight),n.appendChild(i.domElement),(new bq).load("assets/img/doctor-day.glb",s=>{const o=s.scene;o.scale.set(1,1,1),e.add(o),function a(){requestAnimationFrame(a),o.rotation.y+=.01,i.render(e,t)}()},void 0,s=>{console.error("An error happened while loading the model",s)}),window.addEventListener("resize",()=>{t.aspect=n.clientWidth/n.clientHeight,t.updateProjectionMatrix(),i.setSize(n.clientWidth,n.clientHeight)})}(this.threeContainer.nativeElement)}login(){this.apiService.login({username:this.username,password:this.password}).subscribe(t=>{console.log("Login Success:",t),localStorage.setItem("access_token",t.access_token),this.router.navigate(["/dashboard"])},t=>{console.error("Login Failed:",t),this.errorMessage="Invalid username or password"})}}return n.\u0275fac=function(t){return new(t||n)(ke(sX),ke(oX),ke(xi))},n.\u0275cmp=hs({type:n,selectors:[["app-login"]],viewQuery:function(t,i){if(1&t&&(hy(oY,7),hy(aY,7)),2&t){let r;Qu(r=eh())&&(i.threeContainer=r.first),Qu(r=eh())&&(i.logoContainer=r.first)}},decls:35,vars:3,consts:[[1,"auth-wrapper"],[1,"auth-content","container"],[1,"card"],[1,"row","align-items-stretch"],[1,"col-md-6","d-none","d-md-block","auth-bg"],[1,"logo-container"],["logoContainer",""],[1,"col-md-6"],[1,"card-body","p-4"],[1,"mb-4","text-center"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fas","fa-user"],["type","text","placeholder","Username","name","username","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-4"],[1,"fas","fa-lock"],["type","password","placeholder","Password","id","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","toggle-password",1,"input-group-text"],[1,"fas","fa-eye"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"form-check","me-auto"],["type","checkbox","id","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],[1,"ms-4"],["href","#",1,"text-decoration-none"],["type","submit",1,"btn","btn-primary","w-100","mb-3"],["type","button",1,"btn","btn-secondary","w-100","mb-3"],[1,"alert","alert-danger"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Ee(5,"div",5,6),te(),Z(7,"div",7)(8,"div",8)(9,"h3",9),ce(10,"Welcome Back"),te(),function JM(n,e,t,i,r,s,o,a){const c=Re(),h=xn(),f=n+22,p=h.firstCreatePass?function Vk(n,e,t,i,r,s,o,a,c){const h=e.consts,f=jl(e,n,4,o||null,Wo(h,a));Lv(e,t,f,Wo(h,c)),Md(e,f);const p=f.tViews=Fv(2,f,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,h,c,e,t,i,r,s,o):h.data[f];Bs(p,!1);const v=c[11].createComment("");Bd(h,c,v,p),Bi(v,c),Kd(c,c[f]=OM(v,c,v,p)),xd(p)&&Pv(h,c,p),null!=o&&Rv(c,p,a)}(11,lY,2,1,"div",10),Z(12,"form",11),Ui("ngSubmit",function(){return i.login()}),Z(13,"div",12)(14,"span",13),Ee(15,"i",14),te(),Z(16,"input",15),Ui("ngModelChange",function(s){return i.username=s}),te()(),Z(17,"div",16)(18,"span",13),Ee(19,"i",17),te(),Z(20,"input",18),Ui("ngModelChange",function(s){return i.password=s}),te(),Z(21,"span",19),Ee(22,"i",20),te()(),Z(23,"div",21)(24,"div",22),Ee(25,"input",23),Z(26,"label",24),ce(27,"Remember Me"),te()(),Z(28,"div",25)(29,"a",26),ce(30,"Forgot Password?"),te()()(),Z(31,"button",27),ce(32,"Login"),te(),Z(33,"button",28),ce(34,"Login with FaceID"),te()()()()()()()()),2&t&&(Bu(11),Gu("ngIf",i.errorMessage),Bu(5),Gu("ngModel",i.username),Bu(4),Gu("ngModel",i.password))},dependencies:[iA,GR,Rm,wR,CR,Gm,Tb,zm]}),n})(),uY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-dashboard"]],decls:460,vars:0,consts:[["id","wrapper"],["id","accordionSidebar",1,"navbar-nav","bg-gradient-primary","sidebar","sidebar-dark","accordion"],["href","index.html",1,"sidebar-brand","d-flex","align-items-center","justify-content-center"],[1,"sidebar-brand-icon","rotate-n-15"],[1,"fas","fa-laugh-wink"],[1,"sidebar-brand-text","mx-3"],[1,"sidebar-divider","my-0"],[1,"nav-item","active"],["href","index.html",1,"nav-link"],[1,"fas","fa-fw","fa-tachometer-alt"],[1,"sidebar-divider"],[1,"sidebar-heading"],[1,"nav-item"],["href","#","data-toggle","collapse","data-target","#collapseTwo","aria-expanded","true","aria-controls","collapseTwo",1,"nav-link","collapsed"],[1,"fas","fa-fw","fa-cog"],["id","collapseTwo","aria-labelledby","headingTwo","data-parent","#accordionSidebar",1,"collapse"],[1,"bg-white","py-2","collapse-inner","rounded"],[1,"collapse-header"],["href","buttons.html",1,"collapse-item"],["href","cards.html",1,"collapse-item"],["href","#","data-toggle","collapse","data-target","#collapseUtilities","aria-expanded","true","aria-controls","collapseUtilities",1,"nav-link","collapsed"],[1,"fas","fa-fw","fa-wrench"],["id","collapseUtilities","aria-labelledby","headingUtilities","data-parent","#accordionSidebar",1,"collapse"],["href","utilities-color.html",1,"collapse-item"],["href","utilities-border.html",1,"collapse-item"],["href","utilities-animation.html",1,"collapse-item"],["href","utilities-other.html",1,"collapse-item"],["href","#","data-toggle","collapse","data-target","#collapsePages","aria-expanded","true","aria-controls","collapsePages",1,"nav-link","collapsed"],[1,"fas","fa-fw","fa-folder"],["id","collapsePages","aria-labelledby","headingPages","data-parent","#accordionSidebar",1,"collapse"],["href","login.html",1,"collapse-item"],["href","register.html",1,"collapse-item"],["href","forgot-password.html",1,"collapse-item"],[1,"collapse-divider"],["href","404.html",1,"collapse-item"],["href","blank.html",1,"collapse-item"],["href","charts.html",1,"nav-link"],[1,"fas","fa-fw","fa-chart-area"],["href","tables.html",1,"nav-link"],[1,"fas","fa-fw","fa-table"],[1,"sidebar-divider","d-none","d-md-block"],[1,"text-center","d-none","d-md-inline"],["id","sidebarToggle",1,"rounded-circle","border-0"],[1,"sidebar-card","d-none","d-lg-flex"],["src","img/undraw_rocket.svg","alt","...",1,"sidebar-card-illustration","mb-2"],[1,"text-center","mb-2"],["href","https://startbootstrap.com/theme/sb-admin-pro",1,"btn","btn-success","btn-sm"],["id","content-wrapper",1,"d-flex","flex-column"],["id","content"],[1,"navbar","navbar-expand","navbar-light","bg-white","topbar","mb-4","static-top","shadow"],["id","sidebarToggleTop",1,"btn","btn-link","d-md-none","rounded-circle","mr-3"],[1,"fa","fa-bars"],[1,"d-none","d-sm-inline-block","form-inline","mr-auto","ml-md-3","my-2","my-md-0","mw-100","navbar-search"],[1,"input-group"],["type","text","placeholder","Search for...","aria-label","Search","aria-describedby","basic-addon2",1,"form-control","bg-light","border-0","small"],[1,"input-group-append"],["type","button",1,"btn","btn-primary"],[1,"fas","fa-search","fa-sm"],[1,"navbar-nav","ml-auto"],[1,"nav-item","dropdown","no-arrow","d-sm-none"],["href","#","id","searchDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-search","fa-fw"],["aria-labelledby","searchDropdown",1,"dropdown-menu","dropdown-menu-right","p-3","shadow","animated--grow-in"],[1,"form-inline","mr-auto","w-100","navbar-search"],[1,"nav-item","dropdown","no-arrow","mx-1"],["href","#","id","alertsDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-bell","fa-fw"],[1,"badge","badge-danger","badge-counter"],["aria-labelledby","alertsDropdown",1,"dropdown-list","dropdown-menu","dropdown-menu-right","shadow","animated--grow-in"],[1,"dropdown-header"],["href","#",1,"dropdown-item","d-flex","align-items-center"],[1,"mr-3"],[1,"icon-circle","bg-primary"],[1,"fas","fa-file-alt","text-white"],[1,"small","text-gray-500"],[1,"font-weight-bold"],[1,"icon-circle","bg-success"],[1,"fas","fa-donate","text-white"],[1,"icon-circle","bg-warning"],[1,"fas","fa-exclamation-triangle","text-white"],["href","#",1,"dropdown-item","text-center","small","text-gray-500"],["href","#","id","messagesDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-envelope","fa-fw"],["aria-labelledby","messagesDropdown",1,"dropdown-list","dropdown-menu","dropdown-menu-right","shadow","animated--grow-in"],[1,"dropdown-list-image","mr-3"],["src","img/undraw_profile_1.svg","alt","...",1,"rounded-circle"],[1,"status-indicator","bg-success"],[1,"text-truncate"],["src","img/undraw_profile_2.svg","alt","...",1,"rounded-circle"],[1,"status-indicator"],["src","img/undraw_profile_3.svg","alt","...",1,"rounded-circle"],[1,"status-indicator","bg-warning"],["src","https://source.unsplash.com/Mv9hjnEUHR4/60x60","alt","...",1,"rounded-circle"],[1,"topbar-divider","d-none","d-sm-block"],[1,"nav-item","dropdown","no-arrow"],["href","#","id","userDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"mr-2","d-none","d-lg-inline","text-gray-600","small"],["src","img/undraw_profile.svg",1,"img-profile","rounded-circle"],["aria-labelledby","userDropdown",1,"dropdown-menu","dropdown-menu-right","shadow","animated--grow-in"],["href","#",1,"dropdown-item"],[1,"fas","fa-user","fa-sm","fa-fw","mr-2","text-gray-400"],[1,"fas","fa-cogs","fa-sm","fa-fw","mr-2","text-gray-400"],[1,"fas","fa-list","fa-sm","fa-fw","mr-2","text-gray-400"],[1,"dropdown-divider"],["href","#","data-toggle","modal","data-target","#logoutModal",1,"dropdown-item"],[1,"fas","fa-sign-out-alt","fa-sm","fa-fw","mr-2","text-gray-400"],[1,"container-fluid"],[1,"d-sm-flex","align-items-center","justify-content-between","mb-4"],[1,"h3","mb-0","text-gray-800"],["href","#",1,"d-none","d-sm-inline-block","btn","btn-sm","btn-primary","shadow-sm"],[1,"fas","fa-download","fa-sm","text-white-50"],[1,"row"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-left-primary","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-primary","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"col-auto"],[1,"fas","fa-calendar","fa-2x","text-gray-300"],[1,"card","border-left-success","shadow","h-100","py-2"],[1,"text-xs","font-weight-bold","text-success","text-uppercase","mb-1"],[1,"fas","fa-dollar-sign","fa-2x","text-gray-300"],[1,"card","border-left-info","shadow","h-100","py-2"],[1,"text-xs","font-weight-bold","text-info","text-uppercase","mb-1"],[1,"h5","mb-0","mr-3","font-weight-bold","text-gray-800"],[1,"col"],[1,"progress","progress-sm","mr-2"],["role","progressbar","aria-valuenow","50","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info",2,"width","50%"],[1,"fas","fa-clipboard-list","fa-2x","text-gray-300"],[1,"card","border-left-warning","shadow","h-100","py-2"],[1,"text-xs","font-weight-bold","text-warning","text-uppercase","mb-1"],[1,"fas","fa-comments","fa-2x","text-gray-300"],[1,"col-xl-8","col-lg-7"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","d-flex","flex-row","align-items-center","justify-content-between"],[1,"m-0","font-weight-bold","text-primary"],[1,"dropdown","no-arrow"],["href","#","role","button","id","dropdownMenuLink","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"fas","fa-ellipsis-v","fa-sm","fa-fw","text-gray-400"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu","dropdown-menu-right","shadow","animated--fade-in"],[1,"chart-area"],["id","myAreaChart"],[1,"col-xl-4","col-lg-5"],[1,"chart-pie","pt-4","pb-2"],["id","myPieChart"],[1,"mt-4","text-center","small"],[1,"mr-2"],[1,"fas","fa-circle","text-primary"],[1,"fas","fa-circle","text-success"],[1,"fas","fa-circle","text-info"],[1,"col-lg-6","mb-4"],[1,"card-header","py-3"],[1,"small","font-weight-bold"],[1,"float-right"],[1,"progress","mb-4"],["role","progressbar","aria-valuenow","20","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger",2,"width","20%"],["role","progressbar","aria-valuenow","40","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning",2,"width","40%"],["role","progressbar","aria-valuenow","60","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",2,"width","60%"],["role","progressbar","aria-valuenow","80","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info",2,"width","80%"],[1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",2,"width","100%"],[1,"card","bg-primary","text-white","shadow"],[1,"text-white-50","small"],[1,"card","bg-success","text-white","shadow"],[1,"card","bg-info","text-white","shadow"],[1,"card","bg-warning","text-white","shadow"],[1,"card","bg-danger","text-white","shadow"],[1,"card","bg-secondary","text-white","shadow"],[1,"card","bg-light","text-black","shadow"],[1,"text-black-50","small"],[1,"card","bg-dark","text-white","shadow"],[1,"text-center"],["src","img/undraw_posting_photo.svg","alt","...",1,"img-fluid","px-3","px-sm-4","mt-3","mb-4",2,"width","25rem"],["target","_blank","rel","nofollow","href","https://undraw.co/"],[1,"mb-0"],[1,"sticky-footer","bg-white"],[1,"container","my-auto"],[1,"copyright","text-center","my-auto"],["href","#page-top",1,"scroll-to-top","rounded"],[1,"fas","fa-angle-up"],["id","logoutModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["href","login.html",1,"btn","btn-primary"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"ul",1)(2,"a",2)(3,"div",3),Ee(4,"i",4),te(),Z(5,"div",5),ce(6,"SB Admin "),Z(7,"sup"),ce(8,"2"),te()()(),Ee(9,"hr",6),Z(10,"li",7)(11,"a",8),Ee(12,"i",9),Z(13,"span"),ce(14,"Dashboard"),te()()(),Ee(15,"hr",10),Z(16,"div",11),ce(17," Interface "),te(),Z(18,"li",12)(19,"a",13),Ee(20,"i",14),Z(21,"span"),ce(22,"Components"),te()(),Z(23,"div",15)(24,"div",16)(25,"h6",17),ce(26,"Custom Components:"),te(),Z(27,"a",18),ce(28,"Buttons"),te(),Z(29,"a",19),ce(30,"Cards"),te()()()(),Z(31,"li",12)(32,"a",20),Ee(33,"i",21),Z(34,"span"),ce(35,"Utilities"),te()(),Z(36,"div",22)(37,"div",16)(38,"h6",17),ce(39,"Custom Utilities:"),te(),Z(40,"a",23),ce(41,"Colors"),te(),Z(42,"a",24),ce(43,"Borders"),te(),Z(44,"a",25),ce(45,"Animations"),te(),Z(46,"a",26),ce(47,"Other"),te()()()(),Ee(48,"hr",10),Z(49,"div",11),ce(50," Addons "),te(),Z(51,"li",12)(52,"a",27),Ee(53,"i",28),Z(54,"span"),ce(55,"Pages"),te()(),Z(56,"div",29)(57,"div",16)(58,"h6",17),ce(59,"Login Screens:"),te(),Z(60,"a",30),ce(61,"Login"),te(),Z(62,"a",31),ce(63,"Register"),te(),Z(64,"a",32),ce(65,"Forgot Password"),te(),Ee(66,"div",33),Z(67,"h6",17),ce(68,"Other Pages:"),te(),Z(69,"a",34),ce(70,"404 Page"),te(),Z(71,"a",35),ce(72,"Blank Page"),te()()()(),Z(73,"li",12)(74,"a",36),Ee(75,"i",37),Z(76,"span"),ce(77,"Charts"),te()()(),Z(78,"li",12)(79,"a",38),Ee(80,"i",39),Z(81,"span"),ce(82,"Tables"),te()()(),Ee(83,"hr",40),Z(84,"div",41),Ee(85,"button",42),te(),Z(86,"div",43),Ee(87,"img",44),Z(88,"p",45)(89,"strong"),ce(90,"SB Admin Pro"),te(),ce(91," is packed with premium features, components, and more!"),te(),Z(92,"a",46),ce(93,"Upgrade to Pro!"),te()()(),Z(94,"div",47)(95,"div",48)(96,"nav",49)(97,"button",50),Ee(98,"i",51),te(),Z(99,"form",52)(100,"div",53),Ee(101,"input",54),Z(102,"div",55)(103,"button",56),Ee(104,"i",57),te()()()(),Z(105,"ul",58)(106,"li",59)(107,"a",60),Ee(108,"i",61),te(),Z(109,"div",62)(110,"form",63)(111,"div",53),Ee(112,"input",54),Z(113,"div",55)(114,"button",56),Ee(115,"i",57),te()()()()()(),Z(116,"li",64)(117,"a",65),Ee(118,"i",66),Z(119,"span",67),ce(120,"3+"),te()(),Z(121,"div",68)(122,"h6",69),ce(123," Alerts Center "),te(),Z(124,"a",70)(125,"div",71)(126,"div",72),Ee(127,"i",73),te()(),Z(128,"div")(129,"div",74),ce(130,"December 12, 2019"),te(),Z(131,"span",75),ce(132,"A new monthly report is ready to download!"),te()()(),Z(133,"a",70)(134,"div",71)(135,"div",76),Ee(136,"i",77),te()(),Z(137,"div")(138,"div",74),ce(139,"December 7, 2019"),te(),ce(140," $290.29 has been deposited into your account! "),te()(),Z(141,"a",70)(142,"div",71)(143,"div",78),Ee(144,"i",79),te()(),Z(145,"div")(146,"div",74),ce(147,"December 2, 2019"),te(),ce(148," Spending Alert: We've noticed unusually high spending for your account. "),te()(),Z(149,"a",80),ce(150,"Show All Alerts"),te()()(),Z(151,"li",64)(152,"a",81),Ee(153,"i",82),Z(154,"span",67),ce(155,"7"),te()(),Z(156,"div",83)(157,"h6",69),ce(158," Message Center "),te(),Z(159,"a",70)(160,"div",84),Ee(161,"img",85)(162,"div",86),te(),Z(163,"div",75)(164,"div",87),ce(165,"Hi there! I am wondering if you can help me with a problem I've been having."),te(),Z(166,"div",74),ce(167,"Emily Fowler \xb7 58m"),te()()(),Z(168,"a",70)(169,"div",84),Ee(170,"img",88)(171,"div",89),te(),Z(172,"div")(173,"div",87),ce(174,"I have the photos that you ordered last month, how would you like them sent to you?"),te(),Z(175,"div",74),ce(176,"Jae Chun \xb7 1d"),te()()(),Z(177,"a",70)(178,"div",84),Ee(179,"img",90)(180,"div",91),te(),Z(181,"div")(182,"div",87),ce(183,"Last month's report looks great, I am very happy with the progress so far, keep up the good work!"),te(),Z(184,"div",74),ce(185,"Morgan Alvarez \xb7 2d"),te()()(),Z(186,"a",70)(187,"div",84),Ee(188,"img",92)(189,"div",86),te(),Z(190,"div")(191,"div",87),ce(192,"Am I a good boy? The reason I ask is because someone told me that people say this to all dogs, even if they aren't good..."),te(),Z(193,"div",74),ce(194,"Chicken the Dog \xb7 2w"),te()()(),Z(195,"a",80),ce(196,"Read More Messages"),te()()(),Ee(197,"div",93),Z(198,"li",94)(199,"a",95)(200,"span",96),ce(201,"Douglas McGee"),te(),Ee(202,"img",97),te(),Z(203,"div",98)(204,"a",99),Ee(205,"i",100),ce(206," Profile "),te(),Z(207,"a",99),Ee(208,"i",101),ce(209," Settings "),te(),Z(210,"a",99),Ee(211,"i",102),ce(212," Activity Log "),te(),Ee(213,"div",103),Z(214,"a",104),Ee(215,"i",105),ce(216," Logout "),te()()()()(),Z(217,"div",106)(218,"div",107)(219,"h1",108),ce(220,"Dashboard"),te(),Z(221,"a",109),Ee(222,"i",110),ce(223," Generate Report"),te()(),Z(224,"div",111)(225,"div",112)(226,"div",113)(227,"div",114)(228,"div",115)(229,"div",116)(230,"div",117),ce(231," Earnings (Monthly)"),te(),Z(232,"div",118),ce(233,"$40,000"),te()(),Z(234,"div",119),Ee(235,"i",120),te()()()()(),Z(236,"div",112)(237,"div",121)(238,"div",114)(239,"div",115)(240,"div",116)(241,"div",122),ce(242," Earnings (Annual)"),te(),Z(243,"div",118),ce(244,"$215,000"),te()(),Z(245,"div",119),Ee(246,"i",123),te()()()()(),Z(247,"div",112)(248,"div",124)(249,"div",114)(250,"div",115)(251,"div",116)(252,"div",125),ce(253,"Tasks "),te(),Z(254,"div",115)(255,"div",119)(256,"div",126),ce(257,"50%"),te()(),Z(258,"div",127)(259,"div",128),Ee(260,"div",129),te()()()(),Z(261,"div",119),Ee(262,"i",130),te()()()()(),Z(263,"div",112)(264,"div",131)(265,"div",114)(266,"div",115)(267,"div",116)(268,"div",132),ce(269," Pending Requests"),te(),Z(270,"div",118),ce(271,"18"),te()(),Z(272,"div",119),Ee(273,"i",133),te()()()()()(),Z(274,"div",111)(275,"div",134)(276,"div",135)(277,"div",136)(278,"h6",137),ce(279,"Earnings Overview"),te(),Z(280,"div",138)(281,"a",139),Ee(282,"i",140),te(),Z(283,"div",141)(284,"div",69),ce(285,"Dropdown Header:"),te(),Z(286,"a",99),ce(287,"Action"),te(),Z(288,"a",99),ce(289,"Another action"),te(),Ee(290,"div",103),Z(291,"a",99),ce(292,"Something else here"),te()()()(),Z(293,"div",114)(294,"div",142),Ee(295,"canvas",143),te()()()(),Z(296,"div",144)(297,"div",135)(298,"div",136)(299,"h6",137),ce(300,"Revenue Sources"),te(),Z(301,"div",138)(302,"a",139),Ee(303,"i",140),te(),Z(304,"div",141)(305,"div",69),ce(306,"Dropdown Header:"),te(),Z(307,"a",99),ce(308,"Action"),te(),Z(309,"a",99),ce(310,"Another action"),te(),Ee(311,"div",103),Z(312,"a",99),ce(313,"Something else here"),te()()()(),Z(314,"div",114)(315,"div",145),Ee(316,"canvas",146),te(),Z(317,"div",147)(318,"span",148),Ee(319,"i",149),ce(320," Direct "),te(),Z(321,"span",148),Ee(322,"i",150),ce(323," Social "),te(),Z(324,"span",148),Ee(325,"i",151),ce(326," Referral "),te()()()()()(),Z(327,"div",111)(328,"div",152)(329,"div",135)(330,"div",153)(331,"h6",137),ce(332,"Projects"),te()(),Z(333,"div",114)(334,"h4",154),ce(335,"Server Migration "),Z(336,"span",155),ce(337,"20%"),te()(),Z(338,"div",156),Ee(339,"div",157),te(),Z(340,"h4",154),ce(341,"Sales Tracking "),Z(342,"span",155),ce(343,"40%"),te()(),Z(344,"div",156),Ee(345,"div",158),te(),Z(346,"h4",154),ce(347,"Customer Database "),Z(348,"span",155),ce(349,"60%"),te()(),Z(350,"div",156),Ee(351,"div",159),te(),Z(352,"h4",154),ce(353,"Payout Details "),Z(354,"span",155),ce(355,"80%"),te()(),Z(356,"div",156),Ee(357,"div",160),te(),Z(358,"h4",154),ce(359,"Account Setup "),Z(360,"span",155),ce(361,"Complete!"),te()(),Z(362,"div",161),Ee(363,"div",162),te()()(),Z(364,"div",111)(365,"div",152)(366,"div",163)(367,"div",114),ce(368," Primary "),Z(369,"div",164),ce(370,"#4e73df"),te()()()(),Z(371,"div",152)(372,"div",165)(373,"div",114),ce(374," Success "),Z(375,"div",164),ce(376,"#1cc88a"),te()()()(),Z(377,"div",152)(378,"div",166)(379,"div",114),ce(380," Info "),Z(381,"div",164),ce(382,"#36b9cc"),te()()()(),Z(383,"div",152)(384,"div",167)(385,"div",114),ce(386," Warning "),Z(387,"div",164),ce(388,"#f6c23e"),te()()()(),Z(389,"div",152)(390,"div",168)(391,"div",114),ce(392," Danger "),Z(393,"div",164),ce(394,"#e74a3b"),te()()()(),Z(395,"div",152)(396,"div",169)(397,"div",114),ce(398," Secondary "),Z(399,"div",164),ce(400,"#858796"),te()()()(),Z(401,"div",152)(402,"div",170)(403,"div",114),ce(404," Light "),Z(405,"div",171),ce(406,"#f8f9fc"),te()()()(),Z(407,"div",152)(408,"div",172)(409,"div",114),ce(410," Dark "),Z(411,"div",164),ce(412,"#5a5c69"),te()()()()()(),Z(413,"div",152)(414,"div",135)(415,"div",153)(416,"h6",137),ce(417,"Illustrations"),te()(),Z(418,"div",114)(419,"div",173),Ee(420,"img",174),te(),Z(421,"p"),ce(422,"Add some quality, svg illustrations to your project courtesy of "),Z(423,"a",175),ce(424,"unDraw"),te(),ce(425,", a constantly updated collection of beautiful svg images that you can use completely free and without attribution!"),te(),Z(426,"a",175),ce(427,"Browse Illustrations on unDraw \u2192"),te()()(),Z(428,"div",135)(429,"div",153)(430,"h6",137),ce(431,"Development Approach"),te()(),Z(432,"div",114)(433,"p"),ce(434,"SB Admin 2 makes extensive use of Bootstrap 4 utility classes in order to reduce CSS bloat and poor page performance. Custom CSS classes are used to create custom components and custom utility classes."),te(),Z(435,"p",176),ce(436,"Before working with this theme, you should become familiar with the Bootstrap framework, especially the utility classes."),te()()()()()()(),Z(437,"footer",177)(438,"div",178)(439,"div",179)(440,"span"),ce(441,"Copyright \xa9 Your Website 2021"),te()()()()()(),Z(442,"a",180),Ee(443,"i",181),te(),Z(444,"div",182)(445,"div",183)(446,"div",184)(447,"div",185)(448,"h5",186),ce(449,"Ready to Leave?"),te(),Z(450,"button",187)(451,"span",188),ce(452,"\xd7"),te()()(),Z(453,"div",189),ce(454,'Select "Logout" below if you are ready to end your current session.'),te(),Z(455,"div",190)(456,"button",191),ce(457,"Cancel"),te(),Z(458,"a",192),ce(459,"Logout"),te()()()()())}}),n})(),hY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-header-nav"]],decls:54,vars:0,consts:[["data-wow-delay","0.1s",1,"container-fluid","bg-light","p-0","wow","fadeIn"],[1,"row","gx-0","d-none","d-lg-flex"],[1,"col-lg-7","px-5","text-start"],[1,"h-100","d-inline-flex","align-items-center","py-3","me-4"],[1,"fa","fa-map-marker-alt","text-primary","me-2"],[1,"h-100","d-inline-flex","align-items-center","py-3"],[1,"far","fa-clock","text-primary","me-2"],[1,"col-lg-5","px-5","text-end"],[1,"fa","fa-phone-alt","text-primary","me-2"],[1,"h-100","d-inline-flex","align-items-center"],[1,"fa","fa-ambulance","text-primary","me-2"],["data-wow-delay","0.1s",1,"navbar","navbar-expand-lg","bg-white","navbar-light","sticky-top","p-0","wow","fadeIn"],["href","index.html",1,"navbar-brand","d-flex","align-items-center","px-4","px-lg-5"],[1,"m-0","text-primary"],[1,"far","fa-hospital","me-3"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse",1,"navbar-toggler","me-4"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","p-4","p-lg-0"],["href","index.html",1,"nav-item","nav-link","active"],["href","about.html",1,"nav-item","nav-link"],["href","service.html",1,"nav-item","nav-link"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu","rounded-0","rounded-bottom","m-0"],["href","feature.html",1,"dropdown-item"],["href","team.html",1,"dropdown-item"],["href","appointment.html",1,"dropdown-item"],["href","testimonial.html",1,"dropdown-item"],["href","404.html",1,"dropdown-item"],["href","contact.html",1,"nav-item","nav-link"],["href","",1,"btn","btn-primary","rounded-0","py-4","px-lg-5","d-none","d-lg-block"],[1,"fa","fa-arrow-right","ms-3"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Ee(4,"small",4),Z(5,"small"),ce(6,"123 Street, New York, USA"),te()(),Z(7,"div",5),Ee(8,"small",6),Z(9,"small"),ce(10,"Mon - Fri : 09.00 AM - 09.00 PM"),te()()(),Z(11,"div",7)(12,"div",3),Ee(13,"small",8),Z(14,"small"),ce(15,"+84 0798699203"),te()(),Z(16,"div",9),Ee(17,"small",10),Z(18,"small"),ce(19,"115"),te()()()()(),Z(20,"nav",11)(21,"a",12)(22,"h1",13),Ee(23,"i",14),ce(24,"Klinik"),te()(),Z(25,"button",15),Ee(26,"span",16),te(),Z(27,"div",17)(28,"div",18)(29,"a",19),ce(30,"Home"),te(),Z(31,"a",20),ce(32,"About"),te(),Z(33,"a",21),ce(34,"Service"),te(),Z(35,"div",22)(36,"a",23),ce(37,"Pages"),te(),Z(38,"div",24)(39,"a",25),ce(40,"Feature"),te(),Z(41,"a",26),ce(42,"Our Doctor"),te(),Z(43,"a",27),ce(44,"Appointment"),te(),Z(45,"a",28),ce(46,"Testimonial"),te(),Z(47,"a",29),ce(48,"404 Page"),te()()(),Z(49,"a",30),ce(50,"Contact"),te()(),Z(51,"a",31),ce(52,"Appointment"),Ee(53,"i",32),te()()())}}),n})(),dY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-main-nav"]],decls:195,vars:0,consts:[[1,"container-fluid","header","bg-primary","p-0","mb-5"],[1,"row","g-0","align-items-center","flex-column-reverse","flex-lg-row"],["data-wow-delay","0.1s",1,"col-lg-6","p-5","wow","fadeIn"],[1,"display-4","text-white","mb-5"],[1,"row","g-4"],[1,"col-sm-4"],[1,"border-start","border-light","ps-4"],["data-toggle","counter-up",1,"text-white","mb-1"],[1,"text-light","mb-0"],["data-wow-delay","0.5s",1,"col-lg-6","wow","fadeIn"],[1,"owl-carousel","header-carousel"],[1,"owl-carousel-item","position-relative"],["src","assets/img/carousel-1.jpg","alt","Cardiology",1,"img-fluid"],[1,"owl-carousel-text"],[1,"display-1","text-white","mb-0"],["src","assets/img/carousel-2.jpg","alt","Neurology",1,"img-fluid"],["src","assets/img/carousel-3.jpg","alt","Pulmonary",1,"img-fluid"],[1,"container-xxl","py-5"],[1,"container"],[1,"row","g-5"],["data-wow-delay","0.1s",1,"col-lg-6","wow","fadeIn"],[1,"d-flex","flex-column"],["src","assets/img/about-1.jpg","alt","",1,"img-fluid","rounded","w-75","align-self-end"],["src","assets/img/doc-patient.jpg","alt","",1,"img-fluid","rounded","w-50","bg-white","pt-3","pe-3",2,"margin-top","-25%"],[1,"d-inline-block","border","rounded-pill","py-1","px-4"],[1,"mb-4"],[1,"far","fa-check-circle","text-primary","me-3"],["href","",1,"btn","btn-primary","rounded-pill","py-3","px-5","mt-3"],["data-wow-delay","0.1s",1,"text-center","mx-auto","mb-5","wow","fadeInUp",2,"max-width","600px"],["data-wow-delay","0.1s",1,"col-lg-4","col-md-6","wow","fadeInUp"],[1,"service-item","bg-light","rounded","h-100","p-5"],[1,"d-inline-flex","align-items-center","justify-content-center","bg-white","rounded-circle","mb-4",2,"width","65px","height","65px"],[1,"fa","fa-heartbeat","text-primary","fs-4"],[1,"mb-3"],["href","",1,"btn"],[1,"fa","fa-plus","text-primary","me-3"],["data-wow-delay","0.3s",1,"col-lg-4","col-md-6","wow","fadeInUp"],[1,"fa","fa-x-ray","text-primary","fs-4"],["data-wow-delay","0.5s",1,"col-lg-4","col-md-6","wow","fadeInUp"],[1,"fa","fa-brain","text-primary","fs-4"],[1,"fa","fa-wheelchair","text-primary","fs-4"],[1,"fa","fa-tooth","text-primary","fs-4"],[1,"fa","fa-vials","text-primary","fs-4"],[1,"container-fluid","bg-primary","overflow-hidden","my-5","px-lg-0"],[1,"container","feature","px-lg-0"],[1,"row","g-0","mx-lg-0"],["data-wow-delay","0.1s",1,"col-lg-6","feature-text","py-5","wow","fadeIn"],[1,"p-lg-5","ps-lg-0"],[1,"d-inline-block","border","rounded-pill","text-light","py-1","px-4"],[1,"text-white","mb-4"],[1,"text-white","mb-4","pb-2"],[1,"col-6"],[1,"d-flex","align-items-center"],[1,"d-flex","flex-shrink-0","align-items-center","justify-content-center","rounded-circle","bg-light",2,"width","55px","height","55px"],[1,"fa","fa-user-md","text-primary"],[1,"ms-4"],[1,"text-white","mb-2"],[1,"text-white","mb-0"],[1,"fa","fa-check","text-primary"],[1,"fa","fa-comment-medical","text-primary"],[1,"fa","fa-headphones","text-primary"],["data-wow-delay","0.5s",1,"col-lg-6","wow","fadeIn",2,"min-height","400px"],[1,"position-relative","h-100"],["autoplay","","muted","","loop","","playsinline","","id","background-video",1,"position-absolute","w-100","h-100",2,"object-fit","cover"],["src","assets/img/doctor.mp4","type","video/mp4"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),ce(4,"Good Health Is The Root Of All Happiness"),te(),Z(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2",7),ce(9,"123"),te(),Z(10,"p",8),ce(11,"Expert Doctors"),te()()(),Z(12,"div",5)(13,"div",6)(14,"h2",7),ce(15,"1234"),te(),Z(16,"p",8),ce(17,"Medical Staff"),te()()(),Z(18,"div",5)(19,"div",6)(20,"h2",7),ce(21,"12345"),te(),Z(22,"p",8),ce(23,"Total Patients"),te()()()()(),Z(24,"div",9)(25,"div",10)(26,"div",11),Ee(27,"img",12),Z(28,"div",13)(29,"h1",14),ce(30,"Cardiology"),te()()(),Z(31,"div",11),Ee(32,"img",15),Z(33,"div",13)(34,"h1",14),ce(35,"Neurology"),te()()(),Z(36,"div",11),Ee(37,"img",16),Z(38,"div",13)(39,"h1",14),ce(40,"Pulmonary"),te()()()()()()(),Z(41,"div",17)(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",21),Ee(46,"img",22)(47,"img",23),te()(),Z(48,"div",9)(49,"p",24),ce(50,"About Us"),te(),Z(51,"h1",25),ce(52,"Why You Should Trust Us? Get Know About Us!"),te(),Z(53,"p"),ce(54,"Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet"),te(),Z(55,"p",25),ce(56,"Stet no et lorem dolor et diam, amet duo ut dolore vero eos. No stet est diam rebum amet diam ipsum. Clita clita labore, dolor duo nonumy clita sit at, sed sit sanctus dolor eos."),te(),Z(57,"p"),Ee(58,"i",26),ce(59,"Quality health care"),te(),Z(60,"p"),Ee(61,"i",26),ce(62,"Only Qualified Doctors"),te(),Z(63,"p"),Ee(64,"i",26),ce(65,"Medical Research Professionals"),te(),Z(66,"a",27),ce(67,"Read More"),te()()()()(),Z(68,"div",17)(69,"div",18)(70,"div",28)(71,"p",24),ce(72,"Services"),te(),Z(73,"h1"),ce(74,"Health Care Solutions"),te()(),Z(75,"div",4)(76,"div",29)(77,"div",30)(78,"div",31),Ee(79,"i",32),te(),Z(80,"h4",33),ce(81,"Cardiology"),te(),Z(82,"p",25),ce(83,"Erat ipsum justo amet duo et elitr dolor, est duo duo eos lorem sed diam stet diam sed stet."),te(),Z(84,"a",34),Ee(85,"i",35),ce(86,"Read More"),te()()(),Z(87,"div",36)(88,"div",30)(89,"div",31),Ee(90,"i",37),te(),Z(91,"h4",33),ce(92,"Pulmonary"),te(),Z(93,"p",25),ce(94,"Erat ipsum justo amet duo et elitr dolor, est duo duo eos lorem sed diam stet diam sed stet."),te(),Z(95,"a",34),Ee(96,"i",35),ce(97,"Read More"),te()()(),Z(98,"div",38)(99,"div",30)(100,"div",31),Ee(101,"i",39),te(),Z(102,"h4",33),ce(103,"Neurology"),te(),Z(104,"p",25),ce(105,"Erat ipsum justo amet duo et elitr dolor, est duo duo eos lorem sed diam stet diam sed stet."),te(),Z(106,"a",34),Ee(107,"i",35),ce(108,"Read More"),te()()(),Z(109,"div",29)(110,"div",30)(111,"div",31),Ee(112,"i",40),te(),Z(113,"h4",33),ce(114,"Orthopedics"),te(),Z(115,"p",25),ce(116,"Erat ipsum justo amet duo et elitr dolor, est duo duo eos lorem sed diam stet diam sed stet."),te(),Z(117,"a",34),Ee(118,"i",35),ce(119,"Read More"),te()()(),Z(120,"div",36)(121,"div",30)(122,"div",31),Ee(123,"i",41),te(),Z(124,"h4",33),ce(125,"Dental Surgery"),te(),Z(126,"p",25),ce(127,"Erat ipsum justo amet duo et elitr dolor, est duo duo eos lorem sed diam stet diam sed stet."),te(),Z(128,"a",34),Ee(129,"i",35),ce(130,"Read More"),te()()(),Z(131,"div",38)(132,"div",30)(133,"div",31),Ee(134,"i",42),te(),Z(135,"h4",33),ce(136,"Laboratory"),te(),Z(137,"p",25),ce(138,"Erat ipsum justo amet duo et elitr dolor, est duo duo eos lorem sed diam stet diam sed stet."),te(),Z(139,"a",34),Ee(140,"i",35),ce(141,"Read More"),te()()()()()(),Z(142,"div",43)(143,"div",44)(144,"div",45)(145,"div",46)(146,"div",47)(147,"p",48),ce(148,"Features"),te(),Z(149,"h1",49),ce(150,"Why Choose Us"),te(),Z(151,"p",50),ce(152,"Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo erat amet"),te(),Z(153,"div",4)(154,"div",51)(155,"div",52)(156,"div",53),Ee(157,"i",54),te(),Z(158,"div",55)(159,"p",56),ce(160,"Experience"),te(),Z(161,"h5",57),ce(162,"Doctors"),te()()()(),Z(163,"div",51)(164,"div",52)(165,"div",53),Ee(166,"i",58),te(),Z(167,"div",55)(168,"p",56),ce(169,"Quality"),te(),Z(170,"h5",57),ce(171,"Services"),te()()()(),Z(172,"div",51)(173,"div",52)(174,"div",53),Ee(175,"i",59),te(),Z(176,"div",55)(177,"p",56),ce(178,"Positive"),te(),Z(179,"h5",57),ce(180,"Consultation"),te()()()(),Z(181,"div",51)(182,"div",52)(183,"div",53),Ee(184,"i",60),te(),Z(185,"div",55)(186,"p",56),ce(187,"24 Hours"),te(),Z(188,"h5",57),ce(189,"Support"),te()()()()()()(),Z(190,"div",61)(191,"div",62)(192,"video",63),Ee(193,"source",64),ce(194," Your browser does not support the video tag. "),te()()()()()())}}),n})(),fY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-doctor-nav"]],decls:72,vars:0,consts:[[1,"container-xxl","py-5"],[1,"container"],["data-wow-delay","0.1s",1,"text-center","mx-auto","mb-5","wow","fadeInUp",2,"max-width","600px"],[1,"d-inline-block","border","rounded-pill","py-1","px-4"],[1,"row","g-4"],["data-wow-delay","0.1s",1,"col-lg-3","col-md-6","wow","fadeInUp"],[1,"team-item","position-relative","rounded","overflow-hidden"],[1,"overflow-hidden"],["src","assets/img/team-1.jpg","alt","",1,"img-fluid"],[1,"team-text","bg-light","text-center","p-4"],[1,"text-primary"],[1,"team-social","text-center"],["href","",1,"btn","btn-square"],[1,"fab","fa-facebook-f"],[1,"fab","fa-twitter"],[1,"fab","fa-instagram"],["data-wow-delay","0.3s",1,"col-lg-3","col-md-6","wow","fadeInUp"],["src","assets/img/team-2.jpg","alt","",1,"img-fluid"],["data-wow-delay","0.5s",1,"col-lg-3","col-md-6","wow","fadeInUp"],["src","assets/img/team-3.jpg","alt","",1,"img-fluid"],["data-wow-delay","0.7s",1,"col-lg-3","col-md-6","wow","fadeInUp"],["src","assets/img/team-4.jpg","alt","",1,"img-fluid"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),ce(4,"Doctors"),te(),Z(5,"h1"),ce(6,"Our Experience Doctors"),te()(),Z(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),Ee(11,"img",8),te(),Z(12,"div",9)(13,"h5"),ce(14,"Doctor Name"),te(),Z(15,"p",10),ce(16,"Department"),te(),Z(17,"div",11)(18,"a",12),Ee(19,"i",13),te(),Z(20,"a",12),Ee(21,"i",14),te(),Z(22,"a",12),Ee(23,"i",15),te()()()()(),Z(24,"div",16)(25,"div",6)(26,"div",7),Ee(27,"img",17),te(),Z(28,"div",9)(29,"h5"),ce(30,"Doctor Name"),te(),Z(31,"p",10),ce(32,"Department"),te(),Z(33,"div",11)(34,"a",12),Ee(35,"i",13),te(),Z(36,"a",12),Ee(37,"i",14),te(),Z(38,"a",12),Ee(39,"i",15),te()()()()(),Z(40,"div",18)(41,"div",6)(42,"div",7),Ee(43,"img",19),te(),Z(44,"div",9)(45,"h5"),ce(46,"Doctor Name"),te(),Z(47,"p",10),ce(48,"Department"),te(),Z(49,"div",11)(50,"a",12),Ee(51,"i",13),te(),Z(52,"a",12),Ee(53,"i",14),te(),Z(54,"a",12),Ee(55,"i",15),te()()()()(),Z(56,"div",20)(57,"div",6)(58,"div",7),Ee(59,"img",21),te(),Z(60,"div",9)(61,"h5"),ce(62,"Doctor Name"),te(),Z(63,"p",10),ce(64,"Department"),te(),Z(65,"div",11)(66,"a",12),Ee(67,"i",13),te(),Z(68,"a",12),Ee(69,"i",14),te(),Z(70,"a",12),Ee(71,"i",15),te()()()()()()()())}}),n})(),pY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-appointment-nav"]],decls:72,vars:0,consts:[[1,"container-fluid","py-4","bg-light"],[1,"container","bg-white","rounded","shadow-lg","overflow-hidden"],[1,"row","g-0","align-items-center"],[1,"col-lg-7","p-4"],[1,"mb-3","text-primary","small-title"],[1,"booking__group--title","text-primary"],[1,"row","g-3"],[1,"col-12"],["type","text","placeholder","First and Last Name",1,"form-control","border-1","p-2","small-text"],[1,"col-12","col-sm-6"],["type","email","placeholder","Email",1,"form-control","border-1","p-2","small-text"],["type","tel","placeholder","Phone Number",1,"form-control","border-1","p-2","small-text"],["type","text","placeholder","Address",1,"form-control","border-1","p-2","small-text"],["type","date",1,"form-control","border-1","p-2","small-text"],[1,"col-12","col-sm-6","d-flex","align-items-center"],[1,"form-check","me-3"],["type","radio","name","gender","id","male","value","male",1,"form-check-input"],["for","male",1,"form-check-label","small-text"],[1,"form-check"],["type","radio","name","gender","id","female","value","female",1,"form-check-input"],["for","female",1,"form-check-label","small-text"],[1,"booking__group--title","mt-4","text-primary"],[1,"form-select","border-1","p-2","small-text"],["selected",""],["value","1"],["value","2"],["rows","3","placeholder","Additional Information",1,"form-control","border-1","p-2","small-text"],["type","datetime-local",1,"form-control","border-1","p-2","small-text"],[1,"mt-3","small","text-muted","small-text"],["href","#",1,"text-primary"],[1,"mb-3"],["data-sitekey","your-site-key",1,"g-recaptcha"],["type","submit",1,"btn","btn-primary","w-100","py-2","small-button"],[1,"col-lg-5"],[1,"owl-carousel","header-carousel"],[1,"owl-carousel-item","position-relative"],["src","assets/img/carousel-1.jpg","alt","Cardiology",1,"img-fluid"],["src","assets/img/carousel-2.jpg","alt","Neurology",1,"img-fluid"],["src","assets/img/carousel-3.jpg","alt","Pulmonary",1,"img-fluid"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),ce(5,"Book Appointment"),te(),Z(6,"h6",5),ce(7,"Patient Information"),te(),Z(8,"form")(9,"div",6)(10,"div",7),Ee(11,"input",8),te(),Z(12,"div",9),Ee(13,"input",10),te(),Z(14,"div",9),Ee(15,"input",11),te(),Z(16,"div",7),Ee(17,"input",12),te(),Z(18,"div",9),Ee(19,"input",13),te(),Z(20,"div",14)(21,"div",15),Ee(22,"input",16),Z(23,"label",17),ce(24,"Male"),te()(),Z(25,"div",18),Ee(26,"input",19),Z(27,"label",20),ce(28,"Female"),te()()()(),Z(29,"h6",21),ce(30,"Choose a Specialty"),te(),Z(31,"div",6)(32,"div",7)(33,"select",22)(34,"option",23),ce(35,"Hospital or Clinic"),te(),Z(36,"option",24),ce(37,"Hospital 1"),te(),Z(38,"option",25),ce(39,"Hospital 2"),te()()(),Z(40,"div",7)(41,"select",22)(42,"option",23),ce(43,"Specialty"),te(),Z(44,"option",24),ce(45,"Cardiology"),te(),Z(46,"option",25),ce(47,"Pediatrics"),te()()(),Z(48,"div",7),Ee(49,"textarea",26),te()(),Z(50,"h6",21),ce(51,"Preferred Date and Time"),te(),Z(52,"div",6)(53,"div",7),Ee(54,"input",27),te()(),Z(55,"p",28),ce(56," By clicking the Submit button, I confirm that I have read and agree to the "),Z(57,"a",29),ce(58,"Privacy Policy"),te(),ce(59,". "),te(),Z(60,"div",30),Ee(61,"div",31),te(),Z(62,"button",32),ce(63,"Submit"),te()()(),Z(64,"div",33)(65,"div",34)(66,"div",35),Ee(67,"img",36),te(),Z(68,"div",35),Ee(69,"img",37),te(),Z(70,"div",35),Ee(71,"img",38),te()()()()()())}}),n})(),mY=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-home"]],decls:4,vars:0,template:function(t,i){1&t&&Ee(0,"app-header-nav")(1,"app-main-nav")(2,"app-doctor-nav")(3,"app-appointment-nav")},dependencies:[hY,dY,fY,pY]}),n})(),cF=(()=>{class n{constructor(t){this.router=t}canActivate(t,i){return!!localStorage.getItem("access_token")||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(vt(xi))},n.\u0275prov=Nt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gY=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:cY},{path:"dashboard",component:uY,canActivate:[cF]},{path:"home",component:mY}];let vY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[iD.forRoot(gY),iD]}),n})(),yY=(()=>{class n{constructor(){this.title="hospital-management-frontend"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=hs({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&Ee(0,"router-outlet")},dependencies:[D0]}),n})(),_Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[Nf]}),n})(),xY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[Nf]}),n})(),bY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n}),n.\u0275inj=Li({imports:[Nf,rY]}),n})(),SY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ki({type:n,bootstrap:[yY]}),n.\u0275inj=Li({providers:[cF],imports:[jz,vY,p4,_Y,xY,bY]}),n})();(function sU(){TC=!1})(),Wz().bootstrapModule(SY).catch(n=>console.error(n))},487:function(module,exports,__webpack_require__){var u;typeof navigator<"u"&&(u=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(u){_useWebWorker=!!u},getWebWorker=function(){return _useWebWorker},setLocationHref=function(u){locationHref=u},getLocationHref=function(){return locationHref};function createTag(l){return document.createElement(l)}function extendPrototype(l,u){var d,g,m=l.length;for(d=0;d<m;d+=1)for(var _ in g=l[d].prototype)Object.prototype.hasOwnProperty.call(g,_)&&(u.prototype[_]=g[_])}function getDescriptor(l,u){return Object.getOwnPropertyDescriptor(l,u)}function createProxyFunction(l){function u(){}return u.prototype=l,u}var audioControllerFactory=function(){function l(u){this.audios=[],this.audioFactory=u,this._volume=1,this._isMuted=!1}return l.prototype={addAudio:function(d){this.audios.push(d)},pause:function(){var d,m=this.audios.length;for(d=0;d<m;d+=1)this.audios[d].pause()},resume:function(){var d,m=this.audios.length;for(d=0;d<m;d+=1)this.audios[d].resume()},setRate:function(d){var m,g=this.audios.length;for(m=0;m<g;m+=1)this.audios[m].setRate(d)},createAudio:function(d){return this.audioFactory?this.audioFactory(d):window.Howl?new window.Howl({src:[d]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(d){this.audioFactory=d},setVolume:function(d){this._volume=d,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var d,m=this.audios.length;for(d=0;d<m;d+=1)this.audios[d].volume(this._volume*(this._isMuted?0:1))}},function(){return new l}}(),createTypedArray=function(){function l(d,m){var E,g=0,_=[];switch(d){case"int16":case"uint8c":E=1;break;default:E=1.1}for(g=0;g<m;g+=1)_.push(E);return _}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function u(d,m){return"float32"===d?new Float32Array(m):"int16"===d?new Int16Array(m):"uint8c"===d?new Uint8ClampedArray(m):l(d,m)}:l}();function createSizedArray(l){return Array.apply(null,{length:l})}function _typeof$6(l){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var u,l=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],d=l.length;for(u=0;u<d;u+=1)BMMath[l[u]]=Math[l[u]]}(),BMMath.random=Math.random,BMMath.abs=function(l){if("object"===_typeof$6(l)&&l.length){var m,d=createSizedArray(l.length),g=l.length;for(m=0;m<g;m+=1)d[m]=Math.abs(l[m]);return d}return Math.abs(l)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(l){_shouldRoundValues=!!l}function bmRnd(l){return _shouldRoundValues?Math.round(l):l}function styleDiv(l){l.style.position="absolute",l.style.top=0,l.style.left=0,l.style.display="block",l.style.transformOrigin="0 0",l.style.webkitTransformOrigin="0 0",l.style.backfaceVisibility="visible",l.style.webkitBackfaceVisibility="visible",l.style.transformStyle="preserve-3d",l.style.webkitTransformStyle="preserve-3d",l.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(l,u,d,m){this.type=l,this.currentTime=u,this.totalTime=d,this.direction=m<0?-1:1}function BMCompleteEvent(l,u){this.type=l,this.direction=u<0?-1:1}function BMCompleteLoopEvent(l,u,d,m){this.type=l,this.currentLoop=d,this.totalLoops=u,this.direction=m<0?-1:1}function BMSegmentStartEvent(l,u,d){this.type=l,this.firstFrame=u,this.totalFrames=d}function BMDestroyEvent(l,u){this.type=l,this.target=u}function BMRenderFrameErrorEvent(l,u){this.type="renderFrameError",this.nativeError=l,this.currentTime=u}function BMConfigErrorEvent(l){this.type="configError",this.nativeError=l}function BMAnimationConfigErrorEvent(l,u){this.type=l,this.nativeError=u}var createElementID=(l=0,function(){return idPrefix$1+"__lottie_element_"+(l+=1)}),l;function HSVtoRGB(l,u,d){var m,g,_,E,C,w,P,k;switch(w=d*(1-u),P=d*(1-(C=6*l-(E=Math.floor(6*l)))*u),k=d*(1-(1-C)*u),E%6){case 0:m=d,g=k,_=w;break;case 1:m=P,g=d,_=w;break;case 2:m=w,g=d,_=k;break;case 3:m=w,g=P,_=d;break;case 4:m=k,g=w,_=d;break;case 5:m=d,g=w,_=P}return[m,g,_]}function RGBtoHSV(l,u,d){var E,m=Math.max(l,u,d),g=Math.min(l,u,d),_=m-g,C=0===m?0:_/m,w=m/255;switch(m){case g:E=0;break;case l:E=u-d+_*(u<d?6:0),E/=6*_;break;case u:E=d-l+2*_,E/=6*_;break;case d:E=l-u+4*_,E/=6*_}return[E,C,w]}function addSaturationToRGB(l,u){var d=RGBtoHSV(255*l[0],255*l[1],255*l[2]);return d[1]+=u,d[1]>1?d[1]=1:d[1]<=0&&(d[1]=0),HSVtoRGB(d[0],d[1],d[2])}function addBrightnessToRGB(l,u){var d=RGBtoHSV(255*l[0],255*l[1],255*l[2]);return d[2]+=u,d[2]>1?d[2]=1:d[2]<0&&(d[2]=0),HSVtoRGB(d[0],d[1],d[2])}function addHueToRGB(l,u){var d=RGBtoHSV(255*l[0],255*l[1],255*l[2]);return d[0]+=u/360,d[0]>1?d[0]-=1:d[0]<0&&(d[0]+=1),HSVtoRGB(d[0],d[1],d[2])}var rgbToHex=function(){var u,d,l=[];for(u=0;u<256;u+=1)d=u.toString(16),l[u]=1===d.length?"0"+d:d;return function(m,g,_){return m<0&&(m=0),g<0&&(g=0),_<0&&(_=0),"#"+l[m]+l[g]+l[_]}}(),setSubframeEnabled=function(u){subframeEnabled=!!u},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(u){expressionsPlugin=u},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(u){expressionsInterfaces=u},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(u){defaultCurveSegments=u},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(u){idPrefix$1=u},getIdPrefix=function(){return idPrefix$1};function createNS(l){return document.createElementNS(svgNS,l)}function _typeof$5(l){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}var dataManager=function(){var d,m,l=1,u=[],g={onmessage:function(){},postMessage:function(U){d({data:U})}},_={postMessage:function(U){g.onmessage({data:U})}};function C(){m||((m=function E(R){if(window.Worker&&window.Blob&&getWebWorker()){var U=new Blob(["var _workerSelf = self; self.onmessage = ",R.toString()],{type:"text/javascript"}),V=URL.createObjectURL(U);return new Worker(V)}return d=R,g}(function(U){if(_.dataManager||(_.dataManager=function V(){function ee(Pe,J){var ae,B,me,he,it,Tt,H=Pe.length;for(B=0;B<H;B+=1)if("ks"in(ae=Pe[B])&&!ae.completed){if(ae.completed=!0,ae.hasMask){var bt=ae.masksProperties;for(he=bt.length,me=0;me<he;me+=1)if(bt[me].pt.k.i)X(bt[me].pt.k);else for(Tt=bt[me].pt.k.length,it=0;it<Tt;it+=1)bt[me].pt.k[it].s&&X(bt[me].pt.k[it].s[0]),bt[me].pt.k[it].e&&X(bt[me].pt.k[it].e[0])}0===ae.ty?(ae.layers=I(ae.refId,J),ee(ae.layers,J)):4===ae.ty&&O(ae.shapes)}}function I(Pe,J){var ae=function L(Pe,J){for(var ae=0,B=J.length;ae<B;){if(J[ae].id===Pe)return J[ae];ae+=1}return null}(Pe,J);return ae?ae.layers.__used?JSON.parse(JSON.stringify(ae.layers)):(ae.layers.__used=!0,ae.layers):null}function O(Pe){var J,B,H;for(J=Pe.length-1;J>=0;J-=1)if("sh"===Pe[J].ty)if(Pe[J].ks.k.i)X(Pe[J].ks.k);else for(H=Pe[J].ks.k.length,B=0;B<H;B+=1)Pe[J].ks.k[B].s&&X(Pe[J].ks.k[B].s[0]),Pe[J].ks.k[B].e&&X(Pe[J].ks.k[B].e[0]);else"gr"===Pe[J].ty&&O(Pe[J].it)}function X(Pe){var J,ae=Pe.i.length;for(J=0;J<ae;J+=1)Pe.i[J][0]+=Pe.v[J][0],Pe.i[J][1]+=Pe.v[J][1],Pe.o[J][0]+=Pe.v[J][0],Pe.o[J][1]+=Pe.v[J][1]}function ie(Pe,J){var ae=J?J.split("."):[100,100,100];return Pe[0]>ae[0]||!(ae[0]>Pe[0])&&(Pe[1]>ae[1]||!(ae[1]>Pe[1])&&(Pe[2]>ae[2]||!(ae[2]>Pe[2])&&null))}var Pe,le=function(){var Pe=[4,4,14];function J(B){B.t.d={k:[{s:B.t.d,t:0}]}}function ae(B){var H,me=B.length;for(H=0;H<me;H+=1)5===B[H].ty&&J(B[H])}return function(B){if(ie(Pe,B.v)&&(ae(B.layers),B.assets)){var H,me=B.assets.length;for(H=0;H<me;H+=1)B.assets[H].layers&&ae(B.assets[H].layers)}}}(),ue=(Pe=[4,7,99],function(J){if(J.chars&&!ie(Pe,J.v)){var ae,B=J.chars.length;for(ae=0;ae<B;ae+=1){var H=J.chars[ae];H.data&&H.data.shapes&&(O(H.data.shapes),H.data.ip=0,H.data.op=99999,H.data.st=0,H.data.sr=1,H.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},J.chars[ae].t||(H.data.shapes.push({ty:"no"}),H.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),Ce=function(){var Pe=[5,7,15];function J(B){var H=B.t.p;"number"==typeof H.a&&(H.a={a:0,k:H.a}),"number"==typeof H.p&&(H.p={a:0,k:H.p}),"number"==typeof H.r&&(H.r={a:0,k:H.r})}function ae(B){var H,me=B.length;for(H=0;H<me;H+=1)5===B[H].ty&&J(B[H])}return function(B){if(ie(Pe,B.v)&&(ae(B.layers),B.assets)){var H,me=B.assets.length;for(H=0;H<me;H+=1)B.assets[H].layers&&ae(B.assets[H].layers)}}}(),tt=function(){var Pe=[4,1,9];function J(B){var H,he,it,me=B.length;for(H=0;H<me;H+=1)if("gr"===B[H].ty)J(B[H].it);else if("fl"===B[H].ty||"st"===B[H].ty)if(B[H].c.k&&B[H].c.k[0].i)for(it=B[H].c.k.length,he=0;he<it;he+=1)B[H].c.k[he].s&&(B[H].c.k[he].s[0]/=255,B[H].c.k[he].s[1]/=255,B[H].c.k[he].s[2]/=255,B[H].c.k[he].s[3]/=255),B[H].c.k[he].e&&(B[H].c.k[he].e[0]/=255,B[H].c.k[he].e[1]/=255,B[H].c.k[he].e[2]/=255,B[H].c.k[he].e[3]/=255);else B[H].c.k[0]/=255,B[H].c.k[1]/=255,B[H].c.k[2]/=255,B[H].c.k[3]/=255}function ae(B){var H,me=B.length;for(H=0;H<me;H+=1)4===B[H].ty&&J(B[H].shapes)}return function(B){if(ie(Pe,B.v)&&(ae(B.layers),B.assets)){var H,me=B.assets.length;for(H=0;H<me;H+=1)B.assets[H].layers&&ae(B.assets[H].layers)}}}(),$e=function(){var Pe=[4,4,18];function J(B){var H,he,it;for(H=B.length-1;H>=0;H-=1)if("sh"===B[H].ty)if(B[H].ks.k.i)B[H].ks.k.c=B[H].closed;else for(it=B[H].ks.k.length,he=0;he<it;he+=1)B[H].ks.k[he].s&&(B[H].ks.k[he].s[0].c=B[H].closed),B[H].ks.k[he].e&&(B[H].ks.k[he].e[0].c=B[H].closed);else"gr"===B[H].ty&&J(B[H].it)}function ae(B){var H,me,it,Tt,bt,mn,he=B.length;for(me=0;me<he;me+=1){if((H=B[me]).hasMask){var gn=H.masksProperties;for(Tt=gn.length,it=0;it<Tt;it+=1)if(gn[it].pt.k.i)gn[it].pt.k.c=gn[it].cl;else for(mn=gn[it].pt.k.length,bt=0;bt<mn;bt+=1)gn[it].pt.k[bt].s&&(gn[it].pt.k[bt].s[0].c=gn[it].cl),gn[it].pt.k[bt].e&&(gn[it].pt.k[bt].e[0].c=gn[it].cl)}4===H.ty&&J(H.shapes)}}return function(B){if(ie(Pe,B.v)&&(ae(B.layers),B.assets)){var H,me=B.assets.length;for(H=0;H<me;H+=1)B.assets[H].layers&&ae(B.assets[H].layers)}}}(),ct={completeData:function Le(Pe){Pe.__complete||(tt(Pe),le(Pe),ue(Pe),Ce(Pe),$e(Pe),ee(Pe.layers,Pe.assets),function F(Pe,J){if(Pe){var ae=0,B=Pe.length;for(ae=0;ae<B;ae+=1)1===Pe[ae].t&&(Pe[ae].data.layers=I(Pe[ae].data.refId,J),ee(Pe[ae].data.layers,J))}}(Pe.chars,Pe.assets),Pe.__complete=!0)}};return ct.checkColors=tt,ct.checkChars=ue,ct.checkPathProperties=Ce,ct.checkShapes=$e,ct.completeLayers=ee,ct}()),_.assetLoader||(_.assetLoader=function(){function ee(L){var I=L.getResponseHeader("content-type");return I&&"json"===L.responseType&&-1!==I.indexOf("json")||L.response&&"object"===_typeof$5(L.response)?L.response:L.response&&"string"==typeof L.response?JSON.parse(L.response):L.responseText?JSON.parse(L.responseText):null}return{load:function F(L,I,O,X){var ie,le=new XMLHttpRequest;try{le.responseType="json"}catch{}le.onreadystatechange=function(){if(4===le.readyState)if(200===le.status)ie=ee(le),O(ie);else try{ie=ee(le),O(ie)}catch(ue){X&&X(ue)}};try{le.open(["G","E","T"].join(""),L,!0)}catch{le.open(["G","E","T"].join(""),I+"/"+L,!0)}le.send()}}}()),"loadAnimation"===U.data.type)_.assetLoader.load(U.data.path,U.data.fullPath,function(ee){_.dataManager.completeData(ee),_.postMessage({id:U.data.id,payload:ee,status:"success"})},function(){_.postMessage({id:U.data.id,status:"error"})});else if("complete"===U.data.type){var N=U.data.animation;_.dataManager.completeData(N),_.postMessage({id:U.data.id,payload:N,status:"success"})}else"loadData"===U.data.type&&_.assetLoader.load(U.data.path,U.data.fullPath,function(ee){_.postMessage({id:U.data.id,payload:ee,status:"success"})},function(){_.postMessage({id:U.data.id,status:"error"})})})).onmessage=function(R){var U=R.data,V=U.id,N=u[V];u[V]=null,"success"===U.status?N.onComplete(U.payload):N.onError&&N.onError()})}function w(R,U){var V="processId_"+(l+=1);return u[V]={onComplete:R,onError:U},V}return{loadAnimation:function P(R,U,V){C();var N=w(U,V);m.postMessage({type:"loadAnimation",path:R,fullPath:window.location.origin+window.location.pathname,id:N})},loadData:function k(R,U,V){C();var N=w(U,V);m.postMessage({type:"loadData",path:R,fullPath:window.location.origin+window.location.pathname,id:N})},completeAnimation:function j(R,U,V){C();var N=w(U,V);m.postMessage({type:"complete",animation:R,id:N})}}}(),ImagePreloader=function(){var l=function(){var F=createTag("canvas");F.width=1,F.height=1;var L=F.getContext("2d");return L.fillStyle="rgba(0,0,0,0)",L.fillRect(0,0,1,1),F}();function u(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function d(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function m(F,L,I){var O="";if(F.e)O=F.p;else if(L){var X=F.p;-1!==X.indexOf("images/")&&(X=X.split("/")[1]),O=L+X}else O=I,O+=F.u?F.u:"",O+=F.p;return O}function g(F){var L=0,I=setInterval(function(){(F.getBBox().width||L>500)&&(this._imageLoaded(),clearInterval(I)),L+=1}.bind(this),50)}function C(F){var L={assetData:F},I=m(F,this.assetsPath,this.path);return dataManager.loadData(I,function(O){L.img=O,this._footageLoaded()}.bind(this),function(){L.img={},this._footageLoaded()}.bind(this)),L}function ee(){this._imageLoaded=u.bind(this),this._footageLoaded=d.bind(this),this.testImageLoaded=g.bind(this),this.createFootageData=C.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return ee.prototype={loadAssets:function w(F,L){this.imagesLoadedCb=L;var I,O=F.length;for(I=0;I<O;I+=1)F[I].layers||(F[I].t&&"seq"!==F[I].t?3===F[I].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(F[I]))):(this.totalImages+=1,this.images.push(this._createImageData(F[I]))))},setAssetsPath:function k(F){this.assetsPath=F||""},setPath:function P(F){this.path=F||""},loadedImages:function U(){return this.totalImages===this.loadedAssets},loadedFootages:function V(){return this.totalFootages===this.loadedFootagesCount},destroy:function R(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function j(F){for(var L=0,I=this.images.length;L<I;){if(this.images[L].assetData===F)return this.images[L].img;L+=1}return null},createImgData:function E(F){var L=m(F,this.assetsPath,this.path),I=createTag("img");I.crossOrigin="anonymous",I.addEventListener("load",this._imageLoaded,!1),I.addEventListener("error",function(){O.img=l,this._imageLoaded()}.bind(this),!1),I.src=L;var O={img:I,assetData:F};return O},createImageData:function _(F){var L=m(F,this.assetsPath,this.path),I=createNS("image");isSafari?this.testImageLoaded(I):I.addEventListener("load",this._imageLoaded,!1),I.addEventListener("error",function(){O.img=l,this._imageLoaded()}.bind(this),!1),I.setAttributeNS("http://www.w3.org/1999/xlink","href",L),this._elementHelper.append?this._elementHelper.append(I):this._elementHelper.appendChild(I);var O={img:I,assetData:F};return O},imageLoaded:u,footageLoaded:d,setCacheType:function N(F,L){"svg"===F?(this._elementHelper=L,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},ee}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(u,d){if(this._cbs[u])for(var m=this._cbs[u],g=0;g<m.length;g+=1)m[g](d)},addEventListener:function(u,d){return this._cbs[u]||(this._cbs[u]=[]),this._cbs[u].push(d),function(){this.removeEventListener(u,d)}.bind(this)},removeEventListener:function(u,d){if(d){if(this._cbs[u]){for(var m=0,g=this._cbs[u].length;m<g;)this._cbs[u][m]===d&&(this._cbs[u].splice(m,1),m-=1,g-=1),m+=1;this._cbs[u].length||(this._cbs[u]=null)}}else this._cbs[u]=null}};var markerParser=function(){function l(u){for(var g,d=u.split("\r\n"),m={},_=0,E=0;E<d.length;E+=1)2===(g=d[E].split(":")).length&&(m[g[0]]=g[1].trim(),_+=1);if(0===_)throw new Error;return m}return function(u){for(var d=[],m=0;m<u.length;m+=1){var g=u[m],_={time:g.tm,duration:g.dr};try{_.payload=JSON.parse(u[m].cm)}catch{try{_.payload=l(u[m].cm)}catch{_.payload={name:u[m].cm}}}d.push(_)}return d}}(),ProjectInterface=function(){function l(u){this.compositions.push(u)}return function(){function u(d){for(var m=0,g=this.compositions.length;m<g;){if(this.compositions[m].data&&this.compositions[m].data.nm===d)return this.compositions[m].prepareFrame&&this.compositions[m].data.xt&&this.compositions[m].prepareFrame(this.currentFrame),this.compositions[m].compInterface;m+=1}return null}return u.compositions=[],u.currentFrame=0,u.registerComposition=l,u}}(),renderers={},registerRenderer=function(u,d){renderers[u]=d};function getRenderer(l){return renderers[l]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var l in renderers)if(renderers[l])return l;return""}function _typeof$4(l){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(l){(l.wrapper||l.container)&&(this.wrapper=l.wrapper||l.container);var u="svg";l.animType?u=l.animType:l.renderer&&(u=l.renderer);var d=getRenderer(u);this.renderer=new d(this,l.rendererSettings),this.imagePreloader.setCacheType(u,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=u,this.loop=""===l.loop||null==l.loop||!0===l.loop||!1!==l.loop&&parseInt(l.loop,10),this.autoplay=!("autoplay"in l)||l.autoplay,this.name=l.name?l.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(l,"autoloadSegments")||l.autoloadSegments,this.assetsPath=l.assetsPath,this.initialSegment=l.initialSegment,l.audioFactory&&this.audioController.setAudioFactory(l.audioFactory),l.animationData?this.setupAnimation(l.animationData):l.path&&(this.path=-1!==l.path.lastIndexOf("\\")?l.path.substr(0,l.path.lastIndexOf("\\")+1):l.path.substr(0,l.path.lastIndexOf("/")+1),this.fileName=l.path.substr(l.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(l.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(l){dataManager.completeAnimation(l,this.configAnimation)},AnimationItem.prototype.setData=function(l,u){u&&"object"!==_typeof$4(u)&&(u=JSON.parse(u));var d={wrapper:l,animationData:u},m=l.attributes;d.path=m.getNamedItem("data-animation-path")?m.getNamedItem("data-animation-path").value:m.getNamedItem("data-bm-path")?m.getNamedItem("data-bm-path").value:m.getNamedItem("bm-path")?m.getNamedItem("bm-path").value:"",d.animType=m.getNamedItem("data-anim-type")?m.getNamedItem("data-anim-type").value:m.getNamedItem("data-bm-type")?m.getNamedItem("data-bm-type").value:m.getNamedItem("bm-type")?m.getNamedItem("bm-type").value:m.getNamedItem("data-bm-renderer")?m.getNamedItem("data-bm-renderer").value:m.getNamedItem("bm-renderer")?m.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var g=m.getNamedItem("data-anim-loop")?m.getNamedItem("data-anim-loop").value:m.getNamedItem("data-bm-loop")?m.getNamedItem("data-bm-loop").value:m.getNamedItem("bm-loop")?m.getNamedItem("bm-loop").value:"";"false"===g?d.loop=!1:"true"===g?d.loop=!0:""!==g&&(d.loop=parseInt(g,10));var _=m.getNamedItem("data-anim-autoplay")?m.getNamedItem("data-anim-autoplay").value:m.getNamedItem("data-bm-autoplay")?m.getNamedItem("data-bm-autoplay").value:!m.getNamedItem("bm-autoplay")||m.getNamedItem("bm-autoplay").value;d.autoplay="false"!==_,d.name=m.getNamedItem("data-name")?m.getNamedItem("data-name").value:m.getNamedItem("data-bm-name")?m.getNamedItem("data-bm-name").value:m.getNamedItem("bm-name")?m.getNamedItem("bm-name").value:"","false"===(m.getNamedItem("data-anim-prerender")?m.getNamedItem("data-anim-prerender").value:m.getNamedItem("data-bm-prerender")?m.getNamedItem("data-bm-prerender").value:m.getNamedItem("bm-prerender")?m.getNamedItem("bm-prerender").value:"")&&(d.prerender=!1),d.path?this.setParams(d):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(l){l.op>this.animationData.op&&(this.animationData.op=l.op,this.totalFrames=Math.floor(l.op-this.animationData.ip));var d,_,u=this.animationData.layers,m=u.length,g=l.layers,E=g.length;for(_=0;_<E;_+=1)for(d=0;d<m;){if(u[d].id===g[_].id){u[d]=g[_];break}d+=1}if((l.chars||l.fonts)&&(this.renderer.globalData.fontManager.addChars(l.chars),this.renderer.globalData.fontManager.addFonts(l.fonts,this.renderer.globalData.defs)),l.assets)for(m=l.assets.length,d=0;d<m;d+=1)this.animationData.assets.push(l.assets[d]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(l){this.animationData=l;var u=getExpressionsPlugin();u&&u.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var l=this.animationData.segments;if(!l||0===l.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var u=l.shift();this.timeCompleted=u.time*this.frameRate;var d=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(d,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(l){if(this.renderer)try{this.animationData=l,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(l),l.assets||(l.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(l.assets),this.markers=markerParser(l.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(u){this.triggerConfigError(u)}},AnimationItem.prototype.waitForFontsLoaded=function(){!this.renderer||(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var l=getExpressionsPlugin();l&&l.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(l,u){this.renderer.updateContainerSize("number"==typeof l?l:void 0,"number"==typeof u?u:void 0)},AnimationItem.prototype.setSubframe=function(l){this.isSubframeEnabled=!!l},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(l){this.triggerRenderFrameError(l)}},AnimationItem.prototype.play=function(l){l&&this.name!==l||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(l){l&&this.name!==l||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(l){l&&this.name!==l||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(l){l&&this.name!==l||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(l){for(var u,d=0;d<this.markers.length;d+=1)if((u=this.markers[d]).payload&&u.payload.name===l)return u;return null},AnimationItem.prototype.goToAndStop=function(l,u,d){if(!d||this.name===d){var m=Number(l);if(isNaN(m)){var g=this.getMarkerData(l);g&&this.goToAndStop(g.time,!0)}else this.setCurrentRawFrameValue(u?l:l*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(l,u,d){if(!d||this.name===d){var m=Number(l);if(isNaN(m)){var g=this.getMarkerData(l);g&&(g.duration?this.playSegments([g.time,g.time+g.duration],!0):this.goToAndStop(g.time,!0))}else this.goToAndStop(m,u,d);this.play()}},AnimationItem.prototype.advanceTime=function(l){if(!0!==this.isPaused&&!1!==this.isLoaded){var u=this.currentRawFrame+l*this.frameModifier,d=!1;u>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?u>=this.totalFrames?(this.playCount+=1,this.checkSegments(u%this.totalFrames)||(this.setCurrentRawFrameValue(u%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(u):this.checkSegments(u>this.totalFrames?u%this.totalFrames:0)||(d=!0,u=this.totalFrames-1):u<0?this.checkSegments(u%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(d=!0,u=0):(this.setCurrentRawFrameValue(this.totalFrames+u%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(u),d&&(this.setCurrentRawFrameValue(u),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(l,u){this.playCount=0,l[1]<l[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=l[0]-l[1],this.timeCompleted=this.totalFrames,this.firstFrame=l[1],this.setCurrentRawFrameValue(this.totalFrames-.001-u)):l[1]>l[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=l[1]-l[0],this.timeCompleted=this.totalFrames,this.firstFrame=l[0],this.setCurrentRawFrameValue(.001+u)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(l,u){var d=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<l?d=l:this.currentRawFrame+this.firstFrame>u&&(d=u-l)),this.firstFrame=l,this.totalFrames=u-l,this.timeCompleted=this.totalFrames,-1!==d&&this.goToAndStop(d,!0)},AnimationItem.prototype.playSegments=function(l,u){if(u&&(this.segments.length=0),"object"===_typeof$4(l[0])){var d,m=l.length;for(d=0;d<m;d+=1)this.segments.push(l[d])}else this.segments.push(l);this.segments.length&&u&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(l){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),l&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(l){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),l),!0)},AnimationItem.prototype.destroy=function(l){l&&this.name!==l||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(l){this.currentRawFrame=l,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(l){this.playSpeed=l,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(l){this.playDirection=l<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(l){this.loop=l},AnimationItem.prototype.setVolume=function(l,u){u&&this.name!==u||this.audioController.setVolume(l)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(l){l&&this.name!==l||this.audioController.mute()},AnimationItem.prototype.unmute=function(l){l&&this.name!==l||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(l){var u="";if(l.e)u=l.p;else if(this.assetsPath){var d=l.p;-1!==d.indexOf("images/")&&(d=d.split("/")[1]),u=this.assetsPath+d}else u=this.path,u+=l.u?l.u:"",u+=l.p;return u},AnimationItem.prototype.getAssetData=function(l){for(var u=0,d=this.assets.length;u<d;){if(l===this.assets[u].id)return this.assets[u];u+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(l){return l?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(l,u,d){try{this.renderer.getElementByPath(l).updateDocumentData(u,d)}catch{}},AnimationItem.prototype.trigger=function(l){if(this._cbs&&this._cbs[l])switch(l){case"enterFrame":this.triggerEvent(l,new BMEnterFrameEvent(l,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(l,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(l,new BMCompleteLoopEvent(l,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(l,new BMCompleteEvent(l,this.frameMult));break;case"segmentStart":this.triggerEvent(l,new BMSegmentStartEvent(l,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(l,new BMDestroyEvent(l,this));break;default:this.triggerEvent(l)}"enterFrame"===l&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(l,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===l&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(l,this.loop,this.playCount,this.frameMult)),"complete"===l&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(l,this.frameMult)),"segmentStart"===l&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(l,this.firstFrame,this.totalFrames)),"destroy"===l&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(l,this))},AnimationItem.prototype.triggerRenderFrameError=function(l){var u=new BMRenderFrameErrorEvent(l,this.currentFrame);this.triggerEvent("error",u),this.onError&&this.onError.call(this,u)},AnimationItem.prototype.triggerConfigError=function(l){var u=new BMConfigErrorEvent(l,this.currentFrame);this.triggerEvent("error",u),this.onError&&this.onError.call(this,u)};var animationManager=function(){var l={},u=[],d=0,m=0,g=0,_=!0,E=!1;function C(J){for(var ae=0,B=J.target;ae<m;)u[ae].animation===B&&(u.splice(ae,1),ae-=1,m-=1,B.isPaused||j()),ae+=1}function w(J,ae){if(!J)return null;for(var B=0;B<m;){if(u[B].elem===J&&null!==u[B].elem)return u[B].animation;B+=1}var H=new AnimationItem;return R(H,J),H.setData(J,ae),H}function k(){g+=1,tt()}function j(){g-=1}function R(J,ae){J.addEventListener("destroy",C),J.addEventListener("_active",k),J.addEventListener("_idle",j),u.push({elem:ae,animation:J}),m+=1}function F(J){var B,ae=J-d;for(B=0;B<m;B+=1)u[B].animation.advanceTime(ae);d=J,g&&!E?window.requestAnimationFrame(F):_=!0}function L(J){d=J,window.requestAnimationFrame(F)}function tt(){!E&&g&&_&&(window.requestAnimationFrame(L),_=!1)}return l.registerAnimation=w,l.loadAnimation=function U(J){var ae=new AnimationItem;return R(ae,null),ae.setParams(J),ae},l.setSpeed=function V(J,ae){var B;for(B=0;B<m;B+=1)u[B].animation.setSpeed(J,ae)},l.setDirection=function N(J,ae){var B;for(B=0;B<m;B+=1)u[B].animation.setDirection(J,ae)},l.play=function ee(J){var ae;for(ae=0;ae<m;ae+=1)u[ae].animation.play(J)},l.pause=function I(J){var ae;for(ae=0;ae<m;ae+=1)u[ae].animation.pause(J)},l.stop=function X(J){var ae;for(ae=0;ae<m;ae+=1)u[ae].animation.stop(J)},l.togglePause=function ie(J){var ae;for(ae=0;ae<m;ae+=1)u[ae].animation.togglePause(J)},l.searchAnimations=function ue(J,ae,B){var me,H=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),he=H.length;for(me=0;me<he;me+=1)B&&H[me].setAttribute("data-bm-type",B),w(H[me],J);if(ae&&0===he){B||(B="svg");var it=document.getElementsByTagName("body")[0];it.innerText="";var Tt=createTag("div");Tt.style.width="100%",Tt.style.height="100%",Tt.setAttribute("data-bm-type",B),it.appendChild(Tt),w(Tt,J)}},l.resize=function Ce(){var J;for(J=0;J<m;J+=1)u[J].animation.resize()},l.goToAndStop=function O(J,ae,B){var H;for(H=0;H<m;H+=1)u[H].animation.goToAndStop(J,ae,B)},l.destroy=function le(J){var ae;for(ae=m-1;ae>=0;ae-=1)u[ae].animation.destroy(J)},l.freeze=function $e(){E=!0},l.unfreeze=function Le(){E=!1,tt()},l.setVolume=function nt(J,ae){var B;for(B=0;B<m;B+=1)u[B].animation.setVolume(J,ae)},l.mute=function ct(J){var ae;for(ae=0;ae<m;ae+=1)u[ae].animation.mute(J)},l.unmute=function Pe(J){var ae;for(ae=0;ae<m;ae+=1)u[ae].animation.unmute(J)},l.getRegisteredAnimations=function P(){var J,ae=u.length,B=[];for(J=0;J<ae;J+=1)B.push(u[J].animation);return B},l}(),BezierFactory=function(){var l={getBezierEasing:function d(L,I,O,X,ie){var le=ie||("bez_"+L+"_"+I+"_"+O+"_"+X).replace(/\./g,"p");if(u[le])return u[le];var ue=new F([L,I,O,X]);return u[le]=ue,ue}},u={},w=.1,P="function"==typeof Float32Array;function k(L,I){return 1-3*I+3*L}function j(L,I){return 3*I-6*L}function R(L){return 3*L}function U(L,I,O){return((k(I,O)*L+j(I,O))*L+R(I))*L}function V(L,I,O){return 3*k(I,O)*L*L+2*j(I,O)*L+R(I)}function F(L){this._p=L,this._mSampleValues=P?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return F.prototype={get:function(I){var O=this._p[0],X=this._p[1],ie=this._p[2],le=this._p[3];return this._precomputed||this._precompute(),O===X&&ie===le?I:0===I?0:1===I?1:U(this._getTForX(I),X,le)},_precompute:function(){var I=this._p[0],O=this._p[1],X=this._p[2],ie=this._p[3];this._precomputed=!0,(I!==O||X!==ie)&&this._calcSampleValues()},_calcSampleValues:function(){for(var I=this._p[0],O=this._p[2],X=0;X<11;++X)this._mSampleValues[X]=U(X*w,I,O)},_getTForX:function(I){for(var O=this._p[0],X=this._p[2],ie=this._mSampleValues,le=0,ue=1;10!==ue&&ie[ue]<=I;++ue)le+=w;var $e=le+(I-ie[--ue])/(ie[ue+1]-ie[ue])*w,Le=V($e,O,X);return Le>=.001?function ee(L,I,O,X){for(var ie=0;ie<4;++ie){var le=V(I,O,X);if(0===le)return I;I-=(U(I,O,X)-L)/le}return I}(I,$e,O,X):0===Le?$e:function N(L,I,O,X,ie){var le,ue,Ce=0;do{(le=U(ue=I+(O-I)/2,X,ie)-L)>0?O=ue:I=ue}while(Math.abs(le)>1e-7&&++Ce<10);return ue}(I,le,le+w,O,X)}},l}(),pooling={double:function l(u){return u.concat(createSizedArray(u.length))}},poolFactory=function(l,u,d){var m=0,g=l,_=createSizedArray(g);return{newElement:function C(){return m?_[m-=1]:u()},release:function w(P){m===g&&(_=pooling.double(_),g*=2),d&&d(P),_[m]=P,m+=1}}},bezierLengthPool=poolFactory(8,function l(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function l(){return{lengths:[],totalLength:0}},function u(d){var m,g=d.lengths.length;for(m=0;m<g;m+=1)bezierLengthPool.release(d.lengths[m]);d.lengths.length=0});function bezFunction(){var l=Math;function u(R,U,V,N,ee,F){var L=R*N+U*ee+V*F-ee*N-F*R-V*U;return L>-.001&&L<.001}var m=function(R,U,V,N){var F,L,I,O,X,le,ee=getDefaultCurveSegments(),ie=0,ue=[],Ce=[],tt=bezierLengthPool.newElement();for(I=V.length,F=0;F<ee;F+=1){for(X=F/(ee-1),le=0,L=0;L<I;L+=1)O=bmPow(1-X,3)*R[L]+3*bmPow(1-X,2)*X*V[L]+3*(1-X)*bmPow(X,2)*N[L]+bmPow(X,3)*U[L],ue[L]=O,null!==Ce[L]&&(le+=bmPow(ue[L]-Ce[L],2)),Ce[L]=ue[L];le&&(ie+=le=bmSqrt(le)),tt.percents[F]=X,tt.lengths[F]=ie}return tt.addedLength=ie,tt};function _(R){this.segmentLength=0,this.points=new Array(R)}function E(R,U){this.partialLength=R,this.point=U}var R,C=(R={},function(U,V,N,ee){var F=(U[0]+"_"+U[1]+"_"+V[0]+"_"+V[1]+"_"+N[0]+"_"+N[1]+"_"+ee[0]+"_"+ee[1]).replace(/\./g,"p");if(!R[F]){var I,O,X,ie,le,Ce,tt,L=getDefaultCurveSegments(),ue=0,$e=null;2===U.length&&(U[0]!==V[0]||U[1]!==V[1])&&u(U[0],U[1],V[0],V[1],U[0]+N[0],U[1]+N[1])&&u(U[0],U[1],V[0],V[1],V[0]+ee[0],V[1]+ee[1])&&(L=2);var Le=new _(L);for(X=N.length,I=0;I<L;I+=1){for(tt=createSizedArray(X),le=I/(L-1),Ce=0,O=0;O<X;O+=1)ie=bmPow(1-le,3)*U[O]+3*bmPow(1-le,2)*le*(U[O]+N[O])+3*(1-le)*bmPow(le,2)*(V[O]+ee[O])+bmPow(le,3)*V[O],tt[O]=ie,null!==$e&&(Ce+=bmPow(tt[O]-$e[O],2));ue+=Ce=bmSqrt(Ce),Le.points[I]=new E(Ce,tt),$e=tt}Le.segmentLength=ue,R[F]=Le}return R[F]});function w(R,U){var V=U.percents,N=U.lengths,ee=V.length,F=bmFloor((ee-1)*R),L=R*U.addedLength,I=0;if(F===ee-1||0===F||L===N[F])return V[F];for(var O=N[F]>L?-1:1,X=!0;X;)if(N[F]<=L&&N[F+1]>L?(I=(L-N[F])/(N[F+1]-N[F]),X=!1):F+=O,F<0||F>=ee-1){if(F===ee-1)return V[F];X=!1}return V[F]+(V[F+1]-V[F])*I}var k=createTypedArray("float32",8);return{getSegmentsLength:function g(R){var L,U=segmentsLengthPool.newElement(),V=R.c,N=R.v,ee=R.o,F=R.i,I=R._length,O=U.lengths,X=0;for(L=0;L<I-1;L+=1)O[L]=m(N[L],N[L+1],ee[L],F[L+1]),X+=O[L].addedLength;return V&&I&&(O[L]=m(N[L],N[0],ee[L],F[0]),X+=O[L].addedLength),U.totalLength=X,U},getNewSegment:function j(R,U,V,N,ee,F,L){ee<0?ee=0:ee>1&&(ee=1);var X,I=w(ee,L),O=w(F=F>1?1:F,L),ie=R.length,le=1-I,ue=1-O,Ce=le*le*le,tt=I*le*le*3,$e=I*I*le*3,Le=I*I*I,nt=le*le*ue,ct=I*le*ue+le*I*ue+le*le*O,Pe=I*I*ue+le*I*O+I*le*O,J=I*I*O,ae=le*ue*ue,B=I*ue*ue+le*O*ue+le*ue*O,H=I*O*ue+le*O*O+I*ue*O,me=I*O*O,he=ue*ue*ue,it=O*ue*ue+ue*O*ue+ue*ue*O,Tt=O*O*ue+ue*O*O+O*ue*O,bt=O*O*O;for(X=0;X<ie;X+=1)k[4*X]=l.round(1e3*(Ce*R[X]+tt*V[X]+$e*N[X]+Le*U[X]))/1e3,k[4*X+1]=l.round(1e3*(nt*R[X]+ct*V[X]+Pe*N[X]+J*U[X]))/1e3,k[4*X+2]=l.round(1e3*(ae*R[X]+B*V[X]+H*N[X]+me*U[X]))/1e3,k[4*X+3]=l.round(1e3*(he*R[X]+it*V[X]+Tt*N[X]+bt*U[X]))/1e3;return k},getPointInSegment:function P(R,U,V,N,ee,F){var L=w(ee,F),I=1-L;return[l.round(1e3*(I*I*I*R[0]+(L*I*I+I*L*I+I*I*L)*V[0]+(L*L*I+I*L*L+L*I*L)*N[0]+L*L*L*U[0]))/1e3,l.round(1e3*(I*I*I*R[1]+(L*I*I+I*L*I+I*I*L)*V[1]+(L*L*I+I*L*L+L*I*L)*N[1]+L*L*L*U[1]))/1e3]},buildBezierData:C,pointOnLine2D:u,pointOnLine3D:function d(R,U,V,N,ee,F,L,I,O){if(0===V&&0===F&&0===O)return u(R,U,N,ee,L,I);var ue,X=l.sqrt(l.pow(N-R,2)+l.pow(ee-U,2)+l.pow(F-V,2)),ie=l.sqrt(l.pow(L-R,2)+l.pow(I-U,2)+l.pow(O-V,2)),le=l.sqrt(l.pow(L-N,2)+l.pow(I-ee,2)+l.pow(O-F,2));return(ue=X>ie?X>le?X-ie-le:le-ie-X:le>ie?le-ie-X:ie-X-le)>-1e-4&&ue<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(l,u){var m,d=this.offsetTime;"multidimensional"===this.propType&&(m=createTypedArray("float32",this.pv.length));for(var w,P,k,g=u.lastIndex,_=g,E=this.keyframes.length-1,C=!0;C;){if(w=this.keyframes[_],P=this.keyframes[_+1],_===E-1&&l>=P.t-d){w.h&&(w=P),g=0;break}if(P.t-d>l){g=_;break}_<E-1?_+=1:(g=0,C=!1)}k=this.keyframesMetadata[_]||{};var j,R,U,V,N,ee,I,F=P.t-d,L=w.t-d;if(w.to){k.bezierData||(k.bezierData=bez.buildBezierData(w.s,P.s||w.e,w.to,w.ti));var O=k.bezierData;if(l>=F||l<L){var X=l>=F?O.points.length-1:0;for(R=O.points[X].point.length,j=0;j<R;j+=1)m[j]=O.points[X].point[j]}else{k.__fnct?ee=k.__fnct:(ee=BezierFactory.getBezierEasing(w.o.x,w.o.y,w.i.x,w.i.y,w.n).get,k.__fnct=ee),U=ee((l-L)/(F-L));var le,ie=O.segmentLength*U,ue=u.lastFrame<l&&u._lastKeyframeIndex===_?u._lastAddedLength:0;for(N=u.lastFrame<l&&u._lastKeyframeIndex===_?u._lastPoint:0,C=!0,V=O.points.length;C;){if(ue+=O.points[N].partialLength,0===ie||0===U||N===O.points.length-1){for(R=O.points[N].point.length,j=0;j<R;j+=1)m[j]=O.points[N].point[j];break}if(ie>=ue&&ie<ue+O.points[N+1].partialLength){for(le=(ie-ue)/O.points[N+1].partialLength,R=O.points[N].point.length,j=0;j<R;j+=1)m[j]=O.points[N].point[j]+(O.points[N+1].point[j]-O.points[N].point[j])*le;break}N<V-1?N+=1:C=!1}u._lastPoint=N,u._lastAddedLength=ue-O.points[N].partialLength,u._lastKeyframeIndex=_}}else{var nt;if(E=w.s.length,I=P.s||w.e,this.sh&&1!==w.h)l>=F?(m[0]=I[0],m[1]=I[1],m[2]=I[2]):l<=L?(m[0]=w.s[0],m[1]=w.s[1],m[2]=w.s[2]):quaternionToEuler(m,slerp(createQuaternion(w.s),createQuaternion(I),(l-L)/(F-L)));else for(_=0;_<E;_+=1)1!==w.h&&(l>=F?U=1:l<L?U=0:(w.o.x.constructor===Array?(k.__fnct||(k.__fnct=[]),k.__fnct[_]?ee=k.__fnct[_]:(ee=BezierFactory.getBezierEasing(void 0===w.o.x[_]?w.o.x[0]:w.o.x[_],void 0===w.o.y[_]?w.o.y[0]:w.o.y[_],void 0===w.i.x[_]?w.i.x[0]:w.i.x[_],void 0===w.i.y[_]?w.i.y[0]:w.i.y[_]).get,k.__fnct[_]=ee)):k.__fnct?ee=k.__fnct:(ee=BezierFactory.getBezierEasing(w.o.x,w.o.y,w.i.x,w.i.y).get,w.keyframeMetadata=ee),U=ee((l-L)/(F-L)))),I=P.s||w.e,nt=1===w.h?w.s[_]:w.s[_]+(I[_]-w.s[_])*U,"multidimensional"===this.propType?m[_]=nt:m=nt}return u.lastIndex=g,m}function slerp(l,u,d){var R,U,V,N,ee,m=[],g=l[0],_=l[1],E=l[2],C=l[3],w=u[0],P=u[1],k=u[2],j=u[3];return(U=g*w+_*P+E*k+C*j)<0&&(U=-U,w=-w,P=-P,k=-k,j=-j),1-U>1e-6?(R=Math.acos(U),V=Math.sin(R),N=Math.sin((1-d)*R)/V,ee=Math.sin(d*R)/V):(N=1-d,ee=d),m[0]=N*g+ee*w,m[1]=N*_+ee*P,m[2]=N*E+ee*k,m[3]=N*C+ee*j,m}function quaternionToEuler(l,u){var d=u[0],m=u[1],g=u[2],_=u[3],E=Math.atan2(2*m*_-2*d*g,1-2*m*m-2*g*g),C=Math.asin(2*d*m+2*g*_),w=Math.atan2(2*d*_-2*m*g,1-2*d*d-2*g*g);l[0]=E/degToRads,l[1]=C/degToRads,l[2]=w/degToRads}function createQuaternion(l){var u=l[0]*degToRads,d=l[1]*degToRads,m=l[2]*degToRads,g=Math.cos(u/2),_=Math.cos(d/2),E=Math.cos(m/2),C=Math.sin(u/2),w=Math.sin(d/2),P=Math.sin(m/2);return[C*w*E+g*_*P,C*_*E+g*w*P,g*w*E-C*_*P,g*_*E-C*w*P]}function getValueAtCurrentTime(){var l=this.comp.renderedFrame-this.offsetTime,u=this.keyframes[0].t-this.offsetTime,d=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(l===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=d&&l>=d||this._caching.lastFrame<u&&l<u))){this._caching.lastFrame>=l&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var m=this.interpolateValue(l,this._caching);this.pv=m}return this._caching.lastFrame=l,this.pv}function setVValue(l){var u;if("unidimensional"===this.propType)mathAbs(this.v-(u=l*this.mult))>1e-5&&(this.v=u,this._mdf=!0);else for(var d=0,m=this.v.length;d<m;)mathAbs(this.v[d]-(u=l[d]*this.mult))>1e-5&&(this.v[d]=u,this._mdf=!0),d+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length){if(this.lock)return void this.setVValue(this.pv);this.lock=!0,this._mdf=this._isFirstFrame;var l,u=this.effectsSequence.length,d=this.kf?this.pv:this.data.k;for(l=0;l<u;l+=1)d=this.effectsSequence[l](d);this.setVValue(d),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(l){this.effectsSequence.push(l),this.container.addDynamicProperty(this)}function ValueProperty(l,u,d,m){this.propType="unidimensional",this.mult=d||1,this.data=u,this.v=d?u.k*d:u.k,this.pv=u.k,this._mdf=!1,this.elem=l,this.container=m,this.comp=l.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(l,u,d,m){this.propType="multidimensional",this.mult=d||1,this.data=u,this._mdf=!1,this.elem=l,this.container=m,this.comp=l.comp,this.k=!1,this.kf=!1,this.frameId=-1;var g,_=u.k.length;for(this.v=createTypedArray("float32",_),this.pv=createTypedArray("float32",_),this.vel=createTypedArray("float32",_),g=0;g<_;g+=1)this.v[g]=u.k[g]*this.mult,this.pv[g]=u.k[g];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(l,u,d,m){this.propType="unidimensional",this.keyframes=u.k,this.keyframesMetadata=[],this.offsetTime=l.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=u,this.mult=d||1,this.elem=l,this.container=m,this.comp=l.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(l,u,d,m){this.propType="multidimensional";var g,E,C,w,P,_=u.k.length;for(g=0;g<_-1;g+=1)u.k[g].to&&u.k[g].s&&u.k[g+1]&&u.k[g+1].s&&(C=u.k[g+1].s,w=u.k[g].to,P=u.k[g].ti,(2===(E=u.k[g].s).length&&!(E[0]===C[0]&&E[1]===C[1])&&bez.pointOnLine2D(E[0],E[1],C[0],C[1],E[0]+w[0],E[1]+w[1])&&bez.pointOnLine2D(E[0],E[1],C[0],C[1],C[0]+P[0],C[1]+P[1])||3===E.length&&!(E[0]===C[0]&&E[1]===C[1]&&E[2]===C[2])&&bez.pointOnLine3D(E[0],E[1],E[2],C[0],C[1],C[2],E[0]+w[0],E[1]+w[1],E[2]+w[2])&&bez.pointOnLine3D(E[0],E[1],E[2],C[0],C[1],C[2],C[0]+P[0],C[1]+P[1],C[2]+P[2]))&&(u.k[g].to=null,u.k[g].ti=null),E[0]===C[0]&&E[1]===C[1]&&0===w[0]&&0===w[1]&&0===P[0]&&0===P[1]&&(2===E.length||E[2]===C[2]&&0===w[2]&&0===P[2])&&(u.k[g].to=null,u.k[g].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=u,this.keyframes=u.k,this.keyframesMetadata=[],this.offsetTime=l.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=d||1,this.elem=l,this.container=m,this.comp=l.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var k=u.k[0].s.length;for(this.v=createTypedArray("float32",k),this.pv=createTypedArray("float32",k),g=0;g<k;g+=1)this.v[g]=initFrame,this.pv[g]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",k)},this.addEffect=addEffect}var PropertyFactory={getProp:function l(d,m,g,_,E){var C;if(m.sid&&(m=d.globalData.slotManager.getProp(m)),m.k.length)if("number"==typeof m.k[0])C=new MultiDimensionalProperty(d,m,_,E);else switch(g){case 0:C=new KeyframedValueProperty(d,m,_,E);break;case 1:C=new KeyframedMultidimensionalProperty(d,m,_,E)}else C=new ValueProperty(d,m,_,E);return C.effectsSequence.length&&E.addDynamicProperty(C),C}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(u){-1===this.dynamicProperties.indexOf(u)&&(this.dynamicProperties.push(u),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var u,d=this.dynamicProperties.length;for(u=0;u<d;u+=1)this.dynamicProperties[u].getValue(),this.dynamicProperties[u]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(u){this.container=u,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function l(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(l,u){this.c=l,this.setLength(u);for(var d=0;d<u;)this.v[d]=pointPool.newElement(),this.o[d]=pointPool.newElement(),this.i[d]=pointPool.newElement(),d+=1},ShapePath.prototype.setLength=function(l){for(;this._maxLength<l;)this.doubleArrayLength();this._length=l},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(l,u,d,m,g){var _;switch(this._length=Math.max(this._length,m+1),this._length>=this._maxLength&&this.doubleArrayLength(),d){case"v":_=this.v;break;case"i":_=this.i;break;case"o":_=this.o;break;default:_=[]}(!_[m]||_[m]&&!g)&&(_[m]=pointPool.newElement()),_[m][0]=l,_[m][1]=u},ShapePath.prototype.setTripleAt=function(l,u,d,m,g,_,E,C){this.setXYAt(l,u,"v",E,C),this.setXYAt(d,m,"o",E,C),this.setXYAt(g,_,"i",E,C)},ShapePath.prototype.reverse=function(){var l=new ShapePath;l.setPathData(this.c,this._length);var u=this.v,d=this.o,m=this.i,g=0;this.c&&(l.setTripleAt(u[0][0],u[0][1],m[0][0],m[0][1],d[0][0],d[0][1],0,!1),g=1);var C,_=this._length-1,E=this._length;for(C=g;C<E;C+=1)l.setTripleAt(u[_][0],u[_][1],m[_][0],m[_][1],d[_][0],d[_][1],C,!1),_-=1;return l},ShapePath.prototype.length=function(){return this._length};var shapePool=(m=poolFactory(4,function l(){return new ShapePath},function u(g){var E,_=g._length;for(E=0;E<_;E+=1)pointPool.release(g.v[E]),pointPool.release(g.i[E]),pointPool.release(g.o[E]),g.v[E]=null,g.i[E]=null,g.o[E]=null;g._length=0,g.c=!1}),m.clone=function d(g){var E,_=m.newElement(),C=void 0===g._length?g.v.length:g._length;for(_.setLength(C),_.c=g.c,E=0;E<C;E+=1)_.setTripleAt(g.v[E][0],g.v[E][1],g.o[E][0],g.o[E][1],g.i[E][0],g.i[E][1],E);return _},m),m;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(l){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=l,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var l;for(l=0;l<this._length;l+=1)shapePool.release(this.shapes[l]);this._length=0};var shapeCollectionPool=function(){var l={newShapeCollection:function g(){return u?m[u-=1]:new ShapeCollection},release:function _(E){var C,w=E._length;for(C=0;C<w;C+=1)shapePool.release(E.shapes[C]);E._length=0,u===d&&(m=pooling.double(m),d*=2),m[u]=E,u+=1}},u=0,d=4,m=createSizedArray(d);return l}(),ShapePropertyFactory=function(){var l=-999999;function u(F,L,I){var X,ie,le,ue,Ce,tt,$e,Le,O=I.lastIndex,ct=this.keyframes;if(F<ct[0].t-this.offsetTime)X=ct[0].s[0],le=!0,O=0;else if(F>=ct[ct.length-1].t-this.offsetTime)X=ct[ct.length-1].s?ct[ct.length-1].s[0]:ct[ct.length-2].e[0],le=!0;else{for(var B,H,me,Pe=O,J=ct.length-1,ae=!0;ae&&(B=ct[Pe],!((H=ct[Pe+1]).t-this.offsetTime>F));)Pe<J-1?Pe+=1:ae=!1;if(me=this.keyframesMetadata[Pe]||{},O=Pe,!(le=1===B.h)){if(F>=H.t-this.offsetTime)Le=1;else if(F<B.t-this.offsetTime)Le=0;else{var he;me.__fnct?he=me.__fnct:(he=BezierFactory.getBezierEasing(B.o.x,B.o.y,B.i.x,B.i.y).get,me.__fnct=he),Le=he((F-(B.t-this.offsetTime))/(H.t-this.offsetTime-(B.t-this.offsetTime)))}ie=H.s?H.s[0]:B.e[0]}X=B.s[0]}for(tt=L._length,$e=X.i[0].length,I.lastIndex=O,ue=0;ue<tt;ue+=1)for(Ce=0;Ce<$e;Ce+=1)L.i[ue][Ce]=le?X.i[ue][Ce]:X.i[ue][Ce]+(ie.i[ue][Ce]-X.i[ue][Ce])*Le,L.o[ue][Ce]=le?X.o[ue][Ce]:X.o[ue][Ce]+(ie.o[ue][Ce]-X.o[ue][Ce])*Le,L.v[ue][Ce]=le?X.v[ue][Ce]:X.v[ue][Ce]+(ie.v[ue][Ce]-X.v[ue][Ce])*Le}function d(){var F=this.comp.renderedFrame-this.offsetTime,L=this.keyframes[0].t-this.offsetTime,I=this.keyframes[this.keyframes.length-1].t-this.offsetTime,O=this._caching.lastFrame;return O!==l&&(O<L&&F<L||O>I&&F>I)||(this._caching.lastIndex=O<F?this._caching.lastIndex:0,this.interpolateShape(F,this.pv,this._caching)),this._caching.lastFrame=F,this.pv}function m(){this.paths=this.localShapeCollection}function _(F){(function g(F,L){if(F._length!==L._length||F.c!==L.c)return!1;var I,O=F._length;for(I=0;I<O;I+=1)if(F.v[I][0]!==L.v[I][0]||F.v[I][1]!==L.v[I][1]||F.o[I][0]!==L.o[I][0]||F.o[I][1]!==L.o[I][1]||F.i[I][0]!==L.i[I][0]||F.i[I][1]!==L.i[I][1])return!1;return!0})(this.v,F)||(this.v=shapePool.clone(F),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function E(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length)return void(this._mdf=!1);if(this.lock)return void this.setVValue(this.pv);var F;this.lock=!0,this._mdf=!1,F=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var L,I=this.effectsSequence.length;for(L=0;L<I;L+=1)F=this.effectsSequence[L](F);this.setVValue(F),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function C(F,L,I){this.propType="shape",this.comp=F.comp,this.container=F,this.elem=F,this.data=L,this.k=!1,this.kf=!1,this._mdf=!1,this.v=shapePool.clone(3===I?L.pt.k:L.ks.k),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=m,this.effectsSequence=[]}function w(F){this.effectsSequence.push(F),this.container.addDynamicProperty(this)}function P(F,L,I){this.propType="shape",this.comp=F.comp,this.elem=F,this.container=F,this.offsetTime=F.data.st,this.keyframes=3===I?L.pt.k:L.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var O=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,O),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=l,this.reset=m,this._caching={lastFrame:l,lastIndex:0},this.effectsSequence=[d.bind(this)]}C.prototype.interpolateShape=u,C.prototype.getValue=E,C.prototype.setVValue=_,C.prototype.addEffect=w,P.prototype.getValue=E,P.prototype.interpolateShape=u,P.prototype.setVValue=_,P.prototype.addEffect=w;var k=function(){var F=roundCorner;function L(I,O){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=O.d,this.elem=I,this.comp=I.comp,this.frameId=-1,this.initDynamicPropertyContainer(I),this.p=PropertyFactory.getProp(I,O.p,1,0,this),this.s=PropertyFactory.getProp(I,O.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return L.prototype={reset:m,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var O=this.p.v[0],X=this.p.v[1],ie=this.s.v[0]/2,le=this.s.v[1]/2,ue=3!==this.d,Ce=this.v;Ce.v[0][0]=O,Ce.v[0][1]=X-le,Ce.v[1][0]=ue?O+ie:O-ie,Ce.v[1][1]=X,Ce.v[2][0]=O,Ce.v[2][1]=X+le,Ce.v[3][0]=ue?O-ie:O+ie,Ce.v[3][1]=X,Ce.i[0][0]=ue?O-ie*F:O+ie*F,Ce.i[0][1]=X-le,Ce.i[1][0]=ue?O+ie:O-ie,Ce.i[1][1]=X-le*F,Ce.i[2][0]=ue?O+ie*F:O-ie*F,Ce.i[2][1]=X+le,Ce.i[3][0]=ue?O-ie:O+ie,Ce.i[3][1]=X+le*F,Ce.o[0][0]=ue?O+ie*F:O-ie*F,Ce.o[0][1]=X-le,Ce.o[1][0]=ue?O+ie:O-ie,Ce.o[1][1]=X+le*F,Ce.o[2][0]=ue?O-ie*F:O+ie*F,Ce.o[2][1]=X+le,Ce.o[3][0]=ue?O-ie:O+ie,Ce.o[3][1]=X-le*F}},extendPrototype([DynamicPropertyContainer],L),L}(),j=function(){function F(L,I){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=L,this.comp=L.comp,this.data=I,this.frameId=-1,this.d=I.d,this.initDynamicPropertyContainer(L),1===I.sy?(this.ir=PropertyFactory.getProp(L,I.ir,0,0,this),this.is=PropertyFactory.getProp(L,I.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(L,I.pt,0,0,this),this.p=PropertyFactory.getProp(L,I.p,1,0,this),this.r=PropertyFactory.getProp(L,I.r,0,degToRads,this),this.or=PropertyFactory.getProp(L,I.or,0,0,this),this.os=PropertyFactory.getProp(L,I.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return F.prototype={reset:m,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Le,nt,ct,Pe,I=2*Math.floor(this.pt.v),O=2*Math.PI/I,X=!0,ie=this.or.v,le=this.ir.v,ue=this.os.v,Ce=this.is.v,tt=2*Math.PI*ie/(2*I),$e=2*Math.PI*le/(2*I),J=-Math.PI/2;J+=this.r.v;var ae=3===this.data.d?-1:1;for(this.v._length=0,Le=0;Le<I;Le+=1){ct=X?ue:Ce,Pe=X?tt:$e;var B=(nt=X?ie:le)*Math.cos(J),H=nt*Math.sin(J),me=0===B&&0===H?0:H/Math.sqrt(B*B+H*H),he=0===B&&0===H?0:-B/Math.sqrt(B*B+H*H);this.v.setTripleAt(B+=+this.p.v[0],H+=+this.p.v[1],B-me*Pe*ct*ae,H-he*Pe*ct*ae,B+me*Pe*ct*ae,H+he*Pe*ct*ae,Le,!0),X=!X,J+=O*ae}},convertPolygonToPath:function(){var ue,I=Math.floor(this.pt.v),O=2*Math.PI/I,X=this.or.v,ie=this.os.v,le=2*Math.PI*X/(4*I),Ce=.5*-Math.PI,tt=3===this.data.d?-1:1;for(Ce+=this.r.v,this.v._length=0,ue=0;ue<I;ue+=1){var $e=X*Math.cos(Ce),Le=X*Math.sin(Ce),nt=0===$e&&0===Le?0:Le/Math.sqrt($e*$e+Le*Le),ct=0===$e&&0===Le?0:-$e/Math.sqrt($e*$e+Le*Le);this.v.setTripleAt($e+=+this.p.v[0],Le+=+this.p.v[1],$e-nt*le*ie*tt,Le-ct*le*ie*tt,$e+nt*le*ie*tt,Le+ct*le*ie*tt,ue,!0),Ce+=O*tt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],F),F}(),R=function(){function F(L,I){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=L,this.comp=L.comp,this.frameId=-1,this.d=I.d,this.initDynamicPropertyContainer(L),this.p=PropertyFactory.getProp(L,I.p,1,0,this),this.s=PropertyFactory.getProp(L,I.s,1,0,this),this.r=PropertyFactory.getProp(L,I.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return F.prototype={convertRectToPath:function(){var I=this.p.v[0],O=this.p.v[1],X=this.s.v[0]/2,ie=this.s.v[1]/2,le=bmMin(X,ie,this.r.v),ue=le*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(I+X,O-ie+le,I+X,O-ie+le,I+X,O-ie+ue,0,!0),this.v.setTripleAt(I+X,O+ie-le,I+X,O+ie-ue,I+X,O+ie-le,1,!0),0!==le?(this.v.setTripleAt(I+X-le,O+ie,I+X-le,O+ie,I+X-ue,O+ie,2,!0),this.v.setTripleAt(I-X+le,O+ie,I-X+ue,O+ie,I-X+le,O+ie,3,!0),this.v.setTripleAt(I-X,O+ie-le,I-X,O+ie-le,I-X,O+ie-ue,4,!0),this.v.setTripleAt(I-X,O-ie+le,I-X,O-ie+ue,I-X,O-ie+le,5,!0),this.v.setTripleAt(I-X+le,O-ie,I-X+le,O-ie,I-X+ue,O-ie,6,!0),this.v.setTripleAt(I+X-le,O-ie,I+X-ue,O-ie,I+X-le,O-ie,7,!0)):(this.v.setTripleAt(I-X,O+ie,I-X+ue,O+ie,I-X,O+ie,2),this.v.setTripleAt(I-X,O-ie,I-X,O-ie+ue,I-X,O-ie,3))):(this.v.setTripleAt(I+X,O-ie+le,I+X,O-ie+ue,I+X,O-ie+le,0,!0),0!==le?(this.v.setTripleAt(I+X-le,O-ie,I+X-le,O-ie,I+X-ue,O-ie,1,!0),this.v.setTripleAt(I-X+le,O-ie,I-X+ue,O-ie,I-X+le,O-ie,2,!0),this.v.setTripleAt(I-X,O-ie+le,I-X,O-ie+le,I-X,O-ie+ue,3,!0),this.v.setTripleAt(I-X,O+ie-le,I-X,O+ie-ue,I-X,O+ie-le,4,!0),this.v.setTripleAt(I-X+le,O+ie,I-X+le,O+ie,I-X+ue,O+ie,5,!0),this.v.setTripleAt(I+X-le,O+ie,I+X-ue,O+ie,I+X-le,O+ie,6,!0),this.v.setTripleAt(I+X,O+ie-le,I+X,O+ie-le,I+X,O+ie-ue,7,!0)):(this.v.setTripleAt(I-X,O-ie,I-X+ue,O-ie,I-X,O-ie,1,!0),this.v.setTripleAt(I-X,O+ie,I-X,O+ie-ue,I-X,O+ie,2,!0),this.v.setTripleAt(I+X,O+ie,I+X-ue,O+ie,I+X,O+ie,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:m},extendPrototype([DynamicPropertyContainer],F),F}();return{getShapeProp:function U(F,L,I){var O;return 3===I||4===I?O=(3===I?L.pt:L.ks).k.length?new P(F,L,I):new C(F,L,I):5===I?O=new R(F,L):6===I?O=new k(F,L):7===I&&(O=new j(F,L)),O.k&&F.addDynamicProperty(O),O},getConstructorFunction:function V(){return C},getKeyframedConstructorFunction:function N(){return P}}}(),Matrix=function(){var l=Math.cos,u=Math.sin,d=Math.tan,m=Math.round;function g(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function _(B){if(0===B)return this;var H=l(B),me=u(B);return this._t(H,-me,0,0,me,H,0,0,0,0,1,0,0,0,0,1)}function E(B){if(0===B)return this;var H=l(B),me=u(B);return this._t(1,0,0,0,0,H,-me,0,0,me,H,0,0,0,0,1)}function C(B){if(0===B)return this;var H=l(B),me=u(B);return this._t(H,0,me,0,0,1,0,0,-me,0,H,0,0,0,0,1)}function w(B){if(0===B)return this;var H=l(B),me=u(B);return this._t(H,-me,0,0,me,H,0,0,0,0,1,0,0,0,0,1)}function P(B,H){return this._t(1,H,B,1,0,0)}function k(B,H){return this.shear(d(B),d(H))}function j(B,H){var me=l(H),he=u(H);return this._t(me,he,0,0,-he,me,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,d(B),1,0,0,0,0,1,0,0,0,0,1)._t(me,-he,0,0,he,me,0,0,0,0,1,0,0,0,0,1)}function R(B,H,me){return!me&&0!==me&&(me=1),1===B&&1===H&&1===me?this:this._t(B,0,0,0,0,H,0,0,0,0,me,0,0,0,0,1)}function U(B,H,me,he,it,Tt,bt,mn,gn,ln,_n,Hr,Dt,ni,Xi,Sn){return this.props[0]=B,this.props[1]=H,this.props[2]=me,this.props[3]=he,this.props[4]=it,this.props[5]=Tt,this.props[6]=bt,this.props[7]=mn,this.props[8]=gn,this.props[9]=ln,this.props[10]=_n,this.props[11]=Hr,this.props[12]=Dt,this.props[13]=ni,this.props[14]=Xi,this.props[15]=Sn,this}function V(B,H,me){return me=me||0,0!==B||0!==H||0!==me?this._t(1,0,0,0,0,1,0,0,0,0,1,0,B,H,me,1):this}function N(B,H,me,he,it,Tt,bt,mn,gn,ln,_n,Hr,Dt,ni,Xi,Sn){var gt=this.props;if(1===B&&0===H&&0===me&&0===he&&0===it&&1===Tt&&0===bt&&0===mn&&0===gn&&0===ln&&1===_n&&0===Hr)return gt[12]=gt[12]*B+gt[15]*Dt,gt[13]=gt[13]*Tt+gt[15]*ni,gt[14]=gt[14]*_n+gt[15]*Xi,gt[15]*=Sn,this._identityCalculated=!1,this;var rs=gt[0],Fs=gt[1],ss=gt[2],zr=gt[3],os=gt[4],as=gt[5],Fi=gt[6],ls=gt[7],Ls=gt[8],Yi=gt[9],Ns=gt[10],Zi=gt[11],Os=gt[12],yl=gt[13],_l=gt[14],xl=gt[15];return gt[0]=rs*B+Fs*it+ss*gn+zr*Dt,gt[1]=rs*H+Fs*Tt+ss*ln+zr*ni,gt[2]=rs*me+Fs*bt+ss*_n+zr*Xi,gt[3]=rs*he+Fs*mn+ss*Hr+zr*Sn,gt[4]=os*B+as*it+Fi*gn+ls*Dt,gt[5]=os*H+as*Tt+Fi*ln+ls*ni,gt[6]=os*me+as*bt+Fi*_n+ls*Xi,gt[7]=os*he+as*mn+Fi*Hr+ls*Sn,gt[8]=Ls*B+Yi*it+Ns*gn+Zi*Dt,gt[9]=Ls*H+Yi*Tt+Ns*ln+Zi*ni,gt[10]=Ls*me+Yi*bt+Ns*_n+Zi*Xi,gt[11]=Ls*he+Yi*mn+Ns*Hr+Zi*Sn,gt[12]=Os*B+yl*it+_l*gn+xl*Dt,gt[13]=Os*H+yl*Tt+_l*ln+xl*ni,gt[14]=Os*me+yl*bt+_l*_n+xl*Xi,gt[15]=Os*he+yl*mn+_l*Hr+xl*Sn,this._identityCalculated=!1,this}function ee(B){var H=B.props;return this.transform(H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8],H[9],H[10],H[11],H[12],H[13],H[14],H[15])}function F(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function L(B){for(var H=0;H<16;){if(B.props[H]!==this.props[H])return!1;H+=1}return!0}function I(B){var H;for(H=0;H<16;H+=1)B.props[H]=this.props[H];return B}function O(B){var H;for(H=0;H<16;H+=1)this.props[H]=B[H]}function X(B,H,me){return{x:B*this.props[0]+H*this.props[4]+me*this.props[8]+this.props[12],y:B*this.props[1]+H*this.props[5]+me*this.props[9]+this.props[13],z:B*this.props[2]+H*this.props[6]+me*this.props[10]+this.props[14]}}function ie(B,H,me){return B*this.props[0]+H*this.props[4]+me*this.props[8]+this.props[12]}function le(B,H,me){return B*this.props[1]+H*this.props[5]+me*this.props[9]+this.props[13]}function ue(B,H,me){return B*this.props[2]+H*this.props[6]+me*this.props[10]+this.props[14]}function Ce(){var B=this.props[0]*this.props[5]-this.props[1]*this.props[4],H=this.props[5]/B,me=-this.props[1]/B,he=-this.props[4]/B,it=this.props[0]/B,Tt=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/B,bt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/B,mn=new Matrix;return mn.props[0]=H,mn.props[1]=me,mn.props[4]=he,mn.props[5]=it,mn.props[12]=Tt,mn.props[13]=bt,mn}function tt(B){return this.getInverseMatrix().applyToPointArray(B[0],B[1],B[2]||0)}function $e(B){var H,me=B.length,he=[];for(H=0;H<me;H+=1)he[H]=tt(B[H]);return he}function Le(B,H,me){var he=createTypedArray("float32",6);if(this.isIdentity())he[0]=B[0],he[1]=B[1],he[2]=H[0],he[3]=H[1],he[4]=me[0],he[5]=me[1];else{var it=this.props[0],Tt=this.props[1],bt=this.props[4],mn=this.props[5],gn=this.props[12],ln=this.props[13];he[0]=B[0]*it+B[1]*bt+gn,he[1]=B[0]*Tt+B[1]*mn+ln,he[2]=H[0]*it+H[1]*bt+gn,he[3]=H[0]*Tt+H[1]*mn+ln,he[4]=me[0]*it+me[1]*bt+gn,he[5]=me[0]*Tt+me[1]*mn+ln}return he}function nt(B,H,me){return this.isIdentity()?[B,H,me]:[B*this.props[0]+H*this.props[4]+me*this.props[8]+this.props[12],B*this.props[1]+H*this.props[5]+me*this.props[9]+this.props[13],B*this.props[2]+H*this.props[6]+me*this.props[10]+this.props[14]]}function ct(B,H){if(this.isIdentity())return B+","+H;var me=this.props;return Math.round(100*(B*me[0]+H*me[4]+me[12]))/100+","+Math.round(100*(B*me[1]+H*me[5]+me[13]))/100}function Pe(){for(var B=0,H=this.props,me="matrix3d(";B<16;)me+=m(1e4*H[B])/1e4,me+=15===B?")":",",B+=1;return me}function J(B){return B<1e-6&&B>0||B>-1e-6&&B<0?m(1e4*B)/1e4:B}function ae(){var B=this.props;return"matrix("+J(B[0])+","+J(B[1])+","+J(B[4])+","+J(B[5])+","+J(B[12])+","+J(B[13])+")"}return function(){this.reset=g,this.rotate=_,this.rotateX=E,this.rotateY=C,this.rotateZ=w,this.skew=k,this.skewFromAxis=j,this.shear=P,this.scale=R,this.setTransform=U,this.translate=V,this.transform=N,this.multiply=ee,this.applyToPoint=X,this.applyToX=ie,this.applyToY=le,this.applyToZ=ue,this.applyToPointArray=nt,this.applyToTriplePoints=Le,this.applyToPointStringified=ct,this.toCSS=Pe,this.to2dCSS=ae,this.clone=I,this.cloneFromProps=O,this.equals=L,this.inversePoints=$e,this.inversePoint=tt,this.getInverseMatrix=Ce,this._t=this.transform,this.isIdentity=F,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(l){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(l){setLocationHref(l)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(l){setSubframeEnabled(l)}function setPrefix(l){setIdPrefix(l)}function loadAnimation(l){return!0===standalone&&(l.animationData=JSON.parse(animationData)),animationManager.loadAnimation(l)}function setQuality(l){if("string"==typeof l)switch(l){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(l)&&l>1&&setDefaultCurveSegments(l);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return typeof navigator<"u"}function installPlugin(l,u){"expressions"===l&&setExpressionsPlugin(u)}function getFactory(l){switch(l){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(l){for(var u=queryString.split("&"),d=0;d<u.length;d+=1){var m=u[d].split("=");if(decodeURIComponent(m[0])==l)return decodeURIComponent(m[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)}catch(l){}var ShapeModifiers=function(){var l={},u={};return l.registerModifier=function d(g,_){u[g]||(u[g]=_)},l.getModifier=function m(g,_,E){return new u[g](_,E)},l}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(l){if(!this.closed){l.sh.container.addDynamicProperty(l.sh);var u={shape:l.sh,data:l,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(u),this.addShapeToModifier(u),this._isAnimated&&l.setAsAnimated()}},ShapeModifier.prototype.init=function(l,u){this.shapes=[],this.elem=l,this.initDynamicPropertyContainer(l),this.initModifierProperties(l,u),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(l,u){this.s=PropertyFactory.getProp(l,u.s,0,.01,this),this.e=PropertyFactory.getProp(l,u.e,0,.01,this),this.o=PropertyFactory.getProp(l,u.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=u.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(l){l.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(l,u,d,m,g){var _=[];u<=1?_.push({s:l,e:u}):l>=1?_.push({s:l-1,e:u-1}):(_.push({s:l,e:1}),_.push({s:0,e:u-1}));var C,P,E=[],w=_.length;for(C=0;C<w;C+=1)(P=_[C]).e*g<m||P.s*g>m+d||E.push([P.s*g<=m?0:(P.s*g-m)/d,P.e*g>=m+d?1:(P.e*g-m)/d]);return E.length||E.push([0,0]),E},TrimModifier.prototype.releasePathsData=function(l){var u,d=l.length;for(u=0;u<d;u+=1)segmentsLengthPool.release(l[u]);return l.length=0,l},TrimModifier.prototype.processShapes=function(l){var u,d;if(this._mdf||l){var m=this.o.v%360/360;if(m<0&&(m+=1),(u=this.s.v>1?1+m:this.s.v<0?0+m:this.s.v+m)>(d=this.e.v>1?1+m:this.e.v<0?0+m:this.e.v+m)){var g=u;u=d,d=g}u=1e-4*Math.round(1e4*u),d=1e-4*Math.round(1e4*d),this.sValue=u,this.eValue=d}else u=this.sValue,d=this.eValue;var _,E,w,P,k,j,R,C=this.shapes.length,U=0;if(d===u)for(E=0;E<C;E+=1)this.shapes[E].localShapeCollection.releaseShapes(),this.shapes[E].shape._mdf=!0,this.shapes[E].shape.paths=this.shapes[E].localShapeCollection,this._mdf&&(this.shapes[E].pathsData.length=0);else if(1===d&&0===u||0===d&&1===u){if(this._mdf)for(E=0;E<C;E+=1)this.shapes[E].pathsData.length=0,this.shapes[E].shape._mdf=!0}else{var N,ee,V=[];for(E=0;E<C;E+=1)if((N=this.shapes[E]).shape._mdf||this._mdf||l||2===this.m){if(P=(_=N.shape.paths)._length,R=0,!N.shape._mdf&&N.pathsData.length)R=N.totalShapeLength;else{for(k=this.releasePathsData(N.pathsData),w=0;w<P;w+=1)j=bez.getSegmentsLength(_.shapes[w]),k.push(j),R+=j.totalLength;N.totalShapeLength=R,N.pathsData=k}U+=R,N.shape._mdf=!0}else N.shape.paths=N.localShapeCollection;var O,F=u,L=d,I=0;for(E=C-1;E>=0;E-=1)if((N=this.shapes[E]).shape._mdf){for((ee=N.localShapeCollection).releaseShapes(),2===this.m&&C>1?(O=this.calculateShapeEdges(u,d,N.totalShapeLength,I,U),I+=N.totalShapeLength):O=[[F,L]],P=O.length,w=0;w<P;w+=1){F=O[w][0],L=O[w][1],V.length=0,L<=1?V.push({s:N.totalShapeLength*F,e:N.totalShapeLength*L}):F>=1?V.push({s:N.totalShapeLength*(F-1),e:N.totalShapeLength*(L-1)}):(V.push({s:N.totalShapeLength*F,e:N.totalShapeLength}),V.push({s:0,e:N.totalShapeLength*(L-1)}));var X=this.addShapes(N,V[0]);if(V[0].s!==V[0].e){if(V.length>1)if(N.shape.paths.shapes[N.shape.paths._length-1].c){var le=X.pop();this.addPaths(X,ee),X=this.addShapes(N,V[1],le)}else this.addPaths(X,ee),X=this.addShapes(N,V[1]);this.addPaths(X,ee)}}N.shape.paths=ee}}},TrimModifier.prototype.addPaths=function(l,u){var d,m=l.length;for(d=0;d<m;d+=1)u.addShape(l[d])},TrimModifier.prototype.addSegment=function(l,u,d,m,g,_,E){g.setXYAt(u[0],u[1],"o",_),g.setXYAt(d[0],d[1],"i",_+1),E&&g.setXYAt(l[0],l[1],"v",_),g.setXYAt(m[0],m[1],"v",_+1)},TrimModifier.prototype.addSegmentFromArray=function(l,u,d,m){u.setXYAt(l[1],l[5],"o",d),u.setXYAt(l[2],l[6],"i",d+1),m&&u.setXYAt(l[0],l[4],"v",d),u.setXYAt(l[3],l[7],"v",d+1)},TrimModifier.prototype.addShapes=function(l,u,d){var _,C,w,k,j,R,U,N,m=l.pathsData,g=l.shape.paths.shapes,E=l.shape.paths._length,P=0,V=[],ee=!0;for(d?(j=d._length,N=d._length):(d=shapePool.newElement(),j=0,N=0),V.push(d),_=0;_<E;_+=1){for(R=m[_].lengths,d.c=g[_].c,w=g[_].c?R.length:R.length+1,C=1;C<w;C+=1)if(P+(k=R[C-1]).addedLength<u.s)P+=k.addedLength,d.c=!1;else{if(P>u.e){d.c=!1;break}u.s<=P&&u.e>=P+k.addedLength?(this.addSegment(g[_].v[C-1],g[_].o[C-1],g[_].i[C],g[_].v[C],d,j,ee),ee=!1):(U=bez.getNewSegment(g[_].v[C-1],g[_].v[C],g[_].o[C-1],g[_].i[C],(u.s-P)/k.addedLength,(u.e-P)/k.addedLength,R[C-1]),this.addSegmentFromArray(U,d,j,ee),ee=!1,d.c=!1),P+=k.addedLength,j+=1}if(g[_].c&&R.length){if(k=R[C-1],P<=u.e){var F=R[C-1].addedLength;u.s<=P&&u.e>=P+F?(this.addSegment(g[_].v[C-1],g[_].o[C-1],g[_].i[0],g[_].v[0],d,j,ee),ee=!1):(U=bez.getNewSegment(g[_].v[C-1],g[_].v[0],g[_].o[C-1],g[_].i[0],(u.s-P)/F,(u.e-P)/F,R[C-1]),this.addSegmentFromArray(U,d,j,ee),ee=!1,d.c=!1)}else d.c=!1;P+=k.addedLength,j+=1}if(d._length&&(d.setXYAt(d.v[N][0],d.v[N][1],"i",N),d.setXYAt(d.v[d._length-1][0],d.v[d._length-1][1],"o",d._length-1)),P>u.e)break;_<E-1&&(d=shapePool.newElement(),ee=!0,V.push(d),j=0)}return V},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(l,u){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(l,u.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(l,u){var d=u/100,m=[0,0],g=l._length,_=0;for(_=0;_<g;_+=1)m[0]+=l.v[_][0],m[1]+=l.v[_][1];m[0]/=g,m[1]/=g;var E=shapePool.newElement();for(E.c=l.c,_=0;_<g;_+=1)E.setTripleAt(l.v[_][0]+(m[0]-l.v[_][0])*d,l.v[_][1]+(m[1]-l.v[_][1])*d,l.o[_][0]+(m[0]-l.o[_][0])*-d,l.o[_][1]+(m[1]-l.o[_][1])*-d,l.i[_][0]+(m[0]-l.i[_][0])*-d,l.i[_][1]+(m[1]-l.i[_][1])*-d,_);return E},PuckerAndBloatModifier.prototype.processShapes=function(l){var u,d,g,_,C,w,m=this.shapes.length,E=this.amount.v;if(0!==E)for(d=0;d<m;d+=1){if(w=(C=this.shapes[d]).localShapeCollection,C.shape._mdf||this._mdf||l)for(w.releaseShapes(),C.shape._mdf=!0,u=C.shape.paths.shapes,_=C.shape.paths._length,g=0;g<_;g+=1)w.addShape(this.processPath(u[g],E));C.shape.paths=C.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var l=[0,0];function E(w,P,k){if(this.elem=w,this.frameId=-1,this.propType="transform",this.data=P,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(k||w),P.p&&P.p.s?(this.px=PropertyFactory.getProp(w,P.p.x,0,0,this),this.py=PropertyFactory.getProp(w,P.p.y,0,0,this),P.p.z&&(this.pz=PropertyFactory.getProp(w,P.p.z,0,0,this))):this.p=PropertyFactory.getProp(w,P.p||{k:[0,0,0]},1,0,this),P.rx){if(this.rx=PropertyFactory.getProp(w,P.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(w,P.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(w,P.rz,0,degToRads,this),P.or.k[0].ti){var j,R=P.or.k.length;for(j=0;j<R;j+=1)P.or.k[j].to=null,P.or.k[j].ti=null}this.or=PropertyFactory.getProp(w,P.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(w,P.r||{k:0},0,degToRads,this);P.sk&&(this.sk=PropertyFactory.getProp(w,P.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(w,P.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(w,P.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(w,P.s||{k:[100,100,100]},1,.01,this),this.o=P.o?PropertyFactory.getProp(w,P.o,0,.01,w):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return E.prototype={applyToMatrix:function u(w){var P=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||P,this.a&&w.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&w.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&w.skewFromAxis(-this.sk.v,this.sa.v),this.r?w.rotate(-this.r.v):w.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?w.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):w.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function d(w){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||w){var P;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var k,j;if(P=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(k=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/P,0),j=this.p.getValueAtTime(this.p.keyframes[0].t/P,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(k=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/P,0),j=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/P,0)):(k=this.p.pv,j=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/P,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){k=[],j=[];var R=this.px,U=this.py;R._caching.lastFrame+R.offsetTime<=R.keyframes[0].t?(k[0]=R.getValueAtTime((R.keyframes[0].t+.01)/P,0),k[1]=U.getValueAtTime((U.keyframes[0].t+.01)/P,0),j[0]=R.getValueAtTime(R.keyframes[0].t/P,0),j[1]=U.getValueAtTime(U.keyframes[0].t/P,0)):R._caching.lastFrame+R.offsetTime>=R.keyframes[R.keyframes.length-1].t?(k[0]=R.getValueAtTime(R.keyframes[R.keyframes.length-1].t/P,0),k[1]=U.getValueAtTime(U.keyframes[U.keyframes.length-1].t/P,0),j[0]=R.getValueAtTime((R.keyframes[R.keyframes.length-1].t-.01)/P,0),j[1]=U.getValueAtTime((U.keyframes[U.keyframes.length-1].t-.01)/P,0)):(k=[R.pv,U.pv],j[0]=R.getValueAtTime((R._caching.lastFrame+R.offsetTime-.01)/P,R.offsetTime),j[1]=U.getValueAtTime((U._caching.lastFrame+U.offsetTime-.01)/P,U.offsetTime))}else k=j=l;this.v.rotate(-Math.atan2(k[1]-j[1],k[0]-j[0]))}this.data.p&&this.data.p.s?this.v.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function m(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function g(){}},extendPrototype([DynamicPropertyContainer],E),E.prototype.addDynamicProperty=function _(w){this._addDynamicProperty(w),this.elem.addDynamicProperty(w),this._isDirty=!0},E.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function C(w,P,k){return new E(w,P,k)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(l,u){return 1e5*Math.abs(l-u)<=Math.min(Math.abs(l),Math.abs(u))}function floatZero(l){return Math.abs(l)<=1e-5}function lerp(l,u,d){return l*(1-d)+u*d}function lerpPoint(l,u,d){return[lerp(l[0],u[0],d),lerp(l[1],u[1],d)]}function quadRoots(l,u,d){if(0===l)return[];var m=u*u-4*l*d;if(m<0)return[];var g=-u/(2*l);if(0===m)return[g];var _=Math.sqrt(m)/(2*l);return[g-_,g+_]}function polynomialCoefficients(l,u,d,m){return[3*u-l-3*d+m,3*l-6*u+3*d,-3*l+3*u,l]}function singlePoint(l){return new PolynomialBezier(l,l,l,l,!1)}function PolynomialBezier(l,u,d,m,g){g&&pointEqual(l,u)&&(u=lerpPoint(l,m,1/3)),g&&pointEqual(d,m)&&(d=lerpPoint(l,m,2/3));var _=polynomialCoefficients(l[0],u[0],d[0],m[0]),E=polynomialCoefficients(l[1],u[1],d[1],m[1]);this.a=[_[0],E[0]],this.b=[_[1],E[1]],this.c=[_[2],E[2]],this.d=[_[3],E[3]],this.points=[l,u,d,m]}function extrema(l,u){var d=l.points[0][u],m=l.points[l.points.length-1][u];if(d>m){var g=m;m=d,d=g}for(var _=quadRoots(3*l.a[u],2*l.b[u],l.c[u]),E=0;E<_.length;E+=1)if(_[E]>0&&_[E]<1){var C=l.point(_[E])[u];C<d?d=C:C>m&&(m=C)}return{min:d,max:m}}function intersectData(l,u,d){var m=l.boundingBox();return{cx:m.cx,cy:m.cy,width:m.width,height:m.height,bez:l,t:(u+d)/2,t1:u,t2:d}}function splitData(l){var u=l.bez.split(.5);return[intersectData(u[0],l.t1,l.t),intersectData(u[1],l.t,l.t2)]}function boxIntersect(l,u){return 2*Math.abs(l.cx-u.cx)<l.width+u.width&&2*Math.abs(l.cy-u.cy)<l.height+u.height}function intersectsImpl(l,u,d,m,g,_){if(boxIntersect(l,u)){if(d>=_||l.width<=m&&l.height<=m&&u.width<=m&&u.height<=m)return void g.push([l.t,u.t]);var E=splitData(l),C=splitData(u);intersectsImpl(E[0],C[0],d+1,m,g,_),intersectsImpl(E[0],C[1],d+1,m,g,_),intersectsImpl(E[1],C[0],d+1,m,g,_),intersectsImpl(E[1],C[1],d+1,m,g,_)}}function crossProduct(l,u){return[l[1]*u[2]-l[2]*u[1],l[2]*u[0]-l[0]*u[2],l[0]*u[1]-l[1]*u[0]]}function lineIntersection(l,u,d,m){var E=[d[0],d[1],1],C=[m[0],m[1],1],w=crossProduct(crossProduct([l[0],l[1],1],[u[0],u[1],1]),crossProduct(E,C));return floatZero(w[2])?null:[w[0]/w[2],w[1]/w[2]]}function polarOffset(l,u,d){return[l[0]+Math.cos(u)*d,l[1]-Math.sin(u)*d]}function pointDistance(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1])}function pointEqual(l,u){return floatEqual(l[0],u[0])&&floatEqual(l[1],u[1])}function ZigZagModifier(){}function setPoint(l,u,d,m,g,_,E){var C=d-Math.PI/2,w=d+Math.PI/2,P=u[0]+Math.cos(d)*m*g,k=u[1]-Math.sin(d)*m*g;l.setTripleAt(P,k,P+Math.cos(C)*_,k-Math.sin(C)*_,P+Math.cos(w)*E,k-Math.sin(w)*E,l.length())}function getPerpendicularVector(l,u){var d=[u[0]-l[0],u[1]-l[1]],m=.5*-Math.PI;return[Math.cos(m)*d[0]-Math.sin(m)*d[1],Math.sin(m)*d[0]+Math.cos(m)*d[1]]}function getProjectingAngle(l,u){var d=0===u?l.length()-1:u-1,m=(u+1)%l.length(),E=getPerpendicularVector(l.v[d],l.v[m]);return Math.atan2(0,1)-Math.atan2(E[1],E[0])}function zigZagCorner(l,u,d,m,g,_,E){var C=getProjectingAngle(u,d),w=u.v[d%u._length],P=u.v[0===d?u._length-1:d-1],k=u.v[(d+1)%u._length],j=2===_?Math.sqrt(Math.pow(w[0]-P[0],2)+Math.pow(w[1]-P[1],2)):0,R=2===_?Math.sqrt(Math.pow(w[0]-k[0],2)+Math.pow(w[1]-k[1],2)):0;setPoint(l,u.v[d%u._length],C,E,m,R/(2*(g+1)),j/(2*(g+1)),_)}function zigZagSegment(l,u,d,m,g,_){for(var E=0;E<m;E+=1){var C=(E+1)/(m+1),w=2===g?Math.sqrt(Math.pow(u.points[3][0]-u.points[0][0],2)+Math.pow(u.points[3][1]-u.points[0][1],2)):0,P=u.normalAngle(C);setPoint(l,u.point(C),P,_,d,w/(2*(m+1)),w/(2*(m+1)),g),_=-_}return _}function linearOffset(l,u,d){var m=Math.atan2(u[0]-l[0],u[1]-l[1]);return[polarOffset(l,m,d),polarOffset(u,m,d)]}function offsetSegment(l,u){var d,m,g,_,E,C,w;d=(w=linearOffset(l.points[0],l.points[1],u))[0],m=w[1],g=(w=linearOffset(l.points[1],l.points[2],u))[0],_=w[1],E=(w=linearOffset(l.points[2],l.points[3],u))[0],C=w[1];var P=lineIntersection(d,m,g,_);null===P&&(P=m);var k=lineIntersection(E,C,g,_);return null===k&&(k=E),new PolynomialBezier(d,P,k,C)}function joinLines(l,u,d,m,g){var _=u.points[3],E=d.points[0];if(3===m||pointEqual(_,E))return _;if(2===m){var C=-u.tangentAngle(1),w=-d.tangentAngle(0)+Math.PI,P=lineIntersection(_,polarOffset(_,C+Math.PI/2,100),E,polarOffset(E,C+Math.PI/2,100)),k=P?pointDistance(P,_):pointDistance(_,E)/2,j=polarOffset(_,C,2*k*roundCorner);return l.setXYAt(j[0],j[1],"o",l.length()-1),j=polarOffset(E,w,2*k*roundCorner),l.setTripleAt(E[0],E[1],E[0],E[1],j[0],j[1],l.length()),E}var V=lineIntersection(pointEqual(_,u.points[2])?u.points[0]:u.points[2],_,E,pointEqual(E,d.points[1])?d.points[3]:d.points[1]);return V&&pointDistance(V,_)<g?(l.setTripleAt(V[0],V[1],V[0],V[1],V[0],V[1],l.length()),V):_}function getIntersection(l,u){var d=l.intersections(u);return d.length&&floatEqual(d[0][0],1)&&d.shift(),d.length?d[0]:null}function pruneSegmentIntersection(l,u){var d=l.slice(),m=u.slice(),g=getIntersection(l[l.length-1],u[0]);return g&&(d[l.length-1]=l[l.length-1].split(g[0])[0],m[0]=u[0].split(g[1])[1]),l.length>1&&u.length>1&&(g=getIntersection(l[0],u[u.length-1]))?[[l[0].split(g[0])[0]],[u[u.length-1].split(g[1])[1]]]:[d,m]}function pruneIntersections(l){for(var u,d=1;d<l.length;d+=1)u=pruneSegmentIntersection(l[d-1],l[d]),l[d-1]=u[0],l[d]=u[1];return l.length>1&&(u=pruneSegmentIntersection(l[l.length-1],l[0]),l[l.length-1]=u[0],l[0]=u[1]),l}function offsetSegmentSplit(l,u){var m,g,_,E,d=l.inflectionPoints();return 0===d.length?[offsetSegment(l,u)]:1===d.length||floatEqual(d[1],1)?(g=(_=l.split(d[0]))[1],[offsetSegment(m=_[0],u),offsetSegment(g,u)]):(m=(_=l.split(d[0]))[0],E=(_=_[1].split((d[1]-d[0])/(1-d[0])))[0],g=_[1],[offsetSegment(m,u),offsetSegment(E,u),offsetSegment(g,u)])}function OffsetPathModifier(){}function getFontProperties(l){for(var _,u=l.fStyle?l.fStyle.split(" "):[],d="normal",m="normal",g=u.length,E=0;E<g;E+=1)switch(_=u[E].toLowerCase(),_){case"italic":m="italic";break;case"bold":d="700";break;case"black":d="900";break;case"medium":d="500";break;case"regular":case"normal":d="400";break;case"light":case"thin":d="200"}return{style:m,weight:l.fWeight||d}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(l,u){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(l,u.c,0,null,this),this.o=PropertyFactory.getProp(l,u.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(l,u.tr,this),this.so=PropertyFactory.getProp(l,u.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(l,u.tr.eo,0,.01,this),this.data=u,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(l,u,d,m,g,_){var E=_?-1:1,C=m.s.v[0]+(1-m.s.v[0])*(1-g),w=m.s.v[1]+(1-m.s.v[1])*(1-g);l.translate(m.p.v[0]*E*g,m.p.v[1]*E*g,m.p.v[2]),u.translate(-m.a.v[0],-m.a.v[1],m.a.v[2]),u.rotate(-m.r.v*E*g),u.translate(m.a.v[0],m.a.v[1],m.a.v[2]),d.translate(-m.a.v[0],-m.a.v[1],m.a.v[2]),d.scale(_?1/C:C,_?1/w:w),d.translate(m.a.v[0],m.a.v[1],m.a.v[2])},RepeaterModifier.prototype.init=function(l,u,d,m){for(this.elem=l,this.arr=u,this.pos=d,this.elemsData=m,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(l),this.initModifierProperties(l,u[d]);d>0;)this._elements.unshift(u[d-=1]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(l){var u,d=l.length;for(u=0;u<d;u+=1)l[u]._processed=!1,"gr"===l[u].ty&&this.resetElements(l[u].it)},RepeaterModifier.prototype.cloneElements=function(l){var u=JSON.parse(JSON.stringify(l));return this.resetElements(u),u},RepeaterModifier.prototype.changeGroupRender=function(l,u){var d,m=l.length;for(d=0;d<m;d+=1)l[d]._render=u,"gr"===l[d].ty&&this.changeGroupRender(l[d].it,u)},RepeaterModifier.prototype.processShapes=function(l){var u,d,m,g,_,E=!1;if(this._mdf||l){var P,C=Math.ceil(this.c.v);if(this._groups.length<C){for(;this._groups.length<C;){var w={it:this.cloneElements(this._elements),ty:"gr"};w.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,w),this._groups.splice(0,0,w),this._currentCopies+=1}this.elem.reloadShapes(),E=!0}for(_=0,m=0;m<=this._groups.length-1;m+=1){if(this._groups[m]._render=P=_<C,this.changeGroupRender(this._groups[m].it,P),!P){var k=this.elemsData[m].it,j=k[k.length-1];0!==j.transform.op.v?(j.transform.op._mdf=!0,j.transform.op.v=0):j.transform.op._mdf=!1}_+=1}this._currentCopies=C;var R=this.o.v,U=R%1,V=R>0?Math.floor(R):Math.ceil(R),N=this.pMatrix.props,ee=this.rMatrix.props,F=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var I,O,L=0;if(R>0){for(;L<V;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),L+=1;U&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,U,!1),L+=U)}else if(R<0){for(;L>V;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),L-=1;U&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-U,!0),L-=U)}for(m=1===this.data.m?0:this._currentCopies-1,g=1===this.data.m?1:-1,_=this._currentCopies;_;){if(O=(d=(u=this.elemsData[m].it)[u.length-1].transform.mProps.v.props).length,u[u.length-1].transform.mProps._mdf=!0,u[u.length-1].transform.op._mdf=!0,u[u.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+m/(this._currentCopies-1)*(this.eo.v-this.so.v),0!==L){for((0!==m&&1===g||m!==this._currentCopies-1&&-1===g)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5],ee[6],ee[7],ee[8],ee[9],ee[10],ee[11],ee[12],ee[13],ee[14],ee[15]),this.matrix.transform(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15]),this.matrix.transform(N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],N[14],N[15]),I=0;I<O;I+=1)d[I]=this.matrix.props[I];this.matrix.reset()}else for(this.matrix.reset(),I=0;I<O;I+=1)d[I]=this.matrix.props[I];L+=1,_-=1,m+=g}}else for(_=this._currentCopies,m=0,g=1;_;)d=(u=this.elemsData[m].it)[u.length-1].transform.mProps.v.props,u[u.length-1].transform.mProps._mdf=!1,u[u.length-1].transform.op._mdf=!1,_-=1,m+=g;return E},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(l,u){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(l,u.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(l,u){var d=shapePool.newElement();d.c=l.c;var m,_,E,C,w,P,k,R,U,V,N,ee,F,g=l._length,j=0;for(m=0;m<g;m+=1)E=l.i[m],(_=l.v[m])[0]===(C=l.o[m])[0]&&_[1]===C[1]&&_[0]===E[0]&&_[1]===E[1]?0!==m&&m!==g-1||l.c?(w=0===m?l.v[g-1]:l.v[m-1],k=(P=Math.sqrt(Math.pow(_[0]-w[0],2)+Math.pow(_[1]-w[1],2)))?Math.min(P/2,u)/P:0,d.setTripleAt(R=ee=_[0]+(w[0]-_[0])*k,U=F=_[1]-(_[1]-w[1])*k,R-(R-_[0])*roundCorner,U-(U-_[1])*roundCorner,ee,F,j),j+=1,w=m===g-1?l.v[0]:l.v[m+1],k=(P=Math.sqrt(Math.pow(_[0]-w[0],2)+Math.pow(_[1]-w[1],2)))?Math.min(P/2,u)/P:0,d.setTripleAt(R=V=_[0]+(w[0]-_[0])*k,U=N=_[1]+(w[1]-_[1])*k,V,N,ee=R-(R-_[0])*roundCorner,F=U-(U-_[1])*roundCorner,j),j+=1):(d.setTripleAt(_[0],_[1],C[0],C[1],E[0],E[1],j),j+=1):(d.setTripleAt(l.v[m][0],l.v[m][1],l.o[m][0],l.o[m][1],l.i[m][0],l.i[m][1],j),j+=1);return d},RoundCornersModifier.prototype.processShapes=function(l){var u,d,g,_,C,w,m=this.shapes.length,E=this.rd.v;if(0!==E)for(d=0;d<m;d+=1){if(w=(C=this.shapes[d]).localShapeCollection,C.shape._mdf||this._mdf||l)for(w.releaseShapes(),C.shape._mdf=!0,u=C.shape.paths.shapes,_=C.shape.paths._length,g=0;g<_;g+=1)w.addShape(this.processPath(u[g],E));C.shape.paths=C.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(l){return[((this.a[0]*l+this.b[0])*l+this.c[0])*l+this.d[0],((this.a[1]*l+this.b[1])*l+this.c[1])*l+this.d[1]]},PolynomialBezier.prototype.derivative=function(l){return[(3*l*this.a[0]+2*this.b[0])*l+this.c[0],(3*l*this.a[1]+2*this.b[1])*l+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(l){var u=this.derivative(l);return Math.atan2(u[1],u[0])},PolynomialBezier.prototype.normalAngle=function(l){var u=this.derivative(l);return Math.atan2(u[0],u[1])},PolynomialBezier.prototype.inflectionPoints=function(){var l=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(l))return[];var u=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/l,d=u*u-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/l;if(d<0)return[];var m=Math.sqrt(d);return floatZero(m)?m>0&&m<1?[u]:[]:[u-m,u+m].filter(function(g){return g>0&&g<1})},PolynomialBezier.prototype.split=function(l){if(l<=0)return[singlePoint(this.points[0]),this];if(l>=1)return[this,singlePoint(this.points[this.points.length-1])];var u=lerpPoint(this.points[0],this.points[1],l),d=lerpPoint(this.points[1],this.points[2],l),m=lerpPoint(this.points[2],this.points[3],l),g=lerpPoint(u,d,l),_=lerpPoint(d,m,l),E=lerpPoint(g,_,l);return[new PolynomialBezier(this.points[0],u,g,E,!0),new PolynomialBezier(E,_,m,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var l=this.bounds();return{left:l.x.min,right:l.x.max,top:l.y.min,bottom:l.y.max,width:l.x.max-l.x.min,height:l.y.max-l.y.min,cx:(l.x.max+l.x.min)/2,cy:(l.y.max+l.y.min)/2}},PolynomialBezier.prototype.intersections=function(l,u,d){void 0===u&&(u=2),void 0===d&&(d=7);var m=[];return intersectsImpl(intersectData(this,0,1),intersectData(l,0,1),0,u,m,d),m},PolynomialBezier.shapeSegment=function(l,u){var d=(u+1)%l.length();return new PolynomialBezier(l.v[u],l.o[u],l.i[d],l.v[d],!0)},PolynomialBezier.shapeSegmentInverted=function(l,u){var d=(u+1)%l.length();return new PolynomialBezier(l.v[d],l.i[d],l.o[u],l.v[u],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(l,u){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(l,u.s,0,null,this),this.frequency=PropertyFactory.getProp(l,u.r,0,null,this),this.pointsType=PropertyFactory.getProp(l,u.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(l,u,d,m){var g=l._length,_=shapePool.newElement();if(_.c=l.c,l.c||(g-=1),0===g)return _;var E=-1,C=PolynomialBezier.shapeSegment(l,0);zigZagCorner(_,l,0,u,d,m,E);for(var w=0;w<g;w+=1)E=zigZagSegment(_,C,u,d,m,-E),C=w!==g-1||l.c?PolynomialBezier.shapeSegment(l,(w+1)%g):null,zigZagCorner(_,l,w+1,u,d,m,E);return _},ZigZagModifier.prototype.processShapes=function(l){var u,d,g,_,P,k,m=this.shapes.length,E=this.amplitude.v,C=Math.max(0,Math.round(this.frequency.v)),w=this.pointsType.v;if(0!==E)for(d=0;d<m;d+=1){if(k=(P=this.shapes[d]).localShapeCollection,P.shape._mdf||this._mdf||l)for(k.releaseShapes(),P.shape._mdf=!0,u=P.shape.paths.shapes,_=P.shape.paths._length,g=0;g<_;g+=1)k.addShape(this.processPath(u[g],E,C,w));P.shape.paths=P.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(l,u){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(l,u.a,0,null,this),this.miterLimit=PropertyFactory.getProp(l,u.ml,0,null,this),this.lineJoin=u.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(l,u,d,m){var g=shapePool.newElement();g.c=l.c;var _=l.length();l.c||(_-=1);var E,C,w,P=[];for(E=0;E<_;E+=1)w=PolynomialBezier.shapeSegment(l,E),P.push(offsetSegmentSplit(w,u));if(!l.c)for(E=_-1;E>=0;E-=1)w=PolynomialBezier.shapeSegmentInverted(l,E),P.push(offsetSegmentSplit(w,u));P=pruneIntersections(P);var k=null,j=null;for(E=0;E<P.length;E+=1){var R=P[E];for(j&&(k=joinLines(g,j,R[0],d,m)),j=R[R.length-1],C=0;C<R.length;C+=1)w=R[C],k&&pointEqual(w.points[0],k)?g.setXYAt(w.points[1][0],w.points[1][1],"o",g.length()-1):g.setTripleAt(w.points[0][0],w.points[0][1],w.points[1][0],w.points[1][1],w.points[0][0],w.points[0][1],g.length()),g.setTripleAt(w.points[3][0],w.points[3][1],w.points[3][0],w.points[3][1],w.points[2][0],w.points[2][1],g.length()),k=w.points[3]}return P.length&&joinLines(g,j,P[0][0],d,m),g},OffsetPathModifier.prototype.processShapes=function(l){var u,d,g,_,P,k,m=this.shapes.length,E=this.amount.v,C=this.miterLimit.v,w=this.lineJoin;if(0!==E)for(d=0;d<m;d+=1){if(k=(P=this.shapes[d]).localShapeCollection,P.shape._mdf||this._mdf||l)for(k.releaseShapes(),P.shape._mdf=!0,u=P.shape.paths.shapes,_=P.shape.paths._length,g=0;g<_;g+=1)k.addShape(this.processPath(u[g],E,w,C));P.shape.paths=P.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var u={w:0,size:0,shapes:[],data:{shapes:[]}},d=[];d=d.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var m=127988,j=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function U(J,ae){var B=createTag("span");B.setAttribute("aria-hidden",!0),B.style.fontFamily=ae;var H=createTag("span");H.innerText="giItT1WQy@!-/#",B.style.position="absolute",B.style.left="-10000px",B.style.top="-10000px",B.style.fontSize="300px",B.style.fontVariant="normal",B.style.fontStyle="normal",B.style.fontWeight="normal",B.style.letterSpacing="0",B.appendChild(H),document.body.appendChild(B);var me=H.offsetWidth;return H.style.fontFamily=function R(J){var B,ae=J.split(","),H=ae.length,me=[];for(B=0;B<H;B+=1)"sans-serif"!==ae[B]&&"monospace"!==ae[B]&&me.push(ae[B]);return me.join(",")}(J)+", "+ae,{node:H,w:me,parent:B}}function N(J,ae){var H,B=document.body&&ae?"svg":"canvas",me=getFontProperties(J);if("svg"===B){var he=createNS("text");he.style.fontSize="100px",he.setAttribute("font-family",J.fFamily),he.setAttribute("font-style",me.style),he.setAttribute("font-weight",me.weight),he.textContent="1",J.fClass?(he.style.fontFamily="inherit",he.setAttribute("class",J.fClass)):he.style.fontFamily=J.fFamily,ae.appendChild(he),H=he}else{var it=new OffscreenCanvas(500,500).getContext("2d");it.font=me.style+" "+me.weight+" 100px "+J.fFamily,H=it}return{measureText:function Tt(bt){return"svg"===B?(H.textContent=bt,H.getComputedTextLength()):H.measureText(bt).width}}}function X(J){var ae=0,B=J.charCodeAt(0);if(B>=55296&&B<=56319){var H=J.charCodeAt(1);H>=56320&&H<=57343&&(ae=1024*(B-55296)+H-56320+65536)}return ae}function Ce(J){var ae=X(J);return ae>=127462&&ae<=127487}var ct=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return ct.isModifier=function ie(J,ae){var B=J.toString(16)+ae.toString(16);return-1!==j.indexOf(B)},ct.isZeroWidthJoiner=function le(J){return 8205===J},ct.isFlagEmoji=function tt(J){return Ce(J.substr(0,2))&&Ce(J.substr(2,2))},ct.isRegionalCode=Ce,ct.isCombinedCharacter=function $e(J){return-1!==d.indexOf(J)},ct.isRegionalFlag=function Le(J,ae){var B=X(J.substr(ae,2));if(B!==m)return!1;var H=0;for(ae+=2;H<5;){if((B=X(J.substr(ae,2)))<917601||B>917626)return!1;H+=1,ae+=2}return 917631===X(J.substr(ae,2))},ct.isVariationSelector=function ue(J){return 65039===J},ct.BLACK_FLAG_CODE_POINT=m,ct.prototype={addChars:function F(J){if(J){this.chars||(this.chars=[]);var ae,H,he,B=J.length,me=this.chars.length;for(ae=0;ae<B;ae+=1){for(H=0,he=!1;H<me;)this.chars[H].style===J[ae].style&&this.chars[H].fFamily===J[ae].fFamily&&this.chars[H].ch===J[ae].ch&&(he=!0),H+=1;he||(this.chars.push(J[ae]),me+=1)}}},addFonts:function ee(J,ae){if(J){if(this.chars)return this.isLoaded=!0,void(this.fonts=J.list);if(!document.body)return this.isLoaded=!0,J.list.forEach(function(_n){_n.helper=N(_n),_n.cache={}}),void(this.fonts=J.list);var H,B=J.list,me=B.length,he=me;for(H=0;H<me;H+=1){var Tt,bt,it=!0;if(B[H].loaded=!1,B[H].monoCase=U(B[H].fFamily,"monospace"),B[H].sansCase=U(B[H].fFamily,"sans-serif"),B[H].fPath){if("p"===B[H].fOrigin||3===B[H].origin){if((Tt=document.querySelectorAll('style[f-forigin="p"][f-family="'+B[H].fFamily+'"], style[f-origin="3"][f-family="'+B[H].fFamily+'"]')).length>0&&(it=!1),it){var mn=createTag("style");mn.setAttribute("f-forigin",B[H].fOrigin),mn.setAttribute("f-origin",B[H].origin),mn.setAttribute("f-family",B[H].fFamily),mn.type="text/css",mn.innerText="@font-face {font-family: "+B[H].fFamily+"; font-style: normal; src: url('"+B[H].fPath+"');}",ae.appendChild(mn)}}else if("g"===B[H].fOrigin||1===B[H].origin){for(Tt=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),bt=0;bt<Tt.length;bt+=1)-1!==Tt[bt].href.indexOf(B[H].fPath)&&(it=!1);if(it){var gn=createTag("link");gn.setAttribute("f-forigin",B[H].fOrigin),gn.setAttribute("f-origin",B[H].origin),gn.type="text/css",gn.rel="stylesheet",gn.href=B[H].fPath,document.body.appendChild(gn)}}else if("t"===B[H].fOrigin||2===B[H].origin){for(Tt=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),bt=0;bt<Tt.length;bt+=1)B[H].fPath===Tt[bt].src&&(it=!1);if(it){var ln=createTag("link");ln.setAttribute("f-forigin",B[H].fOrigin),ln.setAttribute("f-origin",B[H].origin),ln.setAttribute("rel","stylesheet"),ln.setAttribute("href",B[H].fPath),ae.appendChild(ln)}}}else B[H].loaded=!0,he-=1;B[H].helper=N(B[H],ae),B[H].cache={},this.fonts.push(B[H])}0===he?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function L(J,ae,B){for(var H=0,me=this.chars.length;H<me;){if(this.chars[H].ch===J&&this.chars[H].style===ae&&this.chars[H].fFamily===B)return this.chars[H];H+=1}return("string"==typeof J&&13!==J.charCodeAt(0)||!J)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",J,ae,B)),u},getFontByName:function O(J){for(var ae=0,B=this.fonts.length;ae<B;){if(this.fonts[ae].fName===J)return this.fonts[ae];ae+=1}return this.fonts[0]},measureText:function I(J,ae,B){var H=this.getFontByName(ae),me=J;if(!H.cache[me]){var he=H.helper;if(" "===J){var it=he.measureText("|"+J+"|"),Tt=he.measureText("||");H.cache[me]=(it-Tt)/100}else H.cache[me]=he.measureText(J)/100}return H.cache[me]*B},checkLoadedFonts:function V(){var J,ae=this.fonts.length,me=ae;for(J=0;J<ae;J+=1)this.fonts[J].loaded?me-=1:"n"===this.fonts[J].fOrigin||0===this.fonts[J].origin?this.fonts[J].loaded=!0:((this.fonts[J].monoCase.node.offsetWidth!==this.fonts[J].monoCase.w||this.fonts[J].sansCase.node.offsetWidth!==this.fonts[J].sansCase.w)&&(me-=1,this.fonts[J].loaded=!0),this.fonts[J].loaded&&(this.fonts[J].sansCase.parent.parentNode.removeChild(this.fonts[J].sansCase.parent),this.fonts[J].monoCase.parent.parentNode.removeChild(this.fonts[J].monoCase.parent)));0!==me&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function nt(){this.isLoaded=!0}},ct}();function SlotManager(l){this.animationData=l}function slotFactory(l){return new SlotManager(l)}function RenderableElement(){}SlotManager.prototype.getProp=function(l){return this.animationData.slots&&this.animationData.slots[l.sid]?Object.assign(l,this.animationData.slots[l.sid].p):l},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(u){-1===this.renderableComponents.indexOf(u)&&this.renderableComponents.push(u)},removeRenderableComponent:function(u){-1!==this.renderableComponents.indexOf(u)&&this.renderableComponents.splice(this.renderableComponents.indexOf(u),1)},prepareRenderableFrame:function(u){this.checkLayerLimits(u)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(u){this.data.ip-this.data.st<=u&&this.data.op-this.data.st>u?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var u,d=this.renderableComponents.length;for(u=0;u<d;u+=1)this.renderableComponents[u].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var l={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(u){return l[u]||""}}();function SliderEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,0,0,d)}function AngleEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,0,0,d)}function ColorEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,1,0,d)}function PointEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,1,0,d)}function LayerIndexEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,0,0,d)}function MaskIndexEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,0,0,d)}function CheckboxEffect(l,u,d){this.p=PropertyFactory.getProp(u,l.v,0,0,d)}function NoValueEffect(){this.p={}}function EffectsManager(l,u){var d=l.ef||[];this.effectElements=[];var m,_,g=d.length;for(m=0;m<g;m+=1)_=new GroupEffect(d[m],u),this.effectElements.push(_)}function GroupEffect(l,u){this.init(l,u)}function BaseElement(){}function FrameElement(){}function FootageElement(l,u,d){this.initFrame(),this.initRenderable(),this.assetData=u.getAssetData(l.refId),this.footageData=u.imageLoader.getAsset(this.assetData),this.initBaseData(l,u,d)}function AudioElement(l,u,d){this.initFrame(),this.initRenderable(),this.assetData=u.getAssetData(l.refId),this.initBaseData(l,u,d),this._isPlaying=!1,this._canPlay=!1;var m=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(m),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=l.tm?PropertyFactory.getProp(this,l.tm,0,u.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,l.au&&l.au.lv?l.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(l,u){this.data=l,this.effectElements=[],this.initDynamicPropertyContainer(u);var d,g,m=this.data.ef.length,_=this.data.ef;for(d=0;d<m;d+=1){switch(g=null,_[d].ty){case 0:g=new SliderEffect(_[d],u,this);break;case 1:g=new AngleEffect(_[d],u,this);break;case 2:g=new ColorEffect(_[d],u,this);break;case 3:g=new PointEffect(_[d],u,this);break;case 4:case 7:g=new CheckboxEffect(_[d],u,this);break;case 10:g=new LayerIndexEffect(_[d],u,this);break;case 11:g=new MaskIndexEffect(_[d],u,this);break;case 5:g=new EffectsManager(_[d],u,this);break;default:g=new NoValueEffect(_[d],u,this)}g&&this.effectElements.push(g)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var u=0,d=this.data.masksProperties.length;u<d;){if("n"!==this.data.masksProperties[u].mode&&!1!==this.data.masksProperties[u].cl)return!0;u+=1}return!1},initExpressions:function(){var u=getExpressionInterfaces();if(u){var d=u("layer"),m=u("effects"),g=u("shape"),_=u("text"),E=u("comp");this.layerInterface=d(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var C=m.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(C),0===this.data.ty||this.data.xt?this.compInterface=E(this):4===this.data.ty?(this.layerInterface.shapeInterface=g(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=_(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var u=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=u},initBaseData:function(u,d,m){this.globalData=d,this.comp=m,this.data=u,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(u,d){var m,g=this.dynamicProperties.length;for(m=0;m<g;m+=1)(d||this._isParent&&"transform"===this.dynamicProperties[m].propType)&&(this.dynamicProperties[m].getValue(),this.dynamicProperties[m]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(u){-1===this.dynamicProperties.indexOf(u)&&this.dynamicProperties.push(u)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var l=getExpressionInterfaces();if(l){var u=l("footage");this.layerInterface=u(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(l){this.prepareRenderableFrame(l,!0),this.prepareProperties(l,!0),this._currentTime=this.tm._placeholder?l/this.data.sr:this.tm.v,this._volume=this.lv.v[0];var d=this._volume*this._volumeMultiplier;this._previousVolume!==d&&(this._previousVolume=d,this.audio.volume(d))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(l){this.audio.rate(l)},AudioElement.prototype.volume=function(l){this._volumeMultiplier=l,this._previousVolume=l*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(l){var u,m,d=this.layers.length;for(this.completeLayers=!0,u=d-1;u>=0;u-=1)this.elements[u]||(m=this.layers[u]).ip-m.st<=l-this.layers[u].st&&m.op-m.st>l-this.layers[u].st&&this.buildItem(u),this.completeLayers=!!this.elements[u]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(l){switch(l.ty){case 2:return this.createImage(l);case 0:return this.createComp(l);case 1:return this.createSolid(l);case 3:default:return this.createNull(l);case 4:return this.createShape(l);case 5:return this.createText(l);case 6:return this.createAudio(l);case 13:return this.createCamera(l);case 15:return this.createFootage(l)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(l){return new AudioElement(l,this.globalData,this)},BaseRenderer.prototype.createFootage=function(l){return new FootageElement(l,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var l,u=this.layers.length;for(l=0;l<u;l+=1)this.buildItem(l);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(l){this.completeLayers=!1;var u,m,d=l.length,g=this.layers.length;for(u=0;u<d;u+=1)for(m=0;m<g;){if(this.layers[m].id===l[u].id){this.layers[m]=l[u];break}m+=1}},BaseRenderer.prototype.setProjectInterface=function(l){this.globalData.projectInterface=l},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(l,u,d){for(var m=this.elements,g=this.layers,_=0,E=g.length;_<E;)g[_].ind==u&&(m[_]&&!0!==m[_]?(d.push(m[_]),m[_].setAsParent(),void 0!==g[_].parent?this.buildElementParenting(l,g[_].parent,d):l.setHierarchy(d)):(this.buildItem(_),this.addPendingElement(l))),_+=1},BaseRenderer.prototype.addPendingElement=function(l){this.pendingElements.push(l)},BaseRenderer.prototype.searchExtraCompositions=function(l){var u,d=l.length;for(u=0;u<d;u+=1)if(l[u].xt){var m=this.createComp(l[u]);m.initExpressions(),this.globalData.projectInterface.registerComposition(m)}},BaseRenderer.prototype.getElementById=function(l){var u,d=this.elements.length;for(u=0;u<d;u+=1)if(this.elements[u].data.ind===l)return this.elements[u];return null},BaseRenderer.prototype.getElementByPath=function(l){var d,u=l.shift();if("number"==typeof u)d=this.elements[u];else{var m,g=this.elements.length;for(m=0;m<g;m+=1)if(this.elements[m].data.nm===u){d=this.elements[m];break}}return 0===l.length?d:d.getElementByPath(l)},BaseRenderer.prototype.setupGlobalData=function(l,u){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(l),this.globalData.fontManager.addChars(l.chars),this.globalData.fontManager.addFonts(l.fonts,u),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=l.fr,this.globalData.nm=l.nm,this.globalData.compSize={w:l.w,h:l.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(l,u,d){this.data=l,this.element=u,this.globalData=d,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var g,m=this.globalData.defs,_=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(_),this.solidPath="";var E,k,j,U,V,N,ee,C=this.masksProperties,w=0,P=[],R=createElementID(),F="clipPath",L="clip-path";for(g=0;g<_;g+=1)if(("a"!==C[g].mode&&"n"!==C[g].mode||C[g].inv||100!==C[g].o.k||C[g].o.x)&&(F="mask",L="mask"),"s"!==C[g].mode&&"i"!==C[g].mode||0!==w?U=null:((U=createNS("rect")).setAttribute("fill","#ffffff"),U.setAttribute("width",this.element.comp.data.w||0),U.setAttribute("height",this.element.comp.data.h||0),P.push(U)),E=createNS("path"),"n"===C[g].mode)this.viewData[g]={op:PropertyFactory.getProp(this.element,C[g].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,C[g],3),elem:E,lastPath:""},m.appendChild(E);else{var I;if(w+=1,E.setAttribute("fill","s"===C[g].mode?"#000000":"#ffffff"),E.setAttribute("clip-rule","nonzero"),0!==C[g].x.k?(F="mask",L="mask",ee=PropertyFactory.getProp(this.element,C[g].x,0,null,this.element),I=createElementID(),(V=createNS("filter")).setAttribute("id",I),(N=createNS("feMorphology")).setAttribute("operator","erode"),N.setAttribute("in","SourceGraphic"),N.setAttribute("radius","0"),V.appendChild(N),m.appendChild(V),E.setAttribute("stroke","s"===C[g].mode?"#000000":"#ffffff")):(N=null,ee=null),this.storedData[g]={elem:E,x:ee,expan:N,lastPath:"",lastOperator:"",filterId:I,lastRadius:0},"i"===C[g].mode){j=P.length;var O=createNS("g");for(k=0;k<j;k+=1)O.appendChild(P[k]);var X=createNS("mask");X.setAttribute("mask-type","alpha"),X.setAttribute("id",R+"_"+w),X.appendChild(E),m.appendChild(X),O.setAttribute("mask","url("+getLocationHref()+"#"+R+"_"+w+")"),P.length=0,P.push(O)}else P.push(E);C[g].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[g]={elem:E,lastPath:"",op:PropertyFactory.getProp(this.element,C[g].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,C[g],3),invRect:U},this.viewData[g].prop.k||this.drawPath(C[g],this.viewData[g].prop.v,this.viewData[g])}for(this.maskElement=createNS(F),_=P.length,g=0;g<_;g+=1)this.maskElement.appendChild(P[g]);w>0&&(this.maskElement.setAttribute("id",R),this.element.maskedElement.setAttribute(L,"url("+getLocationHref()+"#"+R+")"),m.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var u=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:u,localMat:u,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var d=this.finalTransform.mat,m=0,g=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;m<g;){if(this.hierarchy[m].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}m+=1}if(this.finalTransform._matMdf)for(d.cloneFromProps(this.finalTransform.mProp.v.props),m=0;m<g;m+=1)d.multiply(this.hierarchy[m].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var u=0,d=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;u<d;)this.localTransforms[u]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[u]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),u+=1;if(this.finalTransform._localMatMdf){var m=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(m),u=1;u<d;u+=1)m.multiply(this.localTransforms[u].matrix);m.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var _=this.finalTransform.localOpacity;for(u=0;u<d;u+=1)_*=.01*this.localTransforms[u].opacity;this.finalTransform.localOpacity=_}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var u=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(u.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var d=0,m=u.length;for(d=0;d<m;d+=1)this.localTransforms.push(u[d])}}},globalToLocal:function(u){var d=[];d.push(this.finalTransform);for(var m=!0,g=this.comp;m;)g.finalTransform?(g.data.hasMask&&d.splice(0,0,g.finalTransform),g=g.comp):m=!1;var _,C,E=d.length;for(_=0;_<E;_+=1)C=d[_].mat.applyToPointArray(0,0,0),u=[u[0]-C[0],u[1]-C[1],0];return u},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(l){return this.viewData[l].prop},MaskElement.prototype.renderFrame=function(l){var d,u=this.element.finalTransform.mat,m=this.masksProperties.length;for(d=0;d<m;d+=1)if((this.viewData[d].prop._mdf||l)&&this.drawPath(this.masksProperties[d],this.viewData[d].prop.v,this.viewData[d]),(this.viewData[d].op._mdf||l)&&this.viewData[d].elem.setAttribute("fill-opacity",this.viewData[d].op.v),"n"!==this.masksProperties[d].mode&&(this.viewData[d].invRect&&(this.element.finalTransform.mProp._mdf||l)&&this.viewData[d].invRect.setAttribute("transform",u.getInverseMatrix().to2dCSS()),this.storedData[d].x&&(this.storedData[d].x._mdf||l))){var g=this.storedData[d].expan;this.storedData[d].x.v<0?("erode"!==this.storedData[d].lastOperator&&(this.storedData[d].lastOperator="erode",this.storedData[d].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[d].filterId+")")),g.setAttribute("radius",-this.storedData[d].x.v)):("dilate"!==this.storedData[d].lastOperator&&(this.storedData[d].lastOperator="dilate",this.storedData[d].elem.setAttribute("filter",null)),this.storedData[d].elem.setAttribute("stroke-width",2*this.storedData[d].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var l="M0,0 ";return l+=" h"+this.globalData.compSize.w,l+=" v"+this.globalData.compSize.h,(l+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(l,u,d){var g,_,m=" M"+u.v[0][0]+","+u.v[0][1];for(_=u._length,g=1;g<_;g+=1)m+=" C"+u.o[g-1][0]+","+u.o[g-1][1]+" "+u.i[g][0]+","+u.i[g][1]+" "+u.v[g][0]+","+u.v[g][1];if(u.c&&_>1&&(m+=" C"+u.o[g-1][0]+","+u.o[g-1][1]+" "+u.i[0][0]+","+u.i[0][1]+" "+u.v[0][0]+","+u.v[0][1]),d.lastPath!==m){var E="";d.elem&&(u.c&&(E=l.inv?this.solidPath+m:m),d.elem.setAttribute("d",E)),d.lastPath=m}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var l={createFilter:function u(m,g){var _=createNS("filter");return _.setAttribute("id",m),!0!==g&&(_.setAttribute("filterUnits","objectBoundingBox"),_.setAttribute("x","0%"),_.setAttribute("y","0%"),_.setAttribute("width","100%"),_.setAttribute("height","100%")),_},createAlphaToLuminanceFilter:function d(){var m=createNS("feColorMatrix");return m.setAttribute("type","matrix"),m.setAttribute("color-interpolation-filters","sRGB"),m.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),m}};return l}(),featureSupport=function(){var l={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(l.maskType=!1),/firefox/i.test(navigator.userAgent)&&(l.svgLumaHidden=!1),l}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(l){var u,C,d="SourceGraphic",m=l.data.ef?l.data.ef.length:0,g=createElementID(),_=filtersFactory.createFilter(g,!0),E=0;for(this.filters=[],u=0;u<m;u+=1){C=null;var w=l.data.ef[u].ty;registeredEffects$1[w]&&(C=new(0,registeredEffects$1[w].effect)(_,l.effectsManager.effectElements[u],l,idPrefix+E,d),d=idPrefix+E,registeredEffects$1[w].countsAsEffect&&(E+=1)),C&&this.filters.push(C)}E&&(l.globalData.defs.appendChild(_),l.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+g+")")),this.filters.length&&l.addRenderableComponent(this)}function registerEffect$1(l,u,d){registeredEffects$1[l]={effect:u,countsAsEffect:d}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(l,u,d){this.assetData=u.getAssetData(l.refId),this.assetData&&this.assetData.sid&&(this.assetData=u.slotManager.getProp(this.assetData)),this.initElement(l,u,d),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(l,u){this.elem=l,this.pos=u}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(l){var u,d=this.filters.length;for(u=0;u<d;u+=1)this.filters[u].renderFrame(l)},SVGEffects.prototype.getEffects=function(l){var u,d=this.filters.length,m=[];for(u=0;u<d;u+=1)this.filters[u].type===l&&m.push(this.filters[u]);return m},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var u=null;if(this.data.td){this.matteMasks={};var d=createNS("g");d.setAttribute("id",this.layerId),d.appendChild(this.layerElement),u=d,this.globalData.defs.appendChild(d)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),u=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var m=createNS("clipPath"),g=createNS("path");g.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var _=createElementID();if(m.setAttribute("id",_),m.appendChild(g),this.globalData.defs.appendChild(m),this.checkMasks()){var E=createNS("g");E.setAttribute("clip-path","url("+getLocationHref()+"#"+_+")"),E.appendChild(this.layerElement),this.transformedElement=E,u?u.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+_+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(u){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[u]){var m,g,_,E,d=this.layerId+"_"+u;if(1===u||3===u){var C=createNS("mask");C.setAttribute("id",d),C.setAttribute("mask-type",3===u?"luminance":"alpha"),(_=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),C.appendChild(_),this.globalData.defs.appendChild(C),!featureSupport.maskType&&1===u&&(C.setAttribute("mask-type","luminance"),m=createElementID(),g=filtersFactory.createFilter(m),this.globalData.defs.appendChild(g),g.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(E=createNS("g")).appendChild(_),C.appendChild(E),E.setAttribute("filter","url("+getLocationHref()+"#"+m+")"))}else if(2===u){var w=createNS("mask");w.setAttribute("id",d),w.setAttribute("mask-type","alpha");var P=createNS("g");w.appendChild(P),m=createElementID(),g=filtersFactory.createFilter(m);var k=createNS("feComponentTransfer");k.setAttribute("in","SourceGraphic"),g.appendChild(k);var j=createNS("feFuncA");j.setAttribute("type","table"),j.setAttribute("tableValues","1.0 0.0"),k.appendChild(j),this.globalData.defs.appendChild(g);var R=createNS("rect");R.setAttribute("width",this.comp.data.w),R.setAttribute("height",this.comp.data.h),R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("fill","#ffffff"),R.setAttribute("opacity","0"),P.setAttribute("filter","url("+getLocationHref()+"#"+m+")"),P.appendChild(R),(_=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),P.appendChild(_),featureSupport.maskType||(w.setAttribute("mask-type","luminance"),g.appendChild(filtersFactory.createAlphaToLuminanceFilter()),E=createNS("g"),P.appendChild(R),E.appendChild(this.layerElement),P.appendChild(E)),this.globalData.defs.appendChild(w)}this.matteMasks[u]=d}return this.matteMasks[u]},setMatte:function(u){!this.matteElement||this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+u+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(u){this.hierarchy=u},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(d,m,g){this.initFrame(),this.initBaseData(d,m,g),this.initTransform(d,m,g),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(d){this._mdf=!1,this.prepareRenderableFrame(d),this.prepareProperties(d,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var l=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",l),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(u){var d,m=this.shapeModifiers.length;for(d=0;d<m;d+=1)this.shapeModifiers[d].addShape(u)},isShapeInAnimatedModifiers:function(u){for(var m=this.shapeModifiers.length;0<m;)if(this.shapeModifiers[0].isAnimatedWithShape(u))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var u,d=this.shapes.length;for(u=0;u<d;u+=1)this.shapes[u].sh.reset();for(u=(d=this.shapeModifiers.length)-1;u>=0&&!this.shapeModifiers[u].processShapes(this._isFirstFrame);u-=1);}},searchProcessedElement:function(u){for(var d=this.processedElements,m=0,g=d.length;m<g;){if(d[m].elem===u)return d[m].pos;m+=1}return 0},addProcessedElement:function(u,d){for(var m=this.processedElements,g=m.length;g;)if(m[g-=1].elem===u)return void(m[g].pos=d);m.push(new ProcessedElement(u,d))},prepareFrame:function(u){this.prepareRenderableFrame(u),this.prepareProperties(u,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(l,u,d){this.caches=[],this.styles=[],this.transformers=l,this.lStr="",this.sh=d,this.lvl=u,this._isAnimated=!!d.k;for(var m=0,g=l.length;m<g;){if(l[m].mProps.dynamicProperties.length){this._isAnimated=!0;break}m+=1}}function SVGStyleData(l,u){this.data=l,this.type=l.ty,this.d="",this.lvl=u,this._mdf=!1,this.closed=!0===l.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(l,u,d,m){this.elem=l,this.frameId=-1,this.dataProps=createSizedArray(u.length),this.renderer=d,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",u.length?u.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(m);var g,E,_=u.length||0;for(g=0;g<_;g+=1)E=PropertyFactory.getProp(l,u[g].v,0,0,this),this.k=E.k||this.k,this.dataProps[g]={n:u[g].n,p:E};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(l,u,d){this.initDynamicPropertyContainer(l),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(l,u.o,0,.01,this),this.w=PropertyFactory.getProp(l,u.w,0,null,this),this.d=new DashProperty(l,u.d||{},"svg",this),this.c=PropertyFactory.getProp(l,u.c,1,255,this),this.style=d,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(l,u,d){this.initDynamicPropertyContainer(l),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(l,u.o,0,.01,this),this.c=PropertyFactory.getProp(l,u.c,1,255,this),this.style=d}function SVGNoStyleData(l,u,d){this.initDynamicPropertyContainer(l),this.getValue=this.iterateDynamicProperties,this.style=d}function GradientProperty(l,u,d){this.data=u,this.c=createTypedArray("uint8c",4*u.p);var m=u.k.k[0].s?u.k.k[0].s.length-4*u.p:u.k.k.length-4*u.p;this.o=createTypedArray("float32",m),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=m,this.initDynamicPropertyContainer(d),this.prop=PropertyFactory.getProp(l,u.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(l,u,d){this.initDynamicPropertyContainer(l),this.getValue=this.iterateDynamicProperties,this.initGradientData(l,u,d)}function SVGGradientStrokeStyleData(l,u,d){this.initDynamicPropertyContainer(l),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(l,u.w,0,null,this),this.d=new DashProperty(l,u.d||{},"svg",this),this.initGradientData(l,u,d),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(l,u,d){this.transform={mProps:l,op:u,container:d},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(l){if((this.elem.globalData.frameId!==this.frameId||l)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||l,this._mdf)){var u=0,d=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),u=0;u<d;u+=1)"o"!==this.dataProps[u].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[u].p.v:this.dashArray[u]=this.dataProps[u].p.v:this.dashoffset[0]=this.dataProps[u].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(l,u){for(var d=0,m=this.o.length/2;d<m;){if(Math.abs(l[4*d]-l[4*u+2*d])>.01)return!1;d+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var l=0,u=this.data.k.k.length;l<u;){if(!this.comparePoints(this.data.k.k[l].s,this.data.p))return!1;l+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(l){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||l){var u,m,g,d=4*this.data.p;for(u=0;u<d;u+=1)m=u%4==0?100:255,g=Math.round(this.prop.v[u]*m),this.c[u]!==g&&(this.c[u]=g,this._cmdf=!l);if(this.o.length)for(d=this.prop.v.length,u=4*this.data.p;u<d;u+=1)m=u%2==0?100:1,g=u%2==0?Math.round(100*this.prop.v[u]):this.prop.v[u],this.o[u-4*this.data.p]!==g&&(this.o[u-4*this.data.p]=g,this._omdf=!l);this._mdf=!l}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(l,u,d){this.o=PropertyFactory.getProp(l,u.o,0,.01,this),this.s=PropertyFactory.getProp(l,u.s,1,null,this),this.e=PropertyFactory.getProp(l,u.e,1,null,this),this.h=PropertyFactory.getProp(l,u.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(l,u.a||{k:0},0,degToRads,this),this.g=new GradientProperty(l,u.g,this),this.style=d,this.stops=[],this.setGradientData(d.pElem,u),this.setGradientOpacity(u,d),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(l,u){var d=createElementID(),m=createNS(1===u.t?"linearGradient":"radialGradient");m.setAttribute("id",d),m.setAttribute("spreadMethod","pad"),m.setAttribute("gradientUnits","userSpaceOnUse");var _,E,C,g=[];for(C=4*u.g.p,E=0;E<C;E+=4)_=createNS("stop"),m.appendChild(_),g.push(_);l.setAttribute("gf"===u.ty?"fill":"stroke","url("+getLocationHref()+"#"+d+")"),this.gf=m,this.cst=g},SVGGradientFillStyleData.prototype.setGradientOpacity=function(l,u){if(this.g._hasOpacity&&!this.g._collapsable){var d,m,g,_=createNS("mask"),E=createNS("path");_.appendChild(E);var C=createElementID(),w=createElementID();_.setAttribute("id",w);var P=createNS(1===l.t?"linearGradient":"radialGradient");P.setAttribute("id",C),P.setAttribute("spreadMethod","pad"),P.setAttribute("gradientUnits","userSpaceOnUse"),g=l.g.k.k[0].s?l.g.k.k[0].s.length:l.g.k.k.length;var k=this.stops;for(m=4*l.g.p;m<g;m+=2)(d=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),P.appendChild(d),k.push(d);E.setAttribute("gf"===l.ty?"fill":"stroke","url("+getLocationHref()+"#"+C+")"),"gs"===l.ty&&(E.setAttribute("stroke-linecap",lineCapEnum[l.lc||2]),E.setAttribute("stroke-linejoin",lineJoinEnum[l.lj||2]),1===l.lj&&E.setAttribute("stroke-miterlimit",l.ml)),this.of=P,this.ms=_,this.ost=k,this.maskId=w,u.msElem=E}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(u,d,m,g){if(0===d)return"";var w,_=u.o,E=u.i,C=u.v,P=" M"+g.applyToPointStringified(C[0][0],C[0][1]);for(w=1;w<d;w+=1)P+=" C"+g.applyToPointStringified(_[w-1][0],_[w-1][1])+" "+g.applyToPointStringified(E[w][0],E[w][1])+" "+g.applyToPointStringified(C[w][0],C[w][1]);return m&&d&&(P+=" C"+g.applyToPointStringified(_[w-1][0],_[w-1][1])+" "+g.applyToPointStringified(E[0][0],E[0][1])+" "+g.applyToPointStringified(C[0][0],C[0][1]),P+="z"),P},SVGElementsRenderer=function(){var l=new Matrix,u=new Matrix;function g(j,R,U){(U||R.transform.op._mdf)&&R.transform.container.setAttribute("opacity",R.transform.op.v),(U||R.transform.mProps._mdf)&&R.transform.container.setAttribute("transform",R.transform.mProps.v.to2dCSS())}function _(){}function E(j,R,U){var V,N,ee,F,L,I,ie,le,ue,Ce,O=R.styles.length,X=R.lvl;for(I=0;I<O;I+=1){if(F=R.sh._mdf||U,R.styles[I].lvl<X){for(le=u.reset(),ue=X-R.styles[I].lvl,Ce=R.transformers.length-1;!F&&ue>0;)F=R.transformers[Ce].mProps._mdf||F,ue-=1,Ce-=1;if(F)for(ue=X-R.styles[I].lvl,Ce=R.transformers.length-1;ue>0;)le.multiply(R.transformers[Ce].mProps.v),ue-=1,Ce-=1}else le=l;if(N=(ie=R.sh.paths)._length,F){for(ee="",V=0;V<N;V+=1)(L=ie.shapes[V])&&L._length&&(ee+=buildShapeString(L,L._length,L.c,le));R.caches[I]=ee}else ee=R.caches[I];R.styles[I].d+=!0===j.hd?"":ee,R.styles[I]._mdf=F||R.styles[I]._mdf}}function C(j,R,U){var V=R.style;(R.c._mdf||U)&&V.pElem.setAttribute("fill","rgb("+bmFloor(R.c.v[0])+","+bmFloor(R.c.v[1])+","+bmFloor(R.c.v[2])+")"),(R.o._mdf||U)&&V.pElem.setAttribute("fill-opacity",R.o.v)}function w(j,R,U){P(j,R,U),k(0,R,U)}function P(j,R,U){var X,ie,le,ue,$e,V=R.gf,N=R.g._hasOpacity,ee=R.s.v,F=R.e.v;if((R.o._mdf||U)&&R.style.pElem.setAttribute("gf"===j.ty?"fill-opacity":"stroke-opacity",R.o.v),R.s._mdf||U){var I=1===j.t?"x1":"cx",O="x1"===I?"y1":"cy";V.setAttribute(I,ee[0]),V.setAttribute(O,ee[1]),N&&!R.g._collapsable&&(R.of.setAttribute(I,ee[0]),R.of.setAttribute(O,ee[1]))}if(R.g._cmdf||U){var Ce=R.g.c;for(le=(X=R.cst).length,ie=0;ie<le;ie+=1)(ue=X[ie]).setAttribute("offset",Ce[4*ie]+"%"),ue.setAttribute("stop-color","rgb("+Ce[4*ie+1]+","+Ce[4*ie+2]+","+Ce[4*ie+3]+")")}if(N&&(R.g._omdf||U)){var tt=R.g.o;for(le=(X=R.g._collapsable?R.cst:R.ost).length,ie=0;ie<le;ie+=1)ue=X[ie],R.g._collapsable||ue.setAttribute("offset",tt[2*ie]+"%"),ue.setAttribute("stop-opacity",tt[2*ie+1])}if(1===j.t)(R.e._mdf||U)&&(V.setAttribute("x2",F[0]),V.setAttribute("y2",F[1]),N&&!R.g._collapsable&&(R.of.setAttribute("x2",F[0]),R.of.setAttribute("y2",F[1])));else if((R.s._mdf||R.e._mdf||U)&&($e=Math.sqrt(Math.pow(ee[0]-F[0],2)+Math.pow(ee[1]-F[1],2)),V.setAttribute("r",$e),N&&!R.g._collapsable&&R.of.setAttribute("r",$e)),R.e._mdf||R.h._mdf||R.a._mdf||U){$e||($e=Math.sqrt(Math.pow(ee[0]-F[0],2)+Math.pow(ee[1]-F[1],2)));var Le=Math.atan2(F[1]-ee[1],F[0]-ee[0]),nt=R.h.v;nt>=1?nt=.99:nt<=-1&&(nt=-.99);var ct=$e*nt,Pe=Math.cos(Le+R.a.v)*ct+ee[0],J=Math.sin(Le+R.a.v)*ct+ee[1];V.setAttribute("fx",Pe),V.setAttribute("fy",J),N&&!R.g._collapsable&&(R.of.setAttribute("fx",Pe),R.of.setAttribute("fy",J))}}function k(j,R,U){var V=R.style,N=R.d;N&&(N._mdf||U)&&N.dashStr&&(V.pElem.setAttribute("stroke-dasharray",N.dashStr),V.pElem.setAttribute("stroke-dashoffset",N.dashoffset[0])),R.c&&(R.c._mdf||U)&&V.pElem.setAttribute("stroke","rgb("+bmFloor(R.c.v[0])+","+bmFloor(R.c.v[1])+","+bmFloor(R.c.v[2])+")"),(R.o._mdf||U)&&V.pElem.setAttribute("stroke-opacity",R.o.v),(R.w._mdf||U)&&(V.pElem.setAttribute("stroke-width",R.w.v),V.msElem&&V.msElem.setAttribute("stroke-width",R.w.v))}return{createRenderFunction:function m(j){switch(j.ty){case"fl":return C;case"gf":return P;case"gs":return w;case"st":return k;case"sh":case"el":case"rc":case"sr":return E;case"tr":return g;case"no":return _;default:return null}}}}();function SVGShapeElement(l,u,d){this.shapes=[],this.shapesData=l.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(l,u,d),this.prevViewData=[]}function LetterProps(l,u,d,m,g,_){this.o=l,this.sw=u,this.sc=d,this.fc=m,this.m=g,this.p=_,this._mdf={o:!0,sw:!!u,sc:!!d,fc:!!m,m:!0,p:!0}}function TextProperty(l,u){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,u.d&&u.d.sid&&(u.d=l.globalData.slotManager.getProp(u.d)),this.data=u,this.elem=l,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var l,d,m,_,u=this.shapes.length,g=this.stylesList.length,E=[],C=!1;for(m=0;m<g;m+=1){for(_=this.stylesList[m],C=!1,E.length=0,l=0;l<u;l+=1)-1!==(d=this.shapes[l]).styles.indexOf(_)&&(E.push(d),C=d._isAnimated||C);E.length>1&&C&&this.setShapesAsAnimated(E)}},SVGShapeElement.prototype.setShapesAsAnimated=function(l){var u,d=l.length;for(u=0;u<d;u+=1)l[u].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(l,u){var d,m=new SVGStyleData(l,u),g=m.pElem;return"st"===l.ty?d=new SVGStrokeStyleData(this,l,m):"fl"===l.ty?d=new SVGFillStyleData(this,l,m):"gf"===l.ty||"gs"===l.ty?(d=new("gf"===l.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,l,m),this.globalData.defs.appendChild(d.gf),d.maskId&&(this.globalData.defs.appendChild(d.ms),this.globalData.defs.appendChild(d.of),g.setAttribute("mask","url("+getLocationHref()+"#"+d.maskId+")"))):"no"===l.ty&&(d=new SVGNoStyleData(this,l,m)),("st"===l.ty||"gs"===l.ty)&&(g.setAttribute("stroke-linecap",lineCapEnum[l.lc||2]),g.setAttribute("stroke-linejoin",lineJoinEnum[l.lj||2]),g.setAttribute("fill-opacity","0"),1===l.lj&&g.setAttribute("stroke-miterlimit",l.ml)),2===l.r&&g.setAttribute("fill-rule","evenodd"),l.ln&&g.setAttribute("id",l.ln),l.cl&&g.setAttribute("class",l.cl),l.bm&&(g.style["mix-blend-mode"]=getBlendMode(l.bm)),this.stylesList.push(m),this.addToAnimatedContents(l,d),d},SVGShapeElement.prototype.createGroupElement=function(l){var u=new ShapeGroupData;return l.ln&&u.gr.setAttribute("id",l.ln),l.cl&&u.gr.setAttribute("class",l.cl),l.bm&&(u.gr.style["mix-blend-mode"]=getBlendMode(l.bm)),u},SVGShapeElement.prototype.createTransformElement=function(l,u){var d=TransformPropertyFactory.getTransformProperty(this,l,this),m=new SVGTransformData(d,d.o,u);return this.addToAnimatedContents(l,m),m},SVGShapeElement.prototype.createShapeElement=function(l,u,d){var m=4;"rc"===l.ty?m=5:"el"===l.ty?m=6:"sr"===l.ty&&(m=7);var _=new SVGShapeData(u,d,ShapePropertyFactory.getShapeProp(this,l,m,this));return this.shapes.push(_),this.addShapeToModifiers(_),this.addToAnimatedContents(l,_),_},SVGShapeElement.prototype.addToAnimatedContents=function(l,u){for(var d=0,m=this.animatedContents.length;d<m;){if(this.animatedContents[d].element===u)return;d+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(l),element:u,data:l})},SVGShapeElement.prototype.setElementStyles=function(l){var d,u=l.styles,m=this.stylesList.length;for(d=0;d<m;d+=1)this.stylesList[d].closed||u.push(this.stylesList[d])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var l,u=this.itemsData.length;for(l=0;l<u;l+=1)this.prevViewData[l]=this.itemsData[l];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),u=this.dynamicProperties.length,l=0;l<u;l+=1)this.dynamicProperties[l].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(l,u,d,m,g,_,E){var w,k,j,N,ee,C=[].concat(_),P=l.length-1,R=[],U=[];for(w=P;w>=0;w-=1){if((ee=this.searchProcessedElement(l[w]))?u[w]=d[ee-1]:l[w]._render=E,"fl"===l[w].ty||"st"===l[w].ty||"gf"===l[w].ty||"gs"===l[w].ty||"no"===l[w].ty)ee?u[w].style.closed=!1:u[w]=this.createStyleElement(l[w],g),l[w]._render&&u[w].style.pElem.parentNode!==m&&m.appendChild(u[w].style.pElem),R.push(u[w].style);else if("gr"===l[w].ty){if(ee)for(j=u[w].it.length,k=0;k<j;k+=1)u[w].prevViewData[k]=u[w].it[k];else u[w]=this.createGroupElement(l[w]);this.searchShapes(l[w].it,u[w].it,u[w].prevViewData,u[w].gr,g+1,C,E),l[w]._render&&u[w].gr.parentNode!==m&&m.appendChild(u[w].gr)}else"tr"===l[w].ty?(ee||(u[w]=this.createTransformElement(l[w],m)),C.push(u[w].transform)):"sh"===l[w].ty||"rc"===l[w].ty||"el"===l[w].ty||"sr"===l[w].ty?(ee||(u[w]=this.createShapeElement(l[w],C,g)),this.setElementStyles(u[w])):"tm"===l[w].ty||"rd"===l[w].ty||"ms"===l[w].ty||"pb"===l[w].ty||"zz"===l[w].ty||"op"===l[w].ty?(ee?(N=u[w]).closed=!1:((N=ShapeModifiers.getModifier(l[w].ty)).init(this,l[w]),u[w]=N,this.shapeModifiers.push(N)),U.push(N)):"rp"===l[w].ty&&(ee?(N=u[w]).closed=!0:(N=ShapeModifiers.getModifier(l[w].ty),u[w]=N,N.init(this,l,w,u),this.shapeModifiers.push(N),E=!1),U.push(N));this.addProcessedElement(l[w],w+1)}for(P=R.length,w=0;w<P;w+=1)R[w].closed=!0;for(P=U.length,w=0;w<P;w+=1)U[w].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var l,u=this.stylesList.length;for(l=0;l<u;l+=1)this.stylesList[l].reset();for(this.renderShape(),l=0;l<u;l+=1)(this.stylesList[l]._mdf||this._isFirstFrame)&&(this.stylesList[l].msElem&&(this.stylesList[l].msElem.setAttribute("d",this.stylesList[l].d),this.stylesList[l].d="M0 0"+this.stylesList[l].d),this.stylesList[l].pElem.setAttribute("d",this.stylesList[l].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var l,d,u=this.animatedContents.length;for(l=0;l<u;l+=1)d=this.animatedContents[l],(this._isFirstFrame||d.element._isAnimated)&&!0!==d.data&&d.fn(d.data,d.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(l,u,d,m,g,_){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var E=!1;return this.o!==l&&(this.o=l,this._mdf.o=!0,E=!0),this.sw!==u&&(this.sw=u,this._mdf.sw=!0,E=!0),this.sc!==d&&(this.sc=d,this._mdf.sc=!0,E=!0),this.fc!==m&&(this.fc=m,this._mdf.fc=!0,E=!0),this.m!==g&&(this.m=g,this._mdf.m=!0,E=!0),_.length&&(this.p[0]!==_[0]||this.p[1]!==_[1]||this.p[4]!==_[4]||this.p[5]!==_[5]||this.p[12]!==_[12]||this.p[13]!==_[13])&&(this.p=_,this._mdf.p=!0,E=!0),E},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(l,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d]);return l},TextProperty.prototype.setCurrentData=function(l){l.__complete||this.completeTextData(l),this.currentData=l,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(l){this.effectsSequence.push(l),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(l){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||l){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var u=this.currentData,d=this.keysIndex;if(this.lock)return void this.setCurrentData(this.currentData);this.lock=!0,this._mdf=!1;var m,g=this.effectsSequence.length,_=l||this.data.d.k[this.keysIndex].s;for(m=0;m<g;m+=1)_=this.effectsSequence[m](d!==this.keysIndex?_:this.currentData,_.t);u!==_&&this.setCurrentData(_),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var l=this.data.d.k,u=this.elem.comp.renderedFrame,d=0,m=l.length;d<=m-1&&!(d===m-1||l[d+1].t>u);)d+=1;return this.keysIndex!==d&&(this.keysIndex=d),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(l){for(var g,_,u=[],d=0,m=l.length,E=!1,C=!1,w="";d<m;)E=C,C=!1,g=l.charCodeAt(d),w=l.charAt(d),FontManager.isCombinedCharacter(g)?E=!0:g>=55296&&g<=56319?FontManager.isRegionalFlag(l,d)?w=l.substr(d,14):(_=l.charCodeAt(d+1))>=56320&&_<=57343&&(FontManager.isModifier(g,_)?(w=l.substr(d,2),E=!0):w=FontManager.isFlagEmoji(l.substr(d,4))?l.substr(d,4):l.substr(d,2)):g>56319?(_=l.charCodeAt(d+1),FontManager.isVariationSelector(g)&&(E=!0)):FontManager.isZeroWidthJoiner(g)&&(E=!0,C=!0),E?(u[u.length-1]+=w,E=!1):u.push(w),d+=w.length;return u},TextProperty.prototype.completeTextData=function(l){l.__complete=!0;var g,_,E,w,ee,F,I,u=this.elem.globalData.fontManager,d=this.data,m=[],C=0,P=d.m.g,k=0,j=0,R=0,U=[],V=0,N=0,L=u.getFontByName(l.f),O=0,X=getFontProperties(L);l.fWeight=X.weight,l.fStyle=X.style,l.finalSize=l.s,l.finalText=this.buildFinalText(l.t),_=l.finalText.length,l.finalLineHeight=l.lh;var le,ie=l.tr/1e3*l.finalSize;if(l.sz)for(var $e,Le,ue=!0,Ce=l.sz[0],tt=l.sz[1];ue;){$e=0,V=0,_=(Le=this.buildFinalText(l.t)).length,ie=l.tr/1e3*l.finalSize;var nt=-1;for(g=0;g<_;g+=1)le=Le[g].charCodeAt(0),E=!1," "===Le[g]?nt=g:(13===le||3===le)&&(V=0,E=!0,$e+=l.finalLineHeight||1.2*l.finalSize),u.chars?(I=u.getCharData(Le[g],L.fStyle,L.fFamily),O=E?0:I.w*l.finalSize/100):O=u.measureText(Le[g],l.f,l.finalSize),V+O>Ce&&" "!==Le[g]?(-1===nt?_+=1:g=nt,$e+=l.finalLineHeight||1.2*l.finalSize,Le.splice(g,nt===g?1:0,"\r"),nt=-1,V=0):(V+=O,V+=ie);$e+=L.ascent*l.finalSize/100,this.canResize&&l.finalSize>this.minimumFontSize&&tt<$e?(l.finalSize-=1,l.finalLineHeight=l.finalSize*l.lh/l.s):(l.finalText=Le,_=l.finalText.length,ue=!1)}V=-ie,O=0;var Pe,ct=0;for(g=0;g<_;g+=1)if(E=!1,13===(le=(Pe=l.finalText[g]).charCodeAt(0))||3===le?(ct=0,U.push(V),N=V>N?V:N,V=-2*ie,w="",E=!0,R+=1):w=Pe,u.chars?(I=u.getCharData(Pe,L.fStyle,u.getFontByName(l.f).fFamily),O=E?0:I.w*l.finalSize/100):O=u.measureText(w,l.f,l.finalSize)," "===Pe?ct+=O+ie:(V+=O+ie+ct,ct=0),m.push({l:O,an:O,add:k,n:E,anIndexes:[],val:w,line:R,animatorJustifyOffset:0}),2==P){if(k+=O,""===w||" "===w||g===_-1){for((""===w||" "===w)&&(k-=O);j<=g;)m[j].an=k,m[j].ind=C,m[j].extra=O,j+=1;C+=1,k=0}}else if(3==P){if(k+=O,""===w||g===_-1){for(""===w&&(k-=O);j<=g;)m[j].an=k,m[j].ind=C,m[j].extra=O,j+=1;k=0,C+=1}}else m[C].ind=C,m[C].extra=0,C+=1;if(l.l=m,N=V>N?V:N,U.push(V),l.sz)l.boxWidth=l.sz[0],l.justifyOffset=0;else switch(l.boxWidth=N,l.j){case 1:l.justifyOffset=-l.boxWidth;break;case 2:l.justifyOffset=-l.boxWidth/2;break;default:l.justifyOffset=0}l.lineWidths=U;var ae,B,J=d.a;F=J.length;var H,me,he=[];for(ee=0;ee<F;ee+=1){for((ae=J[ee]).a.sc&&(l.strokeColorAnim=!0),ae.a.sw&&(l.strokeWidthAnim=!0),(ae.a.fc||ae.a.fh||ae.a.fs||ae.a.fb)&&(l.fillColorAnim=!0),me=0,H=ae.s.b,g=0;g<_;g+=1)(B=m[g]).anIndexes[ee]=me,(1==H&&""!==B.val||2==H&&""!==B.val&&" "!==B.val||3==H&&(B.n||" "==B.val||g==_-1)||4==H&&(B.n||g==_-1))&&(1===ae.s.rn&&he.push(me),me+=1);d.a[ee].s.totalChars=me;var Tt,it=-1;if(1===ae.s.rn)for(g=0;g<_;g+=1)it!=(B=m[g]).anIndexes[ee]&&(it=B.anIndexes[ee],Tt=he.splice(Math.floor(Math.random()*he.length),1)[0]),B.anIndexes[ee]=Tt}l.yOffset=l.finalLineHeight||1.2*l.finalSize,l.ls=l.ls||0,l.ascent=L.ascent*l.finalSize/100},TextProperty.prototype.updateDocumentData=function(l,u){var d=this.copyData({},this.data.d.k[u=void 0===u?this.keysIndex:u].s);d=this.copyData(d,l),this.data.d.k[u].s=d,this.recalculate(u),this.setCurrentData(d),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(l){var u=this.data.d.k[l].s;u.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(u)},TextProperty.prototype.canResizeFont=function(l){this.canResize=l,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(l){this.minimumFontSize=Math.floor(l)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var l=Math.max,u=Math.min,d=Math.floor;function m(_,E){this._currentTextLength=-1,this.k=!1,this.data=E,this.elem=_,this.comp=_.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(_),this.s=PropertyFactory.getProp(_,E.s||{k:0},0,0,this),this.e="e"in E?PropertyFactory.getProp(_,E.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(_,E.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(_,E.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(_,E.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(_,E.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(_,E.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return m.prototype={getMult:function(E){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var C=0,w=0,P=1,k=1;this.ne.v>0?C=this.ne.v/100:w=-this.ne.v/100,this.xe.v>0?P=1-this.xe.v/100:k=1+this.xe.v/100;var j=BezierFactory.getBezierEasing(C,w,P,k).get,R=0,U=this.finalS,V=this.finalE,N=this.data.sh;if(2===N)R=j(R=V===U?E>=V?1:0:l(0,u(.5/(V-U)+(E-U)/(V-U),1)));else if(3===N)R=j(R=V===U?E>=V?0:1:1-l(0,u(.5/(V-U)+(E-U)/(V-U),1)));else if(4===N)V===U?R=0:(R=l(0,u(.5/(V-U)+(E-U)/(V-U),1)))<.5?R*=2:R=1-2*(R-.5),R=j(R);else if(5===N){if(V===U)R=0;else{var ee=V-U,F=-ee/2+(E=u(l(0,E+.5-U),V-U)),L=ee/2;R=Math.sqrt(1-F*F/(L*L))}R=j(R)}else 6===N?(V===U?R=0:(E=u(l(0,E+.5-U),V-U),R=(1+Math.cos(Math.PI+2*Math.PI*E/(V-U)))/2),R=j(R)):(E>=d(U)&&(R=l(0,u(E-U<0?u(V,1)-(U-E):V-E,1))),R=j(R));if(100!==this.sm.v){var I=.01*this.sm.v;0===I&&(I=1e-8);var O=.5-.5*I;R<O?R=0:(R=(R-O)/I)>1&&(R=1)}return R*this.a.v},getValue:function(E){this.iterateDynamicProperties(),this._mdf=E||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,E&&2===this.data.r&&(this.e.v=this._currentTextLength);var C=2===this.data.r?1:100/this.data.totalChars,w=this.o.v/C,P=this.s.v/C+w,k=this.e.v/C+w;if(P>k){var j=P;P=k,k=j}this.finalS=P,this.finalE=k}},extendPrototype([DynamicPropertyContainer],m),{getTextSelectorProp:function g(_,E,C){return new m(_,E,C)}}}();function TextAnimatorDataProperty(l,u,d){var m={propType:!1},g=PropertyFactory.getProp,_=u.a;this.a={r:_.r?g(l,_.r,0,degToRads,d):m,rx:_.rx?g(l,_.rx,0,degToRads,d):m,ry:_.ry?g(l,_.ry,0,degToRads,d):m,sk:_.sk?g(l,_.sk,0,degToRads,d):m,sa:_.sa?g(l,_.sa,0,degToRads,d):m,s:_.s?g(l,_.s,1,.01,d):m,a:_.a?g(l,_.a,1,0,d):m,o:_.o?g(l,_.o,0,.01,d):m,p:_.p?g(l,_.p,1,0,d):m,sw:_.sw?g(l,_.sw,0,0,d):m,sc:_.sc?g(l,_.sc,1,0,d):m,fc:_.fc?g(l,_.fc,1,0,d):m,fh:_.fh?g(l,_.fh,0,0,d):m,fs:_.fs?g(l,_.fs,0,.01,d):m,fb:_.fb?g(l,_.fb,0,.01,d):m,t:_.t?g(l,_.t,0,0,d):m},this.s=TextSelectorProp.getTextSelectorProp(l,u.s,d),this.s.t=u.s.t}function TextAnimatorProperty(l,u,d){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=l,this._renderType=u,this._elem=d,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(d)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var l,u=this._textData.a.length,m=PropertyFactory.getProp;for(l=0;l<u;l+=1)this._animatorsData[l]=new TextAnimatorDataProperty(this._elem,this._textData.a[l],this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:m(this._elem,this._textData.p.a,0,0,this),f:m(this._elem,this._textData.p.f,0,0,this),l:m(this._elem,this._textData.p.l,0,0,this),r:m(this._elem,this._textData.p.r,0,0,this),p:m(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=m(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(l,u){if(this.lettersChangedFlag=u,this._mdf||this._isFirstFrame||u||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var w,P,k,j,U,V,N,ee,F,L,I,O,X,ie,le,ue,Ce,$e,d=this._moreOptions.alignment.v,m=this._animatorsData,g=this._textData,_=this.mHelper,E=this._renderType,C=this.renderedLetters.length,R=l.l;if(this._hasMaskedPath){if($e=this._pathData.m,!this._pathData.n||this._pathData._mdf){var nt,Le=$e.v;for(this._pathData.r.v&&(Le=Le.reverse()),U={tLength:0,segments:[]},j=Le._length-1,ue=0,k=0;k<j;k+=1)nt=bez.buildBezierData(Le.v[k],Le.v[k+1],[Le.o[k][0]-Le.v[k][0],Le.o[k][1]-Le.v[k][1]],[Le.i[k+1][0]-Le.v[k+1][0],Le.i[k+1][1]-Le.v[k+1][1]]),U.tLength+=nt.segmentLength,U.segments.push(nt),ue+=nt.segmentLength;k=j,$e.v.c&&(nt=bez.buildBezierData(Le.v[k],Le.v[0],[Le.o[k][0]-Le.v[k][0],Le.o[k][1]-Le.v[k][1]],[Le.i[0][0]-Le.v[0][0],Le.i[0][1]-Le.v[0][1]]),U.tLength+=nt.segmentLength,U.segments.push(nt),ue+=nt.segmentLength),this._pathData.pi=U}if(I=0,L=1,ee=0,F=!0,ie=(U=this._pathData.pi).segments,(V=this._pathData.f.v)<0&&$e.v.c)for(U.tLength<Math.abs(V)&&(V=-Math.abs(V)%U.tLength),L=(X=ie[I=ie.length-1].points).length-1;V<0;)V+=X[L].partialLength,(L-=1)<0&&(L=(X=ie[I-=1].points).length-1);O=(X=ie[I].points)[L-1],le=(N=X[L]).partialLength}j=R.length,w=0,P=0;var J,B,H,me,ct=1.2*l.finalSize*.714,Pe=!0;H=m.length;var he,Tt,bt,mn,Dt,ni,Xi,Sn,gt,rs,Fs,ss,as,it=-1,gn=V,ln=I,_n=L,Hr=-1,zr="",os=this.defaultPropsArray;if(2===l.j||1===l.j){var Fi=0,ls=0,Ls=2===l.j?-.5:-1,Yi=0,Ns=!0;for(k=0;k<j;k+=1)if(R[k].n){for(Fi&&(Fi+=ls);Yi<k;)R[Yi].animatorJustifyOffset=Fi,Yi+=1;Fi=0,Ns=!0}else{for(B=0;B<H;B+=1)(J=m[B].a).t.propType&&(Ns&&2===l.j&&(ls+=J.t.v*Ls),Fi+=(he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars)).length?J.t.v*he[0]*Ls:J.t.v*he*Ls);Ns=!1}for(Fi&&(Fi+=ls);Yi<k;)R[Yi].animatorJustifyOffset=Fi,Yi+=1}for(k=0;k<j;k+=1){if(_.reset(),Dt=1,R[k].n)w=0,P+=l.yOffset,P+=Pe?1:0,V=gn,Pe=!1,this._hasMaskedPath&&(O=(X=ie[I=ln].points)[(L=_n)-1],le=(N=X[L]).partialLength,ee=0),zr="",ss="",rs="",as="",os=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Hr!==R[k].line){switch(l.j){case 1:V+=ue-l.lineWidths[R[k].line];break;case 2:V+=(ue-l.lineWidths[R[k].line])/2}Hr=R[k].line}it!==R[k].ind&&(R[it]&&(V+=R[it].extra),V+=R[k].an/2,it=R[k].ind),V+=d[0]*R[k].an*.005;var Zi=0;for(B=0;B<H;B+=1)(J=m[B].a).p.propType&&(Zi+=(he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars)).length?J.p.v[0]*he[0]:J.p.v[0]*he),J.a.propType&&(Zi+=(he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars)).length?J.a.v[0]*he[0]:J.a.v[0]*he);for(F=!0,this._pathData.a.v&&(V=.5*R[0].an+(ue-this._pathData.f.v-.5*R[0].an-.5*R[R.length-1].an)*it/(j-1),V+=this._pathData.f.v);F;)ee+le>=V+Zi||!X?(bt=O.point[0]+(N.point[0]-O.point[0])*(Ce=(V+Zi-ee)/N.partialLength),mn=O.point[1]+(N.point[1]-O.point[1])*Ce,_.translate(-d[0]*R[k].an*.005,-d[1]*ct*.01),F=!1):X&&(ee+=N.partialLength,(L+=1)>=X.length&&(L=0,ie[I+=1]?X=ie[I].points:$e.v.c?(L=0,X=ie[I=0].points):(ee-=N.partialLength,X=null)),X&&(O=N,le=(N=X[L]).partialLength));_.translate(-(Tt=R[k].an/2-R[k].add),0,0)}else _.translate(-(Tt=R[k].an/2-R[k].add),0,0),_.translate(-d[0]*R[k].an*.005,-d[1]*ct*.01,0);for(B=0;B<H;B+=1)(J=m[B].a).t.propType&&(he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars),(0!==w||0!==l.j)&&(this._hasMaskedPath?V+=he.length?J.t.v*he[0]:J.t.v*he:w+=he.length?J.t.v*he[0]:J.t.v*he));for(l.strokeWidthAnim&&(Xi=l.sw||0),l.strokeColorAnim&&(ni=l.sc?[l.sc[0],l.sc[1],l.sc[2]]:[0,0,0]),l.fillColorAnim&&l.fc&&(Sn=[l.fc[0],l.fc[1],l.fc[2]]),B=0;B<H;B+=1)(J=m[B].a).a.propType&&((he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars)).length?_.translate(-J.a.v[0]*he[0],-J.a.v[1]*he[1],J.a.v[2]*he[2]):_.translate(-J.a.v[0]*he,-J.a.v[1]*he,J.a.v[2]*he));for(B=0;B<H;B+=1)(J=m[B].a).s.propType&&((he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars)).length?_.scale(1+(J.s.v[0]-1)*he[0],1+(J.s.v[1]-1)*he[1],1):_.scale(1+(J.s.v[0]-1)*he,1+(J.s.v[1]-1)*he,1));for(B=0;B<H;B+=1){if(J=m[B].a,he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars),J.sk.propType&&(he.length?_.skewFromAxis(-J.sk.v*he[0],J.sa.v*he[1]):_.skewFromAxis(-J.sk.v*he,J.sa.v*he)),J.r.propType&&_.rotateZ(he.length?-J.r.v*he[2]:-J.r.v*he),J.ry.propType&&_.rotateY(he.length?J.ry.v*he[1]:J.ry.v*he),J.rx.propType&&_.rotateX(he.length?J.rx.v*he[0]:J.rx.v*he),J.o.propType&&(Dt+=he.length?(J.o.v*he[0]-Dt)*he[0]:(J.o.v*he-Dt)*he),l.strokeWidthAnim&&J.sw.propType&&(Xi+=he.length?J.sw.v*he[0]:J.sw.v*he),l.strokeColorAnim&&J.sc.propType)for(gt=0;gt<3;gt+=1)ni[gt]+=he.length?(J.sc.v[gt]-ni[gt])*he[0]:(J.sc.v[gt]-ni[gt])*he;if(l.fillColorAnim&&l.fc){if(J.fc.propType)for(gt=0;gt<3;gt+=1)Sn[gt]+=he.length?(J.fc.v[gt]-Sn[gt])*he[0]:(J.fc.v[gt]-Sn[gt])*he;J.fh.propType&&(Sn=addHueToRGB(Sn,he.length?J.fh.v*he[0]:J.fh.v*he)),J.fs.propType&&(Sn=addSaturationToRGB(Sn,he.length?J.fs.v*he[0]:J.fs.v*he)),J.fb.propType&&(Sn=addBrightnessToRGB(Sn,he.length?J.fb.v*he[0]:J.fb.v*he))}}for(B=0;B<H;B+=1)(J=m[B].a).p.propType&&(he=m[B].s.getMult(R[k].anIndexes[B],g.a[B].s.totalChars),this._hasMaskedPath?he.length?_.translate(0,J.p.v[1]*he[0],-J.p.v[2]*he[1]):_.translate(0,J.p.v[1]*he,-J.p.v[2]*he):he.length?_.translate(J.p.v[0]*he[0],J.p.v[1]*he[1],-J.p.v[2]*he[2]):_.translate(J.p.v[0]*he,J.p.v[1]*he,-J.p.v[2]*he));if(l.strokeWidthAnim&&(rs=Xi<0?0:Xi),l.strokeColorAnim&&(Fs="rgb("+Math.round(255*ni[0])+","+Math.round(255*ni[1])+","+Math.round(255*ni[2])+")"),l.fillColorAnim&&l.fc&&(ss="rgb("+Math.round(255*Sn[0])+","+Math.round(255*Sn[1])+","+Math.round(255*Sn[2])+")"),this._hasMaskedPath){if(_.translate(0,-l.ls),_.translate(0,d[1]*ct*.01+P,0),this._pathData.p.v){var Os=180*Math.atan((N.point[1]-O.point[1])/(N.point[0]-O.point[0]))/Math.PI;N.point[0]<O.point[0]&&(Os+=180),_.rotate(-Os*Math.PI/180)}_.translate(bt,mn,0),V-=d[0]*R[k].an*.005,R[k+1]&&it!==R[k+1].ind&&(V+=R[k].an/2,V+=.001*l.tr*l.finalSize)}else{switch(_.translate(w,P,0),l.ps&&_.translate(l.ps[0],l.ps[1]+l.ascent,0),l.j){case 1:_.translate(R[k].animatorJustifyOffset+l.justifyOffset+(l.boxWidth-l.lineWidths[R[k].line]),0,0);break;case 2:_.translate(R[k].animatorJustifyOffset+l.justifyOffset+(l.boxWidth-l.lineWidths[R[k].line])/2,0,0)}_.translate(0,-l.ls),_.translate(Tt,0,0),_.translate(d[0]*R[k].an*.005,d[1]*ct*.01,0),w+=R[k].l+.001*l.tr*l.finalSize}"html"===E?zr=_.toCSS():"svg"===E?zr=_.to2dCSS():os=[_.props[0],_.props[1],_.props[2],_.props[3],_.props[4],_.props[5],_.props[6],_.props[7],_.props[8],_.props[9],_.props[10],_.props[11],_.props[12],_.props[13],_.props[14],_.props[15]],as=Dt}C<=k?(me=new LetterProps(as,rs,Fs,ss,zr,os),this.renderedLetters.push(me),C+=1,this.lettersChangedFlag=!0):this.lettersChangedFlag=(me=this.renderedLetters[k]).update(as,rs,Fs,ss,zr,os)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(l,u,d){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(l,u,d),this.textProperty=new TextProperty(this,l.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(l.t,this.renderType,this),this.initTransform(l,u,d),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(l){this._mdf=!1,this.prepareRenderableFrame(l),this.prepareProperties(l,this.isInRange)},ITextElement.prototype.createPathShape=function(l,u){var d,g,m=u.length,_="";for(d=0;d<m;d+=1)"sh"===u[d].ty&&(_+=buildShapeString(g=u[d].ks.k,g.i.length,!0,l));return _},ITextElement.prototype.updateDocumentData=function(l,u){this.textProperty.updateDocumentData(l,u)},ITextElement.prototype.canResizeFont=function(l){this.textProperty.canResizeFont(l)},ITextElement.prototype.setMinimumFontSize=function(l){this.textProperty.setMinimumFontSize(l)},ITextElement.prototype.applyTextPropertiesToMatrix=function(l,u,d,m,g){switch(l.ps&&u.translate(l.ps[0],l.ps[1]+l.ascent,0),u.translate(0,-l.ls,0),l.j){case 1:u.translate(l.justifyOffset+(l.boxWidth-l.lineWidths[d]),0,0);break;case 2:u.translate(l.justifyOffset+(l.boxWidth-l.lineWidths[d])/2,0,0)}u.translate(m,g,0)},ITextElement.prototype.buildColor=function(l){return"rgb("+Math.round(255*l[0])+","+Math.round(255*l[1])+","+Math.round(255*l[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(l,u,d){this.textSpans=[],this.renderType="svg",this.initElement(l,u,d)}function ISolidElement(l,u,d){this.initElement(l,u,d)}function NullElement(l,u,d){this.initFrame(),this.initBaseData(l,u,d),this.initFrame(),this.initTransform(l,u,d),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(l,u,d){this.layers=l.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(l,u,d),this.tm=l.tm?PropertyFactory.getProp(this,l.tm,0,u.frameRate,this):{_placeholder:!0}}function SVGRenderer(l,u){this.animationItem=l,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var d="";if(u&&u.title){var m=createNS("title"),g=createElementID();m.setAttribute("id",g),m.textContent=u.title,this.svgElement.appendChild(m),d+=g}if(u&&u.description){var _=createNS("desc"),E=createElementID();_.setAttribute("id",E),_.textContent=u.description,this.svgElement.appendChild(_),d+=" "+E}d&&this.svgElement.setAttribute("aria-labelledby",d);var C=createNS("defs");this.svgElement.appendChild(C);var w=createNS("g");this.svgElement.appendChild(w),this.layerElement=w,this.renderConfig={preserveAspectRatio:u&&u.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:u&&u.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:u&&u.contentVisibility||"visible",progressiveLoad:u&&u.progressiveLoad||!1,hideOnTransparent:!(u&&!1===u.hideOnTransparent),viewBoxOnly:u&&u.viewBoxOnly||!1,viewBoxSize:u&&u.viewBoxSize||!1,className:u&&u.className||"",id:u&&u.id||"",focusable:u&&u.focusable,filterSize:{width:u&&u.filterSize&&u.filterSize.width||"100%",height:u&&u.filterSize&&u.filterSize.height||"100%",x:u&&u.filterSize&&u.filterSize.x||"0%",y:u&&u.filterSize&&u.filterSize.y||"0%"},width:u&&u.width,height:u&&u.height,runExpressions:!u||void 0===u.runExpressions||u.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:C,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(l){for(var u=0,d=l.length,m=[],g="";u<d;)l[u]===String.fromCharCode(13)||l[u]===String.fromCharCode(3)?(m.push(g),g=""):g+=l[u],u+=1;return m.push(g),m},SVGTextLottieElement.prototype.buildShapeData=function(l,u){if(l.shapes&&l.shapes.length){var d=l.shapes[0];if(d.it){var m=d.it[d.it.length-1];m.s&&(m.s.k[0]=u,m.s.k[1]=u)}}return l},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var l,u,d=this.textProperty.currentData;this.renderedLetters=createSizedArray(d?d.l.length:0),this.layerElement.setAttribute("fill",d.fc?this.buildColor(d.fc):"rgba(0,0,0,0)"),d.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(d.sc)),this.layerElement.setAttribute("stroke-width",d.sw)),this.layerElement.setAttribute("font-size",d.finalSize);var m=this.globalData.fontManager.getFontByName(d.f);if(m.fClass)this.layerElement.setAttribute("class",m.fClass);else{this.layerElement.setAttribute("font-family",m.fFamily);var g=d.fWeight;this.layerElement.setAttribute("font-style",d.fStyle),this.layerElement.setAttribute("font-weight",g)}this.layerElement.setAttribute("aria-label",d.t);var E=d.l||[],C=!!this.globalData.fontManager.chars;u=E.length;var w,P=this.mHelper,j=this.data.singleShape,R=0,U=0,V=!0,N=.001*d.tr*d.finalSize;if(!j||C||d.sz){var O,I=this.textSpans.length;for(l=0;l<u;l+=1){if(this.textSpans[l]||(this.textSpans[l]={span:null,childSpan:null,glyph:null}),!C||!j||0===l){if(w=I>l?this.textSpans[l].span:createNS(C?"g":"text"),I<=l){if(w.setAttribute("stroke-linecap","butt"),w.setAttribute("stroke-linejoin","round"),w.setAttribute("stroke-miterlimit","4"),this.textSpans[l].span=w,C){var X=createNS("g");w.appendChild(X),this.textSpans[l].childSpan=X}this.textSpans[l].span=w,this.layerElement.appendChild(w)}w.style.display="inherit"}if(P.reset(),j&&(E[l].n&&(R=-N,U+=d.yOffset,U+=V?1:0,V=!1),this.applyTextPropertiesToMatrix(d,P,E[l].line,R,U),R+=E[l].l||0,R+=N),C){var ie;if(1===(O=this.globalData.fontManager.getCharData(d.finalText[l],m.fStyle,this.globalData.fontManager.getFontByName(d.f).fFamily)).t)ie=new SVGCompElement(O.data,this.globalData,this);else{var le=emptyShapeData;O.data&&O.data.shapes&&(le=this.buildShapeData(O.data,d.finalSize)),ie=new SVGShapeElement(le,this.globalData,this)}if(this.textSpans[l].glyph){var ue=this.textSpans[l].glyph;this.textSpans[l].childSpan.removeChild(ue.layerElement),ue.destroy()}this.textSpans[l].glyph=ie,ie._debug=!0,ie.prepareFrame(0),ie.renderFrame(),this.textSpans[l].childSpan.appendChild(ie.layerElement),1===O.t&&this.textSpans[l].childSpan.setAttribute("transform","scale("+d.finalSize/100+","+d.finalSize/100+")")}else j&&w.setAttribute("transform","translate("+P.props[12]+","+P.props[13]+")"),w.textContent=E[l].val,w.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}j&&w&&w.setAttribute("d","")}else{var ee=this.textContainer,F="start";switch(d.j){case 1:F="end";break;case 2:F="middle";break;default:F="start"}ee.setAttribute("text-anchor",F),ee.setAttribute("letter-spacing",N);var L=this.buildTextContents(d.finalText);for(u=L.length,U=d.ps?d.ps[1]+d.ascent:0,l=0;l<u;l+=1)(w=this.textSpans[l].span||createNS("tspan")).textContent=L[l],w.setAttribute("x",0),w.setAttribute("y",U),w.style.display="inherit",ee.appendChild(w),this.textSpans[l]||(this.textSpans[l]={span:null,glyph:null}),this.textSpans[l].span=w,U+=d.finalLineHeight;this.layerElement.appendChild(ee)}for(;l<this.textSpans.length;)this.textSpans[l].span.style.display="none",l+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var l=this.layerElement.getBBox();this.bbox={top:l.y,left:l.x,width:l.width,height:l.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var l,d,u=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,l=0;l<u;l+=1)(d=this.textSpans[l].glyph)&&(d.prepareFrame(this.comp.renderedFrame-this.data.st),d._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var l,u,g,_,E,d=this.textAnimator.renderedLetters,m=this.textProperty.currentData.l;for(u=m.length,l=0;l<u;l+=1)m[l].n||(g=d[l],_=this.textSpans[l].span,(E=this.textSpans[l].glyph)&&E.renderFrame(),g._mdf.m&&_.setAttribute("transform",g.m),g._mdf.o&&_.setAttribute("opacity",g.o),g._mdf.sw&&_.setAttribute("stroke-width",g.sw),g._mdf.sc&&_.setAttribute("stroke",g.sc),g._mdf.fc&&_.setAttribute("fill",g.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var l=createNS("rect");l.setAttribute("width",this.data.sw),l.setAttribute("height",this.data.sh),l.setAttribute("fill",this.data.sc),this.layerElement.appendChild(l)},NullElement.prototype.prepareFrame=function(l){this.prepareProperties(l,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(l){return new NullElement(l,this.globalData,this)},SVGRendererBase.prototype.createShape=function(l){return new SVGShapeElement(l,this.globalData,this)},SVGRendererBase.prototype.createText=function(l){return new SVGTextLottieElement(l,this.globalData,this)},SVGRendererBase.prototype.createImage=function(l){return new IImageElement(l,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(l){return new ISolidElement(l,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(l){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize?this.renderConfig.viewBoxSize:"0 0 "+l.w+" "+l.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",l.w),this.svgElement.setAttribute("height",l.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var u=this.globalData.defs;this.setupGlobalData(l,u),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=l;var d=createNS("clipPath"),m=createNS("rect");m.setAttribute("width",l.w),m.setAttribute("height",l.h),m.setAttribute("x",0),m.setAttribute("y",0);var g=createElementID();d.setAttribute("id",g),d.appendChild(m),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+g+")"),u.appendChild(d),this.layers=l.layers,this.elements=createSizedArray(l.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var l,u=this.layers?this.layers.length:0;for(l=0;l<u;l+=1)this.elements[l]&&this.elements[l].destroy&&this.elements[l].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(l){var u=0,d=this.layers.length;for(u=0;u<d;u+=1)if(this.layers[u].ind===l)return u;return-1},SVGRendererBase.prototype.buildItem=function(l){var u=this.elements;if(!u[l]&&99!==this.layers[l].ty){u[l]=!0;var d=this.createItem(this.layers[l]);if(u[l]=d,getExpressionsPlugin()&&(0===this.layers[l].ty&&this.globalData.projectInterface.registerComposition(d),d.initExpressions()),this.appendElementInPos(d,l),this.layers[l].tt){var m="tp"in this.layers[l]?this.findIndexByInd(this.layers[l].tp):l-1;if(-1===m)return;if(this.elements[m]&&!0!==this.elements[m]){var _=u[m].getMatte(this.layers[l].tt);d.setMatte(_)}else this.buildItem(m),this.addPendingElement(d)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var l=this.pendingElements.pop();if(l.checkParenting(),l.data.tt)for(var u=0,d=this.elements.length;u<d;){if(this.elements[u]===l){var m="tp"in l.data?this.findIndexByInd(l.data.tp):u-1,_=this.elements[m].getMatte(this.layers[u].tt);l.setMatte(_);break}u+=1}}},SVGRendererBase.prototype.renderFrame=function(l){if(this.renderedFrame!==l&&!this.destroyed){null===l?l=this.renderedFrame:this.renderedFrame=l,this.globalData.frameNum=l,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=l,this.globalData._mdf=!1;var u,d=this.layers.length;for(this.completeLayers||this.checkLayers(l),u=d-1;u>=0;u-=1)(this.completeLayers||this.elements[u])&&this.elements[u].prepareFrame(l-this.layers[u].st);if(this.globalData._mdf)for(u=0;u<d;u+=1)(this.completeLayers||this.elements[u])&&this.elements[u].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(l,u){var d=l.getBaseElement();if(d){for(var g,m=0;m<u;)this.elements[m]&&!0!==this.elements[m]&&this.elements[m].getBaseElement()&&(g=this.elements[m].getBaseElement()),m+=1;g?this.layerElement.insertBefore(d,g):this.layerElement.appendChild(d)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(l,u,d){this.initFrame(),this.initBaseData(l,u,d),this.initTransform(l,u,d),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!u.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(l){if(this._mdf=!1,this.prepareRenderableFrame(l),this.prepareProperties(l,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=l/this.data.sr;else{var u=this.tm.v;u===this.data.op&&(u=this.data.op-1),this.renderedFrame=u}var d,m=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),d=m-1;d>=0;d-=1)(this.completeLayers||this.elements[d])&&(this.elements[d].prepareFrame(this.renderedFrame-this.layers[d].st),this.elements[d]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var l,u=this.layers.length;for(l=0;l<u;l+=1)(this.completeLayers||this.elements[l])&&this.elements[l].renderFrame()},ICompElement.prototype.setElements=function(l){this.elements=l},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var l,u=this.layers.length;for(l=0;l<u;l+=1)this.elements[l]&&this.elements[l].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(l){return new SVGCompElement(l,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(l){return new SVGCompElement(l,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(u){var d,m=u.length,g="_";for(d=0;d<m;d+=1)g+=u[d].transform.key+"_";var _=this.sequences[g];return _||(_={transforms:[].concat(u),finalTransform:new Matrix,_mdf:!1},this.sequences[g]=_,this.sequenceList.push(_)),_},processSequence:function(u,d){for(var m=0,g=u.transforms.length,_=d;m<g&&!d;){if(u.transforms[m].transform.mProps._mdf){_=!0;break}m+=1}if(_)for(u.finalTransform.reset(),m=g-1;m>=0;m-=1)u.finalTransform.multiply(u.transforms[m].transform.mProps.v);u._mdf=_},processSequences:function(u){var d,m=this.sequenceList.length;for(d=0;d<m;d+=1)this.processSequence(this.sequenceList[d],u)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var u="__lottie_element_luma_buffer",d=null,m=null,g=null;function E(){d||(g=function _(){var w=createNS("svg"),P=createNS("filter"),k=createNS("feColorMatrix");return P.setAttribute("id",u),k.setAttribute("type","matrix"),k.setAttribute("color-interpolation-filters","sRGB"),k.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),P.appendChild(k),w.appendChild(P),w.setAttribute("id",u+"_svg"),featureSupport.svgLumaHidden&&(w.style.display="none"),w}(),document.body.appendChild(g),d=createTag("canvas"),(m=d.getContext("2d")).filter="url(#"+u+")",m.fillStyle="rgba(0,0,0,0)",m.fillRect(0,0,1,1))}return{load:E,get:function C(w){return d||E(),d.width=w.width,d.height=w.height,m.filter="url(#"+u+")",d}}};function createCanvas(l,u){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(l,u);var d=createTag("canvas");return d.width=l,d.height=u,d}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas},registeredEffects={};function CVEffects(l){var u,m,d=l.data.ef?l.data.ef.length:0;for(this.filters=[],u=0;u<d;u+=1){m=null;var g=l.data.ef[u].ty;registeredEffects[g]&&(m=new(0,registeredEffects[g].effect)(l.effectsManager.effectElements[u],l)),m&&this.filters.push(m)}this.filters.length&&l.addRenderableComponent(this)}function registerEffect(l,u){registeredEffects[l]={effect:u}}function CVMaskElement(l,u){this.data=l,this.element=u,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var d,m=this.masksProperties.length,g=!1;for(d=0;d<m;d+=1)"n"!==this.masksProperties[d].mode&&(g=!0),this.viewData[d]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[d],3);this.hasMasks=g,g&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(l){var u,d=this.filters.length;for(u=0;u<d;u+=1)this.filters[u].renderFrame(l)},CVEffects.prototype.getEffects=function(l){var u,d=this.filters.length,m=[];for(u=0;u<d;u+=1)this.filters[u].type===l&&m.push(this.filters[u]);return m},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var d,g,_,E,l=this.element.finalTransform.mat,u=this.element.canvasContext,m=this.masksProperties.length;for(u.beginPath(),d=0;d<m;d+=1)if("n"!==this.masksProperties[d].mode){this.masksProperties[d].inv&&(u.moveTo(0,0),u.lineTo(this.element.globalData.compSize.w,0),u.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),u.lineTo(0,this.element.globalData.compSize.h),u.lineTo(0,0)),g=l.applyToPointArray((E=this.viewData[d].v).v[0][0],E.v[0][1],0),u.moveTo(g[0],g[1]);var C,w=E._length;for(C=1;C<w;C+=1)_=l.applyToTriplePoints(E.o[C-1],E.i[C],E.v[C]),u.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5]);_=l.applyToTriplePoints(E.o[C-1],E.i[0],E.v[0]),u.bezierCurveTo(_[0],_[1],_[2],_[3],_[4],_[5])}this.element.globalData.renderer.save(!0),u.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(l,u,d,m){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var g=4;"rc"===u.ty?g=5:"el"===u.ty?g=6:"sr"===u.ty&&(g=7),this.sh=ShapePropertyFactory.getShapeProp(l,u,g,l);var _,C,E=d.length;for(_=0;_<E;_+=1)d[_].closed||(C={transforms:m.addTransformSequence(d[_].transforms),trNodes:[]},this.styledShapes.push(C),d[_].elements.push(C))}function CVShapeElement(l,u,d){this.shapes=[],this.shapesData=l.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(l,u,d)}function CVTextElement(l,u,d){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(l,u,d)}function CVImageElement(l,u,d){this.assetData=u.getAssetData(l.refId),this.img=u.imageLoader.getAsset(this.assetData),this.initElement(l,u,d)}function CVSolidElement(l,u,d){this.initElement(l,u,d)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var l;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,l=0;l<15;l+=1){var d=new CanvasContext;this.stack[l]=d}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(l,u,d){this.completeLayers=!1,this.layers=l.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(l,u,d),this.tm=l.tm?PropertyFactory.getProp(this,l.tm,0,u.frameRate,this):{_placeholder:!0}}function CanvasRenderer(l,u){this.animationItem=l,this.renderConfig={clearCanvas:!u||void 0===u.clearCanvas||u.clearCanvas,context:u&&u.context||null,progressiveLoad:u&&u.progressiveLoad||!1,preserveAspectRatio:u&&u.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:u&&u.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:u&&u.contentVisibility||"visible",className:u&&u.className||"",id:u&&u.id||"",runExpressions:!u||void 0===u.runExpressions||u.runExpressions},this.renderConfig.dpr=u&&u.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=u&&u.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(l,u,d){this.initElement(l,u,d)}function HShapeElement(l,u,d){this.shapes=[],this.shapesData=l.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(l,u,d),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(l,u,d){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(l,u,d)}function HCameraElement(l,u,d){this.initFrame(),this.initBaseData(l,u,d),this.initHierarchy();var m=PropertyFactory.getProp;if(this.pe=m(this,l.pe,0,0,this),l.ks.p.s?(this.px=m(this,l.ks.p.x,1,0,this),this.py=m(this,l.ks.p.y,1,0,this),this.pz=m(this,l.ks.p.z,1,0,this)):this.p=m(this,l.ks.p,1,0,this),l.ks.a&&(this.a=m(this,l.ks.a,1,0,this)),l.ks.or.k.length&&l.ks.or.k[0].to){var g,_=l.ks.or.k.length;for(g=0;g<_;g+=1)l.ks.or.k[g].to=null,l.ks.or.k[g].ti=null}this.or=m(this,l.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=m(this,l.ks.rx,0,degToRads,this),this.ry=m(this,l.ks.ry,0,degToRads,this),this.rz=m(this,l.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(l,u,d){this.assetData=u.getAssetData(l.refId),this.initElement(l,u,d)}function HybridRendererBase(l,u){this.animationItem=l,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:u&&u.className||"",imagePreserveAspectRatio:u&&u.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(u&&!1===u.hideOnTransparent),filterSize:{width:u&&u.filterSize&&u.filterSize.width||"400%",height:u&&u.filterSize&&u.filterSize.height||"400%",x:u&&u.filterSize&&u.filterSize.x||"-100%",y:u&&u.filterSize&&u.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(l,u,d){this.layers=l.layers,this.supports3d=!l.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(l,u,d),this.tm=l.tm?PropertyFactory.getProp(this,l.tm,0,u.frameRate,this):{_placeholder:!0}}function HybridRenderer(l,u){this.animationItem=l,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:u&&u.className||"",imagePreserveAspectRatio:u&&u.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(u&&!1===u.hideOnTransparent),filterSize:{width:u&&u.filterSize&&u.filterSize.width||"400%",height:u&&u.filterSize&&u.filterSize.height||"400%",x:u&&u.filterSize&&u.filterSize.x||"-100%",y:u&&u.filterSize&&u.filterSize.y||"-100%"},runExpressions:!u||void 0===u.runExpressions||u.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var u=this.globalData.canvasContext,d=assetLoader.createCanvas(u.canvas.width,u.canvas.height);this.buffers.push(d);var m=assetLoader.createCanvas(u.canvas.width,u.canvas.height);this.buffers.push(m),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var u=this.globalData;if(u.blendMode!==this.data.bm){u.blendMode=this.data.bm;var d=getBlendMode(this.data.bm);u.canvasContext.globalCompositeOperation=d}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(u){u.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var d=this.buffers[0].getContext("2d");this.clearCanvas(d),d.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var u=this.buffers[1],d=u.getContext("2d");if(this.clearCanvas(d),d.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var g=assetLoader.getLumaCanvas(this.canvasContext.canvas);g.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(g,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(u,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(u){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||u)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var d=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(d),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(d),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(l,u){var d={data:l,type:l.ty,preTransforms:this.transformsManager.addTransformSequence(u),transforms:[],elements:[],closed:!0===l.hd},m={};if("fl"===l.ty||"st"===l.ty?(m.c=PropertyFactory.getProp(this,l.c,1,255,this),m.c.k||(d.co="rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")")):("gf"===l.ty||"gs"===l.ty)&&(m.s=PropertyFactory.getProp(this,l.s,1,null,this),m.e=PropertyFactory.getProp(this,l.e,1,null,this),m.h=PropertyFactory.getProp(this,l.h||{k:0},0,.01,this),m.a=PropertyFactory.getProp(this,l.a||{k:0},0,degToRads,this),m.g=new GradientProperty(this,l.g,this)),m.o=PropertyFactory.getProp(this,l.o,0,.01,this),"st"===l.ty||"gs"===l.ty){if(d.lc=lineCapEnum[l.lc||2],d.lj=lineJoinEnum[l.lj||2],1==l.lj&&(d.ml=l.ml),m.w=PropertyFactory.getProp(this,l.w,0,null,this),m.w.k||(d.wi=m.w.v),l.d){var g=new DashProperty(this,l.d,"canvas",this);m.d=g,m.d.k||(d.da=m.d.dashArray,d.do=m.d.dashoffset[0])}}else d.r=2===l.r?"evenodd":"nonzero";return this.stylesList.push(d),m.style=d,m},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(l){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,l.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,l,this)}}},CVShapeElement.prototype.createShapeElement=function(l){var u=new CVShapeData(this,l,this.stylesList,this.transformsManager);return this.shapes.push(u),this.addShapeToModifiers(u),u},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var l,u=this.itemsData.length;for(l=0;l<u;l+=1)this.prevViewData[l]=this.itemsData[l];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),u=this.dynamicProperties.length,l=0;l<u;l+=1)this.dynamicProperties[l].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(l){var u,d=this.stylesList.length;for(u=0;u<d;u+=1)this.stylesList[u].closed||this.stylesList[u].transforms.push(l)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var l,u=this.stylesList.length;for(l=0;l<u;l+=1)this.stylesList[l].closed||this.stylesList[l].transforms.pop()},CVShapeElement.prototype.closeStyles=function(l){var u,d=l.length;for(u=0;u<d;u+=1)l[u].closed=!0},CVShapeElement.prototype.searchShapes=function(l,u,d,m,g){var _,C,w,j,R,U,E=l.length-1,P=[],k=[],V=[].concat(g);for(_=E;_>=0;_-=1){if((j=this.searchProcessedElement(l[_]))?u[_]=d[j-1]:l[_]._shouldRender=m,"fl"===l[_].ty||"st"===l[_].ty||"gf"===l[_].ty||"gs"===l[_].ty)j?u[_].style.closed=!1:u[_]=this.createStyleElement(l[_],V),P.push(u[_].style);else if("gr"===l[_].ty){if(j)for(w=u[_].it.length,C=0;C<w;C+=1)u[_].prevViewData[C]=u[_].it[C];else u[_]=this.createGroupElement(l[_]);this.searchShapes(l[_].it,u[_].it,u[_].prevViewData,m,V)}else"tr"===l[_].ty?(j||(U=this.createTransformElement(l[_]),u[_]=U),V.push(u[_]),this.addTransformToStyleList(u[_])):"sh"===l[_].ty||"rc"===l[_].ty||"el"===l[_].ty||"sr"===l[_].ty?j||(u[_]=this.createShapeElement(l[_])):"tm"===l[_].ty||"rd"===l[_].ty||"pb"===l[_].ty||"zz"===l[_].ty||"op"===l[_].ty?(j?(R=u[_]).closed=!1:((R=ShapeModifiers.getModifier(l[_].ty)).init(this,l[_]),u[_]=R,this.shapeModifiers.push(R)),k.push(R)):"rp"===l[_].ty&&(j?(R=u[_]).closed=!0:(R=ShapeModifiers.getModifier(l[_].ty),u[_]=R,R.init(this,l,_,u),this.shapeModifiers.push(R),m=!1),k.push(R));this.addProcessedElement(l[_],_+1)}for(this.removeTransformFromStyleList(),this.closeStyles(P),E=k.length,_=0;_<E;_+=1)k[_].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(l,u){(l._opMdf||u.op._mdf||this._isFirstFrame)&&(u.opacity=l.opacity,u.opacity*=u.op.v,u._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var l,d,m,g,_,E,C,k,j,u=this.stylesList.length,w=this.globalData.renderer,P=this.globalData.canvasContext;for(l=0;l<u;l+=1)if(("st"!==(k=(j=this.stylesList[l]).type)&&"gs"!==k||0!==j.wi)&&j.data._shouldRender&&0!==j.coOp&&0!==this.globalData.currentGlobalAlpha){for(w.save(),E=j.elements,"st"===k||"gs"===k?(w.ctxStrokeStyle("st"===k?j.co:j.grd),w.ctxLineWidth(j.wi),w.ctxLineCap(j.lc),w.ctxLineJoin(j.lj),w.ctxMiterLimit(j.ml||0)):w.ctxFillStyle("fl"===k?j.co:j.grd),w.ctxOpacity(j.coOp),"st"!==k&&"gs"!==k&&P.beginPath(),w.ctxTransform(j.preTransforms.finalTransform.props),m=E.length,d=0;d<m;d+=1){for(("st"===k||"gs"===k)&&(P.beginPath(),j.da&&(P.setLineDash(j.da),P.lineDashOffset=j.do)),_=(C=E[d].trNodes).length,g=0;g<_;g+=1)"m"===C[g].t?P.moveTo(C[g].p[0],C[g].p[1]):"c"===C[g].t?P.bezierCurveTo(C[g].pts[0],C[g].pts[1],C[g].pts[2],C[g].pts[3],C[g].pts[4],C[g].pts[5]):P.closePath();("st"===k||"gs"===k)&&(w.ctxStroke(),j.da&&P.setLineDash(this.dashResetter))}"st"!==k&&"gs"!==k&&this.globalData.renderer.ctxFill(j.r),w.restore()}},CVShapeElement.prototype.renderShape=function(l,u,d,m){var g,E;for(E=l,g=u.length-1;g>=0;g-=1)"tr"===u[g].ty?this.renderShapeTransform(l,E=d[g].transform):"sh"===u[g].ty||"el"===u[g].ty||"rc"===u[g].ty||"sr"===u[g].ty?this.renderPath(u[g],d[g]):"fl"===u[g].ty?this.renderFill(u[g],d[g],E):"st"===u[g].ty?this.renderStroke(u[g],d[g],E):"gf"===u[g].ty||"gs"===u[g].ty?this.renderGradientFill(u[g],d[g],E):"gr"===u[g].ty&&this.renderShape(E,u[g].it,d[g].it);m&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(l,u){if(this._isFirstFrame||u._mdf||l.transforms._mdf){var g,_,E,d=l.trNodes,m=u.paths,C=m._length;d.length=0;var w=l.transforms.finalTransform;for(E=0;E<C;E+=1){var P=m.shapes[E];if(P&&P.v){for(_=P._length,g=1;g<_;g+=1)1===g&&d.push({t:"m",p:w.applyToPointArray(P.v[0][0],P.v[0][1],0)}),d.push({t:"c",pts:w.applyToTriplePoints(P.o[g-1],P.i[g],P.v[g])});1===_&&d.push({t:"m",p:w.applyToPointArray(P.v[0][0],P.v[0][1],0)}),P.c&&_&&(d.push({t:"c",pts:w.applyToTriplePoints(P.o[g-1],P.i[0],P.v[0])}),d.push({t:"z"}))}}l.trNodes=d}},CVShapeElement.prototype.renderPath=function(l,u){if(!0!==l.hd&&l._shouldRender){var d,m=u.styledShapes.length;for(d=0;d<m;d+=1)this.renderStyledShape(u.styledShapes[d],u.sh)}},CVShapeElement.prototype.renderFill=function(l,u,d){var m=u.style;(u.c._mdf||this._isFirstFrame)&&(m.co="rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")"),(u.o._mdf||d._opMdf||this._isFirstFrame)&&(m.coOp=u.o.v*d.opacity)},CVShapeElement.prototype.renderGradientFill=function(l,u,d){var g,m=u.style;if(!m.grd||u.g._mdf||u.s._mdf||u.e._mdf||1!==l.t&&(u.h._mdf||u.a._mdf)){var _=this.globalData.canvasContext,E=u.s.v,C=u.e.v;if(1===l.t)g=_.createLinearGradient(E[0],E[1],C[0],C[1]);else{var w=Math.sqrt(Math.pow(E[0]-C[0],2)+Math.pow(E[1]-C[1],2)),P=Math.atan2(C[1]-E[1],C[0]-E[0]),k=u.h.v;k>=1?k=.99:k<=-1&&(k=-.99);var j=w*k,R=Math.cos(P+u.a.v)*j+E[0],U=Math.sin(P+u.a.v)*j+E[1];g=_.createRadialGradient(R,U,0,E[0],E[1],w)}var V,N=l.g.p,ee=u.g.c,F=1;for(V=0;V<N;V+=1)u.g._hasOpacity&&u.g._collapsable&&(F=u.g.o[2*V+1]),g.addColorStop(ee[4*V]/100,"rgba("+ee[4*V+1]+","+ee[4*V+2]+","+ee[4*V+3]+","+F+")");m.grd=g}m.coOp=u.o.v*d.opacity},CVShapeElement.prototype.renderStroke=function(l,u,d){var m=u.style,g=u.d;g&&(g._mdf||this._isFirstFrame)&&(m.da=g.dashArray,m.do=g.dashoffset[0]),(u.c._mdf||this._isFirstFrame)&&(m.co="rgb("+bmFloor(u.c.v[0])+","+bmFloor(u.c.v[1])+","+bmFloor(u.c.v[2])+")"),(u.o._mdf||d._opMdf||this._isFirstFrame)&&(m.coOp=u.o.v*d.opacity),(u.w._mdf||this._isFirstFrame)&&(m.wi=u.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var l=this.textProperty.currentData;this.renderedLetters=createSizedArray(l.l?l.l.length:0);var u=!1;l.fc?(u=!0,this.values.fill=this.buildColor(l.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=u;var d=!1;l.sc&&(d=!0,this.values.stroke=this.buildColor(l.sc),this.values.sWidth=l.sw);var g,_,m=this.globalData.fontManager.getFontByName(l.f),E=l.l,C=this.mHelper;this.stroke=d,this.values.fValue=l.finalSize+"px "+this.globalData.fontManager.getFontByName(l.f).fFamily,_=l.finalText.length;var w,P,k,j,R,U,V,N,ee,F,L=this.data.singleShape,I=.001*l.tr*l.finalSize,O=0,X=0,ie=!0,le=0;for(g=0;g<_;g+=1){P=(w=this.globalData.fontManager.getCharData(l.finalText[g],m.fStyle,this.globalData.fontManager.getFontByName(l.f).fFamily))&&w.data||{},C.reset(),L&&E[g].n&&(O=-I,X+=l.yOffset,X+=ie?1:0,ie=!1),V=(R=P.shapes?P.shapes[0].it:[]).length,C.scale(l.finalSize/100,l.finalSize/100),L&&this.applyTextPropertiesToMatrix(l,C,E[g].line,O,X),ee=createSizedArray(V-1);var ue=0;for(U=0;U<V;U+=1)if("sh"===R[U].ty){for(j=R[U].ks.k.i.length,N=R[U].ks.k,F=[],k=1;k<j;k+=1)1===k&&F.push(C.applyToX(N.v[0][0],N.v[0][1],0),C.applyToY(N.v[0][0],N.v[0][1],0)),F.push(C.applyToX(N.o[k-1][0],N.o[k-1][1],0),C.applyToY(N.o[k-1][0],N.o[k-1][1],0),C.applyToX(N.i[k][0],N.i[k][1],0),C.applyToY(N.i[k][0],N.i[k][1],0),C.applyToX(N.v[k][0],N.v[k][1],0),C.applyToY(N.v[k][0],N.v[k][1],0));F.push(C.applyToX(N.o[k-1][0],N.o[k-1][1],0),C.applyToY(N.o[k-1][0],N.o[k-1][1],0),C.applyToX(N.i[0][0],N.i[0][1],0),C.applyToY(N.i[0][0],N.i[0][1],0),C.applyToX(N.v[0][0],N.v[0][1],0),C.applyToY(N.v[0][0],N.v[0][1],0)),ee[ue]=F,ue+=1}L&&(O+=E[g].l,O+=I),this.textSpans[le]?this.textSpans[le].elem=ee:this.textSpans[le]={elem:ee},le+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var u,d,m,g,_,E,C=this.textAnimator.renderedLetters,w=this.textProperty.currentData.l;d=w.length;var P,U,V,k=null,j=null,R=null,N=this.globalData.renderer;for(u=0;u<d;u+=1)if(!w[u].n){if((P=C[u])&&(N.save(),N.ctxTransform(P.p),N.ctxOpacity(P.o)),this.fill){for(P&&P.fc?k!==P.fc&&(N.ctxFillStyle(P.fc),k=P.fc):k!==this.values.fill&&(k=this.values.fill,N.ctxFillStyle(this.values.fill)),g=(U=this.textSpans[u].elem).length,this.globalData.canvasContext.beginPath(),m=0;m<g;m+=1)for(E=(V=U[m]).length,this.globalData.canvasContext.moveTo(V[0],V[1]),_=2;_<E;_+=6)this.globalData.canvasContext.bezierCurveTo(V[_],V[_+1],V[_+2],V[_+3],V[_+4],V[_+5]);this.globalData.canvasContext.closePath(),N.ctxFill()}if(this.stroke){for(P&&P.sw?R!==P.sw&&(R=P.sw,N.ctxLineWidth(P.sw)):R!==this.values.sWidth&&(R=this.values.sWidth,N.ctxLineWidth(this.values.sWidth)),P&&P.sc?j!==P.sc&&(j=P.sc,N.ctxStrokeStyle(P.sc)):j!==this.values.stroke&&(j=this.values.stroke,N.ctxStrokeStyle(this.values.stroke)),g=(U=this.textSpans[u].elem).length,this.globalData.canvasContext.beginPath(),m=0;m<g;m+=1)for(E=(V=U[m]).length,this.globalData.canvasContext.moveTo(V[0],V[1]),_=2;_<E;_+=6)this.globalData.canvasContext.bezierCurveTo(V[_],V[_+1],V[_+2],V[_+3],V[_+4],V[_+5]);this.globalData.canvasContext.closePath(),N.ctxStroke()}P&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var l=createTag("canvas");l.width=this.assetData.w,l.height=this.assetData.h;var E,C,u=l.getContext("2d"),d=this.img.width,m=this.img.height,g=d/m,_=this.assetData.w/this.assetData.h,w=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;g>_&&"xMidYMid slice"===w||g<_&&"xMidYMid slice"!==w?E=(C=m)*_:C=(E=d)/_,u.drawImage(this.img,(d-E)/2,(m-C)/2,E,C,0,0,this.assetData.w,this.assetData.h),this.img=l}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(l){return new CVShapeElement(l,this.globalData,this)},CanvasRendererBase.prototype.createText=function(l){return new CVTextElement(l,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(l){return new CVImageElement(l,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(l){return new CVSolidElement(l,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(l){1===l[0]&&0===l[1]&&0===l[4]&&1===l[5]&&0===l[12]&&0===l[13]||this.canvasContext.transform(l[0],l[1],l[4],l[5],l[12],l[13])},CanvasRendererBase.prototype.ctxOpacity=function(l){this.canvasContext.globalAlpha*=l<0?0:l},CanvasRendererBase.prototype.ctxFillStyle=function(l){this.canvasContext.fillStyle=l},CanvasRendererBase.prototype.ctxStrokeStyle=function(l){this.canvasContext.strokeStyle=l},CanvasRendererBase.prototype.ctxLineWidth=function(l){this.canvasContext.lineWidth=l},CanvasRendererBase.prototype.ctxLineCap=function(l){this.canvasContext.lineCap=l},CanvasRendererBase.prototype.ctxLineJoin=function(l){this.canvasContext.lineJoin=l},CanvasRendererBase.prototype.ctxMiterLimit=function(l){this.canvasContext.miterLimit=l},CanvasRendererBase.prototype.ctxFill=function(l){this.canvasContext.fill(l)},CanvasRendererBase.prototype.ctxFillRect=function(l,u,d,m){this.canvasContext.fillRect(l,u,d,m)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(l){this.renderConfig.clearCanvas?(l&&(this.globalData.blendMode="source-over"),this.contextData.restore(l)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(l){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var u=this.animationItem.container.style;u.width="100%",u.height="100%";var d="0px 0px 0px";u.transformOrigin=d,u.mozTransformOrigin=d,u.webkitTransformOrigin=d,u["-webkit-transform"]=d,u.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=l,this.layers=l.layers,this.transformCanvas={w:l.w,h:l.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(l,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(l.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(l,u){var d,m,g,_;if(this.reset(),l?(m=u,this.canvasContext.canvas.width=d=l,this.canvasContext.canvas.height=m):(this.animationItem.wrapper&&this.animationItem.container?(d=this.animationItem.wrapper.offsetWidth,m=this.animationItem.wrapper.offsetHeight):(d=this.canvasContext.canvas.width,m=this.canvasContext.canvas.height),this.canvasContext.canvas.width=d*this.renderConfig.dpr,this.canvasContext.canvas.height=m*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var E=this.renderConfig.preserveAspectRatio.split(" "),C=E[1]||"meet",w=E[0]||"xMidYMid",P=w.substr(0,4),k=w.substr(4);(_=this.transformCanvas.w/this.transformCanvas.h)>(g=d/m)&&"meet"===C||_<g&&"slice"===C?(this.transformCanvas.sx=d/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=d/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=m/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=m/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===P&&(_<g&&"meet"===C||_>g&&"slice"===C)?(d-this.transformCanvas.w*(m/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===P&&(_<g&&"meet"===C||_>g&&"slice"===C)?(d-this.transformCanvas.w*(m/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===k&&(_>g&&"meet"===C||_<g&&"slice"===C)?(m-this.transformCanvas.h*(d/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===k&&(_>g&&"meet"===C||_<g&&"slice"===C)?(m-this.transformCanvas.h*(d/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=d/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=m/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var l;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),l=(this.layers?this.layers.length:0)-1;l>=0;l-=1)this.elements[l]&&this.elements[l].destroy&&this.elements[l].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(l,u){if((this.renderedFrame!==l||!0!==this.renderConfig.clearCanvas||u)&&!this.destroyed&&-1!==l){this.renderedFrame=l,this.globalData.frameNum=l-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||u,this.globalData.projectInterface.currentFrame=l;var d,m=this.layers.length;for(this.completeLayers||this.checkLayers(l),d=m-1;d>=0;d-=1)(this.completeLayers||this.elements[d])&&this.elements[d].prepareFrame(l-this.layers[d].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),d=m-1;d>=0;d-=1)(this.completeLayers||this.elements[d])&&this.elements[d].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(l){var u=this.elements;if(!u[l]&&99!==this.layers[l].ty){var d=this.createItem(this.layers[l],this,this.globalData);u[l]=d,d.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var l=2*this._length,u=0;for(u=this._length;u<l;u+=1)this.stack[u]=new CanvasContext;this._length=l},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(l){this.cArrPos-=1;var m,u=this.stack[this.cArrPos],d=u.transform,g=this.cTr.props;for(m=0;m<16;m+=1)g[m]=d[m];if(l){this.nativeContext.restore();var _=this.stack[this.cArrPos+1];this.appliedFillStyle=_.fillStyle,this.appliedStrokeStyle=_.strokeStyle,this.appliedLineWidth=_.lineWidth,this.appliedLineCap=_.lineCap,this.appliedLineJoin=_.lineJoin,this.appliedMiterLimit=_.miterLimit}this.nativeContext.setTransform(d[0],d[1],d[4],d[5],d[12],d[13]),(l||-1!==u.opacity&&this.currentOpacity!==u.opacity)&&(this.nativeContext.globalAlpha=u.opacity,this.currentOpacity=u.opacity),this.currentFillStyle=u.fillStyle,this.currentStrokeStyle=u.strokeStyle,this.currentLineWidth=u.lineWidth,this.currentLineCap=u.lineCap,this.currentLineJoin=u.lineJoin,this.currentMiterLimit=u.miterLimit},CVContextData.prototype.save=function(l){l&&this.nativeContext.save();var u=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var m,d=this.stack[this.cArrPos];for(m=0;m<16;m+=1)d.transform[m]=u[m];this.cArrPos+=1;var g=this.stack[this.cArrPos];g.opacity=d.opacity,g.fillStyle=d.fillStyle,g.strokeStyle=d.strokeStyle,g.lineWidth=d.lineWidth,g.lineCap=d.lineCap,g.lineJoin=d.lineJoin,g.miterLimit=d.miterLimit},CVContextData.prototype.setOpacity=function(l){this.stack[this.cArrPos].opacity=l},CVContextData.prototype.setContext=function(l){this.nativeContext=l},CVContextData.prototype.fillStyle=function(l){this.stack[this.cArrPos].fillStyle!==l&&(this.currentFillStyle=l,this.stack[this.cArrPos].fillStyle=l)},CVContextData.prototype.strokeStyle=function(l){this.stack[this.cArrPos].strokeStyle!==l&&(this.currentStrokeStyle=l,this.stack[this.cArrPos].strokeStyle=l)},CVContextData.prototype.lineWidth=function(l){this.stack[this.cArrPos].lineWidth!==l&&(this.currentLineWidth=l,this.stack[this.cArrPos].lineWidth=l)},CVContextData.prototype.lineCap=function(l){this.stack[this.cArrPos].lineCap!==l&&(this.currentLineCap=l,this.stack[this.cArrPos].lineCap=l)},CVContextData.prototype.lineJoin=function(l){this.stack[this.cArrPos].lineJoin!==l&&(this.currentLineJoin=l,this.stack[this.cArrPos].lineJoin=l)},CVContextData.prototype.miterLimit=function(l){this.stack[this.cArrPos].miterLimit!==l&&(this.currentMiterLimit=l,this.stack[this.cArrPos].miterLimit=l)},CVContextData.prototype.transform=function(l){this.transformMat.cloneFromProps(l);var u=this.cTr;this.transformMat.multiply(u),u.cloneFromProps(this.transformMat.props);var d=u.props;this.nativeContext.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])},CVContextData.prototype.opacity=function(l){var u=this.stack[this.cArrPos].opacity;this.stack[this.cArrPos].opacity!==(u*=l<0?0:l)&&(this.currentOpacity!==l&&(this.nativeContext.globalAlpha=l,this.currentOpacity=l),this.stack[this.cArrPos].opacity=u)},CVContextData.prototype.fill=function(l){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(l)},CVContextData.prototype.fillRect=function(l,u,d,m){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(l,u,d,m)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var u,l=this.canvasContext;for(l.beginPath(),l.moveTo(0,0),l.lineTo(this.data.w,0),l.lineTo(this.data.w,this.data.h),l.lineTo(0,this.data.h),l.lineTo(0,0),l.clip(),u=this.layers.length-1;u>=0;u-=1)(this.completeLayers||this.elements[u])&&this.elements[u].renderFrame()},CVCompElement.prototype.destroy=function(){var l;for(l=this.layers.length-1;l>=0;l-=1)this.elements[l]&&this.elements[l].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(l){return new CVCompElement(l,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(l){return new CVCompElement(l,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var u=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var d=this.finalTransform.mat.toCSS();u.transform=d,u.webkitTransform=d}this.finalTransform._opMdf&&(u.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var l;this.data.hasMask?((l=createNS("rect")).setAttribute("width",this.data.sw),l.setAttribute("height",this.data.sh),l.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((l=createTag("div")).style.width=this.data.sw+"px",l.style.height=this.data.sh+"px",l.style.backgroundColor=this.data.sc),this.layerElement.appendChild(l)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var l;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),l=this.svgElement;else{l=createNS("svg");var u=this.comp.data?this.comp.data:this.globalData.compSize;l.setAttribute("width",u.w),l.setAttribute("height",u.h),l.appendChild(this.shapesContainer),this.layerElement.appendChild(l)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=l},HShapeElement.prototype.getTransformedPoint=function(l,u){var d,m=l.length;for(d=0;d<m;d+=1)u=l[d].mProps.v.applyToPointArray(u[0],u[1],0);return u},HShapeElement.prototype.calculateShapeBoundingBox=function(l,u){var g,E,C,w,P,d=l.sh.v,m=l.transformers,_=d._length;if(!(_<=1)){for(g=0;g<_-1;g+=1)E=this.getTransformedPoint(m,d.v[g]),C=this.getTransformedPoint(m,d.o[g]),w=this.getTransformedPoint(m,d.i[g+1]),P=this.getTransformedPoint(m,d.v[g+1]),this.checkBounds(E,C,w,P,u);d.c&&(E=this.getTransformedPoint(m,d.v[g]),C=this.getTransformedPoint(m,d.o[g]),w=this.getTransformedPoint(m,d.i[0]),P=this.getTransformedPoint(m,d.v[0]),this.checkBounds(E,C,w,P,u))}},HShapeElement.prototype.checkBounds=function(l,u,d,m,g){this.getBoundsOfCurve(l,u,d,m);var _=this.shapeBoundingBox;g.x=bmMin(_.left,g.x),g.xMax=bmMax(_.right,g.xMax),g.y=bmMin(_.top,g.y),g.yMax=bmMax(_.bottom,g.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(l,u,d,m){for(var _,E,C,w,P,k,j,g=[[l[0],m[0]],[l[1],m[1]]],R=0;R<2;++R)E=6*l[R]-12*u[R]+6*d[R],_=-3*l[R]+9*u[R]-9*d[R]+3*m[R],C=3*u[R]-3*l[R],E|=0,C|=0,0==(_|=0)&&0===E||(0===_?(w=-C/E)>0&&w<1&&g[R].push(this.calculateF(w,l,u,d,m,R)):(P=E*E-4*C*_)>=0&&((k=(-E+bmSqrt(P))/(2*_))>0&&k<1&&g[R].push(this.calculateF(k,l,u,d,m,R)),(j=(-E-bmSqrt(P))/(2*_))>0&&j<1&&g[R].push(this.calculateF(j,l,u,d,m,R))));this.shapeBoundingBox.left=bmMin.apply(null,g[0]),this.shapeBoundingBox.top=bmMin.apply(null,g[1]),this.shapeBoundingBox.right=bmMax.apply(null,g[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,g[1])},HShapeElement.prototype.calculateF=function(l,u,d,m,g,_){return bmPow(1-l,3)*u[_]+3*bmPow(1-l,2)*l*d[_]+3*(1-l)*bmPow(l,2)*m[_]+bmPow(l,3)*g[_]},HShapeElement.prototype.calculateBoundingBox=function(l,u){var d,m=l.length;for(d=0;d<m;d+=1)l[d]&&l[d].sh?this.calculateShapeBoundingBox(l[d],u):l[d]&&l[d].it?this.calculateBoundingBox(l[d].it,u):l[d]&&l[d].style&&l[d].w&&this.expandStrokeBoundingBox(l[d].w,u)},HShapeElement.prototype.expandStrokeBoundingBox=function(l,u){var d=0;if(l.keyframes){for(var m=0;m<l.keyframes.length;m+=1){var g=l.keyframes[m].s;g>d&&(d=g)}d*=l.mult}else d=l.v*l.mult;u.x-=d,u.xMax+=d,u.y-=d,u.yMax+=d},HShapeElement.prototype.currentBoxContains=function(l){return this.currentBBox.x<=l.x&&this.currentBBox.y<=l.y&&this.currentBBox.width+this.currentBBox.x>=l.x+l.width&&this.currentBBox.height+this.currentBBox.y>=l.y+l.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var l=this.tempBoundingBox,u=999999;if(l.x=u,l.xMax=-u,l.y=u,l.yMax=-u,this.calculateBoundingBox(this.itemsData,l),l.width=l.xMax<l.x?0:l.xMax-l.x,l.height=l.yMax<l.y?0:l.yMax-l.y,this.currentBoxContains(l))return;var d=!1;if(this.currentBBox.w!==l.width&&(this.currentBBox.w=l.width,this.shapeCont.setAttribute("width",l.width),d=!0),this.currentBBox.h!==l.height&&(this.currentBBox.h=l.height,this.shapeCont.setAttribute("height",l.height),d=!0),d||this.currentBBox.x!==l.x||this.currentBBox.y!==l.y){this.currentBBox.w=l.width,this.currentBBox.h=l.height,this.currentBBox.x=l.x,this.currentBBox.y=l.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var m=this.shapeCont.style,g="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";m.transform=g,m.webkitTransform=g}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var l=createNS("g");this.maskedElement.appendChild(l),this.innerElem=l}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var l=this.textProperty.currentData;this.renderedLetters=createSizedArray(l.l?l.l.length:0);var u=this.innerElem.style,d=l.fc?this.buildColor(l.fc):"rgba(0,0,0,0)";u.fill=d,u.color=d,l.sc&&(u.stroke=this.buildColor(l.sc),u.strokeWidth=l.sw+"px");var m=this.globalData.fontManager.getFontByName(l.f);if(!this.globalData.fontManager.chars)if(u.fontSize=l.finalSize+"px",u.lineHeight=l.finalSize+"px",m.fClass)this.innerElem.className=m.fClass;else{u.fontFamily=m.fFamily;var g=l.fWeight;u.fontStyle=l.fStyle,u.fontWeight=g}var E,C,w=l.l;C=w.length;var P,k,j,U,R=this.mHelper,V="",N=0;for(E=0;E<C;E+=1){if(this.globalData.fontManager.chars?(this.textPaths[N]?P=this.textPaths[N]:((P=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),P.setAttribute("stroke-linejoin",lineJoinEnum[2]),P.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[N]?j=(k=this.textSpans[N]).children[0]:((k=createTag("div")).style.lineHeight=0,(j=createNS("svg")).appendChild(P),styleDiv(k)))):this.isMasked?P=this.textPaths[N]?this.textPaths[N]:createNS("text"):this.textSpans[N]?(k=this.textSpans[N],P=this.textPaths[N]):(styleDiv(k=createTag("span")),styleDiv(P=createTag("span")),k.appendChild(P)),this.globalData.fontManager.chars){var F,ee=this.globalData.fontManager.getCharData(l.finalText[E],m.fStyle,this.globalData.fontManager.getFontByName(l.f).fFamily);if(F=ee?ee.data:null,R.reset(),F&&F.shapes&&F.shapes.length&&(U=F.shapes[0].it,R.scale(l.finalSize/100,l.finalSize/100),V=this.createPathShape(R,U),P.setAttribute("d",V)),this.isMasked)this.innerElem.appendChild(P);else{if(this.innerElem.appendChild(k),F&&F.shapes){document.body.appendChild(j);var L=j.getBBox();j.setAttribute("width",L.width+2),j.setAttribute("height",L.height+2),j.setAttribute("viewBox",L.x-1+" "+(L.y-1)+" "+(L.width+2)+" "+(L.height+2));var I=j.style,O="translate("+(L.x-1)+"px,"+(L.y-1)+"px)";I.transform=O,I.webkitTransform=O,w[E].yOffset=L.y-1}else j.setAttribute("width",1),j.setAttribute("height",1);k.appendChild(j)}}else if(P.textContent=w[E].val,P.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(P);else{this.innerElem.appendChild(k);var X=P.style,ie="translate3d(0,"+-l.finalSize/1.2+"px,0)";X.transform=ie,X.webkitTransform=ie}this.textSpans[N]=this.isMasked?P:k,this.textSpans[N].style.display="block",this.textPaths[N]=P,N+=1}for(;N<this.textSpans.length;)this.textSpans[N].style.display="none",N+=1},HTextElement.prototype.renderInnerContent=function(){var l;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);var u="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";(l=this.svgElement.style).transform=u,l.webkitTransform=u}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var d,m,C,w,P,g=0,_=this.textAnimator.renderedLetters,E=this.textProperty.currentData.l;for(m=E.length,d=0;d<m;d+=1)E[d].n?g+=1:(w=this.textSpans[d],P=this.textPaths[d],C=_[g],g+=1,C._mdf.m&&(this.isMasked?w.setAttribute("transform",C.m):(w.style.webkitTransform=C.m,w.style.transform=C.m)),w.style.opacity=C.o,C.sw&&C._mdf.sw&&P.setAttribute("stroke-width",C.sw),C.sc&&C._mdf.sc&&P.setAttribute("stroke",C.sc),C.fc&&C._mdf.fc&&(P.setAttribute("fill",C.fc),P.style.color=C.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var k=this.innerElem.getBBox();if(this.currentBBox.w!==k.width&&(this.currentBBox.w=k.width,this.svgElement.setAttribute("width",k.width)),this.currentBBox.h!==k.height&&(this.currentBBox.h=k.height,this.svgElement.setAttribute("height",k.height)),this.currentBBox.w!==k.width+2||this.currentBBox.h!==k.height+2||this.currentBBox.x!==k.x-1||this.currentBBox.y!==k.y-1){this.currentBBox.w=k.width+2,this.currentBBox.h=k.height+2,this.currentBBox.x=k.x-1,this.currentBBox.y=k.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var R="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";(l=this.svgElement.style).transform=R,l.webkitTransform=R}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var l,d,m,g,u=this.comp.threeDElements.length;for(l=0;l<u;l+=1)if("3d"===(d=this.comp.threeDElements[l]).type){g=d.container.style;var _=this.pe.v+"px",E="0px 0px 0px",C="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(m=d.perspectiveElem.style).perspective=_,m.webkitPerspective=_,g.transformOrigin=E,g.mozTransformOrigin=E,g.webkitTransformOrigin=E,m.transform=C,m.webkitTransform=C}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var u,d,l=this._isFirstFrame;if(this.hierarchy)for(d=this.hierarchy.length,u=0;u<d;u+=1)l=this.hierarchy[u].finalTransform.mProp._mdf||l;if(l||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(u=d=this.hierarchy.length-1;u>=0;u-=1){var m=this.hierarchy[u].finalTransform.mProp;this.mat.translate(-m.p.v[0],-m.p.v[1],m.p.v[2]),this.mat.rotateX(-m.or.v[0]).rotateY(-m.or.v[1]).rotateZ(m.or.v[2]),this.mat.rotateX(-m.rx.v).rotateY(-m.ry.v).rotateZ(m.rz.v),this.mat.scale(1/m.s.v[0],1/m.s.v[1],1/m.s.v[2]),this.mat.translate(m.a.v[0],m.a.v[1],m.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var g;g=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var _=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)+Math.pow(g[2],2)),E=[g[0]/_,g[1]/_,g[2]/_],C=Math.sqrt(E[2]*E[2]+E[0]*E[0]),w=Math.atan2(E[1],C),P=Math.atan2(E[0],-E[2]);this.mat.rotateY(P).rotateX(-w)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var k=!this._prevMat.equals(this.mat);if((k||this.pe._mdf)&&this.comp.threeDElements){var j,R,U;for(d=this.comp.threeDElements.length,u=0;u<d;u+=1)if("3d"===(j=this.comp.threeDElements[u]).type){if(k){var V=this.mat.toCSS();(U=j.container.style).transform=V,U.webkitTransform=V}this.pe._mdf&&((R=j.perspectiveElem.style).perspective=this.pe.v+"px",R.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(l){this.prepareProperties(l,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var l=this.globalData.getAssetsPath(this.assetData),u=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",l),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(u),u.crossOrigin="anonymous",u.src=l,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(l,u){var d=l.getBaseElement();if(d){var m=this.layers[u];if(m.ddd&&this.supports3d)this.addTo3dContainer(d,u);else if(this.threeDElements)this.addTo3dContainer(d,u);else{for(var _,E,g=0;g<u;)this.elements[g]&&!0!==this.elements[g]&&this.elements[g].getBaseElement&&(E=this.elements[g],_=(this.layers[g].ddd?this.getThreeDContainerByPos(g):E.getBaseElement())||_),g+=1;_?(!m.ddd||!this.supports3d)&&this.layerElement.insertBefore(d,_):(!m.ddd||!this.supports3d)&&this.layerElement.appendChild(d)}}},HybridRendererBase.prototype.createShape=function(l){return this.supports3d?new HShapeElement(l,this.globalData,this):new SVGShapeElement(l,this.globalData,this)},HybridRendererBase.prototype.createText=function(l){return this.supports3d?new HTextElement(l,this.globalData,this):new SVGTextLottieElement(l,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(l){return this.camera=new HCameraElement(l,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(l){return this.supports3d?new HImageElement(l,this.globalData,this):new IImageElement(l,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(l){return this.supports3d?new HSolidElement(l,this.globalData,this):new ISolidElement(l,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(l){for(var u=0,d=this.threeDElements.length;u<d;){if(this.threeDElements[u].startPos<=l&&this.threeDElements[u].endPos>=l)return this.threeDElements[u].perspectiveElem;u+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(l,u){var m,g,d=createTag("div");styleDiv(d);var _=createTag("div");if(styleDiv(_),"3d"===u){(m=d.style).width=this.globalData.compSize.w+"px",m.height=this.globalData.compSize.h+"px";var E="50% 50%";m.webkitTransformOrigin=E,m.mozTransformOrigin=E,m.transformOrigin=E;var C="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(g=_.style).transform=C,g.webkitTransform=C}d.appendChild(_);var w={container:_,perspectiveElem:d,startPos:l,endPos:l,type:u};return this.threeDElements.push(w),w},HybridRendererBase.prototype.build3dContainers=function(){var l,d,u=this.layers.length,m="";for(l=0;l<u;l+=1)this.layers[l].ddd&&3!==this.layers[l].ty?("3d"!==m&&(m="3d",d=this.createThreeDContainer(l,"3d")),d.endPos=Math.max(d.endPos,l)):("2d"!==m&&(m="2d",d=this.createThreeDContainer(l,"2d")),d.endPos=Math.max(d.endPos,l));for(l=(u=this.threeDElements.length)-1;l>=0;l-=1)this.resizerElem.appendChild(this.threeDElements[l].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(l,u){for(var d=0,m=this.threeDElements.length;d<m;){if(u<=this.threeDElements[d].endPos){for(var _,g=this.threeDElements[d].startPos;g<u;)this.elements[g]&&this.elements[g].getBaseElement&&(_=this.elements[g].getBaseElement()),g+=1;_?this.threeDElements[d].container.insertBefore(l,_):this.threeDElements[d].container.appendChild(l);break}d+=1}},HybridRendererBase.prototype.configAnimation=function(l){var u=createTag("div"),d=this.animationItem.wrapper,m=u.style;m.width=l.w+"px",m.height=l.h+"px",this.resizerElem=u,styleDiv(u),m.transformStyle="flat",m.mozTransformStyle="flat",m.webkitTransformStyle="flat",this.renderConfig.className&&u.setAttribute("class",this.renderConfig.className),d.appendChild(u),m.overflow="hidden";var g=createNS("svg");g.setAttribute("width","1"),g.setAttribute("height","1"),styleDiv(g),this.resizerElem.appendChild(g);var _=createNS("defs");g.appendChild(_),this.data=l,this.setupGlobalData(l,g),this.globalData.defs=_,this.layers=l.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var l,u=this.layers?this.layers.length:0;for(l=0;l<u;l+=1)this.elements[l]&&this.elements[l].destroy&&this.elements[l].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var g,_,E,C,l=this.animationItem.wrapper.offsetWidth,u=this.animationItem.wrapper.offsetHeight;this.globalData.compSize.w/this.globalData.compSize.h>l/u?(g=l/this.globalData.compSize.w,_=l/this.globalData.compSize.w,E=0,C=(u-this.globalData.compSize.h*(l/this.globalData.compSize.w))/2):(g=u/this.globalData.compSize.h,_=u/this.globalData.compSize.h,E=(l-this.globalData.compSize.w*(u/this.globalData.compSize.h))/2,C=0);var w=this.resizerElem.style;w.webkitTransform="matrix3d("+g+",0,0,0,0,"+_+",0,0,0,0,1,0,"+E+","+C+",0,1)",w.transform=w.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var d,l=this.globalData.compSize.w,u=this.globalData.compSize.h,m=this.threeDElements.length;for(d=0;d<m;d+=1){var g=this.threeDElements[d].perspectiveElem.style;g.webkitPerspective=Math.sqrt(Math.pow(l,2)+Math.pow(u,2))+"px",g.perspective=g.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(l){var u,d=l.length,m=createTag("div");for(u=0;u<d;u+=1)if(l[u].xt){var g=this.createComp(l[u],m,this.globalData.comp,null);g.initExpressions(),this.globalData.projectInterface.registerComposition(g)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(l,u){for(var m,d=0;d<u;)this.elements[d]&&this.elements[d].getBaseElement&&(m=this.elements[d].getBaseElement()),d+=1;m?this.layerElement.insertBefore(l,m):this.layerElement.appendChild(l)},HCompElement.prototype.createComp=function(l){return this.supports3d?new HCompElement(l,this.globalData,this):new SVGCompElement(l,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(l){return this.supports3d?new HCompElement(l,this.globalData,this):new SVGCompElement(l,this.globalData,this)};var CompExpressionInterface=function(l){function u(d){for(var m=0,g=l.layers.length;m<g;){if(l.layers[m].nm===d||l.layers[m].ind===d)return l.elements[m].layerInterface;m+=1}return null}return Object.defineProperty(u,"_name",{value:l.data.nm}),u.layer=u,u.pixelAspect=1,u.height=l.data.h||l.globalData.compSize.h,u.width=l.data.w||l.globalData.compSize.w,u.pixelAspect=1,u.frameDuration=1/l.globalData.frameRate,u.displayStartTime=0,u.numLayers=l.layers.length,u};function _typeof$2(l){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}function seedRandom(l,u){var d=this,m=256,E="random",C=u.pow(m,6),w=u.pow(2,52),P=2*w,k=255;function U(I){var O,X=I.length,ie=this,le=0,ue=ie.i=ie.j=0,Ce=ie.S=[];for(X||(I=[X++]);le<m;)Ce[le]=le++;for(le=0;le<m;le++)Ce[le]=Ce[ue=k&ue+I[le%X]+(O=Ce[le])],Ce[ue]=O;ie.g=function(tt){for(var $e,Le=0,nt=ie.i,ct=ie.j,Pe=ie.S;tt--;)$e=Pe[nt=k&nt+1],Le=Le*m+Pe[k&(Pe[nt]=Pe[ct=k&ct+$e])+(Pe[ct]=$e)];return ie.i=nt,ie.j=ct,Le}}function V(I,O){return O.i=I.i,O.j=I.j,O.S=I.S.slice(),O}function N(I,O){var le,X=[],ie=_typeof$2(I);if(O&&"object"==ie)for(le in I)try{X.push(N(I[le],O-1))}catch{}return X.length?X:"string"==ie?I:I+"\0"}function ee(I,O){for(var ie,X=I+"",le=0;le<X.length;)O[k&le]=k&(ie^=19*O[k&le])+X.charCodeAt(le++);return L(O)}function L(I){return String.fromCharCode.apply(0,I)}u["seed"+E]=function R(I,O,X){var ie=[],le=ee(N((O=!0===O?{entropy:!0}:O||{}).entropy?[I,L(l)]:null===I?function F(){try{var I=new Uint8Array(m);return(d.crypto||d.msCrypto).getRandomValues(I),L(I)}catch{var O=d.navigator,X=O&&O.plugins;return[+new Date,d,X,d.screen,L(l)]}}():I,3),ie),ue=new U(ie),Ce=function(){for(var $e=ue.g(6),Le=C,nt=0;$e<w;)$e=($e+nt)*m,Le*=m,nt=ue.g(1);for(;$e>=P;)$e/=2,Le/=2,nt>>>=1;return($e+nt)/Le};return Ce.int32=function(){return 0|ue.g(4)},Ce.quick=function(){return ue.g(4)/4294967296},Ce.double=Ce,ee(L(ue.S),l),(O.pass||X||function(tt,$e,Le,nt){return nt&&(nt.S&&V(nt,ue),tt.state=function(){return V(ue,{})}),Le?(u[E]=tt,$e):tt})(Ce,le,"global"in O?O.global:this==u,O.state)},ee(u.random(),l)}function initialize$2(l){seedRandom([],l)}var propTypes={SHAPE:"shape"};function _typeof$1(l){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(l){return l.constructor===Array||l.constructor===Float32Array}function isNumerable(l,u){return"number"===l||u instanceof Number||"boolean"===l||"string"===l}function $bm_neg(l){var u=_typeof$1(l);if("number"===u||l instanceof Number||"boolean"===u)return-l;if($bm_isInstanceOfArray(l)){var d,m=l.length,g=[];for(d=0;d<m;d+=1)g[d]=-l[d];return g}return l.propType?l.v:-l}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(l,u){var d=_typeof$1(l),m=_typeof$1(u);if(isNumerable(d,l)&&isNumerable(m,u)||"string"===d||"string"===m)return l+u;if($bm_isInstanceOfArray(l)&&isNumerable(m,u))return(l=l.slice(0))[0]+=u,l;if(isNumerable(d,l)&&$bm_isInstanceOfArray(u))return(u=u.slice(0))[0]=l+u[0],u;if($bm_isInstanceOfArray(l)&&$bm_isInstanceOfArray(u)){for(var g=0,_=l.length,E=u.length,C=[];g<_||g<E;)C[g]=("number"==typeof l[g]||l[g]instanceof Number)&&("number"==typeof u[g]||u[g]instanceof Number)?l[g]+u[g]:void 0===u[g]?l[g]:l[g]||u[g],g+=1;return C}return 0}var add=sum;function sub(l,u){var d=_typeof$1(l),m=_typeof$1(u);if(isNumerable(d,l)&&isNumerable(m,u))return"string"===d&&(l=parseInt(l,10)),"string"===m&&(u=parseInt(u,10)),l-u;if($bm_isInstanceOfArray(l)&&isNumerable(m,u))return(l=l.slice(0))[0]-=u,l;if(isNumerable(d,l)&&$bm_isInstanceOfArray(u))return(u=u.slice(0))[0]=l-u[0],u;if($bm_isInstanceOfArray(l)&&$bm_isInstanceOfArray(u)){for(var g=0,_=l.length,E=u.length,C=[];g<_||g<E;)C[g]=("number"==typeof l[g]||l[g]instanceof Number)&&("number"==typeof u[g]||u[g]instanceof Number)?l[g]-u[g]:void 0===u[g]?l[g]:l[g]||u[g],g+=1;return C}return 0}function mul(l,u){var g,_,E,d=_typeof$1(l),m=_typeof$1(u);if(isNumerable(d,l)&&isNumerable(m,u))return l*u;if($bm_isInstanceOfArray(l)&&isNumerable(m,u)){for(g=createTypedArray("float32",E=l.length),_=0;_<E;_+=1)g[_]=l[_]*u;return g}if(isNumerable(d,l)&&$bm_isInstanceOfArray(u)){for(g=createTypedArray("float32",E=u.length),_=0;_<E;_+=1)g[_]=l*u[_];return g}return 0}function div(l,u){var g,_,E,d=_typeof$1(l),m=_typeof$1(u);if(isNumerable(d,l)&&isNumerable(m,u))return l/u;if($bm_isInstanceOfArray(l)&&isNumerable(m,u)){for(g=createTypedArray("float32",E=l.length),_=0;_<E;_+=1)g[_]=l[_]/u;return g}if(isNumerable(d,l)&&$bm_isInstanceOfArray(u)){for(g=createTypedArray("float32",E=u.length),_=0;_<E;_+=1)g[_]=l/u[_];return g}return 0}function mod(l,u){return"string"==typeof l&&(l=parseInt(l,10)),"string"==typeof u&&(u=parseInt(u,10)),l%u}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(l,u,d){if(u>d){var m=d;d=u,u=m}return Math.min(Math.max(l,u),d)}function radiansToDegrees(l){return l/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(l){return l*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(l,u){if("number"==typeof l||l instanceof Number)return Math.abs(l-(u=u||0));u||(u=helperLengthArray);var d,m=Math.min(l.length,u.length),g=0;for(d=0;d<m;d+=1)g+=Math.pow(u[d]-l[d],2);return Math.sqrt(g)}function normalize(l){return div(l,length(l))}function rgbToHsl(l){var E,C,u=l[0],d=l[1],m=l[2],g=Math.max(u,d,m),_=Math.min(u,d,m),w=(g+_)/2;if(g===_)E=0,C=0;else{var P=g-_;switch(C=w>.5?P/(2-g-_):P/(g+_),g){case u:E=(d-m)/P+(d<m?6:0);break;case d:E=(m-u)/P+2;break;case m:E=(u-d)/P+4}E/=6}return[E,C,w,l[3]]}function hue2rgb(l,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+6*(u-l)*d:d<.5?u:d<2/3?l+(u-l)*(2/3-d)*6:l}function hslToRgb(l){var g,_,E,u=l[0],d=l[1],m=l[2];if(0===d)g=m,E=m,_=m;else{var C=m<.5?m*(1+d):m+d-m*d,w=2*m-C;g=hue2rgb(w,C,u+1/3),_=hue2rgb(w,C,u),E=hue2rgb(w,C,u-1/3)}return[g,_,E,l[3]]}function linear(l,u,d,m,g){if((void 0===m||void 0===g)&&(m=u,g=d,u=0,d=1),d<u){var _=d;d=u,u=_}if(l<=u)return m;if(l>=d)return g;var E=d===u?0:(l-u)/(d-u);if(!m.length)return m+(g-m)*E;var C,w=m.length,P=createTypedArray("float32",w);for(C=0;C<w;C+=1)P[C]=m[C]+(g[C]-m[C])*E;return P}function random(l,u){if(void 0===u&&(void 0===l?(l=0,u=1):(u=l,l=void 0)),u.length){var d,m=u.length;l||(l=createTypedArray("float32",m));var g=createTypedArray("float32",m),_=BMMath.random();for(d=0;d<m;d+=1)g[d]=l[d]+_*(u[d]-l[d]);return g}return void 0===l&&(l=0),l+BMMath.random()*(u-l)}function createPath(l,u,d,m){var g,_=l.length,E=shapePool.newElement();E.setPathData(!!m,_);var w,P,C=[0,0];for(g=0;g<_;g+=1)E.setTripleAt(l[g][0],l[g][1],(P=d&&d[g]?d[g]:C)[0]+l[g][0],P[1]+l[g][1],(w=u&&u[g]?u[g]:C)[0]+l[g][0],w[1]+l[g][1],g,!0);return E}function initiateExpression(elem,data,property){function noOp(l){return l}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function l(u,d){var m,g,_=this.pv.length?this.pv.length:1,E=createTypedArray("float32",_),C=Math.floor(5*time);for(m=0,g=0;m<C;){for(g=0;g<_;g+=1)E[g]+=-d+2*d*BMMath.random();m+=1}var w=5*time,P=w-Math.floor(w),k=createTypedArray("float32",_);if(_>1){for(g=0;g<_;g+=1)k[g]=this.pv[g]+E[g]+(-d+2*d*BMMath.random())*P;return k}return this.pv+E[0]+(-d+2*d*BMMath.random())*P}.bind(this);function loopInDuration(l,u){return loopIn(l,u,!0)}function loopOutDuration(l,u){return loopOut(l,u,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(l,u){var d=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],m=Math.atan2(d[0],Math.sqrt(d[1]*d[1]+d[2]*d[2]))/degToRads;return[-Math.atan2(d[1],d[2])/degToRads,m,0]}function easeOut(l,u,d,m,g){return applyEase(easeOutBez,l,u,d,m,g)}function easeIn(l,u,d,m,g){return applyEase(easeInBez,l,u,d,m,g)}function ease(l,u,d,m,g){return applyEase(easeInOutBez,l,u,d,m,g)}function applyEase(l,u,d,m,g,_){void 0===g?(g=d,_=m):u=(u-d)/(m-d),u>1?u=1:u<0&&(u=0);var E=l(u);if($bm_isInstanceOfArray(g)){var C,w=g.length,P=createTypedArray("float32",w);for(C=0;C<w;C+=1)P[C]=(_[C]-g[C])*E+g[C];return P}return(_-g)*E+g}function nearestKey(l){var u,m,g,d=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(m=-1,(l*=elem.comp.globalData.frameRate)<data.k[0].t)m=1,g=data.k[0].t;else{for(u=0;u<d-1;u+=1){if(l===data.k[u].t){m=u+1,g=data.k[u].t;break}if(l>data.k[u].t&&l<data.k[u+1].t){l-data.k[u].t>data.k[u+1].t-l?(m=u+2,g=data.k[u+1].t):(m=u+1,g=data.k[u].t);break}}-1===m&&(m=u+1,g=data.k[u].t)}else m=0,g=0;var _={};return _.index=m,_.time=g/elem.comp.globalData.frameRate,_}function key(l){var u,d,m;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+l);u={time:data.k[l-=1].t/elem.comp.globalData.frameRate,value:[]};var g=Object.prototype.hasOwnProperty.call(data.k[l],"s")?data.k[l].s:data.k[l-1].e;for(m=g.length,d=0;d<m;d+=1)u[d]=g[d],u.value[d]=g[d];return u}function framesToTime(l,u){return u||(u=elem.comp.globalData.frameRate),l/u}function timeToFrames(l,u){return!l&&0!==l&&(l=time),u||(u=elem.comp.globalData.frameRate),l*u}function seedRandom(l){BMMath.seedrandom(randSeed+l)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(l,u){return"string"==typeof value?void 0===u?value.substring(l):value.substring(l,u):""}function substr(l,u){return"string"==typeof value?void 0===u?value.substr(l):value.substr(l,u):""}function posterizeTime(l){time=0===l?0:Math.floor(time*l)/l,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(l){return value=l,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisComp=elem.comp.compInterface,toWorld=(thisLayer=elem.layerInterface).toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4===elemType&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var l={initExpressions:function u(d){var m=0,g=[];d.renderer.compInterface=CompExpressionInterface(d.renderer),d.renderer.globalData.projectInterface.registerComposition(d.renderer),d.renderer.globalData.pushExpression=function _(){m+=1},d.renderer.globalData.popExpression=function E(){0==(m-=1)&&function w(){var P,k=g.length;for(P=0;P<k;P+=1)g[P].release();g.length=0}()},d.renderer.globalData.registerExpressionProperty=function C(P){-1===g.indexOf(P)&&g.push(P)}}};return l.resetFrame=ExpressionManager.resetFrame,l}(),MaskManagerInterface=function(){function l(d,m){this._mask=d,this._data=m}return Object.defineProperty(l.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(l.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(m){var _,g=createSizedArray(m.viewData.length),E=m.viewData.length;for(_=0;_<E;_+=1)g[_]=new l(m.viewData[_],m.masksProperties[_]);return function(P){for(_=0;_<E;){if(m.masksProperties[_].nm===P)return g[_];_+=1}return null}}}(),ExpressionPropertyInterface=function(){var l={pv:0,v:0,mult:1},u={pv:[0,0,0],v:[0,0,0],mult:1};function d(E,C,w){Object.defineProperty(E,"velocity",{get:function(){return C.getVelocityAtTime(C.comp.currentFrame)}}),E.numKeys=C.keyframes?C.keyframes.length:0,E.key=function(P){if(!E.numKeys)return 0;var k;k="s"in C.keyframes[P-1]?C.keyframes[P-1].s:"e"in C.keyframes[P-2]?C.keyframes[P-2].e:C.keyframes[P-2].s;var j="unidimensional"===w?new Number(k):Object.assign({},k);return j.time=C.keyframes[P-1].t/C.elem.comp.globalData.frameRate,j.value="unidimensional"===w?k[0]:k,j},E.valueAtTime=C.getValueAtTime,E.speedAtTime=C.getSpeedAtTime,E.velocityAtTime=C.getVelocityAtTime,E.propertyGroup=C.propertyGroup}function _(){return l}return function(E){return E?"unidimensional"===E.propType?function m(E){(!E||!("pv"in E))&&(E=l);var C=1/E.mult,w=E.pv*C,P=new Number(w);return P.value=w,d(P,E,"unidimensional"),function(){return E.k&&E.getValue(),P.value!==(w=E.v*C)&&((P=new Number(w)).value=w,d(P,E,"unidimensional")),P}}(E):function g(E){(!E||!("pv"in E))&&(E=u);var C=1/E.mult,w=E.data&&E.data.l||E.pv.length,P=createTypedArray("float32",w),k=createTypedArray("float32",w);return P.value=k,d(P,E,"multidimensional"),function(){E.k&&E.getValue();for(var j=0;j<w;j+=1)k[j]=E.v[j]*C,P[j]=k[j];return P}}(E):_}}(),TransformExpressionInterface=function(l){function u(E){switch(E){case"scale":case"Scale":case"ADBE Scale":case 6:return u.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return u.rotation;case"ADBE Rotate X":return u.xRotation;case"ADBE Rotate Y":return u.yRotation;case"position":case"Position":case"ADBE Position":case 2:return u.position;case"ADBE Position_0":return u.xPosition;case"ADBE Position_1":return u.yPosition;case"ADBE Position_2":return u.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return u.anchorPoint;case"opacity":case"Opacity":case 11:return u.opacity;default:return null}}var d,m,g,_;return Object.defineProperty(u,"rotation",{get:ExpressionPropertyInterface(l.r||l.rz)}),Object.defineProperty(u,"zRotation",{get:ExpressionPropertyInterface(l.rz||l.r)}),Object.defineProperty(u,"xRotation",{get:ExpressionPropertyInterface(l.rx)}),Object.defineProperty(u,"yRotation",{get:ExpressionPropertyInterface(l.ry)}),Object.defineProperty(u,"scale",{get:ExpressionPropertyInterface(l.s)}),l.p?_=ExpressionPropertyInterface(l.p):(d=ExpressionPropertyInterface(l.px),m=ExpressionPropertyInterface(l.py),l.pz&&(g=ExpressionPropertyInterface(l.pz))),Object.defineProperty(u,"position",{get:function(){return l.p?_():[d(),m(),g?g():0]}}),Object.defineProperty(u,"xPosition",{get:ExpressionPropertyInterface(l.px)}),Object.defineProperty(u,"yPosition",{get:ExpressionPropertyInterface(l.py)}),Object.defineProperty(u,"zPosition",{get:ExpressionPropertyInterface(l.pz)}),Object.defineProperty(u,"anchorPoint",{get:ExpressionPropertyInterface(l.a)}),Object.defineProperty(u,"opacity",{get:ExpressionPropertyInterface(l.o)}),Object.defineProperty(u,"skew",{get:ExpressionPropertyInterface(l.sk)}),Object.defineProperty(u,"skewAxis",{get:ExpressionPropertyInterface(l.sa)}),Object.defineProperty(u,"orientation",{get:ExpressionPropertyInterface(l.or)}),u},LayerExpressionInterface=function(){function l(P){var k=new Matrix;return void 0!==P?this._elem.finalTransform.mProp.getValueAtTime(P).clone(k):this._elem.finalTransform.mProp.applyToMatrix(k),k}function u(P,k){var j=this.getMatrix(k);return j.props[12]=0,j.props[13]=0,j.props[14]=0,this.applyPoint(j,P)}function d(P,k){var j=this.getMatrix(k);return this.applyPoint(j,P)}function m(P,k){var j=this.getMatrix(k);return j.props[12]=0,j.props[13]=0,j.props[14]=0,this.invertPoint(j,P)}function g(P,k){var j=this.getMatrix(k);return this.invertPoint(j,P)}function _(P,k){if(this._elem.hierarchy&&this._elem.hierarchy.length){var j,R=this._elem.hierarchy.length;for(j=0;j<R;j+=1)this._elem.hierarchy[j].finalTransform.mProp.applyToMatrix(P)}return P.applyToPointArray(k[0],k[1],k[2]||0)}function E(P,k){if(this._elem.hierarchy&&this._elem.hierarchy.length){var j,R=this._elem.hierarchy.length;for(j=0;j<R;j+=1)this._elem.hierarchy[j].finalTransform.mProp.applyToMatrix(P)}return P.inversePoint(k)}function C(P){var k=new Matrix;if(k.reset(),this._elem.finalTransform.mProp.applyToMatrix(k),this._elem.hierarchy&&this._elem.hierarchy.length){var j,R=this._elem.hierarchy.length;for(j=0;j<R;j+=1)this._elem.hierarchy[j].finalTransform.mProp.applyToMatrix(k);return k.inversePoint(P)}return k.inversePoint(P)}function w(){return[1,1,1,1]}return function(P){var k;function U(N){switch(N){case"ADBE Root Vectors Group":case"Contents":case 2:return U.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return k;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return U.effect;case"ADBE Text Properties":return U.textInterface;default:return null}}U.getMatrix=l,U.invertPoint=E,U.applyPoint=_,U.toWorld=d,U.toWorldVec=u,U.fromWorld=g,U.fromWorldVec=m,U.toComp=d,U.fromComp=C,U.sampleImage=w,U.sourceRectAtTime=P.sourceRectAtTime.bind(P),U._elem=P;var V=getDescriptor(k=TransformExpressionInterface(P.finalTransform.mProp),"anchorPoint");return Object.defineProperties(U,{hasParent:{get:function(){return P.hierarchy.length}},parent:{get:function(){return P.hierarchy[0].layerInterface}},rotation:getDescriptor(k,"rotation"),scale:getDescriptor(k,"scale"),position:getDescriptor(k,"position"),opacity:getDescriptor(k,"opacity"),anchorPoint:V,anchor_point:V,transform:{get:function(){return k}},active:{get:function(){return P.isInRange}}}),U.startTime=P.data.st,U.index=P.data.ind,U.source=P.data.refId,U.height=0===P.data.ty?P.data.h:100,U.width=0===P.data.ty?P.data.w:100,U.inPoint=P.data.ip/P.comp.globalData.frameRate,U.outPoint=P.data.op/P.comp.globalData.frameRate,U._name=P.data.nm,U.registerMaskInterface=function j(N){U.mask=new MaskManagerInterface(N,P)},U.registerEffectsInterface=function R(N){U.effect=N},U}}(),propertyGroupFactory=function(l,u){return function(d){return(d=void 0===d?1:d)<=0?l:u(d-1)}},PropertyInterface=function(l,u){var d={_name:l};return function m(g){return(g=void 0===g?1:g)<=0?d:u(g-1)}},EffectsExpressionInterface=function(){function d(g,_,E,C){function w(U){for(var V=g.ef,N=0,ee=V.length;N<ee;){if(U===V[N].nm||U===V[N].mn||U===V[N].ix)return 5===V[N].ty?k[N]:k[N]();N+=1}throw new Error}var j,P=propertyGroupFactory(w,E),k=[],R=g.ef.length;for(j=0;j<R;j+=1)k.push(5===g.ef[j].ty?d(g.ef[j],_.effectElements[j],_.effectElements[j].propertyGroup,C):m(_.effectElements[j],g.ef[j].ty,C,P));return"ADBE Color Control"===g.mn&&Object.defineProperty(w,"color",{get:function(){return k[0]()}}),Object.defineProperties(w,{numProperties:{get:function(){return g.np}},_name:{value:g.nm},propertyGroup:{value:P}}),w.active=w.enabled=0!==g.en,w}function m(g,_,E,C){var w=ExpressionPropertyInterface(g.p);return g.p.setGroupProperty&&g.p.setGroupProperty(PropertyInterface("",C)),function P(){return 10===_?E.comp.compInterface(g.p.v):w()}}return{createEffectsInterface:function u(g,_){if(g.effectsManager){var w,E=[],C=g.data.ef,P=g.effectsManager.effectElements.length;for(w=0;w<P;w+=1)E.push(d(C[w],g.effectsManager.effectElements[w],_,g));var k=g.data.ef||[],j=function(U){for(w=0,P=k.length;w<P;){if(U===k[w].nm||U===k[w].mn||U===k[w].ix)return E[w];w+=1}return null};return Object.defineProperty(j,"numProperties",{get:function(){return k.length}}),j}return null}}}(),ShapePathInterface=function(u,d,m){var g=d.sh;function _(C){return"Shape"===C||"shape"===C||"Path"===C||"path"===C||"ADBE Vector Shape"===C||2===C?_.path:null}var E=propertyGroupFactory(_,m);return g.setGroupProperty(PropertyInterface("Path",E)),Object.defineProperties(_,{path:{get:function(){return g.k&&g.getValue(),g}},shape:{get:function(){return g.k&&g.getValue(),g}},_name:{value:u.nm},ix:{value:u.ix},propertyIndex:{value:u.ix},mn:{value:u.mn},propertyGroup:{value:m}}),_},ShapeExpressionInterface=function(){function l(V,N,ee){var L,F=[],I=V?V.length:0;for(L=0;L<I;L+=1)"gr"===V[L].ty?F.push(d(V[L],N[L],ee)):"fl"===V[L].ty?F.push(m(V[L],N[L],ee)):"st"===V[L].ty?F.push(E(V[L],N[L],ee)):"tm"===V[L].ty?F.push(C(V[L],N[L],ee)):"tr"===V[L].ty||F.push("el"===V[L].ty?P(V[L],N[L],ee):"sr"===V[L].ty?k(V[L],N[L],ee):"sh"===V[L].ty?ShapePathInterface(V[L],N[L],ee):"rc"===V[L].ty?j(V[L],N[L],ee):"rd"===V[L].ty?R(V[L],N[L],ee):"rp"===V[L].ty?U(V[L],N[L],ee):"gf"===V[L].ty?g(V[L],N[L],ee):function V(){return null});return F}function d(V,N,ee){var F=function(X){switch(X){case"ADBE Vectors Group":case"Contents":case 2:return F.content;default:return F.transform}};F.propertyGroup=propertyGroupFactory(F,ee);var L=function u(V,N,ee){var F,L=function(X){for(var ie=0,le=F.length;ie<le;){if(F[ie]._name===X||F[ie].mn===X||F[ie].propertyIndex===X||F[ie].ix===X||F[ie].ind===X)return F[ie];ie+=1}return"number"==typeof X?F[X-1]:null};L.propertyGroup=propertyGroupFactory(L,ee),F=l(V.it,N.it,L.propertyGroup),L.numProperties=F.length;var I=w(V.it[V.it.length-1],N.it[N.it.length-1],L.propertyGroup);return L.transform=I,L.propertyIndex=V.cix,L._name=V.nm,L}(V,N,F.propertyGroup),I=w(V.it[V.it.length-1],N.it[N.it.length-1],F.propertyGroup);return F.content=L,F.transform=I,Object.defineProperty(F,"_name",{get:function(){return V.nm}}),F.numProperties=V.np,F.propertyIndex=V.ix,F.nm=V.nm,F.mn=V.mn,F}function m(V,N,ee){function F(L){return"Color"===L||"color"===L?F.color:"Opacity"===L||"opacity"===L?F.opacity:null}return Object.defineProperties(F,{color:{get:ExpressionPropertyInterface(N.c)},opacity:{get:ExpressionPropertyInterface(N.o)},_name:{value:V.nm},mn:{value:V.mn}}),N.c.setGroupProperty(PropertyInterface("Color",ee)),N.o.setGroupProperty(PropertyInterface("Opacity",ee)),F}function g(V,N,ee){function F(L){return"Start Point"===L||"start point"===L?F.startPoint:"End Point"===L||"end point"===L?F.endPoint:"Opacity"===L||"opacity"===L?F.opacity:null}return Object.defineProperties(F,{startPoint:{get:ExpressionPropertyInterface(N.s)},endPoint:{get:ExpressionPropertyInterface(N.e)},opacity:{get:ExpressionPropertyInterface(N.o)},type:{get:function(){return"a"}},_name:{value:V.nm},mn:{value:V.mn}}),N.s.setGroupProperty(PropertyInterface("Start Point",ee)),N.e.setGroupProperty(PropertyInterface("End Point",ee)),N.o.setGroupProperty(PropertyInterface("Opacity",ee)),F}function E(V,N,ee){var O,ue,F=propertyGroupFactory(le,ee),L=propertyGroupFactory(ie,F),X=V.d?V.d.length:0,ie={};for(O=0;O<X;O+=1)ue=O,Object.defineProperty(ie,V.d[ue].nm,{get:ExpressionPropertyInterface(N.d.dataProps[ue].p)}),N.d.dataProps[O].p.setGroupProperty(L);function le(ue){return"Color"===ue||"color"===ue?le.color:"Opacity"===ue||"opacity"===ue?le.opacity:"Stroke Width"===ue||"stroke width"===ue?le.strokeWidth:null}return Object.defineProperties(le,{color:{get:ExpressionPropertyInterface(N.c)},opacity:{get:ExpressionPropertyInterface(N.o)},strokeWidth:{get:ExpressionPropertyInterface(N.w)},dash:{get:function(){return ie}},_name:{value:V.nm},mn:{value:V.mn}}),N.c.setGroupProperty(PropertyInterface("Color",F)),N.o.setGroupProperty(PropertyInterface("Opacity",F)),N.w.setGroupProperty(PropertyInterface("Stroke Width",F)),le}function C(V,N,ee){function F(I){return I===V.e.ix||"End"===I||"end"===I?F.end:I===V.s.ix?F.start:I===V.o.ix?F.offset:null}var L=propertyGroupFactory(F,ee);return F.propertyIndex=V.ix,N.s.setGroupProperty(PropertyInterface("Start",L)),N.e.setGroupProperty(PropertyInterface("End",L)),N.o.setGroupProperty(PropertyInterface("Offset",L)),F.propertyIndex=V.ix,F.propertyGroup=ee,Object.defineProperties(F,{start:{get:ExpressionPropertyInterface(N.s)},end:{get:ExpressionPropertyInterface(N.e)},offset:{get:ExpressionPropertyInterface(N.o)},_name:{value:V.nm}}),F.mn=V.mn,F}function w(V,N,ee){function F(I){return V.a.ix===I||"Anchor Point"===I?F.anchorPoint:V.o.ix===I||"Opacity"===I?F.opacity:V.p.ix===I||"Position"===I?F.position:V.r.ix===I||"Rotation"===I||"ADBE Vector Rotation"===I?F.rotation:V.s.ix===I||"Scale"===I?F.scale:V.sk&&V.sk.ix===I||"Skew"===I?F.skew:V.sa&&V.sa.ix===I||"Skew Axis"===I?F.skewAxis:null}var L=propertyGroupFactory(F,ee);return N.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",L)),N.transform.mProps.p.setGroupProperty(PropertyInterface("Position",L)),N.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",L)),N.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",L)),N.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",L)),N.transform.mProps.sk&&(N.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",L)),N.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",L))),N.transform.op.setGroupProperty(PropertyInterface("Opacity",L)),Object.defineProperties(F,{opacity:{get:ExpressionPropertyInterface(N.transform.mProps.o)},position:{get:ExpressionPropertyInterface(N.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(N.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(N.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(N.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(N.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(N.transform.mProps.sa)},_name:{value:V.nm}}),F.ty="tr",F.mn=V.mn,F.propertyGroup=ee,F}function P(V,N,ee){function F(O){return V.p.ix===O?F.position:V.s.ix===O?F.size:null}var L=propertyGroupFactory(F,ee);F.propertyIndex=V.ix;var I="tm"===N.sh.ty?N.sh.prop:N.sh;return I.s.setGroupProperty(PropertyInterface("Size",L)),I.p.setGroupProperty(PropertyInterface("Position",L)),Object.defineProperties(F,{size:{get:ExpressionPropertyInterface(I.s)},position:{get:ExpressionPropertyInterface(I.p)},_name:{value:V.nm}}),F.mn=V.mn,F}function k(V,N,ee){function F(O){return V.p.ix===O?F.position:V.r.ix===O?F.rotation:V.pt.ix===O?F.points:V.or.ix===O||"ADBE Vector Star Outer Radius"===O?F.outerRadius:V.os.ix===O?F.outerRoundness:!V.ir||V.ir.ix!==O&&"ADBE Vector Star Inner Radius"!==O?V.is&&V.is.ix===O?F.innerRoundness:null:F.innerRadius}var L=propertyGroupFactory(F,ee),I="tm"===N.sh.ty?N.sh.prop:N.sh;return F.propertyIndex=V.ix,I.or.setGroupProperty(PropertyInterface("Outer Radius",L)),I.os.setGroupProperty(PropertyInterface("Outer Roundness",L)),I.pt.setGroupProperty(PropertyInterface("Points",L)),I.p.setGroupProperty(PropertyInterface("Position",L)),I.r.setGroupProperty(PropertyInterface("Rotation",L)),V.ir&&(I.ir.setGroupProperty(PropertyInterface("Inner Radius",L)),I.is.setGroupProperty(PropertyInterface("Inner Roundness",L))),Object.defineProperties(F,{position:{get:ExpressionPropertyInterface(I.p)},rotation:{get:ExpressionPropertyInterface(I.r)},points:{get:ExpressionPropertyInterface(I.pt)},outerRadius:{get:ExpressionPropertyInterface(I.or)},outerRoundness:{get:ExpressionPropertyInterface(I.os)},innerRadius:{get:ExpressionPropertyInterface(I.ir)},innerRoundness:{get:ExpressionPropertyInterface(I.is)},_name:{value:V.nm}}),F.mn=V.mn,F}function j(V,N,ee){function F(O){return V.p.ix===O?F.position:V.r.ix===O?F.roundness:V.s.ix===O||"Size"===O||"ADBE Vector Rect Size"===O?F.size:null}var L=propertyGroupFactory(F,ee),I="tm"===N.sh.ty?N.sh.prop:N.sh;return F.propertyIndex=V.ix,I.p.setGroupProperty(PropertyInterface("Position",L)),I.s.setGroupProperty(PropertyInterface("Size",L)),I.r.setGroupProperty(PropertyInterface("Rotation",L)),Object.defineProperties(F,{position:{get:ExpressionPropertyInterface(I.p)},roundness:{get:ExpressionPropertyInterface(I.r)},size:{get:ExpressionPropertyInterface(I.s)},_name:{value:V.nm}}),F.mn=V.mn,F}function R(V,N,ee){function F(O){return V.r.ix===O||"Round Corners 1"===O?F.radius:null}var L=propertyGroupFactory(F,ee),I=N;return F.propertyIndex=V.ix,I.rd.setGroupProperty(PropertyInterface("Radius",L)),Object.defineProperties(F,{radius:{get:ExpressionPropertyInterface(I.rd)},_name:{value:V.nm}}),F.mn=V.mn,F}function U(V,N,ee){function F(O){return V.c.ix===O||"Copies"===O?F.copies:V.o.ix===O||"Offset"===O?F.offset:null}var L=propertyGroupFactory(F,ee),I=N;return F.propertyIndex=V.ix,I.c.setGroupProperty(PropertyInterface("Copies",L)),I.o.setGroupProperty(PropertyInterface("Offset",L)),Object.defineProperties(F,{copies:{get:ExpressionPropertyInterface(I.c)},offset:{get:ExpressionPropertyInterface(I.o)},_name:{value:V.nm}}),F.mn=V.mn,F}return function(V,N,ee){var F;function L(O){if("number"==typeof O)return 0===(O=void 0===O?1:O)?ee:F[O-1];for(var X=0,ie=F.length;X<ie;){if(F[X]._name===O)return F[X];X+=1}return null}return L.propertyGroup=propertyGroupFactory(L,function I(){return ee}),F=l(V,N,L.propertyGroup),L.numProperties=F.length,L._name="Contents",L}}(),TextExpressionInterface=function(l){var u;function d(m){return"ADBE Text Document"===m?d.sourceText:null}return Object.defineProperty(d,"sourceText",{get:function(){l.textProperty.getValue();var g=l.textProperty.currentData.t;return(!u||g!==u.value)&&((u=new String(g)).value=g||new String(g),Object.defineProperty(u,"style",{get:function(){return{fillColor:l.textProperty.currentData.fc}}})),u}}),d};function _typeof(l){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(l)}var FootageInterface=(u=function(m){function g(_){return"Outline"===_?g.outlineInterface():null}return g._name="Outline",g.outlineInterface=function(m){var g="",_=m.getFootageData();function C(w){if(_[w])return g=w,"object"===_typeof(_=_[w])?C:_;var P=w.indexOf(g);if(-1!==P){var k=parseInt(w.substr(P+g.length),10);return"object"===_typeof(_=_[k])?C:_}return""}return function E(){return g="",_=m.getFootageData(),C}}(m),g},function(d){function m(g){return"Data"===g?m.dataInterface:null}return m._name="Data",m.dataInterface=u(d),m}),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface},u;function getInterface(l){return interfaces[l]||null}var expressionHelpers={searchExpressions:function l(E,C,w){C.x&&(w.k=!0,w.x=!0,w.initiateExpression=ExpressionManager.initiateExpression,w.effectsSequence.push(w.initiateExpression(E,C,w).bind(w)))},getSpeedAtTime:function d(E){var w=this.getValueAtTime(E),P=this.getValueAtTime(E+-.01),k=0;if(w.length){var j;for(j=0;j<w.length;j+=1)k+=Math.pow(P[j]-w[j],2);k=100*Math.sqrt(k)}else k=0;return k},getVelocityAtTime:function m(E){if(void 0!==this.vel)return this.vel;var k,j,C=-.001,w=this.getValueAtTime(E),P=this.getValueAtTime(E+C);if(w.length)for(k=createTypedArray("float32",w.length),j=0;j<w.length;j+=1)k[j]=(P[j]-w[j])/C;else k=(P-w)/C;return k},getValueAtTime:function u(E){return E*=this.elem.globalData.frameRate,(E-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<E?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(E,this._cachingAtTime),this._cachingAtTime.lastFrame=E),this._cachingAtTime.value},getStaticValueAtTime:function g(){return this.pv},setGroupProperty:function _(E){this.propertyGroup=E}};function addPropertyDecorator(){function l(R,U,V){if(!this.k||!this.keyframes)return this.pv;R=R?R.toLowerCase():"";var L,I,O,X,ie,N=this.comp.renderedFrame,ee=this.keyframes,F=ee[ee.length-1].t;if(N<=F)return this.pv;if(V?I=F-(L=U?Math.abs(F-this.elem.comp.globalData.frameRate*U):Math.max(0,F-this.elem.data.ip)):((!U||U>ee.length-1)&&(U=ee.length-1),L=F-(I=ee[ee.length-1-U].t)),"pingpong"===R){if(Math.floor((N-I)/L)%2!=0)return this.getValueAtTime((L-(N-I)%L+I)/this.comp.globalData.frameRate,0)}else{if("offset"===R){var ue=this.getValueAtTime(I/this.comp.globalData.frameRate,0),Ce=this.getValueAtTime(F/this.comp.globalData.frameRate,0),tt=this.getValueAtTime(((N-I)%L+I)/this.comp.globalData.frameRate,0),$e=Math.floor((N-I)/L);if(this.pv.length){for(X=(ie=new Array(ue.length)).length,O=0;O<X;O+=1)ie[O]=(Ce[O]-ue[O])*$e+tt[O];return ie}return(Ce-ue)*$e+tt}if("continue"===R){var Le=this.getValueAtTime(F/this.comp.globalData.frameRate,0),nt=this.getValueAtTime((F-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(X=(ie=new Array(Le.length)).length,O=0;O<X;O+=1)ie[O]=Le[O]+(N-F)/this.comp.globalData.frameRate*(Le[O]-nt[O])/5e-4;return ie}return Le+(N-F)/.001*(Le-nt)}}return this.getValueAtTime(((N-I)%L+I)/this.comp.globalData.frameRate,0)}function u(R,U,V){if(!this.k)return this.pv;R=R?R.toLowerCase():"";var L,I,O,X,ie,N=this.comp.renderedFrame,ee=this.keyframes,F=ee[0].t;if(N>=F)return this.pv;if(V?I=F+(L=U?Math.abs(this.elem.comp.globalData.frameRate*U):Math.max(0,this.elem.data.op-F)):((!U||U>ee.length-1)&&(U=ee.length-1),L=(I=ee[U].t)-F),"pingpong"===R){if(Math.floor((F-N)/L)%2==0)return this.getValueAtTime(((F-N)%L+F)/this.comp.globalData.frameRate,0)}else{if("offset"===R){var ue=this.getValueAtTime(F/this.comp.globalData.frameRate,0),Ce=this.getValueAtTime(I/this.comp.globalData.frameRate,0),tt=this.getValueAtTime((L-(F-N)%L+F)/this.comp.globalData.frameRate,0),$e=Math.floor((F-N)/L)+1;if(this.pv.length){for(X=(ie=new Array(ue.length)).length,O=0;O<X;O+=1)ie[O]=tt[O]-(Ce[O]-ue[O])*$e;return ie}return tt-(Ce-ue)*$e}if("continue"===R){var Le=this.getValueAtTime(F/this.comp.globalData.frameRate,0),nt=this.getValueAtTime((F+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(X=(ie=new Array(Le.length)).length,O=0;O<X;O+=1)ie[O]=Le[O]+(Le[O]-nt[O])*(F-N)/.001;return ie}return Le+(Le-nt)*(F-N)/.001}}return this.getValueAtTime((L-((F-N)%L+F))/this.comp.globalData.frameRate,0)}function d(R,U){if(!this.k)return this.pv;if(R=.5*(R||.4),(U=Math.floor(U||5))<=1)return this.pv;var O,X,V=this.comp.renderedFrame/this.comp.globalData.frameRate,N=V-R,F=U>1?(V+R-N)/(U-1):1,L=0,I=0;for(O=this.pv.length?createTypedArray("float32",this.pv.length):0;L<U;){if(X=this.getValueAtTime(N+L*F),this.pv.length)for(I=0;I<this.pv.length;I+=1)O[I]+=X[I];else O+=X;L+=1}if(this.pv.length)for(I=0;I<this.pv.length;I+=1)O[I]/=U;else O/=U;return O}function m(R){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var U=this._transformCachingAtTime.v;if(U.cloneFromProps(this.pre.props),this.appliedTransformations<1){var V=this.a.getValueAtTime(R);U.translate(-V[0]*this.a.mult,-V[1]*this.a.mult,V[2]*this.a.mult)}if(this.appliedTransformations<2){var N=this.s.getValueAtTime(R);U.scale(N[0]*this.s.mult,N[1]*this.s.mult,N[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var ee=this.sk.getValueAtTime(R),F=this.sa.getValueAtTime(R);U.skewFromAxis(-ee*this.sk.mult,F*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var L=this.r.getValueAtTime(R);U.rotate(-L*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var I=this.rz.getValueAtTime(R),O=this.ry.getValueAtTime(R),X=this.rx.getValueAtTime(R),ie=this.or.getValueAtTime(R);U.rotateZ(-I*this.rz.mult).rotateY(O*this.ry.mult).rotateX(X*this.rx.mult).rotateZ(-ie[2]*this.or.mult).rotateY(ie[1]*this.or.mult).rotateX(ie[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var le=this.px.getValueAtTime(R),ue=this.py.getValueAtTime(R);if(this.data.p.z){var Ce=this.pz.getValueAtTime(R);U.translate(le*this.px.mult,ue*this.py.mult,-Ce*this.pz.mult)}else U.translate(le*this.px.mult,ue*this.py.mult,0)}else{var tt=this.p.getValueAtTime(R);U.translate(tt[0]*this.p.mult,tt[1]*this.p.mult,-tt[2]*this.p.mult)}return U}function g(){return this.v.clone(new Matrix)}var _=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(R,U,V){var N=_(R,U,V);return N.getValueAtTime=N.dynamicProperties.length?m.bind(N):g.bind(N),N.setGroupProperty=expressionHelpers.setGroupProperty,N};var E=PropertyFactory.getProp;PropertyFactory.getProp=function(R,U,V,N,ee){var F=E(R,U,V,N,ee);F.getValueAtTime=F.kf?expressionHelpers.getValueAtTime.bind(F):expressionHelpers.getStaticValueAtTime.bind(F),F.setGroupProperty=expressionHelpers.setGroupProperty,F.loopOut=l,F.loopIn=u,F.smooth=d,F.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(F),F.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(F),F.numKeys=1===U.a?U.k.length:0,F.propertyIndex=U.ix;var L=0;return 0!==V&&(L=createTypedArray("float32",1===U.a?U.k[0].s.length:U.k.length)),F._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:L},expressionHelpers.searchExpressions(R,U,F),F.k&&ee.addDynamicProperty(F),F};var w=ShapePropertyFactory.getConstructorFunction(),P=ShapePropertyFactory.getKeyframedConstructorFunction();function k(){}k.prototype={vertices:function(U,V){this.k&&this.getValue();var N=this.v;void 0!==V&&(N=this.getValueAtTime(V,0));var ee,F=N._length,L=N[U],I=N.v,O=createSizedArray(F);for(ee=0;ee<F;ee+=1)O[ee]="i"===U||"o"===U?[L[ee][0]-I[ee][0],L[ee][1]-I[ee][1]]:[L[ee][0],L[ee][1]];return O},points:function(U){return this.vertices("v",U)},inTangents:function(U){return this.vertices("i",U)},outTangents:function(U){return this.vertices("o",U)},isClosed:function(){return this.v.c},pointOnPath:function(U,V){var N=this.v;void 0!==V&&(N=this.getValueAtTime(V,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(N));for(var ie,ee=this._segmentsLength,F=ee.lengths,L=ee.totalLength*U,I=0,O=F.length,X=0;I<O;){if(X+F[I].addedLength>L){var ue=N.c&&I===O-1?0:I+1;ie=bez.getPointInSegment(N.v[I],N.v[ue],N.o[I],N.i[ue],(L-X)/F[I].addedLength,F[I]);break}X+=F[I].addedLength,I+=1}return ie||(ie=N.c?[N.v[0][0],N.v[0][1]]:[N.v[N._length-1][0],N.v[N._length-1][1]]),ie},vectorOnPath:function(U,V,N){1==U?U=this.v.c:0==U&&(U=.999);var ee=this.pointOnPath(U,V),F=this.pointOnPath(U+.001,V),L=F[0]-ee[0],I=F[1]-ee[1],O=Math.sqrt(Math.pow(L,2)+Math.pow(I,2));return 0===O?[0,0]:"tangent"===N?[L/O,I/O]:[-I/O,L/O]},tangentOnPath:function(U,V){return this.vectorOnPath(U,V,"tangent")},normalOnPath:function(U,V){return this.vectorOnPath(U,V,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([k],w),extendPrototype([k],P),P.prototype.getValueAtTime=function C(R){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),R*=this.elem.globalData.frameRate,(R-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<R?this._caching.lastIndex:0,this._cachingAtTime.lastTime=R,this.interpolateShape(R,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},P.prototype.initiateExpression=ExpressionManager.initiateExpression;var j=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(R,U,V,N,ee){var F=j(R,U,V,N,ee);return F.propertyIndex=U.ix,F.lock=!1,3===V?expressionHelpers.searchExpressions(R,U.pt,F):4===V&&expressionHelpers.searchExpressions(R,U.ks,F),F.k&&R.addDynamicProperty(F),F}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(u,d){var m=this.calculateExpression(d);if(u.t!==m){var g={};return this.copyData(g,u),g.t=m.toString(),g.__complete=!1,g}return u},TextProperty.prototype.searchProperty=function(){var u=this.searchKeyframes(),d=this.searchExpressions();return this.kf=u||d,this.kf},TextProperty.prototype.searchExpressions=function l(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function l(u,d){var g,_,m=createNS("feMerge");for(m.setAttribute("result",u),_=0;_<d.length;_+=1)(g=createNS("feMergeNode")).setAttribute("in",d[_]),m.appendChild(g),m.appendChild(g);return m}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(l,u,d,m,g){this.filterManager=u;var _=createNS("feColorMatrix");_.setAttribute("type","matrix"),_.setAttribute("color-interpolation-filters","linearRGB"),_.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=_,_.setAttribute("result",m+"_tint_1"),l.appendChild(_),(_=createNS("feColorMatrix")).setAttribute("type","matrix"),_.setAttribute("color-interpolation-filters","sRGB"),_.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),_.setAttribute("result",m+"_tint_2"),l.appendChild(_),this.matrixFilter=_;var E=this.createMergeNode(m,[g,m+"_tint_1",m+"_tint_2"]);l.appendChild(E)}function SVGFillFilter(l,u,d,m){this.filterManager=u;var g=createNS("feColorMatrix");g.setAttribute("type","matrix"),g.setAttribute("color-interpolation-filters","sRGB"),g.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),g.setAttribute("result",m),l.appendChild(g),this.matrixFilter=g}function SVGStrokeEffect(l,u,d){this.initialized=!1,this.filterManager=u,this.elem=d,this.paths=[]}function SVGTritoneFilter(l,u,d,m){this.filterManager=u;var g=createNS("feColorMatrix");g.setAttribute("type","matrix"),g.setAttribute("color-interpolation-filters","linearRGB"),g.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),l.appendChild(g);var _=createNS("feComponentTransfer");_.setAttribute("color-interpolation-filters","sRGB"),_.setAttribute("result",m),this.matrixFilter=_;var E=createNS("feFuncR");E.setAttribute("type","table"),_.appendChild(E),this.feFuncR=E;var C=createNS("feFuncG");C.setAttribute("type","table"),_.appendChild(C),this.feFuncG=C;var w=createNS("feFuncB");w.setAttribute("type","table"),_.appendChild(w),this.feFuncB=w,l.appendChild(_)}function SVGProLevelsFilter(l,u,d,m){this.filterManager=u;var g=this.filterManager.effectElements,_=createNS("feComponentTransfer");(g[10].p.k||0!==g[10].p.v||g[11].p.k||1!==g[11].p.v||g[12].p.k||1!==g[12].p.v||g[13].p.k||0!==g[13].p.v||g[14].p.k||1!==g[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",_)),(g[17].p.k||0!==g[17].p.v||g[18].p.k||1!==g[18].p.v||g[19].p.k||1!==g[19].p.v||g[20].p.k||0!==g[20].p.v||g[21].p.k||1!==g[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",_)),(g[24].p.k||0!==g[24].p.v||g[25].p.k||1!==g[25].p.v||g[26].p.k||1!==g[26].p.v||g[27].p.k||0!==g[27].p.v||g[28].p.k||1!==g[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",_)),(g[31].p.k||0!==g[31].p.v||g[32].p.k||1!==g[32].p.v||g[33].p.k||1!==g[33].p.v||g[34].p.k||0!==g[34].p.v||g[35].p.k||1!==g[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",_)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(_.setAttribute("color-interpolation-filters","sRGB"),l.appendChild(_)),(g[3].p.k||0!==g[3].p.v||g[4].p.k||1!==g[4].p.v||g[5].p.k||1!==g[5].p.v||g[6].p.k||0!==g[6].p.v||g[7].p.k||1!==g[7].p.v)&&((_=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),_.setAttribute("result",m),l.appendChild(_),this.feFuncRComposed=this.createFeFunc("feFuncR",_),this.feFuncGComposed=this.createFeFunc("feFuncG",_),this.feFuncBComposed=this.createFeFunc("feFuncB",_))}function SVGDropShadowEffect(l,u,d,m,g){var _=u.container.globalData.renderConfig.filterSize,E=u.data.fs||_;l.setAttribute("x",E.x||_.x),l.setAttribute("y",E.y||_.y),l.setAttribute("width",E.width||_.width),l.setAttribute("height",E.height||_.height),this.filterManager=u;var C=createNS("feGaussianBlur");C.setAttribute("in","SourceAlpha"),C.setAttribute("result",m+"_drop_shadow_1"),C.setAttribute("stdDeviation","0"),this.feGaussianBlur=C,l.appendChild(C);var w=createNS("feOffset");w.setAttribute("dx","25"),w.setAttribute("dy","0"),w.setAttribute("in",m+"_drop_shadow_1"),w.setAttribute("result",m+"_drop_shadow_2"),this.feOffset=w,l.appendChild(w);var P=createNS("feFlood");P.setAttribute("flood-color","#00ff00"),P.setAttribute("flood-opacity","1"),P.setAttribute("result",m+"_drop_shadow_3"),this.feFlood=P,l.appendChild(P);var k=createNS("feComposite");k.setAttribute("in",m+"_drop_shadow_3"),k.setAttribute("in2",m+"_drop_shadow_2"),k.setAttribute("operator","in"),k.setAttribute("result",m+"_drop_shadow_4"),l.appendChild(k);var j=this.createMergeNode(m,[m+"_drop_shadow_4",g]);l.appendChild(j)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(l){if(l||this.filterManager._mdf){var u=this.filterManager.effectElements[0].p.v,d=this.filterManager.effectElements[1].p.v;this.linearFilter.setAttribute("values",linearFilterValue+" "+this.filterManager.effectElements[2].p.v/100+" 0"),this.matrixFilter.setAttribute("values",d[0]-u[0]+" 0 0 0 "+u[0]+" "+(d[1]-u[1])+" 0 0 0 "+u[1]+" "+(d[2]-u[2])+" 0 0 0 "+u[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(l){if(l||this.filterManager._mdf){var u=this.filterManager.effectElements[2].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+u[0]+" 0 0 0 0 "+u[1]+" 0 0 0 0 "+u[2]+" 0 0 0 "+this.filterManager.effectElements[6].p.v+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var u,d,m,g,l=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(g=this.elem.maskManager.masksProperties.length,m=0):g=1+(m=this.filterManager.effectElements[0].p.v-1),(d=createNS("g")).setAttribute("fill","none"),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-dashoffset",1);m<g;m+=1)u=createNS("path"),d.appendChild(u),this.paths.push({p:u,m});if(3===this.filterManager.effectElements[10].p.v){var _=createNS("mask"),E=createElementID();_.setAttribute("id",E),_.setAttribute("mask-type","alpha"),_.appendChild(d),this.elem.globalData.defs.appendChild(_);var C=createNS("g");for(C.setAttribute("mask","url("+getLocationHref()+"#"+E+")");l[0];)C.appendChild(l[0]);this.elem.layerElement.appendChild(C),this.masker=_,d.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(l=this.elem.layerElement.children||this.elem.layerElement.childNodes;l.length;)this.elem.layerElement.removeChild(l[0]);this.elem.layerElement.appendChild(d),this.elem.layerElement.removeAttribute("mask"),d.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=d},SVGStrokeEffect.prototype.renderFrame=function(l){this.initialized||this.initialize();var u,m,g,d=this.paths.length;for(u=0;u<d;u+=1)if(-1!==this.paths[u].m&&(m=this.elem.maskManager.viewData[this.paths[u].m],g=this.paths[u].p,(l||this.filterManager._mdf||m.prop._mdf)&&g.setAttribute("d",m.lastPath),l||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||m.prop._mdf)){var _;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var E=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),C=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),w=g.getTotalLength();_="0 0 0 "+w*E+" ";var R,j=Math.floor(w*(C-E)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(R=0;R<j;R+=1)_+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";_+="0 "+10*w+" 0 0"}else _="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;g.setAttribute("stroke-dasharray",_)}if((l||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(l||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(l||this.filterManager.effectElements[3].p._mdf)){var U=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*U[0])+","+bmFloor(255*U[1])+","+bmFloor(255*U[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(l){if(l||this.filterManager._mdf){var u=this.filterManager.effectElements[0].p.v,d=this.filterManager.effectElements[1].p.v,m=this.filterManager.effectElements[2].p.v,_=m[1]+" "+d[1]+" "+u[1],E=m[2]+" "+d[2]+" "+u[2];this.feFuncR.setAttribute("tableValues",m[0]+" "+d[0]+" "+u[0]),this.feFuncG.setAttribute("tableValues",_),this.feFuncB.setAttribute("tableValues",E)}},SVGProLevelsFilter.prototype.createFeFunc=function(l,u){var d=createNS(l);return d.setAttribute("type","table"),u.appendChild(d),d},SVGProLevelsFilter.prototype.getTableValue=function(l,u,d,m,g){for(var C,j,_=0,w=Math.min(l,u),P=Math.max(l,u),k=Array.call(null,{length:256}),R=0,U=g-m,V=u-l;_<=256;)j=(C=_/256)<=w?V<0?g:m:C>=P?V<0?m:g:m+U*Math.pow((C-l)/V,1/d),k[R]=j,R+=1,_+=256/255;return k.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(l){if(l||this.filterManager._mdf){var u,d=this.filterManager.effectElements;this.feFuncRComposed&&(l||d[3].p._mdf||d[4].p._mdf||d[5].p._mdf||d[6].p._mdf||d[7].p._mdf)&&(u=this.getTableValue(d[3].p.v,d[4].p.v,d[5].p.v,d[6].p.v,d[7].p.v),this.feFuncRComposed.setAttribute("tableValues",u),this.feFuncGComposed.setAttribute("tableValues",u),this.feFuncBComposed.setAttribute("tableValues",u)),this.feFuncR&&(l||d[10].p._mdf||d[11].p._mdf||d[12].p._mdf||d[13].p._mdf||d[14].p._mdf)&&(u=this.getTableValue(d[10].p.v,d[11].p.v,d[12].p.v,d[13].p.v,d[14].p.v),this.feFuncR.setAttribute("tableValues",u)),this.feFuncG&&(l||d[17].p._mdf||d[18].p._mdf||d[19].p._mdf||d[20].p._mdf||d[21].p._mdf)&&(u=this.getTableValue(d[17].p.v,d[18].p.v,d[19].p.v,d[20].p.v,d[21].p.v),this.feFuncG.setAttribute("tableValues",u)),this.feFuncB&&(l||d[24].p._mdf||d[25].p._mdf||d[26].p._mdf||d[27].p._mdf||d[28].p._mdf)&&(u=this.getTableValue(d[24].p.v,d[25].p.v,d[26].p.v,d[27].p.v,d[28].p.v),this.feFuncB.setAttribute("tableValues",u)),this.feFuncA&&(l||d[31].p._mdf||d[32].p._mdf||d[33].p._mdf||d[34].p._mdf||d[35].p._mdf)&&(u=this.getTableValue(d[31].p.v,d[32].p.v,d[33].p.v,d[34].p.v,d[35].p.v),this.feFuncA.setAttribute("tableValues",u))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(l){if(l||this.filterManager._mdf){if((l||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),l||this.filterManager.effectElements[0].p._mdf){var u=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*u[0]),Math.round(255*u[1]),Math.round(255*u[2])))}if((l||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),l||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var d=this.filterManager.effectElements[3].p.v,m=(this.filterManager.effectElements[2].p.v-90)*degToRads,g=d*Math.cos(m),_=d*Math.sin(m);this.feOffset.setAttribute("dx",g),this.feOffset.setAttribute("dy",_)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(l,u,d){this.initialized=!1,this.filterManager=u,this.filterElem=l,this.elem=d,d.matteElement=createNS("g"),d.matteElement.appendChild(d.layerElement),d.matteElement.appendChild(d.transformedElement),d.baseElement=d.matteElement}function SVGGaussianBlurEffect(l,u,d,m){l.setAttribute("x","-100%"),l.setAttribute("y","-100%"),l.setAttribute("width","300%"),l.setAttribute("height","300%"),this.filterManager=u;var g=createNS("feGaussianBlur");g.setAttribute("result",m),l.appendChild(g),this.feGaussianBlur=g}function TransformEffect(){}function SVGTransformEffect(l,u){this.init(u)}function CVTransformEffect(l){this.init(l)}return SVGMatte3Effect.prototype.findSymbol=function(l){for(var u=0,d=_svgMatteSymbols.length;u<d;){if(_svgMatteSymbols[u]===l)return _svgMatteSymbols[u];u+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(l,u){var d=l.layerElement.parentNode;if(d){for(var m=d.children,g=0,_=m.length;g<_&&m[g]!==l.layerElement;)g+=1;var E;g<=_-2&&(E=m[g+1]);var C=createNS("use");C.setAttribute("href","#"+u),E?d.insertBefore(C,E):d.appendChild(C)}},SVGMatte3Effect.prototype.setElementAsMask=function(l,u){if(!this.findSymbol(u)){var d=createElementID(),m=createNS("mask");m.setAttribute("id",u.layerId),m.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(u);var g=l.globalData.defs;g.appendChild(m);var _=createNS("symbol");_.setAttribute("id",d),this.replaceInParent(u,d),_.appendChild(u.layerElement),g.appendChild(_);var E=createNS("use");E.setAttribute("href","#"+d),m.appendChild(E),u.data.hd=!1,u.show()}l.setMatte(u.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var l=this.filterManager.effectElements[0].p.v,u=this.elem.comp.elements,d=0,m=u.length;d<m;)u[d]&&u[d].data.ind===l&&this.setElementAsMask(this.elem,u[d]),d+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(l){if(l||this.filterManager._mdf){var d=.3*this.filterManager.effectElements[0].p.v,m=this.filterManager.effectElements[1].p.v;this.feGaussianBlur.setAttribute("stdDeviation",(3==m?0:d)+" "+(2==m?0:d)),this.feGaussianBlur.setAttribute("edgeMode",1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate")}},TransformEffect.prototype.init=function(l){this.effectsManager=l,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(l){if(this._opMdf=!1,this._mdf=!1,l||this.effectsManager._mdf){var u=this.effectsManager.effectElements,d=u[0].p.v,m=u[1].p.v,_=u[3].p.v,E=1===u[2].p.v?_:u[4].p.v,C=u[5].p.v,w=u[6].p.v,P=u[7].p.v;this.matrix.reset(),this.matrix.translate(-d[0],-d[1],d[2]),this.matrix.scale(.01*E,.01*_,1),this.matrix.rotate(-P*degToRads),this.matrix.skewFromAxis(-C*degToRads,(w+90)*degToRads),this.matrix.translate(m[0],m[1],0),this._mdf=!0,this.opacity!==u[8].p.v&&(this.opacity=u[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=u())}},l=>{l(l.s=968)}]);